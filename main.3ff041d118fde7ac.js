"use strict";(self.webpackChunktodo_list=self.webpackChunktodo_list||[]).push([[179],{2011:(ht,Te,O)=>{O.d(Te,{Dh:()=>ce,GT:()=>se,cc:()=>Se,hO:()=>Qe,on:()=>j,pX:()=>ee,xv:()=>ve});var I=O(4650),X=O(9260),k=O(7184);ht=O.hmd(ht);const ie=["ngOnDestroy"],ee=(xe,_e,Me,Ee={})=>new Proxy(xe,{get:(ye,Ce)=>Me.runOutsideAngular(()=>{var Le;if(xe[Ce])return!(null===(Le=Ee?.spy)||void 0===Le)&&Le.get&&Ee.spy.get(Ce,xe[Ce]),xe[Ce];if(ie.indexOf(Ce)>-1)return()=>{};const Re=_e.toPromise().then(V=>{const fe=V&&V[Ce];return"function"==typeof fe?fe.bind(V):fe&&fe.then?fe.then(Ne=>Me.run(()=>Ne)):Me.run(()=>fe)});return new Proxy(()=>{},{get:(V,fe)=>Re[fe],apply:(V,fe,Ne)=>Re.then(He=>{var at;const Xe=He&&He(...Ne);return!(null===(at=Ee?.spy)||void 0===at)&&at.apply&&Ee.spy.apply(Ce,Ne,Xe),Xe})})})}),se=(xe,_e)=>{_e.forEach(Me=>{Object.getOwnPropertyNames(Me.prototype||Me).forEach(Ee=>{Object.defineProperty(xe.prototype,Ee,Object.getOwnPropertyDescriptor(Me.prototype||Me,Ee))})})};class me{constructor(_e){return _e}}const ce=new I.OlP("angularfire2.app.options"),ve=new I.OlP("angularfire2.app.name");function j(xe,_e,Me){const ye="object"==typeof Me&&Me||{};ye.name=ye.name||"string"==typeof Me&&Me||"[DEFAULT]";const Le=X.Z.apps.filter(Re=>Re&&Re.name===ye.name)[0]||_e.runOutsideAngular(()=>X.Z.initializeApp(xe,ye));try{JSON.stringify(xe)!==JSON.stringify(Le.options)&&U("error",`${Le.name} Firebase App already initialized with different options${ht.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new me(Le)}const U=(xe,..._e)=>{(0,I.X6Q)()&&typeof console<"u"&&console[xe](..._e)},K={provide:me,useFactory:j,deps:[ce,I.R0b,[new I.FiY,ve]]};let Qe=(()=>{class xe{constructor(Me){X.Z.registerVersion("angularfire",k.q4.full,"core"),X.Z.registerVersion("angularfire",k.q4.full,"app-compat"),X.Z.registerVersion("angular",I.q4F.full,Me.toString())}static initializeApp(Me,Ee){return{ngModule:xe,providers:[{provide:ce,useValue:Me},{provide:ve,useValue:Ee}]}}}return xe.\u0275fac=function(Me){return new(Me||xe)(I.LFG(I.Lbi))},xe.\u0275mod=I.oAB({type:xe}),xe.\u0275inj=I.cJS({providers:[K]}),xe})();function Se(xe,_e,Me,Ee,ye){const[,Ce,Le]=globalThis.\u0275AngularfireInstanceCache.find(Re=>Re[0]===xe)||[];if(Ce)return function vt(xe,_e){try{return xe.toString()===_e.toString()}catch{return xe===_e}}(ye,Le)||(oe("error",`${_e} was already initialized on the ${Me} Firebase App with different settings.${Ge?" You may need to reload as Firebase is not HMR aware.":""}`),oe("warn",{is:ye,was:Le})),Ce;{const Re=Ee();return globalThis.\u0275AngularfireInstanceCache.push([xe,Re,ye]),Re}}const Ge=!!ht.hot,oe=(xe,..._e)=>{(0,I.X6Q)()&&typeof console<"u"&&console[xe](..._e)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},7184:(ht,Te,O)=>{O.d(Te,{q4:()=>nd,iC:()=>Hr,HU:()=>Rc,vb:()=>pi,JM:()=>Ph});var I=O(4650),X=O(259),k=O(5861),ie=O(9681),ee=O(2090),se=O(4859),me=O(1877),ce=O(8766);const ve="@firebase/installations",j="0.6.3",U=1e4,K=`w:${j}`,Qe="FIS_v2",Se="https://firebaseinstallations.googleapis.com/v1",vt=36e5,_e=new ee.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Me(w){return w instanceof ee.ZR&&w.code.includes("request-failed")}function Ee({projectId:w}){return`${Se}/projects/${w}/installations`}function ye(w){return{token:w.token,requestStatus:2,expiresIn:He(w.expiresIn),creationTime:Date.now()}}function Ce(w,b){return Le.apply(this,arguments)}function Le(){return(Le=(0,k.Z)(function*(w,b){const L=(yield b.json()).error;return _e.create("request-failed",{requestName:w,serverCode:L.code,serverMessage:L.message,serverStatus:L.status})})).apply(this,arguments)}function Re({apiKey:w}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":w})}function fe(w){return Ne.apply(this,arguments)}function Ne(){return(Ne=(0,k.Z)(function*(w){const b=yield w();return b.status>=500&&b.status<600?w():b})).apply(this,arguments)}function He(w){return Number(w.replace("s","000"))}function te(){return(te=(0,k.Z)(function*({appConfig:w,heartbeatServiceProvider:b},{fid:A}){const L=Ee(w),W=Re(w),Z=b.getImmediate({optional:!0});if(Z){const z=yield Z.getHeartbeatsHeader();z&&W.append("x-firebase-client",z)}const tt={method:"POST",headers:W,body:JSON.stringify({fid:A,authVersion:Qe,appId:w.appId,sdkVersion:K})},Ze=yield fe(()=>fetch(L,tt));if(Ze.ok){const z=yield Ze.json();return{fid:z.fid||A,registrationStatus:2,refreshToken:z.refreshToken,authToken:ye(z.authToken)}}throw yield Ce("Create Installation",Ze)})).apply(this,arguments)}function ue(w){return new Promise(b=>{setTimeout(b,w)})}const be=/^[cdef][\w-]{21}$/,Pe="";function Ve(){try{const w=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(w),w[0]=112+w[0]%16;const A=function qe(w){return function pe(w){return btoa(String.fromCharCode(...w)).replace(/\+/g,"-").replace(/\//g,"_")}(w).substr(0,22)}(w);return be.test(A)?A:Pe}catch{return Pe}}function je(w){return`${w.appName}!${w.appId}`}const en=new Map;function _t(w,b){const A=je(w);Mt(A,b),function fn(w,b){const A=function mn(){return!gn&&"BroadcastChannel"in self&&(gn=new BroadcastChannel("[Firebase] FID Change"),gn.onmessage=w=>{Mt(w.data.key,w.data.fid)}),gn}();A&&A.postMessage({key:w,fid:b}),function yn(){0===en.size&&gn&&(gn.close(),gn=null)}()}(A,b)}function Mt(w,b){const A=en.get(w);if(A)for(const L of A)L(b)}let gn=null;const Kr="firebase-installations-database",ts=1,ii="firebase-installations-store";let br=null;function Es(){return br||(br=(0,ce.X3)(Kr,ts,{upgrade:(w,b)=>{0===b&&w.createObjectStore(ii)}})),br}function an(w,b){return Fr.apply(this,arguments)}function Fr(){return(Fr=(0,k.Z)(function*(w,b){const A=je(w),W=(yield Es()).transaction(ii,"readwrite"),Z=W.objectStore(ii),Ie=yield Z.get(A);return yield Z.put(b,A),yield W.done,(!Ie||Ie.fid!==b.fid)&&_t(w,b.fid),b})).apply(this,arguments)}function ft(w){return Ni.apply(this,arguments)}function Ni(){return(Ni=(0,k.Z)(function*(w){const b=je(w),L=(yield Es()).transaction(ii,"readwrite");yield L.objectStore(ii).delete(b),yield L.done})).apply(this,arguments)}function si(w,b){return _n.apply(this,arguments)}function _n(){return(_n=(0,k.Z)(function*(w,b){const A=je(w),W=(yield Es()).transaction(ii,"readwrite"),Z=W.objectStore(ii),Ie=yield Z.get(A),tt=b(Ie);return void 0===tt?yield Z.delete(A):yield Z.put(tt,A),yield W.done,tt&&(!Ie||Ie.fid!==tt.fid)&&_t(w,tt.fid),tt})).apply(this,arguments)}function Tr(w){return ns.apply(this,arguments)}function ns(){return ns=(0,k.Z)(function*(w){let b;const A=yield si(w.appConfig,L=>{const W=function St(w){return fr(w||{fid:Ve(),registrationStatus:0})}(L),Z=function pt(w,b){if(0===b.registrationStatus){if(!navigator.onLine)return{installationEntry:b,registrationPromise:Promise.reject(_e.create("app-offline"))};const A={fid:b.fid,registrationStatus:1,registrationTime:Date.now()},L=function It(w,b){return Ri.apply(this,arguments)}(w,A);return{installationEntry:A,registrationPromise:L}}return 1===b.registrationStatus?{installationEntry:b,registrationPromise:Cn(w)}:{installationEntry:b}}(w,W);return b=Z.registrationPromise,Z.installationEntry});return A.fid===Pe?{installationEntry:yield b}:{installationEntry:A,registrationPromise:b}}),ns.apply(this,arguments)}function Ri(){return Ri=(0,k.Z)(function*(w,b){try{const A=yield function Xe(w,b){return te.apply(this,arguments)}(w,b);return an(w.appConfig,A)}catch(A){throw Me(A)&&409===A.customData.serverCode?yield ft(w.appConfig):yield an(w.appConfig,{fid:b.fid,registrationStatus:0}),A}}),Ri.apply(this,arguments)}function Cn(w){return vn.apply(this,arguments)}function vn(){return(vn=(0,k.Z)(function*(w){let b=yield oi(w.appConfig);for(;1===b.registrationStatus;)yield ue(100),b=yield oi(w.appConfig);if(0===b.registrationStatus){const{installationEntry:A,registrationPromise:L}=yield Tr(w);return L||A}return b})).apply(this,arguments)}function oi(w){return si(w,b=>{if(!b)throw _e.create("installation-not-found");return fr(b)})}function fr(w){return function Vo(w){return 1===w.registrationStatus&&w.registrationTime+U<Date.now()}(w)?{fid:w.fid,registrationStatus:0}:w}function ki(){return(ki=(0,k.Z)(function*({appConfig:w,heartbeatServiceProvider:b},A){const L=function qt(w,{fid:b}){return`${Ee(w)}/${b}/authTokens:generate`}(w,A),W=function V(w,{refreshToken:b}){const A=Re(w);return A.append("Authorization",function at(w){return`${Qe} ${w}`}(b)),A}(w,A),Z=b.getImmediate({optional:!0});if(Z){const z=yield Z.getHeartbeatsHeader();z&&W.append("x-firebase-client",z)}const tt={method:"POST",headers:W,body:JSON.stringify({installation:{sdkVersion:K,appId:w.appId}})},Ze=yield fe(()=>fetch(L,tt));if(Ze.ok)return ye(yield Ze.json());throw yield Ce("Generate Auth Token",Ze)})).apply(this,arguments)}function pr(w){return Ii.apply(this,arguments)}function Ii(){return Ii=(0,k.Z)(function*(w,b=!1){let A;const L=yield si(w.appConfig,Z=>{if(!kt(Z))throw _e.create("not-registered");const Ie=Z.authToken;if(!b&&function B(w){return 2===w.requestStatus&&!function F(w){const b=Date.now();return b<w.creationTime||w.creationTime+w.expiresIn<b+vt}(w)}(Ie))return Z;if(1===Ie.requestStatus)return A=function Be(w,b){return we.apply(this,arguments)}(w,b),Z;{if(!navigator.onLine)throw _e.create("app-offline");const tt=function G(w){const b={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},w),{authToken:b})}(Z);return A=function Et(w,b){return Tt.apply(this,arguments)}(w,tt),tt}});return A?yield A:L.authToken}),Ii.apply(this,arguments)}function we(){return(we=(0,k.Z)(function*(w,b){let A=yield nt(w.appConfig);for(;1===A.authToken.requestStatus;)yield ue(100),A=yield nt(w.appConfig);const L=A.authToken;return 0===L.requestStatus?pr(w,b):L})).apply(this,arguments)}function nt(w){return si(w,b=>{if(!kt(b))throw _e.create("not-registered");return function he(w){return 1===w.requestStatus&&w.requestTime+U<Date.now()}(b.authToken)?Object.assign(Object.assign({},b),{authToken:{requestStatus:0}}):b})}function Tt(){return Tt=(0,k.Z)(function*(w,b){try{const A=yield function tn(w,b){return ki.apply(this,arguments)}(w,b),L=Object.assign(Object.assign({},b),{authToken:A});return yield an(w.appConfig,L),A}catch(A){if(!Me(A)||401!==A.customData.serverCode&&404!==A.customData.serverCode){const L=Object.assign(Object.assign({},b),{authToken:{requestStatus:0}});yield an(w.appConfig,L)}else yield ft(w.appConfig);throw A}}),Tt.apply(this,arguments)}function kt(w){return void 0!==w&&2===w.registrationStatus}function st(){return(st=(0,k.Z)(function*(w){const b=w,{installationEntry:A,registrationPromise:L}=yield Tr(b);return L?L.catch(console.error):pr(b).catch(console.error),A.fid})).apply(this,arguments)}function $t(){return $t=(0,k.Z)(function*(w,b=!1){const A=w;return yield function In(w){return yt.apply(this,arguments)}(A),(yield pr(A,b)).token}),$t.apply(this,arguments)}function yt(){return(yt=(0,k.Z)(function*(w){const{registrationPromise:b}=yield Tr(w);b&&(yield b)})).apply(this,arguments)}function ja(w){return _e.create("missing-app-config-values",{valueName:w})}const tc="installations",En=w=>{const b=w.getProvider("app").getImmediate(),A=function Uo(w){if(!w||!w.options)throw ja("App Configuration");if(!w.name)throw ja("App Name");const b=["projectId","apiKey","appId"];for(const A of b)if(!w.options[A])throw ja(A);return{appName:w.name,projectId:w.options.projectId,apiKey:w.options.apiKey,appId:w.options.appId}}(b);return{app:b,appConfig:A,heartbeatServiceProvider:(0,ie._getProvider)(b,"heartbeat"),_delete:()=>Promise.resolve()}},Pl=w=>{const b=w.getProvider("app").getImmediate(),A=(0,ie._getProvider)(b,tc).getImmediate();return{getId:()=>function Q(w){return st.apply(this,arguments)}(A),getToken:W=>function Pt(w){return $t.apply(this,arguments)}(A,W)}};(function nc(){(0,ie._registerComponent)(new se.wA(tc,En,"PUBLIC")),(0,ie._registerComponent)(new se.wA("installations-internal",Pl,"PRIVATE"))})(),(0,ie.registerVersion)(ve,j),(0,ie.registerVersion)(ve,j,"esm2017");const jo="@firebase/remote-config",zn=new ee.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class ws{constructor(b,A,L,W){this.client=b,this.storage=A,this.storageCache=L,this.logger=W}isCachedDataFresh(b,A){if(!A)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const L=Date.now()-A,W=L<=b;return this.logger.debug(`Config fetch cache check. Cache age millis: ${L}. Cache max age millis (minimumFetchIntervalMillis setting): ${b}. Is cache hit: ${W}.`),W}fetch(b){var A=this;return(0,k.Z)(function*(){const[L,W]=yield Promise.all([A.storage.getLastSuccessfulFetchTimestampMillis(),A.storage.getLastSuccessfulFetchResponse()]);if(W&&A.isCachedDataFresh(b.cacheMaxAgeMillis,L))return W;b.eTag=W&&W.eTag;const Z=yield A.client.fetch(b),Ie=[A.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===Z.status&&Ie.push(A.storage.setLastSuccessfulFetchResponse(Z)),yield Promise.all(Ie),Z})()}}function ci(w=navigator){return w.languages&&w.languages[0]||w.language}class is{constructor(b,A,L,W,Z,Ie){this.firebaseInstallations=b,this.sdkVersion=A,this.namespace=L,this.projectId=W,this.apiKey=Z,this.appId=Ie}fetch(b){var A=this;return(0,k.Z)(function*(){const[L,W]=yield Promise.all([A.firebaseInstallations.getId(),A.firebaseInstallations.getToken()]),Ie=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${A.projectId}/namespaces/${A.namespace}:fetch?key=${A.apiKey}`,tt={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":b.eTag||"*"},Ze={sdk_version:A.sdkVersion,app_instance_id:L,app_instance_id_token:W,app_id:A.appId,language_code:ci()},z={method:"POST",headers:tt,body:JSON.stringify(Ze)},Rt=fetch(Ie,z),wt=new Promise((Gr,gt)=>{b.signal.addEventListener(()=>{const Eo=new Error("The operation was aborted.");Eo.name="AbortError",gt(Eo)})});let On;try{yield Promise.race([Rt,wt]),On=yield Rt}catch(Gr){let gt="fetch-client-network";throw"AbortError"===Gr?.name&&(gt="fetch-timeout"),zn.create(gt,{originalErrorMessage:Gr?.message})}let Dt=On.status;const ma=On.headers.get("ETag")||void 0;let rr,rt;if(200===On.status){let Gr;try{Gr=yield On.json()}catch(gt){throw zn.create("fetch-client-parse",{originalErrorMessage:gt?.message})}rr=Gr.entries,rt=Gr.state}if("INSTANCE_STATE_UNSPECIFIED"===rt?Dt=500:"NO_CHANGE"===rt?Dt=304:("NO_TEMPLATE"===rt||"EMPTY_CONFIG"===rt)&&(rr={}),304!==Dt&&200!==Dt)throw zn.create("fetch-status",{httpStatus:Dt});return{status:Dt,eTag:ma,config:rr}})()}}class Ei{constructor(b,A){this.client=b,this.storage=A}fetch(b){var A=this;return(0,k.Z)(function*(){const L=(yield A.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return A.attemptFetch(b,L)})()}attemptFetch(b,{throttleEndTimeMillis:A,backoffCount:L}){var W=this;return(0,k.Z)(function*(){yield function Oi(w,b){return new Promise((A,L)=>{const W=Math.max(b-Date.now(),0),Z=setTimeout(A,W);w.addEventListener(()=>{clearTimeout(Z),L(zn.create("fetch-throttle",{throttleEndTimeMillis:b}))})})}(b.signal,A);try{const Z=yield W.client.fetch(b);return yield W.storage.deleteThrottleMetadata(),Z}catch(Z){if(!function rn(w){if(!(w instanceof ee.ZR&&w.customData))return!1;const b=Number(w.customData.httpStatus);return 429===b||500===b||503===b||504===b}(Z))throw Z;const Ie={throttleEndTimeMillis:Date.now()+(0,ee.$s)(L),backoffCount:L+1};return yield W.storage.setThrottleMetadata(Ie),W.attemptFetch(b,Ie)}})()}}class eo{constructor(b,A,L,W,Z){this.app=b,this._client=A,this._storageCache=L,this._storage=W,this._logger=Z,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Ds(w,b){const A=w.target.error||void 0;return zn.create(b,{originalErrorMessage:A&&A?.message})}const Sr="app_namespace_store";class li{constructor(b,A,L,W=function Vr(){return new Promise((w,b)=>{try{const A=indexedDB.open("firebase_remote_config",1);A.onerror=L=>{b(Ds(L,"storage-open"))},A.onsuccess=L=>{w(L.target.result)},A.onupgradeneeded=L=>{0===L.oldVersion&&L.target.result.createObjectStore(Sr,{keyPath:"compositeKey"})}}catch(A){b(zn.create("storage-open",{originalErrorMessage:A?.message}))}})}()){this.appId=b,this.appName=A,this.namespace=L,this.openDbPromise=W}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(b){return this.set("last_fetch_status",b)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(b){return this.set("last_successful_fetch_timestamp_millis",b)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(b){return this.set("last_successful_fetch_response",b)}getActiveConfig(){return this.get("active_config")}setActiveConfig(b){return this.set("active_config",b)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(b){return this.set("active_config_etag",b)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(b){return this.set("throttle_metadata",b)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(b){var A=this;return(0,k.Z)(function*(){const L=yield A.openDbPromise;return new Promise((W,Z)=>{const tt=L.transaction([Sr],"readonly").objectStore(Sr),Ze=A.createCompositeKey(b);try{const z=tt.get(Ze);z.onerror=Rt=>{Z(Ds(Rt,"storage-get"))},z.onsuccess=Rt=>{const wt=Rt.target.result;W(wt?wt.value:void 0)}}catch(z){Z(zn.create("storage-get",{originalErrorMessage:z?.message}))}})})()}set(b,A){var L=this;return(0,k.Z)(function*(){const W=yield L.openDbPromise;return new Promise((Z,Ie)=>{const Ze=W.transaction([Sr],"readwrite").objectStore(Sr),z=L.createCompositeKey(b);try{const Rt=Ze.put({compositeKey:z,value:A});Rt.onerror=wt=>{Ie(Ds(wt,"storage-set"))},Rt.onsuccess=()=>{Z()}}catch(Rt){Ie(zn.create("storage-set",{originalErrorMessage:Rt?.message}))}})})()}delete(b){var A=this;return(0,k.Z)(function*(){const L=yield A.openDbPromise;return new Promise((W,Z)=>{const tt=L.transaction([Sr],"readwrite").objectStore(Sr),Ze=A.createCompositeKey(b);try{const z=tt.delete(Ze);z.onerror=Rt=>{Z(Ds(Rt,"storage-delete"))},z.onsuccess=()=>{W()}}catch(z){Z(zn.create("storage-delete",{originalErrorMessage:z?.message}))}})})()}createCompositeKey(b){return[this.appId,this.appName,this.namespace,b].join()}}class Ho{constructor(b){this.storage=b}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var b=this;return(0,k.Z)(function*(){const A=b.storage.getLastFetchStatus(),L=b.storage.getLastSuccessfulFetchTimestampMillis(),W=b.storage.getActiveConfig(),Z=yield A;Z&&(b.lastFetchStatus=Z);const Ie=yield L;Ie&&(b.lastSuccessfulFetchTimestampMillis=Ie);const tt=yield W;tt&&(b.activeConfig=tt)})()}setLastFetchStatus(b){return this.lastFetchStatus=b,this.storage.setLastFetchStatus(b)}setLastSuccessfulFetchTimestampMillis(b){return this.lastSuccessfulFetchTimestampMillis=b,this.storage.setLastSuccessfulFetchTimestampMillis(b)}setActiveConfig(b){return this.activeConfig=b,this.storage.setActiveConfig(b)}}function Go(){return Ih.apply(this,arguments)}function Ih(){return(Ih=(0,k.Z)(function*(){if(!(0,ee.hl)())return!1;try{return yield(0,ee.eu)()}catch{return!1}})).apply(this,arguments)}!function di(){(0,ie._registerComponent)(new se.wA("remote-config",function w(b,{instanceIdentifier:A}){const L=b.getProvider("app").getImmediate(),W=b.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw zn.create("registration-window");if(!(0,ee.hl)())throw zn.create("indexed-db-unavailable");const{projectId:Z,apiKey:Ie,appId:tt}=L.options;if(!Z)throw zn.create("registration-project-id");if(!Ie)throw zn.create("registration-api-key");if(!tt)throw zn.create("registration-app-id");const Ze=new li(tt,L.name,A=A||"firebase"),z=new Ho(Ze),Rt=new me.Yd(jo);Rt.logLevel=me.in.ERROR;const wt=new is(W,ie.SDK_VERSION,A,Z,Ie,tt),On=new Ei(wt,Ze),Dt=new ws(On,Ze,z,Rt),ma=new eo(L,Dt,z,Ze,Rt);return function wn(w){const b=(0,ee.m9)(w);b._initializePromise||(b._initializePromise=b._storageCache.loadFromStorage().then(()=>{b._isInitializationComplete=!0}))}(ma),ma},"PUBLIC").setMultipleInstances(!0)),(0,ie.registerVersion)(jo,"0.4.3"),(0,ie.registerVersion)(jo,"0.4.3","esm2017")}();const oc="/firebase-messaging-sw.js",Li="/firebase-cloud-messaging-push-scope",to="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",zo="https://fcmregistrations.googleapis.com/v1",ac="google.c.a.c_id",Eh="google.c.a.c_l",wh="google.c.a.ts",op="google.c.a.e";var bs=(()=>{return(w=bs||(bs={})).PUSH_RECEIVED="push-received",w.NOTIFICATION_CLICKED="notification-clicked",bs;var w})();function wi(w){const b=new Uint8Array(w);return btoa(String.fromCharCode(...b)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function ap(w){const A=(w+"=".repeat((4-w.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),L=atob(A),W=new Uint8Array(L.length);for(let Z=0;Z<L.length;++Z)W[Z]=L.charCodeAt(Z);return W}const uc="fcm_token_details_db",cc=5,Ar="fcm_token_object_Store";function Fl(){return Fl=(0,k.Z)(function*(w){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(Z=>Z.name).includes(uc))return null;let b=null;return(yield(0,ce.X3)(uc,cc,{upgrade:(L=(0,k.Z)(function*(W,Z,Ie,tt){var Ze;if(Z<2||!W.objectStoreNames.contains(Ar))return;const z=tt.objectStore(Ar),Rt=yield z.index("fcmSenderId").get(w);if(yield z.clear(),Rt)if(2===Z){const wt=Rt;if(!wt.auth||!wt.p256dh||!wt.endpoint)return;b={token:wt.fcmToken,createTime:null!==(Ze=wt.createTime)&&void 0!==Ze?Ze:Date.now(),subscriptionOptions:{auth:wt.auth,p256dh:wt.p256dh,endpoint:wt.endpoint,swScope:wt.swScope,vapidKey:"string"==typeof wt.vapidKey?wt.vapidKey:wi(wt.vapidKey)}}}else if(3===Z){const wt=Rt;b={token:wt.fcmToken,createTime:wt.createTime,subscriptionOptions:{auth:wi(wt.auth),p256dh:wi(wt.p256dh),endpoint:wt.endpoint,swScope:wt.swScope,vapidKey:wi(wt.vapidKey)}}}else if(4===Z){const wt=Rt;b={token:wt.fcmToken,createTime:wt.createTime,subscriptionOptions:{auth:wi(wt.auth),p256dh:wi(wt.p256dh),endpoint:wt.endpoint,swScope:wt.swScope,vapidKey:wi(wt.vapidKey)}}}}),function(Z,Ie,tt,Ze){return L.apply(this,arguments)})})).close(),yield(0,ce.Lj)(uc),yield(0,ce.Lj)("fcm_vapid_details_db"),yield(0,ce.Lj)("undefined"),function Dh(w){if(!w||!w.subscriptionOptions)return!1;const{subscriptionOptions:b}=w;return"number"==typeof w.createTime&&w.createTime>0&&"string"==typeof w.token&&w.token.length>0&&"string"==typeof b.auth&&b.auth.length>0&&"string"==typeof b.p256dh&&b.p256dh.length>0&&"string"==typeof b.endpoint&&b.endpoint.length>0&&"string"==typeof b.swScope&&b.swScope.length>0&&"string"==typeof b.vapidKey&&b.vapidKey.length>0}(b)?b:null;var L}),Fl.apply(this,arguments)}const $a="firebase-messaging-database",Ts=1,Cs="firebase-messaging-store";let Ha=null;function Wo(){return Ha||(Ha=(0,ce.X3)($a,Ts,{upgrade:(w,b)=>{0===b&&w.createObjectStore(Cs)}})),Ha}function dc(w){return ro.apply(this,arguments)}function ro(){return ro=(0,k.Z)(function*(w){const b=so(w),L=yield(yield Wo()).transaction(Cs).objectStore(Cs).get(b);if(L)return L;{const W=yield function lc(w){return Fl.apply(this,arguments)}(w.appConfig.senderId);if(W)return yield Ss(w,W),W}}),ro.apply(this,arguments)}function Ss(w,b){return qo.apply(this,arguments)}function qo(){return(qo=(0,k.Z)(function*(w,b){const A=so(w),W=(yield Wo()).transaction(Cs,"readwrite");return yield W.objectStore(Cs).put(b,A),yield W.done,b})).apply(this,arguments)}function io(){return(io=(0,k.Z)(function*(w){const b=so(w),L=(yield Wo()).transaction(Cs,"readwrite");yield L.objectStore(Cs).delete(b),yield L.done})).apply(this,arguments)}function so({appConfig:w}){return w.appId}const Sn=new ee.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Ga(w,b){return kn.apply(this,arguments)}function kn(){return(kn=(0,k.Z)(function*(w,b){const A=yield xs(w),L=Ko(b),W={method:"POST",headers:A,body:JSON.stringify(L)};let Z;try{Z=yield(yield fetch(ao(w.appConfig),W)).json()}catch(Ie){throw Sn.create("token-subscribe-failed",{errorInfo:Ie?.toString()})}if(Z.error)throw Sn.create("token-subscribe-failed",{errorInfo:Z.error.message});if(!Z.token)throw Sn.create("token-subscribe-no-token");return Z.token})).apply(this,arguments)}function As(){return(As=(0,k.Z)(function*(w,b){const A=yield xs(w),L=Ko(b.subscriptionOptions),W={method:"PATCH",headers:A,body:JSON.stringify(L)};let Z;try{Z=yield(yield fetch(`${ao(w.appConfig)}/${b.token}`,W)).json()}catch(Ie){throw Sn.create("token-update-failed",{errorInfo:Ie?.toString()})}if(Z.error)throw Sn.create("token-update-failed",{errorInfo:Z.error.message});if(!Z.token)throw Sn.create("token-update-no-token");return Z.token})).apply(this,arguments)}function Un(w,b){return hc.apply(this,arguments)}function hc(){return(hc=(0,k.Z)(function*(w,b){const L={method:"DELETE",headers:yield xs(w)};try{const Z=yield(yield fetch(`${ao(w.appConfig)}/${b}`,L)).json();if(Z.error)throw Sn.create("token-unsubscribe-failed",{errorInfo:Z.error.message})}catch(W){throw Sn.create("token-unsubscribe-failed",{errorInfo:W?.toString()})}})).apply(this,arguments)}function ao({projectId:w}){return`${zo}/projects/${w}/registrations`}function xs(w){return Qn.apply(this,arguments)}function Qn(){return(Qn=(0,k.Z)(function*({appConfig:w,installations:b}){const A=yield b.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":w.apiKey,"x-goog-firebase-installations-auth":`FIS ${A}`})})).apply(this,arguments)}function Ko({p256dh:w,auth:b,endpoint:A,vapidKey:L}){const W={web:{endpoint:A,auth:b,p256dh:w}};return L!==to&&(W.web.applicationPubKey=L),W}const uo=6048e5;function Fi(){return Fi=(0,k.Z)(function*(w){const b=yield function fc(w,b){return pc.apply(this,arguments)}(w.swRegistration,w.vapidKey),A={vapidKey:w.vapidKey,swScope:w.swRegistration.scope,endpoint:b.endpoint,auth:wi(b.getKey("auth")),p256dh:wi(b.getKey("p256dh"))},L=yield dc(w.firebaseDependencies);if(L){if(function Ka(w,b){return b.vapidKey===w.vapidKey&&b.endpoint===w.endpoint&&b.auth===w.auth&&b.p256dh===w.p256dh}(L.subscriptionOptions,A))return Date.now()>=L.createTime+uo?function Ct(w,b){return Wa.apply(this,arguments)}(w,{token:L.token,createTime:Date.now(),subscriptionOptions:A}):L.token;try{yield Un(w.firebaseDependencies,L.token)}catch(W){console.warn(W)}return Bl(w.firebaseDependencies,A)}return Bl(w.firebaseDependencies,A)}),Fi.apply(this,arguments)}function Yo(){return Yo=(0,k.Z)(function*(w){const b=yield dc(w.firebaseDependencies);b&&(yield Un(w.firebaseDependencies,b.token),yield function Vl(w){return io.apply(this,arguments)}(w.firebaseDependencies));const A=yield w.swRegistration.pushManager.getSubscription();return!A||A.unsubscribe()}),Yo.apply(this,arguments)}function Wa(){return Wa=(0,k.Z)(function*(w,b){try{const A=yield function oo(w,b){return As.apply(this,arguments)}(w.firebaseDependencies,b),L=Object.assign(Object.assign({},b),{token:A,createTime:Date.now()});return yield Ss(w.firebaseDependencies,L),A}catch(A){throw yield function Zo(w){return Yo.apply(this,arguments)}(w),A}}),Wa.apply(this,arguments)}function Bl(w,b){return qa.apply(this,arguments)}function qa(){return(qa=(0,k.Z)(function*(w,b){const L={token:yield Ga(w,b),createTime:Date.now(),subscriptionOptions:b};return yield Ss(w,L),L.token})).apply(this,arguments)}function pc(){return(pc=(0,k.Z)(function*(w,b){return(yield w.pushManager.getSubscription())||w.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:ap(b)})})).apply(this,arguments)}function bh(w){const b={from:w.from,collapseKey:w.collapse_key,messageId:w.fcmMessageId};return function gc(w,b){if(!b.notification)return;w.notification={};const A=b.notification.title;A&&(w.notification.title=A);const L=b.notification.body;L&&(w.notification.body=L);const W=b.notification.image;W&&(w.notification.image=W);const Z=b.notification.icon;Z&&(w.notification.icon=Z)}(b,w),function le(w,b){b.data&&(w.data=b.data)}(b,w),function Zt(w,b){var A,L,W,Z,Ie;if(!(b.fcmOptions||null!==(A=b.notification)&&void 0!==A&&A.click_action))return;w.fcmOptions={};const tt=null!==(W=null===(L=b.fcmOptions)||void 0===L?void 0:L.link)&&void 0!==W?W:null===(Z=b.notification)||void 0===Z?void 0:Z.click_action;tt&&(w.fcmOptions.link=tt);const Ze=null===(Ie=b.fcmOptions)||void 0===Ie?void 0:Ie.analytics_label;Ze&&(w.fcmOptions.analyticsLabel=Ze)}(b,w),b}function Ul(w,b){const A=[];for(let L=0;L<w.length;L++)A.push(w.charAt(L)),L<b.length&&A.push(b.charAt(L));return A.join("")}function Qo(w){return Sn.create("missing-app-config-values",{valueName:w})}Ul("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Ul("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Za{constructor(b,A,L){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const W=function er(w){if(!w||!w.options)throw Qo("App Configuration Object");if(!w.name)throw Qo("App Name");const b=["projectId","apiKey","appId","messagingSenderId"],{options:A}=w;for(const L of b)if(!A[L])throw Qo(L);return{appName:w.name,projectId:A.projectId,apiKey:A.apiKey,appId:A.appId,senderId:A.messagingSenderId}}(b);this.firebaseDependencies={app:b,appConfig:W,installations:A,analyticsProvider:L}}_delete(){return Promise.resolve()}}function jr(w){return Ya.apply(this,arguments)}function Ya(){return(Ya=(0,k.Z)(function*(w){try{w.swRegistration=yield navigator.serviceWorker.register(oc,{scope:Li}),w.swRegistration.update().catch(()=>{})}catch(b){throw Sn.create("failed-service-worker-registration",{browserErrorMessage:b?.message})}})).apply(this,arguments)}function jl(){return(jl=(0,k.Z)(function*(w,b){if(!b&&!w.swRegistration&&(yield jr(w)),b||!w.swRegistration){if(!(b instanceof ServiceWorkerRegistration))throw Sn.create("invalid-sw-registration");w.swRegistration=b}})).apply(this,arguments)}function Xa(){return(Xa=(0,k.Z)(function*(w,b){b?w.vapidKey=b:w.vapidKey||(w.vapidKey=to)})).apply(this,arguments)}function $r(){return $r=(0,k.Z)(function*(w,b){if(!navigator)throw Sn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Sn.create("permission-blocked");return yield function yc(w,b){return Xa.apply(this,arguments)}(w,b?.vapidKey),yield function Qa(w,b){return jl.apply(this,arguments)}(w,b?.serviceWorkerRegistration),function za(w){return Fi.apply(this,arguments)}(w)}),$r.apply(this,arguments)}function Ms(){return(Ms=(0,k.Z)(function*(w,b,A){const L=function Di(w){switch(w){case bs.NOTIFICATION_CLICKED:return"notification_open";case bs.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(b);(yield w.firebaseDependencies.analyticsProvider.get()).logEvent(L,{message_id:A[ac],message_name:A[Eh],message_time:A[wh],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Xo(){return Xo=(0,k.Z)(function*(w,b){const A=b.data;if(!A.isFirebaseMessaging)return;w.onMessageHandler&&A.messageType===bs.PUSH_RECEIVED&&("function"==typeof w.onMessageHandler?w.onMessageHandler(bh(A)):w.onMessageHandler.next(bh(A)));const L=A.data;(function mc(w){return"object"==typeof w&&!!w&&ac in w})(L)&&"1"===L[op]&&(yield function ss(w,b,A){return Ms.apply(this,arguments)}(w,A.messageType,L))}),Xo.apply(this,arguments)}const Hl="@firebase/messaging",vc=w=>{const b=new Za(w.getProvider("app").getImmediate(),w.getProvider("installations-internal").getImmediate(),w.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",A=>function $l(w,b){return Xo.apply(this,arguments)}(b,A)),b},Vi=w=>{const b=w.getProvider("messaging").getImmediate();return{getToken:L=>function Wn(w,b){return $r.apply(this,arguments)}(b,L)}};function Ic(){return zl.apply(this,arguments)}function zl(){return(zl=(0,k.Z)(function*(){try{yield(0,ee.eu)()}catch{return!1}return typeof window<"u"&&(0,ee.hl)()&&(0,ee.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Gl(){(0,ie._registerComponent)(new se.wA("messaging",vc,"PUBLIC")),(0,ie._registerComponent)(new se.wA("messaging-internal",Vi,"PRIVATE")),(0,ie.registerVersion)(Hl,"0.12.3"),(0,ie.registerVersion)(Hl,"0.12.3","esm2017")}();const Wl="analytics",xr="firebase_id",co="origin",ln=6e4,lo="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",wc="https://www.googletagmanager.com/gtag/js",tr=new me.Yd("@firebase/analytics");function Sh(w){return Promise.all(w.map(b=>b.catch(A=>A)))}function Ns(){return(Ns=(0,k.Z)(function*(w,b,A,L,W,Z){const Ie=L[W];try{if(Ie)yield b[Ie];else{const Ze=(yield Sh(A)).find(z=>z.measurementId===W);Ze&&(yield b[Ze.appId])}}catch(tt){tr.error(tt)}w("config",W,Z)})).apply(this,arguments)}function os(){return(os=(0,k.Z)(function*(w,b,A,L,W){try{let Z=[];if(W&&W.send_to){let Ie=W.send_to;Array.isArray(Ie)||(Ie=[Ie]);const tt=yield Sh(A);for(const Ze of Ie){const z=tt.find(wt=>wt.measurementId===Ze),Rt=z&&b[z.appId];if(!Rt){Z=[];break}Z.push(Rt)}}0===Z.length&&(Z=Object.values(b)),yield Promise.all(Z),w("event",L,W||{})}catch(Z){tr.error(Z)}})).apply(this,arguments)}const Qr=new ee.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),eu=30,Kl=new class Rs{constructor(b={},A=1e3){this.throttleMetadata=b,this.intervalMillis=A}getThrottleMetadata(b){return this.throttleMetadata[b]}setThrottleMetadata(b,A){this.throttleMetadata[b]=A}deleteThrottleMetadata(b){delete this.throttleMetadata[b]}};function Ah(w){return new Headers({Accept:"application/json","x-goog-api-key":w})}function na(){return(na=(0,k.Z)(function*(w){var b;const{appId:A,apiKey:L}=w,W={method:"GET",headers:Ah(L)},Z=lo.replace("{app-id}",A),Ie=yield fetch(Z,W);if(200!==Ie.status&&304!==Ie.status){let tt="";try{const Ze=yield Ie.json();null!==(b=Ze.error)&&void 0!==b&&b.message&&(tt=Ze.error.message)}catch{}throw Qr.create("config-fetch-failed",{httpStatus:Ie.status,responseMessage:tt})}return Ie.json()})).apply(this,arguments)}function ra(){return(ra=(0,k.Z)(function*(w,b=Kl,A){const{appId:L,apiKey:W,measurementId:Z}=w.options;if(!L)throw Qr.create("no-app-id");if(!W){if(Z)return{measurementId:Z,appId:L};throw Qr.create("no-api-key")}const Ie=b.getThrottleMetadata(L)||{backoffCount:0,throttleEndTimeMillis:Date.now()},tt=new ia;return setTimeout((0,k.Z)(function*(){tt.abort()}),void 0!==A?A:ln),Bi({appId:L,apiKey:W,measurementId:Z},Ie,tt,b)})).apply(this,arguments)}function Bi(w,b,A){return Ui.apply(this,arguments)}function Ui(){return Ui=(0,k.Z)(function*(w,{throttleEndTimeMillis:b,backoffCount:A},L,W=Kl){var Z;const{appId:Ie,measurementId:tt}=w;try{yield function fo(w,b){return new Promise((A,L)=>{const W=Math.max(b-Date.now(),0),Z=setTimeout(A,W);w.addEventListener(()=>{clearTimeout(Z),L(Qr.create("fetch-throttle",{throttleEndTimeMillis:b}))})})}(L,b)}catch(Ze){if(tt)return tr.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${tt} provided in the "measurementId" field in the local Firebase config. [${Ze?.message}]`),{appId:Ie,measurementId:tt};throw Ze}try{const Ze=yield function ks(w){return na.apply(this,arguments)}(w);return W.deleteThrottleMetadata(Ie),Ze}catch(Ze){const z=Ze;if(!function bc(w){if(!(w instanceof ee.ZR&&w.customData))return!1;const b=Number(w.customData.httpStatus);return 429===b||500===b||503===b||504===b}(z)){if(W.deleteThrottleMetadata(Ie),tt)return tr.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${tt} provided in the "measurementId" field in the local Firebase config. [${z?.message}]`),{appId:Ie,measurementId:tt};throw Ze}const Rt=503===Number(null===(Z=z?.customData)||void 0===Z?void 0:Z.httpStatus)?(0,ee.$s)(A,W.intervalMillis,eu):(0,ee.$s)(A,W.intervalMillis),wt={throttleEndTimeMillis:Date.now()+Rt,backoffCount:A+1};return W.setThrottleMetadata(Ie,wt),tr.debug(`Calling attemptFetch again in ${Rt} millis`),Bi(w,wt,L,W)}}),Ui.apply(this,arguments)}class ia{constructor(){this.listeners=[]}addEventListener(b){this.listeners.push(b)}abort(){this.listeners.forEach(b=>b())}}let tu,cs;function us(){return(us=(0,k.Z)(function*(w,b,A,L,W){if(W&&W.global)w("event",A,L);else{const Z=yield b;w("event",A,Object.assign(Object.assign({},L),{send_to:Z}))}})).apply(this,arguments)}function Tc(){return(Tc=(0,k.Z)(function*(){if(!(0,ee.hl)())return tr.warn(Qr.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,ee.eu)()}catch(w){return tr.warn(Qr.create("indexeddb-unavailable",{errorInfo:w?.toString()}).message),!1}return!0})).apply(this,arguments)}function la(){return la=(0,k.Z)(function*(w,b,A,L,W,Z,Ie){var tt;const Ze=function Dn(w){return ra.apply(this,arguments)}(w);Ze.then(Dt=>{A[Dt.measurementId]=Dt.appId,w.options.measurementId&&Dt.measurementId!==w.options.measurementId&&tr.warn(`The measurement ID in the local Firebase config (${w.options.measurementId}) does not match the measurement ID fetched from the server (${Dt.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(Dt=>tr.error(Dt)),b.push(Ze);const z=function ca(){return Tc.apply(this,arguments)}().then(Dt=>{if(Dt)return L.getId()}),[Rt,wt]=yield Promise.all([Ze,z]);(function ho(w){const b=window.document.getElementsByTagName("script");for(const A of Object.values(b))if(A.src&&A.src.includes(wc)&&A.src.includes(w))return A;return null})(Z)||function lp(w,b){const A=document.createElement("script");A.src=`${wc}?l=${w}&id=${b}`,A.async=!0,document.head.appendChild(A)}(Z,Rt.measurementId),cs&&(W("consent","default",cs),function ua(w){cs=w}(void 0)),W("js",new Date);const On=null!==(tt=Ie?.config)&&void 0!==tt?tt:{};return On[co]="firebase",On.update=!0,null!=wt&&(On[xr]=wt),W("config",Rt.measurementId,On),tu&&(W("set",tu),function iu(w){tu=w}(void 0)),Rt.measurementId}),la.apply(this,arguments)}class Zl{constructor(b){this.app=b}_delete(){return delete bi[this.app.options.appId],Promise.resolve()}}let bi={},su=[];const Os={};let ou,ji,Ti="dataLayer",Yl="gtag",hi=!1;function au(w,b,A){!function xh(){const w=[];if((0,ee.ru)()&&w.push("This is a browser extension environment."),(0,ee.zI)()||w.push("Cookies are not available."),w.length>0){const b=w.map((L,W)=>`(${W+1}) ${L}`).join(" "),A=Qr.create("invalid-analytics-context",{errorInfo:b});tr.warn(A.message)}}();const L=w.options.appId;if(!L)throw Qr.create("no-app-id");if(!w.options.apiKey){if(!w.options.measurementId)throw Qr.create("no-api-key");tr.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${w.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=bi[L])throw Qr.create("already-exists",{id:L});if(!hi){!function dp(w){let b=[];Array.isArray(window[w])?b=window[w]:window[w]=b}(Ti);const{wrappedGtag:Z,gtagCore:Ie}=function ta(w,b,A,L,W){let Z=function(...Ie){window[L].push(arguments)};return window[W]&&"function"==typeof window[W]&&(Z=window[W]),window[W]=function ea(w,b,A,L){function Z(){return Z=(0,k.Z)(function*(Ie,tt,Ze){try{"event"===Ie?yield function Dc(w,b,A,L,W){return os.apply(this,arguments)}(w,b,A,tt,Ze):"config"===Ie?yield function Jo(w,b,A,L,W,Z){return Ns.apply(this,arguments)}(w,b,A,L,tt,Ze):"consent"===Ie?w("consent","update",Ze):w("set",tt)}catch(z){tr.error(z)}}),Z.apply(this,arguments)}return function W(Ie,tt,Ze){return Z.apply(this,arguments)}}(Z,w,b,A),{gtagCore:Z,wrappedGtag:window[W]}}(bi,su,Os,Ti,Yl);ji=Z,ou=Ie,hi=!0}return bi[L]=function Ps(w,b,A,L,W,Z,Ie){return la.apply(this,arguments)}(w,su,Os,b,ou,Ti,A),new Zl(w)}function uu(){return $i.apply(this,arguments)}function $i(){return($i=(0,k.Z)(function*(){if((0,ee.ru)()||!(0,ee.zI)()||!(0,ee.hl)())return!1;try{return yield(0,ee.eu)()}catch{return!1}})).apply(this,arguments)}const nn="@firebase/analytics";!function mm(){(0,ie._registerComponent)(new se.wA(Wl,(b,{options:A})=>au(b.getProvider("app").getImmediate(),b.getProvider("installations-internal").getImmediate(),A),"PUBLIC")),(0,ie._registerComponent)(new se.wA("analytics-internal",function w(b){try{const A=b.getProvider(Wl).getImmediate();return{logEvent:(L,W,Z)=>function fp(w,b,A,L){w=(0,ee.m9)(w),function nu(w,b,A,L,W){return us.apply(this,arguments)}(ji,bi[w.app.options.appId],b,A,L).catch(W=>tr.error(W))}(A,L,W,Z)}}catch(A){throw Qr.create("interop-component-reg-failed",{reason:A})}},"PRIVATE")),(0,ie.registerVersion)(nn,"0.9.3"),(0,ie.registerVersion)(nn,"0.9.3","esm2017")}();var Sc=O(4408),td=O(7565);const du=new class Ac extends td.v{}(class Ls extends Sc.o{constructor(b,A){super(b,A),this.scheduler=b,this.work=A}schedule(b,A=0){return A>0?super.schedule(b,A):(this.delay=A,this.state=b,this.scheduler.flush(this),this)}execute(b,A){return A>0||this.closed?super.execute(b,A):this._execute(b,A)}requestAsyncId(b,A,L=0){return null!=L&&L>0||null==L&&this.delay>0?super.requestAsyncId(b,A,L):(b.flush(this),0)}});var Nh=O(4986),xc=O(576),dn=O(4482),fa=O(5403),hu=O(4671),fi=O(9468),ls=O(5363);const nd=new I.GfV("7.5.0"),yo="__angularfire_symbol__analyticsIsSupportedValue",_o="__angularfire_symbol__analyticsIsSupported",fu="__angularfire_symbol__remoteConfigIsSupportedValue",Rh="__angularfire_symbol__remoteConfigIsSupported",pu="__angularfire_symbol__messagingIsSupportedValue",kh="__angularfire_symbol__messagingIsSupported";function Ph(w,b,A){if(b){if(1===b.length)return b[0];const Z=b.filter(Ie=>Ie.app===A);if(1===Z.length)return Z[0]}return A.container.getProvider(w).getImmediate({optional:!0})}globalThis[_o]||(globalThis[_o]=uu().then(w=>globalThis[yo]=w).catch(()=>globalThis[yo]=!1)),globalThis[kh]||(globalThis[kh]=Ic().then(w=>globalThis[pu]=w).catch(()=>globalThis[pu]=!1)),globalThis[Rh]||(globalThis[Rh]=Go().then(w=>globalThis[fu]=w).catch(()=>globalThis[fu]=!1));const pi=(w,b)=>{const A=b?[b]:(0,X.C6)(),L=[];return A.forEach(W=>{W.container.getProvider(w).instances.forEach(Ie=>{L.includes(Ie)||L.push(Ie)})}),L};function ds(){}class vo{constructor(b,A=du){this.zone=b,this.delegate=A}now(){return this.delegate.now()}schedule(b,A,L){const W=this.zone;return this.delegate.schedule(function(Ie){W.runGuarded(()=>{b.apply(this,[Ie])})},A,L)}}class Ci{constructor(b){this.zone=b,this.task=null}call(b,A){const L=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",ds,{},ds,ds)),A.pipe(function pp(w,b,A){const L=(0,xc.m)(w)||b||A?{next:w,error:b,complete:A}:w;return L?(0,dn.e)((W,Z)=>{var Ie;null===(Ie=L.subscribe)||void 0===Ie||Ie.call(L);let tt=!0;W.subscribe((0,fa.x)(Z,Ze=>{var z;null===(z=L.next)||void 0===z||z.call(L,Ze),Z.next(Ze)},()=>{var Ze;tt=!1,null===(Ze=L.complete)||void 0===Ze||Ze.call(L),Z.complete()},Ze=>{var z;tt=!1,null===(z=L.error)||void 0===z||z.call(L,Ze),Z.error(Ze)},()=>{var Ze,z;tt&&(null===(Ze=L.unsubscribe)||void 0===Ze||Ze.call(L)),null===(z=L.finalize)||void 0===z||z.call(L)}))}):hu.y}({next:L,complete:L,error:L})).subscribe(b).add(L)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Rc=(()=>{class w{constructor(A){this.ngZone=A,this.outsideAngular=A.runOutsideAngular(()=>new vo(Zone.current)),this.insideAngular=A.run(()=>new vo(Zone.current,Nh.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return w.\u0275fac=function(A){return new(A||w)(I.LFG(I.R0b))},w.\u0275prov=I.Yz7({token:w,factory:w.\u0275fac,providedIn:"root"}),w})();function Mr(){const w=globalThis.\u0275AngularFireScheduler;if(!w)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return w}function Hr(w){return Mr(),function Io(w){return function(A){return(A=A.lift(new Ci(w.ngZone))).pipe((0,fi.R)(w.outsideAngular),(0,ls.Q)(w.insideAngular))}}(Mr())(w)}},2090:(ht,Te,O)=>{O.d(Te,{$s:()=>nt,BH:()=>ye,G6:()=>pe,L:()=>ce,LL:()=>en,Pz:()=>Ee,Sg:()=>Ce,UG:()=>V,US:()=>se,ZB:()=>U,ZR:()=>je,aH:()=>Me,b$:()=>He,eu:()=>Pe,hl:()=>be,jU:()=>fe,m9:()=>kt,ne:()=>ns,pd:()=>_n,r3:()=>ts,ru:()=>Ne,tV:()=>ve,uI:()=>Re,vZ:()=>an,w1:()=>Xe,xO:()=>Ni,xb:()=>br,z$:()=>Le,zI:()=>Ve,zd:()=>si});const ie=function(B){const F=[];let G=0;for(let he=0;he<B.length;he++){let Q=B.charCodeAt(he);Q<128?F[G++]=Q:Q<2048?(F[G++]=Q>>6|192,F[G++]=63&Q|128):55296==(64512&Q)&&he+1<B.length&&56320==(64512&B.charCodeAt(he+1))?(Q=65536+((1023&Q)<<10)+(1023&B.charCodeAt(++he)),F[G++]=Q>>18|240,F[G++]=Q>>12&63|128,F[G++]=Q>>6&63|128,F[G++]=63&Q|128):(F[G++]=Q>>12|224,F[G++]=Q>>6&63|128,F[G++]=63&Q|128)}return F},se={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(B,F){if(!Array.isArray(B))throw Error("encodeByteArray takes an array as a parameter");this.init_();const G=F?this.byteToCharMapWebSafe_:this.byteToCharMap_,he=[];for(let Q=0;Q<B.length;Q+=3){const st=B[Q],Pt=Q+1<B.length,$t=Pt?B[Q+1]:0,In=Q+2<B.length,yt=In?B[Q+2]:0;let Hn=(15&$t)<<2|yt>>6,Ys=63&yt;In||(Ys=64,Pt||(Hn=64)),he.push(G[st>>2],G[(3&st)<<4|$t>>4],G[Hn],G[Ys])}return he.join("")},encodeString(B,F){return this.HAS_NATIVE_SUPPORT&&!F?btoa(B):this.encodeByteArray(ie(B),F)},decodeString(B,F){return this.HAS_NATIVE_SUPPORT&&!F?atob(B):function(B){const F=[];let G=0,he=0;for(;G<B.length;){const Q=B[G++];if(Q<128)F[he++]=String.fromCharCode(Q);else if(Q>191&&Q<224){const st=B[G++];F[he++]=String.fromCharCode((31&Q)<<6|63&st)}else if(Q>239&&Q<365){const In=((7&Q)<<18|(63&B[G++])<<12|(63&B[G++])<<6|63&B[G++])-65536;F[he++]=String.fromCharCode(55296+(In>>10)),F[he++]=String.fromCharCode(56320+(1023&In))}else{const st=B[G++],Pt=B[G++];F[he++]=String.fromCharCode((15&Q)<<12|(63&st)<<6|63&Pt)}}return F.join("")}(this.decodeStringToByteArray(B,F))},decodeStringToByteArray(B,F){this.init_();const G=F?this.charToByteMapWebSafe_:this.charToByteMap_,he=[];for(let Q=0;Q<B.length;){const st=G[B.charAt(Q++)],$t=Q<B.length?G[B.charAt(Q)]:0;++Q;const yt=Q<B.length?G[B.charAt(Q)]:64;++Q;const Vt=Q<B.length?G[B.charAt(Q)]:64;if(++Q,null==st||null==$t||null==yt||null==Vt)throw Error();he.push(st<<2|$t>>4),64!==yt&&(he.push($t<<4&240|yt>>2),64!==Vt&&he.push(yt<<6&192|Vt))}return he},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let B=0;B<this.ENCODED_VALS.length;B++)this.byteToCharMap_[B]=this.ENCODED_VALS.charAt(B),this.charToByteMap_[this.byteToCharMap_[B]]=B,this.byteToCharMapWebSafe_[B]=this.ENCODED_VALS_WEBSAFE.charAt(B),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[B]]=B,B>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(B)]=B,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(B)]=B)}}},ce=function(B){return function(B){const F=ie(B);return se.encodeByteArray(F,!0)}(B).replace(/\./g,"")},ve=function(B){try{return se.decodeString(B,!0)}catch(F){console.error("base64Decode failed: ",F)}return null};function U(B,F){if(!(F instanceof Object))return F;switch(F.constructor){case Date:return new Date(F.getTime());case Object:void 0===B&&(B={});break;case Array:B=[];break;default:return F}for(const G in F)!F.hasOwnProperty(G)||!K(G)||(B[G]=U(B[G],F[G]));return B}function K(B){return"__proto__"!==B}const oe=()=>{try{return function Qe(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const B=process.env.__FIREBASE_DEFAULTS__;return B?JSON.parse(B):void 0})()||(()=>{if(typeof document>"u")return;let B;try{B=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const F=B&&ve(B[1]);return F&&JSON.parse(F)})()}catch(B){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${B}`)}},Me=()=>{var B;return null===(B=oe())||void 0===B?void 0:B.config},Ee=B=>{var F;return null===(F=oe())||void 0===F?void 0:F[`_${B}`]};class ye{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((F,G)=>{this.resolve=F,this.reject=G})}wrapCallback(F){return(G,he)=>{G?this.reject(G):this.resolve(he),"function"==typeof F&&(this.promise.catch(()=>{}),1===F.length?F(G):F(G,he))}}}function Ce(B,F){if(B.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const he=F||"demo-project",Q=B.iat||0,st=B.sub||B.user_id;if(!st)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Pt=Object.assign({iss:`https://securetoken.google.com/${he}`,aud:he,iat:Q,exp:Q+3600,auth_time:Q,sub:st,user_id:st,firebase:{sign_in_provider:"custom",identities:{}}},B);return[ce(JSON.stringify({alg:"none",type:"JWT"})),ce(JSON.stringify(Pt)),""].join(".")}function Le(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Re(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Le())}function V(){var B;const F=null===(B=oe())||void 0===B?void 0:B.forceEnvironment;if("node"===F)return!0;if("browser"===F)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function fe(){return"object"==typeof self&&self.self===self}function Ne(){const B="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof B&&void 0!==B.id}function He(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Xe(){const B=Le();return B.indexOf("MSIE ")>=0||B.indexOf("Trident/")>=0}function pe(){return!V()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function be(){try{return"object"==typeof indexedDB}catch{return!1}}function Pe(){return new Promise((B,F)=>{try{let G=!0;const he="validate-browser-context-for-indexeddb-analytics-module",Q=self.indexedDB.open(he);Q.onsuccess=()=>{Q.result.close(),G||self.indexedDB.deleteDatabase(he),B(!0)},Q.onupgradeneeded=()=>{G=!1},Q.onerror=()=>{var st;F((null===(st=Q.error)||void 0===st?void 0:st.message)||"")}}catch(G){F(G)}})}function Ve(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class je extends Error{constructor(F,G,he){super(G),this.code=F,this.customData=he,this.name="FirebaseError",Object.setPrototypeOf(this,je.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,en.prototype.create)}}class en{constructor(F,G,he){this.service=F,this.serviceName=G,this.errors=he}create(F,...G){const he=G[0]||{},Q=`${this.service}/${F}`,st=this.errors[F],Pt=st?function _t(B,F){return B.replace(Yt,(G,he)=>{const Q=F[he];return null!=Q?String(Q):`<${he}?>`})}(st,he):"Error";return new je(Q,`${this.serviceName}: ${Pt} (${Q}).`,he)}}const Yt=/\{\$([^}]+)}/g;function ts(B,F){return Object.prototype.hasOwnProperty.call(B,F)}function br(B){for(const F in B)if(Object.prototype.hasOwnProperty.call(B,F))return!1;return!0}function an(B,F){if(B===F)return!0;const G=Object.keys(B),he=Object.keys(F);for(const Q of G){if(!he.includes(Q))return!1;const st=B[Q],Pt=F[Q];if(Fr(st)&&Fr(Pt)){if(!an(st,Pt))return!1}else if(st!==Pt)return!1}for(const Q of he)if(!G.includes(Q))return!1;return!0}function Fr(B){return null!==B&&"object"==typeof B}function Ni(B){const F=[];for(const[G,he]of Object.entries(B))Array.isArray(he)?he.forEach(Q=>{F.push(encodeURIComponent(G)+"="+encodeURIComponent(Q))}):F.push(encodeURIComponent(G)+"="+encodeURIComponent(he));return F.length?"&"+F.join("&"):""}function si(B){const F={};return B.replace(/^\?/,"").split("&").forEach(he=>{if(he){const[Q,st]=he.split("=");F[decodeURIComponent(Q)]=decodeURIComponent(st)}}),F}function _n(B){const F=B.indexOf("?");if(!F)return"";const G=B.indexOf("#",F);return B.substring(F,G>0?G:void 0)}function ns(B,F){const G=new St(B,F);return G.subscribe.bind(G)}class St{constructor(F,G){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=G,this.task.then(()=>{F(this)}).catch(he=>{this.error(he)})}next(F){this.forEachObserver(G=>{G.next(F)})}error(F){this.forEachObserver(G=>{G.error(F)}),this.close(F)}complete(){this.forEachObserver(F=>{F.complete()}),this.close()}subscribe(F,G,he){let Q;if(void 0===F&&void 0===G&&void 0===he)throw new Error("Missing Observer.");Q=function It(B,F){if("object"!=typeof B||null===B)return!1;for(const G of F)if(G in B&&"function"==typeof B[G])return!0;return!1}(F,["next","error","complete"])?F:{next:F,error:G,complete:he},void 0===Q.next&&(Q.next=Ri),void 0===Q.error&&(Q.error=Ri),void 0===Q.complete&&(Q.complete=Ri);const st=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?Q.error(this.finalError):Q.complete()}catch{}}),this.observers.push(Q),st}unsubscribeOne(F){void 0===this.observers||void 0===this.observers[F]||(delete this.observers[F],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(F){if(!this.finalized)for(let G=0;G<this.observers.length;G++)this.sendOne(G,F)}sendOne(F,G){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[F])try{G(this.observers[F])}catch(he){typeof console<"u"&&console.error&&console.error(he)}})}close(F){this.finalized||(this.finalized=!0,void 0!==F&&(this.finalError=F),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Ri(){}const pr=1e3,Ii=2,Be=144e5,we=.5;function nt(B,F=pr,G=Ii){const he=F*Math.pow(G,B),Q=Math.round(we*he*(Math.random()-.5)*2);return Math.min(Be,he+Q)}function kt(B){return B&&B._delegate?B._delegate:B}},9525:(ht,Te,O)=>{var I=O(4650);let X=null;function k(){return X}class ee{}const se=new I.OlP("DocumentToken"),Zr=/\s+/,Ke=[];let Nt=(()=>{class n{constructor(t,i,a,c){this._iterableDiffers=t,this._keyValueDiffers=i,this._ngEl=a,this._renderer=c,this.initialClasses=Ke,this.stateMap=new Map}set klass(t){this.initialClasses=null!=t?t.trim().split(Zr):Ke}set ngClass(t){this.rawClass="string"==typeof t?t.trim().split(Zr):t}ngDoCheck(){for(const i of this.initialClasses)this._updateState(i,!0);const t=this.rawClass;if(Array.isArray(t)||t instanceof Set)for(const i of t)this._updateState(i,!0);else if(null!=t)for(const i of Object.keys(t))this._updateState(i,Boolean(t[i]));this._applyStateDiff()}_updateState(t,i){const a=this.stateMap.get(t);void 0!==a?(a.enabled!==i&&(a.changed=!0,a.enabled=i),a.touched=!0):this.stateMap.set(t,{enabled:i,changed:!0,touched:!0})}_applyStateDiff(){for(const t of this.stateMap){const i=t[0],a=t[1];a.changed?(this._toggleClass(i,a.enabled),a.changed=!1):a.touched||(a.enabled&&this._toggleClass(i,!1),this.stateMap.delete(i)),a.touched=!1}}_toggleClass(t,i){(t=t.trim()).length>0&&t.split(Zr).forEach(a=>{i?this._renderer.addClass(this._ngEl.nativeElement,a):this._renderer.removeClass(this._ngEl.nativeElement,a)})}}return n.\u0275fac=function(t){return new(t||n)(I.Y36(I.ZZ4),I.Y36(I.aQg),I.Y36(I.SBq),I.Y36(I.Qsj))},n.\u0275dir=I.lG2({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0}),n})();class Bn{constructor(e,t,i,a){this.$implicit=e,this.ngForOf=t,this.index=i,this.count=a}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let ai=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,i,a){this._viewContainer=t,this._template=i,this._differs=a,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const i=this._viewContainer;t.forEachOperation((a,c,p)=>{if(null==a.previousIndex)i.createEmbeddedView(this._template,new Bn(a.item,this._ngForOf,-1,-1),null===p?void 0:p);else if(null==p)i.remove(null===c?void 0:c);else if(null!==c){const y=i.get(c);i.move(y,p),wn(y,a)}});for(let a=0,c=i.length;a<c;a++){const y=i.get(a).context;y.index=a,y.count=c,y.ngForOf=this._ngForOf}t.forEachIdentityChange(a=>{wn(i.get(a.currentIndex),a)})}static ngTemplateContextGuard(t,i){return!0}}return n.\u0275fac=function(t){return new(t||n)(I.Y36(I.s_b),I.Y36(I.Rgc),I.Y36(I.ZZ4))},n.\u0275dir=I.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),n})();function wn(n,e){n.context.$implicit=e.item}let uc=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=I.oAB({type:n}),n.\u0275inj=I.cJS({}),n})();const Ar="server";function $a(n){return n===Ar}class os extends ee{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class ea extends os{static makeCurrent(){!function ie(n){X||(X=n)}(new ea)}onAndCancel(e,t,i){return e.addEventListener(t,i,!1),()=>{e.removeEventListener(t,i,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function ho(){return ta=ta||document.querySelector("base"),ta?ta.getAttribute("href"):null}();return null==t?null:function Qr(n){as=as||document.createElement("a"),as.setAttribute("href",n);const e=as.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){ta=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function mr(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const i=t.indexOf("="),[a,c]=-1==i?[t,""]:[t.slice(0,i),t.slice(i+1)];if(a.trim()===e)return decodeURIComponent(c)}return null}(document.cookie,e)}}let as,ta=null;const eu=new I.OlP("TRANSITION_ID"),Rs=[{provide:I.ip1,useFactory:function ql(n,e,t){return()=>{t.get(I.CZH).donePromise.then(()=>{const i=k(),a=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let c=0;c<a.length;c++)i.remove(a[c])})}},deps:[eu,se,I.zs3],multi:!0}];let Ah=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=I.Yz7({token:n,factory:n.\u0275fac}),n})();const ks=new I.OlP("EventManagerPlugins");let na=(()=>{class n{constructor(t,i){this._zone=i,this._eventNameToPlugin=new Map,t.forEach(a=>a.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,i,a){return this._findPluginFor(i).addEventListener(t,i,a)}addGlobalEventListener(t,i,a){return this._findPluginFor(i).addGlobalEventListener(t,i,a)}getZone(){return this._zone}_findPluginFor(t){const i=this._eventNameToPlugin.get(t);if(i)return i;const a=this._plugins;for(let c=0;c<a.length;c++){const p=a[c];if(p.supports(t))return this._eventNameToPlugin.set(t,p),p}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(I.LFG(ks),I.LFG(I.R0b))},n.\u0275prov=I.Yz7({token:n,factory:n.\u0275fac}),n})();class Dn{constructor(e){this._doc=e}addGlobalEventListener(e,t,i){const a=k().getGlobalEventTarget(this._doc,e);if(!a)throw new Error(`Unsupported event target ${a} for event ${t}`);return this.addEventListener(a,t,i)}}let ra=(()=>{class n{constructor(){this.usageCount=new Map}addStyles(t){for(const i of t)1===this.changeUsageCount(i,1)&&this.onStyleAdded(i)}removeStyles(t){for(const i of t)0===this.changeUsageCount(i,-1)&&this.onStyleRemoved(i)}onStyleRemoved(t){}onStyleAdded(t){}getAllStyles(){return this.usageCount.keys()}changeUsageCount(t,i){const a=this.usageCount;let c=a.get(t)??0;return c+=i,c>0?a.set(t,c):a.delete(t),c}ngOnDestroy(){for(const t of this.getAllStyles())this.onStyleRemoved(t);this.usageCount.clear()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=I.Yz7({token:n,factory:n.\u0275fac}),n})(),Bi=(()=>{class n extends ra{constructor(t){super(),this.doc=t,this.styleRef=new Map,this.hostNodes=new Set,this.resetHostNodes()}onStyleAdded(t){for(const i of this.hostNodes)this.addStyleToHost(i,t)}onStyleRemoved(t){const i=this.styleRef;i.get(t)?.forEach(c=>c.remove()),i.delete(t)}ngOnDestroy(){super.ngOnDestroy(),this.styleRef.clear(),this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(const i of this.getAllStyles())this.addStyleToHost(t,i)}removeHost(t){this.hostNodes.delete(t)}addStyleToHost(t,i){const a=this.doc.createElement("style");a.textContent=i,t.appendChild(a);const c=this.styleRef.get(i);c?c.push(a):this.styleRef.set(i,[a])}resetHostNodes(){const t=this.hostNodes;t.clear(),t.add(this.doc.head)}}return n.\u0275fac=function(t){return new(t||n)(I.LFG(se))},n.\u0275prov=I.Yz7({token:n,factory:n.\u0275fac}),n})();const Ui={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},fo=/%COMP%/g,po=new I.OlP("RemoveStylesOnCompDestory",{providedIn:"root",factory:()=>!1});function oa(n,e){return e.flat(100).map(t=>t.replace(fo,n))}function ru(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let vr=(()=>{class n{constructor(t,i,a,c){this.eventManager=t,this.sharedStylesHost=i,this.appId=a,this.removeStylesOnCompDestory=c,this.rendererByCompId=new Map,this.defaultRenderer=new aa(t)}createRenderer(t,i){if(!t||!i)return this.defaultRenderer;const a=this.getOrCreateRenderer(t,i);return a instanceof Tc?a.applyToHost(t):a instanceof ca&&a.applyStyles(),a}getOrCreateRenderer(t,i){const a=this.rendererByCompId;let c=a.get(i.id);if(!c){const p=this.eventManager,y=this.sharedStylesHost,D=this.removeStylesOnCompDestory;switch(i.encapsulation){case I.ifc.Emulated:c=new Tc(p,y,i,this.appId,D);break;case I.ifc.ShadowDom:return new iu(p,y,t,i);default:c=new ca(p,y,i,D)}c.onDestroy=()=>a.delete(i.id),a.set(i.id,c)}return c}ngOnDestroy(){this.rendererByCompId.clear()}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(I.LFG(na),I.LFG(Bi),I.LFG(I.AFp),I.LFG(po))},n.\u0275prov=I.Yz7({token:n,factory:n.\u0275fac}),n})();class aa{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(Ui[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){(ua(e)?e.content:e).appendChild(t)}insertBefore(e,t,i){e&&(ua(e)?e.content:e).insertBefore(t,i)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let i="string"==typeof e?document.querySelector(e):e;if(!i)throw new Error(`The selector "${e}" did not match any elements`);return t||(i.textContent=""),i}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,i,a){if(a){t=a+":"+t;const c=Ui[a];c?e.setAttributeNS(c,t,i):e.setAttribute(t,i)}else e.setAttribute(t,i)}removeAttribute(e,t,i){if(i){const a=Ui[i];a?e.removeAttributeNS(a,t):e.removeAttribute(`${i}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,i,a){a&(I.JOm.DashCase|I.JOm.Important)?e.style.setProperty(t,i,a&I.JOm.Important?"important":""):e.style[t]=i}removeStyle(e,t,i){i&I.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,i){e[t]=i}setValue(e,t){e.nodeValue=t}listen(e,t,i){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,ru(i)):this.eventManager.addEventListener(e,t,ru(i))}}function ua(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class iu extends aa{constructor(e,t,i,a){super(e),this.sharedStylesHost=t,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const c=oa(a.id,a.styles);for(const p of c){const y=document.createElement("style");y.textContent=p,this.shadowRoot.appendChild(y)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,i){return super.insertBefore(this.nodeOrShadowRoot(e),t,i)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class ca extends aa{constructor(e,t,i,a,c=i.id){super(e),this.sharedStylesHost=t,this.removeStylesOnCompDestory=a,this.rendererUsageCount=0,this.styles=oa(c,i.styles)}applyStyles(){this.sharedStylesHost.addStyles(this.styles),this.rendererUsageCount++}destroy(){this.removeStylesOnCompDestory&&(this.sharedStylesHost.removeStyles(this.styles),this.rendererUsageCount--,0===this.rendererUsageCount&&this.onDestroy?.())}}class Tc extends ca{constructor(e,t,i,a,c){const p=a+"-"+i.id;super(e,t,i,c,p),this.contentAttr=function go(n){return"_ngcontent-%COMP%".replace(fo,n)}(p),this.hostAttr=function sa(n){return"_nghost-%COMP%".replace(fo,n)}(p)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){const i=super.createElement(e,t);return super.setAttribute(i,this.contentAttr,""),i}}let Ps=(()=>{class n extends Dn{constructor(t){super(t)}supports(t){return!0}addEventListener(t,i,a){return t.addEventListener(i,a,!1),()=>this.removeEventListener(t,i,a)}removeEventListener(t,i,a){return t.removeEventListener(i,a)}}return n.\u0275fac=function(t){return new(t||n)(I.LFG(se))},n.\u0275prov=I.Yz7({token:n,factory:n.\u0275fac}),n})();const la=["alt","control","meta","shift"],Zl={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},bi={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let su=(()=>{class n extends Dn{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,i,a){const c=n.parseEventName(i),p=n.eventCallback(c.fullKey,a,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>k().onAndCancel(t,c.domEventName,p))}static parseEventName(t){const i=t.toLowerCase().split("."),a=i.shift();if(0===i.length||"keydown"!==a&&"keyup"!==a)return null;const c=n._normalizeKey(i.pop());let p="",y=i.indexOf("code");if(y>-1&&(i.splice(y,1),p="code."),la.forEach(T=>{const x=i.indexOf(T);x>-1&&(i.splice(x,1),p+=T+".")}),p+=c,0!=i.length||0===c.length)return null;const D={};return D.domEventName=a,D.fullKey=p,D}static matchEventFullKeyCode(t,i){let a=Zl[t.key]||t.key,c="";return i.indexOf("code.")>-1&&(a=t.code,c="code."),!(null==a||!a)&&(a=a.toLowerCase()," "===a?a="space":"."===a&&(a="dot"),la.forEach(p=>{p!==a&&(0,bi[p])(t)&&(c+=p+".")}),c+=a,c===i)}static eventCallback(t,i,a){return c=>{n.matchEventFullKeyCode(c,t)&&a.runGuarded(()=>i(c))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(I.LFG(se))},n.\u0275prov=I.Yz7({token:n,factory:n.\u0275fac}),n})();const Ql=(0,I.eFA)(I._c5,"browser",[{provide:I.Lbi,useValue:"browser"},{provide:I.g9A,useValue:function hi(){ea.makeCurrent()},multi:!0},{provide:se,useFactory:function xh(){return(0,I.RDi)(document),document},deps:[]}]),Cc=new I.OlP(""),uu=[{provide:I.rWj,useClass:class Kl{addToWindow(e){I.dqk.getAngularTestability=(i,a=!0)=>{const c=e.findTestabilityInTree(i,a);if(null==c)throw new Error("Could not find testability for element.");return c},I.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),I.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),I.dqk.frameworkStabilizers||(I.dqk.frameworkStabilizers=[]),I.dqk.frameworkStabilizers.push(i=>{const a=I.dqk.getAllAngularTestabilities();let c=a.length,p=!1;const y=function(D){p=p||D,c--,0==c&&i(p)};a.forEach(function(D){D.whenStable(y)})})}findTestabilityInTree(e,t,i){return null==t?null:e.getTestability(t)??(i?k().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:I.lri,useClass:I.dDg,deps:[I.R0b,I.eoX,I.rWj]},{provide:I.dDg,useClass:I.dDg,deps:[I.R0b,I.eoX,I.rWj]}],$i=[{provide:I.zSh,useValue:"root"},{provide:I.qLn,useFactory:function hp(){return new I.qLn},deps:[]},{provide:ks,useClass:Ps,multi:!0,deps:[se,I.R0b,I.Lbi]},{provide:ks,useClass:su,multi:!0,deps:[se]},{provide:vr,useClass:vr,deps:[na,Bi,I.AFp,po]},{provide:I.FYo,useExisting:vr},{provide:ra,useExisting:Bi},{provide:Bi,useClass:Bi,deps:[se]},{provide:na,useClass:na,deps:[ks,I.R0b]},{provide:class Vl{},useClass:Ah,deps:[]},[]];let da=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:I.AFp,useValue:t.appId},{provide:eu,useExisting:I.AFp},Rs]}}}return n.\u0275fac=function(t){return new(t||n)(I.LFG(Cc,12))},n.\u0275mod=I.oAB({type:n}),n.\u0275inj=I.cJS({providers:[...$i,...uu],imports:[uc,I.hGG]}),n})();typeof window<"u"&&window;var pi=O(2011),ds=O(4986),vo=O(8306),Ci=O(8996),Rc=O(7669);function Mr(...n){const e=(0,Rc.yG)(n);return(0,Ci.D)(n,e)}var Pn=O(7184),gi=O(6131);function pa(...n){return function rd(){return(0,gi.J)(1)}()((0,Ci.D)(n,(0,Rc.yG)(n)))}var Hr=O(4482);function Io(...n){const e=(0,Rc.yG)(n);return(0,Hr.e)((t,i)=>{(e?pa(n,t,e):pa(n,t)).subscribe(i)})}var Hi=O(5403);function ga(){return(0,Hr.e)((n,e)=>{let t,i=!1;n.subscribe((0,Hi.x)(e,a=>{const c=t;t=a,i&&e.next([c,a]),i=!0}))})}var w=O(4004);function A(n,e){return(0,Hr.e)(function b(n,e,t,i,a){return(c,p)=>{let y=t,D=e,T=0;c.subscribe((0,Hi.x)(p,x=>{const R=T++;D=y?n(D,x,R):(y=!0,x),i&&p.next(D)},a&&(()=>{y&&p.next(D),p.complete()})))}}(n,e,arguments.length>=2,!0))}var L=O(4671);function Z(n,e){return n===e}function Ie(n,e){return(0,Hr.e)((t,i)=>{let a=0;t.subscribe((0,Hi.x)(i,c=>n.call(e,c,a++)&&i.next(c)))})}O(407);var rt,Ze=O(3942),z=O(5861),Rt=O(9681),wt=O(4859),On=O(1877),Dt=O(2090),ma=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},rr={},Gr=Gr||{},gt=ma||self;function Eo(){}function kc(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function id(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var Oh="closure_uid_"+(1e9*Math.random()>>>0),mu=0;function ov(n,e,t){return n.call.apply(n.bind,arguments)}function av(n,e,t){if(!n)throw Error();if(2<arguments.length){var i=Array.prototype.slice.call(arguments,2);return function(){var a=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(a,i),n.apply(e,a)}}return function(){return n.apply(e,arguments)}}function ir(n,e,t){return(ir=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?ov:av).apply(null,arguments)}function Lh(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var i=t.slice();return i.push.apply(i,arguments),n.apply(this,i)}}function Nr(n,e){function t(){}t.prototype=e.prototype,n.X=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Wb=function(i,a,c){for(var p=Array(arguments.length-2),y=2;y<arguments.length;y++)p[y-2]=arguments[y];return e.prototype[a].apply(i,p)}}function ya(){this.s=this.s,this.o=this.o}ya.prototype.s=!1,ya.prototype.na=function(){!this.s&&(this.s=!0,this.M(),0)&&function gp(n){Object.prototype.hasOwnProperty.call(n,Oh)&&n[Oh]||(n[Oh]=++mu)}(this)},ya.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const ym=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function Pc(n){const e=n.length;if(0<e){const t=Array(e);for(let i=0;i<e;i++)t[i]=n[i];return t}return[]}function Fh(n,e){for(let t=1;t<arguments.length;t++){const i=arguments[t];if(kc(i)){const a=n.length||0,c=i.length||0;n.length=a+c;for(let p=0;p<c;p++)n[a+p]=i[p]}else n.push(i)}}function sr(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}sr.prototype.h=function(){this.defaultPrevented=!0};var mp=function(){if(!gt.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{gt.addEventListener("test",Eo,e),gt.removeEventListener("test",Eo,e)}catch{}return n}();function Oc(n){return/^[\s\xa0]*$/.test(n)}var Vh=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function mi(n,e){return n<e?-1:n>e?1:0}function sd(){var n=gt.navigator;return n&&(n=n.userAgent)?n:""}function hs(n){return-1!=sd().indexOf(n)}function Bh(n){return Bh[" "](n),n}Bh[" "]=Eo;var Ir,n,Lc=hs("Opera"),yu=hs("Trident")||hs("MSIE"),od=hs("Edge"),Uh=od||yu,ad=hs("Gecko")&&!(-1!=sd().toLowerCase().indexOf("webkit")&&!hs("Edge"))&&!(hs("Trident")||hs("MSIE"))&&!hs("Edge"),_m=-1!=sd().toLowerCase().indexOf("webkit")&&!hs("Edge");function ud(){var n=gt.document;return n?n.documentMode:void 0}e:{var _u="",Fc=(n=sd(),ad?/rv:([^\);]+)(\)|;)/.exec(n):od?/Edge\/([\d\.]+)/.exec(n):yu?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):_m?/WebKit\/(\S+)/.exec(n):Lc?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(Fc&&(_u=Fc?Fc[1]:""),yu){var Vc=ud();if(null!=Vc&&Vc>parseFloat(_u)){Ir=String(Vc);break e}}Ir=_u}var Rr={};var _p=gt.document&&yu&&(ud()||parseInt(Ir,10))||void 0;function vu(n,e){if(sr.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,i=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(ad){e:{try{Bh(e.nodeName);var a=!0;break e}catch{}a=!1}a||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,i?(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:cv[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&vu.X.h.call(this)}}Nr(vu,sr);var cv={2:"touch",3:"pen",4:"mouse"};vu.prototype.h=function(){vu.X.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Si="closure_listenable_"+(1e6*Math.random()|0),vm=0;function vp(n,e,t,i,a){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!i,this.ha=a,this.key=++vm,this.ba=this.ea=!1}function Iu(n){n.ba=!0,n.listener=null,n.proxy=null,n.src=null,n.ha=null}function $h(n,e,t){for(const i in n)e.call(t,n[i],i,n)}function Eu(n){const e={};for(const t in n)e[t]=n[t];return e}const ld="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Ip(n,e){let t,i;for(let a=1;a<arguments.length;a++){for(t in i=arguments[a],i)n[t]=i[t];for(let c=0;c<ld.length;c++)t=ld[c],Object.prototype.hasOwnProperty.call(i,t)&&(n[t]=i[t])}}function fs(n){this.src=n,this.g={},this.h=0}function Hh(n,e){var t=e.type;if(t in n.g){var c,i=n.g[t],a=ym(i,e);(c=0<=a)&&Array.prototype.splice.call(i,a,1),c&&(Iu(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function Gh(n,e,t,i){for(var a=0;a<n.length;++a){var c=n[a];if(!c.ba&&c.listener==e&&c.capture==!!t&&c.ha==i)return a}return-1}fs.prototype.add=function(n,e,t,i,a){var c=n.toString();(n=this.g[c])||(n=this.g[c]=[],this.h++);var p=Gh(n,e,i,a);return-1<p?(e=n[p],t||(e.ea=!1)):((e=new vp(e,this.src,c,!!i,a)).ea=t,n.push(e)),e};var _a="closure_lm_"+(1e6*Math.random()|0),Uc={};function zh(n,e,t,i,a){if(i&&i.once)return qh(n,e,t,i,a);if(Array.isArray(e)){for(var c=0;c<e.length;c++)zh(n,e[c],t,i,a);return null}return t=Zh(t),n&&n[Si]?n.N(e,t,id(i)?!!i.capture:!!i,a):va(n,e,t,!1,i,a)}function va(n,e,t,i,a,c){if(!e)throw Error("Invalid event type");var p=id(a)?!!a.capture:!!a,y=jc(n);if(y||(n[_a]=y=new fs(n)),(t=y.add(e,t,i,p,c)).proxy)return t;if(i=function Wh(){const e=Im;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=i,i.src=n,i.listener=t,n.addEventListener)mp||(a=p),void 0===a&&(a=!1),n.addEventListener(e.toString(),i,a);else if(n.attachEvent)n.attachEvent(Ep(e.toString()),i);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(i)}return t}function qh(n,e,t,i,a){if(Array.isArray(e)){for(var c=0;c<e.length;c++)qh(n,e[c],t,i,a);return null}return t=Zh(t),n&&n[Si]?n.O(e,t,id(i)?!!i.capture:!!i,a):va(n,e,t,!0,i,a)}function Kh(n,e,t,i,a){if(Array.isArray(e))for(var c=0;c<e.length;c++)Kh(n,e[c],t,i,a);else i=id(i)?!!i.capture:!!i,t=Zh(t),n&&n[Si]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=Gh(c=n.g[e],t,i,a))&&(Iu(c[t]),Array.prototype.splice.call(c,t,1),0==c.length&&(delete n.g[e],n.h--))):n&&(n=jc(n))&&(e=n.g[e.toString()],n=-1,e&&(n=Gh(e,t,i,a)),(t=-1<n?e[n]:null)&&Ia(t))}function Ia(n){if("number"!=typeof n&&n&&!n.ba){var e=n.src;if(e&&e[Si])Hh(e.i,n);else{var t=n.type,i=n.proxy;e.removeEventListener?e.removeEventListener(t,i,n.capture):e.detachEvent?e.detachEvent(Ep(t),i):e.addListener&&e.removeListener&&e.removeListener(i),(t=jc(e))?(Hh(t,n),0==t.h&&(t.src=null,e[_a]=null)):Iu(n)}}}function Ep(n){return n in Uc?Uc[n]:Uc[n]="on"+n}function Im(n,e){if(n.ba)n=!0;else{e=new vu(e,this);var t=n.listener,i=n.ha||n.src;n.ea&&Ia(n),n=t.call(i,e)}return n}function jc(n){return(n=n[_a])instanceof fs?n:null}var $c="__closure_events_fn_"+(1e9*Math.random()>>>0);function Zh(n){return"function"==typeof n?n:(n[$c]||(n[$c]=function(e){return n.handleEvent(e)}),n[$c])}function or(){ya.call(this),this.i=new fs(this),this.P=this,this.I=null}function jn(n,e){var t,i=n.I;if(i)for(t=[];i;i=i.I)t.push(i);if(n=n.P,i=e.type||e,"string"==typeof e)e=new sr(e,n);else if(e instanceof sr)e.target=e.target||n;else{var a=e;Ip(e=new sr(i,n),a)}if(a=!0,t)for(var c=t.length-1;0<=c;c--){var p=e.g=t[c];a=wu(p,i,!0,e)&&a}if(a=wu(p=e.g=n,i,!0,e)&&a,a=wu(p,i,!1,e)&&a,t)for(c=0;c<t.length;c++)a=wu(p=e.g=t[c],i,!1,e)&&a}function wu(n,e,t,i){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var a=!0,c=0;c<e.length;++c){var p=e[c];if(p&&!p.ba&&p.capture==t){var y=p.listener,D=p.ha||p.src;p.ea&&Hh(n.i,p),a=!1!==y.call(D,i)&&a}}return a&&!i.defaultPrevented}Nr(or,ya),or.prototype[Si]=!0,or.prototype.removeEventListener=function(n,e,t,i){Kh(this,n,e,t,i)},or.prototype.M=function(){if(or.X.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],i=0;i<t.length;i++)Iu(t[i]);delete n.g[e],n.h--}}this.I=null},or.prototype.N=function(n,e,t,i){return this.i.add(String(n),e,!1,t,i)},or.prototype.O=function(n,e,t,i){return this.i.add(String(n),e,!0,t,i)};var dd=gt.JSON.stringify;function Yh(){var n=Em;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var Do,Dp=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new bp,n=>n.reset());class bp{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function Tp(n){gt.setTimeout(()=>{throw n},0)}function wo(n,e){Do||function Cp(){var n=gt.Promise.resolve(void 0);Do=function(){n.then(fd)}}(),hd||(Do(),hd=!0),Em.add(n,e)}var hd=!1,Em=new class wp{constructor(){this.h=this.g=null}add(e,t){const i=Dp.get();i.set(e,t),this.h?this.h.next=i:this.g=i,this.h=i}};function fd(){for(var n;n=Yh();){try{n.h.call(n.g)}catch(t){Tp(t)}var e=Dp;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}hd=!1}function pd(n,e){or.call(this),this.h=n||1,this.g=e||gt,this.j=ir(this.lb,this),this.l=Date.now()}function gd(n){n.ca=!1,n.R&&(n.g.clearTimeout(n.R),n.R=null)}function Hc(n,e,t){if("function"==typeof n)t&&(n=ir(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=ir(n.handleEvent,n)}return 2147483647<Number(e)?-1:gt.setTimeout(n,e||0)}function Gc(n){n.g=Hc(()=>{n.g=null,n.i&&(n.i=!1,Gc(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}Nr(pd,or),(rt=pd.prototype).ca=!1,rt.R=null,rt.lb=function(){if(this.ca){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-n):(this.R&&(this.g.clearTimeout(this.R),this.R=null),jn(this,"tick"),this.ca&&(gd(this),this.start()))}},rt.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},rt.M=function(){pd.X.M.call(this),gd(this),delete this.g};class zc extends ya{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Gc(this)}M(){super.M(),this.g&&(gt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ea(n){ya.call(this),this.h=n,this.g={}}Nr(Ea,ya);var Wc=[];function wa(n,e,t,i){Array.isArray(t)||(t&&(Wc[0]=t.toString()),t=Wc);for(var a=0;a<t.length;a++){var c=zh(e,t[a],i||n.handleEvent,!1,n.h||n);if(!c)break;n.g[c.key]=c}}function Qh(n){$h(n.g,function(e,t){this.g.hasOwnProperty(t)&&Ia(e)},n),n.g={}}function ar(){this.g=!0}function ps(n,e,t,i){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function yd(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var i=t[n];if(!(2>i.length)){var a=i[1];if(Array.isArray(a)&&!(1>a.length)){var c=a[0];if("noop"!=c&&"stop"!=c&&"close"!=c)for(var p=1;p<a.length;p++)a[p]=""}}}return dd(t)}catch{return e}}(n,t)+(i?" "+i:"")})}Ea.prototype.M=function(){Ea.X.M.call(this),Qh(this)},Ea.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},ar.prototype.Aa=function(){this.g=!1},ar.prototype.info=function(){};var ba={},Jh=null;function _d(){return Jh=Jh||new or}function gs(n){sr.call(this,ba.Pa,n)}function Ta(n){const e=_d();jn(e,new gs(e))}function qc(n,e){sr.call(this,ba.STAT_EVENT,n),this.stat=e}function Er(n){const e=_d();jn(e,new qc(e,n))}function Ca(n,e){sr.call(this,ba.Qa,n),this.size=e}function Du(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return gt.setTimeout(function(){n()},e)}ba.Pa="serverreachability",Nr(gs,sr),ba.STAT_EVENT="statevent",Nr(qc,sr),ba.Qa="timingevent",Nr(Ca,sr);var wr={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},ef={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function Kc(){}function ms(){}Kc.prototype.h=null;var Id,ys={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function Sa(){sr.call(this,"d")}function bu(){sr.call(this,"c")}function Aa(){}function Tu(n,e,t,i){this.l=n,this.j=e,this.m=t,this.U=i||1,this.S=new Ea(this),this.O=wm,this.T=new pd(n=Uh?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new tf}function tf(){this.i=null,this.g="",this.h=!1}Nr(Sa,sr),Nr(bu,sr),Nr(Aa,Kc),Aa.prototype.g=function(){return new XMLHttpRequest},Aa.prototype.i=function(){return{}},Id=new Aa;var wm=45e3,nf={},g={};function d(n,e,t){n.K=1,n.v=wd(Xr(e)),n.s=t,n.P=!0,f(n,null)}function f(n,e){n.F=Date.now(),H(n),n.A=Xr(n.v);var t=n.A,i=n.U;Array.isArray(i)||(i=[String(i)]),dv(t.i,"t",i),n.C=0,t=n.l.H,n.h=new tf,n.g=Ad(n.l,t?e:null,!n.s),0<n.N&&(n.L=new zc(ir(n.La,n,n.g),n.N)),wa(n.S,n.g,"readystatechange",n.ib),e=n.H?Eu(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.da(n.A,n.u,n.s,e)):(n.u="GET",n.g.da(n.A,n.u,null,e)),Ta(),function Da(n,e,t,i,a,c){n.info(function(){if(n.g)if(c)for(var p="",y=c.split("&"),D=0;D<y.length;D++){var T=y[D].split("=");if(1<T.length){var x=T[0];T=T[1];var R=x.split("_");p=2<=R.length&&"type"==R[1]?p+(x+"=")+T+"&":p+(x+"=redacted&")}}else p=null;else p=c;return"XMLHTTP REQ ("+i+") [attempt "+a+"]: "+e+"\n"+t+"\n"+p})}(n.j,n.u,n.A,n.m,n.U,n.s)}function _(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Da}function S(n,e,t){let a,i=!0;for(;!n.I&&n.C<t.length;){if(a=N(n,t),a==g){4==e&&(n.o=4,Er(14),i=!1),ps(n.j,n.m,null,"[Incomplete Response]");break}if(a==nf){n.o=4,Er(15),ps(n.j,n.m,t,"[Invalid Chunk]"),i=!1;break}ps(n.j,n.m,a,null),ut(n,a)}_(n)&&a!=g&&a!=nf&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,Er(16),i=!1),n.i=n.i&&i,i?0<t.length&&!n.$&&(n.$=!0,(e=n.l).g==n&&e.$&&!e.K&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+t.length),kp(e),e.K=!0,Er(11))):(ps(n.j,n.m,t,"[Invalid Chunked Response]"),lt(n),Je(n))}function N(n,e){var t=n.C,i=e.indexOf("\n",t);return-1==i?g:(t=Number(e.substring(t,i)),isNaN(t)?nf:(i+=1)+t>e.length?g:(e=e.substr(i,t),n.C=i+t,e))}function H(n){n.V=Date.now()+n.O,ae(n,n.O)}function ae(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=Du(ir(n.gb,n),e)}function Fe(n){n.B&&(gt.clearTimeout(n.B),n.B=null)}function Je(n){0==n.l.G||n.I||_E(n.l,n)}function lt(n){Fe(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,gd(n.T),Qh(n.S),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function ut(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||Cm(t.h,n)))if(!n.J&&Cm(t.h,n)&&3==t.G){try{var i=t.Fa.g.parse(e)}catch{i=null}if(Array.isArray(i)&&3==i.length){var a=i;if(0==a[0]){e:if(!t.u){if(t.g){if(!(t.g.F+3e3<n.F))break e;gf(t),Np(t)}Pm(t),Er(18)}}else t.Ba=a[1],0<t.Ba-t.T&&37500>a[2]&&t.L&&0==t.A&&!t.v&&(t.v=Du(ir(t.cb,t),6e3));if(1>=Tm(t.h)&&t.ja){try{t.ja()}catch{}t.ja=void 0}}else To(t,11)}else if((n.J||t.g==n)&&gf(t),!Oc(e))for(a=t.Fa.g.parse(e),e=0;e<a.length;e++){let T=a[e];if(t.T=T[0],T=T[1],2==t.G)if("c"==T[0]){t.I=T[1],t.ka=T[2];const x=T[3];null!=x&&(t.ma=x,t.j.info("VER="+t.ma));const R=T[4];null!=R&&(t.Ca=R,t.j.info("SVER="+t.Ca));const q=T[5];null!=q&&"number"==typeof q&&0<q&&(t.J=i=1.5*q,t.j.info("backChannelRequestTimeoutMs_="+i)),i=t;const ne=n.g;if(ne){const ge=ne.g?ne.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ge){var c=i.h;c.g||-1==ge.indexOf("spdy")&&-1==ge.indexOf("quic")&&-1==ge.indexOf("h2")||(c.j=c.l,c.g=new Set,c.h&&(Sm(c,c.h),c.h=null))}if(i.D){const Ue=ne.g?ne.g.getResponseHeader("X-HTTP-Session-Id"):null;Ue&&(i.za=Ue,pn(i.F,i.D,Ue))}}t.G=3,t.l&&t.l.xa(),t.$&&(t.P=Date.now()-n.F,t.j.info("Handshake RTT: "+t.P+"ms"));var p=n;if((i=t).sa=Qc(i,i.H?i.ka:null,i.V),p.J){fv(i.h,p);var y=p,D=i.J;D&&y.setTimeout(D),y.B&&(Fe(y),H(y)),i.g=p}else Rp(i);0<t.i.length&&ff(t)}else"stop"!=T[0]&&"close"!=T[0]||To(t,7);else 3==t.G&&("stop"==T[0]||"close"==T[0]?"stop"==T[0]?To(t,7):hf(t):"noop"!=T[0]&&t.l&&t.l.wa(T),t.A=0)}Ta()}catch{}}function Zc(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(kc(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function Gi(n){if(n.oa&&"function"==typeof n.oa)return n.oa();if(!n.W||"function"!=typeof n.W){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(kc(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const i in n)e[t++]=i;return e}}}(n),i=function Xn(n){if(n.W&&"function"==typeof n.W)return n.W();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(kc(n)){for(var e=[],t=n.length,i=0;i<t;i++)e.push(n[i]);return e}for(i in e=[],t=0,n)e[t++]=n[i];return e}(n),a=i.length,c=0;c<a;c++)e.call(void 0,i[c],t&&t[c],n)}(rt=Tu.prototype).setTimeout=function(n){this.O=n},rt.ib=function(n){n=n.target;const e=this.L;e&&3==_s(n)?e.l():this.La(n)},rt.La=function(n){try{if(n==this.g)e:{const x=_s(this.g);var e=this.g.Ea();if(this.g.aa(),!(3>x)&&(3!=x||Uh||this.g&&(this.h.h||this.g.fa()||mv(this.g)))){this.I||4!=x||7==e||Ta(),Fe(this);var t=this.g.aa();this.Y=t;t:if(_(this)){var i=mv(this.g);n="";var a=i.length,c=4==_s(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){lt(this),Je(this);var p="";break t}this.h.i=new gt.TextDecoder}for(e=0;e<a;e++)this.h.h=!0,n+=this.h.i.decode(i[e],{stream:c&&e==a-1});i.splice(0,a),this.h.g+=n,this.C=0,p=this.h.g}else p=this.g.fa();if(this.i=200==t,function md(n,e,t,i,a,c,p){n.info(function(){return"XMLHTTP RESP ("+i+") [ attempt "+a+"]: "+e+"\n"+t+"\n"+c+" "+p})}(this.j,this.u,this.A,this.m,this.U,x,t),this.i){if(this.Z&&!this.J){t:{if(this.g){var y,D=this.g;if((y=D.g?D.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Oc(y)){var T=y;break t}}T=null}if(!(t=T)){this.i=!1,this.o=3,Er(12),lt(this),Je(this);break e}ps(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,ut(this,t)}this.P?(S(this,x,p),Uh&&this.i&&3==x&&(wa(this.S,this.T,"tick",this.hb),this.T.start())):(ps(this.j,this.m,p,null),ut(this,p)),4==x&&lt(this),this.i&&!this.I&&(4==x?_E(this.l,this):(this.i=!1,H(this)))}else 400==t&&0<p.indexOf("Unknown SID")?(this.o=3,Er(12)):(this.o=0,Er(13)),lt(this),Je(this)}}}catch{}},rt.hb=function(){if(this.g){var n=_s(this.g),e=this.g.fa();this.C<e.length&&(Fe(this),S(this,n,e),this.i&&4!=n&&H(this))}},rt.cancel=function(){this.I=!0,lt(this)},rt.gb=function(){this.B=null;const n=Date.now();0<=n-this.V?(function Xh(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(Ta(),Er(17)),lt(this),this.o=2,Je(this)):ae(this,this.V-n)};var rf=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function kr(n,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof kr){this.h=void 0!==e?e:n.h,xa(this,n.j),this.s=n.s,this.g=n.g,Cu(this,n.m),this.l=n.l,e=n.i;var t=new of;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),Ed(this,t),this.o=n.o}else n&&(t=String(n).match(rf))?(this.h=!!e,xa(this,t[1]||"",!0),this.s=Dd(t[2]||""),this.g=Dd(t[3]||"",!0),Cu(this,t[4]),this.l=Dd(t[5]||"",!0),Ed(this,t[6]||"",!0),this.o=Dd(t[7]||"")):(this.h=!!e,this.i=new of(null,this.h))}function Xr(n){return new kr(n)}function xa(n,e,t){n.j=t?Dd(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function Cu(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function Ed(n,e,t){e instanceof of?(n.i=e,function fE(n,e){e&&!n.j&&(Su(n),n.i=null,n.g.forEach(function(t,i){var a=i.toLowerCase();i!=a&&(Dm(this,i),dv(this,a,t))},n)),n.j=e}(n.i,n.h)):(t||(e=Fs(e,dE)),n.i=new of(e,n.h))}function pn(n,e,t){n.i.set(e,t)}function wd(n){return pn(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function Dd(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function Fs(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,sf),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function sf(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}kr.prototype.toString=function(){var n=[],e=this.j;e&&n.push(Fs(e,lE,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(Fs(e,lE,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(Fs(t,"/"==t.charAt(0)?lv:ab,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",Fs(t,hE)),n.join("")};var lE=/[#\/\?@]/g,ab=/[#\?:]/g,lv=/[#\?]/g,dE=/[#\?@]/g,hE=/#/g;function of(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function Su(n){n.g||(n.g=new Map,n.h=0,n.i&&function Yc(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var i=n[t].indexOf("="),a=null;if(0<=i){var c=n[t].substring(0,i);a=n[t].substring(i+1)}else c=n[t];e(c,a?decodeURIComponent(a.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function Dm(n,e){Su(n),e=Au(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function af(n,e){return Su(n),e=Au(n,e),n.g.has(e)}function dv(n,e,t){Dm(n,e),0<t.length&&(n.i=null,n.g.set(Au(n,e),Pc(t)),n.h+=t.length)}function Au(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function hv(n){this.l=n||pE,n=gt.PerformanceNavigationTiming?0<(n=gt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(gt.g&&gt.g.Ga&&gt.g.Ga()&&gt.g.Ga().$b),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(rt=of.prototype).add=function(n,e){Su(this),this.i=null,n=Au(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},rt.forEach=function(n,e){Su(this),this.g.forEach(function(t,i){t.forEach(function(a){n.call(e,a,i,this)},this)},this)},rt.oa=function(){Su(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let i=0;i<e.length;i++){const a=n[i];for(let c=0;c<a.length;c++)t.push(e[i])}return t},rt.W=function(n){Su(this);let e=[];if("string"==typeof n)af(this,n)&&(e=e.concat(this.g.get(Au(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},rt.set=function(n,e){return Su(this),this.i=null,af(this,n=Au(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},rt.get=function(n,e){return n&&0<(n=this.W(n)).length?String(n[0]):e},rt.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var i=e[t];const c=encodeURIComponent(String(i)),p=this.W(i);for(i=0;i<p.length;i++){var a=c;""!==p[i]&&(a+="="+encodeURIComponent(String(p[i]))),n.push(a)}}return this.i=n.join("&")};var pE=10;function bm(n){return!!n.h||!!n.g&&n.g.size>=n.j}function Tm(n){return n.h?1:n.g?n.g.size:0}function Cm(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function Sm(n,e){n.g?n.g.add(e):n.h=e}function fv(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function pv(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return Pc(n.i)}function Am(){}function ub(){this.g=new Am}function cb(n,e,t){const i=t||"";try{Zc(n,function(a,c){let p=a;id(a)&&(p=dd(a)),e.push(i+c+"="+encodeURIComponent(p))})}catch(a){throw e.push(i+"type="+encodeURIComponent("_badmap")),a}}function cf(n,e,t,i,a){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,a(i)}catch{}}function bd(n){this.l=n.ac||null,this.j=n.jb||!1}function lf(n,e){or.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=Sp,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}hv.prototype.cancel=function(){if(this.i=pv(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},Am.prototype.stringify=function(n){return gt.JSON.stringify(n,void 0)},Am.prototype.parse=function(n){return gt.JSON.parse(n,void 0)},Nr(bd,Kc),bd.prototype.g=function(){return new lf(this.l,this.j)},bd.prototype.i=function(n){return function(){return n}}({}),Nr(lf,or);var Sp=0;function gE(n){n.j.read().then(n.Ta.bind(n)).catch(n.ga.bind(n))}function df(n){n.readyState=4,n.l=null,n.j=null,n.A=null,Td(n)}function Td(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(rt=lf.prototype).open=function(n,e){if(this.readyState!=Sp)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,Td(this)},rt.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||gt).fetch(new Request(this.B,e)).then(this.Wa.bind(this),this.ga.bind(this))},rt.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,df(this)),this.readyState=Sp},rt.Wa=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,Td(this)),this.g&&(this.readyState=3,Td(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if(typeof gt.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;gE(this)}else n.text().then(this.Va.bind(this),this.ga.bind(this))},rt.Ta=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?df(this):Td(this),3==this.readyState&&gE(this)}},rt.Va=function(n){this.g&&(this.response=this.responseText=n,df(this))},rt.Ua=function(n){this.g&&(this.response=n,df(this))},rt.ga=function(){this.g&&df(this)},rt.setRequestHeader=function(n,e){this.v.append(n,e)},rt.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},rt.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(lf.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var gv=gt.JSON.parse;function Ln(n){or.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=mE,this.K=this.L=!1}Nr(Ln,or);var mE="",xm=/^https?$/i,yE=["POST","PUT"];function Nm(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,Rm(n),Ap(n)}function Rm(n){n.D||(n.D=!0,jn(n,"complete"),jn(n,"error"))}function xu(n){if(n.h&&typeof Gr<"u"&&(!n.C[1]||4!=_s(n)||2!=n.aa()))if(n.v&&4==_s(n))Hc(n.Ha,0,n);else if(jn(n,"readystatechange"),4==_s(n)){n.h=!1;try{const y=n.aa();e:switch(y){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var i;if(i=0===y){var a=String(n.H).match(rf)[1]||null;if(!a&&gt.self&&gt.self.location){var c=gt.self.location.protocol;a=c.substr(0,c.length-1)}i=!xm.test(a?a.toLowerCase():"")}t=i}if(t)jn(n,"complete"),jn(n,"success");else{n.m=6;try{var p=2<_s(n)?n.g.statusText:""}catch{p=""}n.j=p+" ["+n.aa()+"]",Rm(n)}}finally{Ap(n)}}}function Ap(n,e){if(n.g){xp(n);const t=n.g,i=n.C[0]?Eo:null;n.g=null,n.C=null,e||jn(n,"ready");try{t.onreadystatechange=i}catch{}}}function xp(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(gt.clearTimeout(n.A),n.A=null)}function _s(n){return n.g?n.g.readyState:0}function mv(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case mE:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function Mp(n){let e="";return $h(n,function(t,i){e+=i,e+=":",e+=t,e+="\r\n"}),e}function Cd(n,e,t){e:{for(i in t){var i=!1;break e}i=!0}i||(t=Mp(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):pn(n,e,t))}function bo(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function km(n){this.Ca=0,this.i=[],this.j=new ar,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=bo("failFast",!1,n),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=bo("baseRetryDelayMs",5e3,n),this.bb=bo("retryDelaySeedMs",1e4,n),this.$a=bo("forwardChannelMaxRetries",2,n),this.ta=bo("forwardChannelRequestTimeoutMs",2e4,n),this.ra=n&&n.xmlHttpFactory||void 0,this.Da=n&&n.Zb||!1,this.J=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.I="",this.h=new hv(n&&n.concurrentRequestLimit),this.Fa=new ub,this.O=n&&n.fastHandshake||!1,this.N=n&&n.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=n&&n.Xb||!1,n&&n.Aa&&this.j.Aa(),n&&n.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&n&&n.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function hf(n){if(yv(n),3==n.G){var e=n.U++,t=Xr(n.F);pn(t,"SID",n.I),pn(t,"RID",e),pn(t,"TYPE","terminate"),pf(n,t),(e=new Tu(n,n.j,e,void 0)).K=2,e.v=wd(Xr(t)),t=!1,gt.navigator&&gt.navigator.sendBeacon&&(t=gt.navigator.sendBeacon(e.v.toString(),"")),!t&&gt.Image&&((new Image).src=e.v,t=!0),t||(e.g=Ad(e.l,null),e.g.da(e.v)),e.F=Date.now(),H(e)}wv(n)}function Np(n){n.g&&(kp(n),n.g.cancel(),n.g=null)}function yv(n){Np(n),n.u&&(gt.clearTimeout(n.u),n.u=null),gf(n),n.h.cancel(),n.m&&("number"==typeof n.m&&gt.clearTimeout(n.m),n.m=null)}function ff(n){bm(n.h)||n.m||(n.m=!0,wo(n.Ja,n),n.C=0)}function _v(n,e){var t;t=e?e.m:n.U++;const i=Xr(n.F);pn(i,"SID",n.I),pn(i,"RID",t),pn(i,"AID",n.T),pf(n,i),n.o&&n.s&&Cd(i,n.o,n.s),t=new Tu(n,n.j,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.i=e.D.concat(n.i)),e=vv(n,t,1e3),t.setTimeout(Math.round(.5*n.ta)+Math.round(.5*n.ta*Math.random())),Sm(n.h,t),d(t,i,e)}function pf(n,e){n.ia&&$h(n.ia,function(t,i){pn(e,i,t)}),n.l&&Zc({},function(t,i){pn(e,i,t)})}function vv(n,e,t){t=Math.min(n.i.length,t);var i=n.l?ir(n.l.Ra,n.l,n):null;e:{var a=n.i;let c=-1;for(;;){const p=["count="+t];-1==c?0<t?(c=a[0].h,p.push("ofs="+c)):c=0:p.push("ofs="+c);let y=!0;for(let D=0;D<t;D++){let T=a[D].h;const x=a[D].g;if(T-=c,0>T)c=Math.max(0,a[D].h-100),y=!1;else try{cb(x,p,"req"+T+"_")}catch{i&&i(x)}}if(y){i=p.join("&");break e}}}return n=n.i.splice(0,t),e.D=n,i}function Rp(n){n.g||n.u||(n.Z=1,wo(n.Ia,n),n.A=0)}function Pm(n){return!(n.g||n.u||3<=n.A||(n.Z++,n.u=Du(ir(n.Ia,n),Ev(n,n.A)),n.A++,0))}function kp(n){null!=n.B&&(gt.clearTimeout(n.B),n.B=null)}function Iv(n){n.g=new Tu(n,n.j,"rpc",n.Z),null===n.o&&(n.g.H=n.s),n.g.N=0;var e=Xr(n.sa);pn(e,"RID","rpc"),pn(e,"SID",n.I),pn(e,"CI",n.L?"0":"1"),pn(e,"AID",n.T),pn(e,"TYPE","xmlhttp"),pf(n,e),n.o&&n.s&&Cd(e,n.o,n.s),n.J&&n.g.setTimeout(n.J);var t=n.g;n=n.ka,t.K=1,t.v=wd(Xr(e)),t.s=null,t.P=!0,f(t,n)}function gf(n){null!=n.v&&(gt.clearTimeout(n.v),n.v=null)}function _E(n,e){var t=null;if(n.g==e){gf(n),kp(n),n.g=null;var i=2}else{if(!Cm(n.h,e))return;t=e.D,fv(n.h,e),i=1}if(0!=n.G)if(n.pa=e.Y,e.i)if(1==i){t=e.s?e.s.length:0,e=Date.now()-e.F;var a=n.C;jn(i=_d(),new Ca(i,t)),ff(n)}else Rp(n);else if(3==(a=e.o)||0==a&&0<n.pa||!(1==i&&function Sd(n,e){return!(Tm(n.h)>=n.h.j-(n.m?1:0)||(n.m?(n.i=e.D.concat(n.i),0):1==n.G||2==n.G||n.C>=(n.Za?0:n.$a)||(n.m=Du(ir(n.Ja,n,e),Ev(n,n.C)),n.C++,0)))}(n,e)||2==i&&Pm(n)))switch(t&&0<t.length&&(e=n.h,e.i=e.i.concat(t)),a){case 1:To(n,5);break;case 4:To(n,10);break;case 3:To(n,6);break;default:To(n,2)}}function Ev(n,e){let t=n.Xa+Math.floor(Math.random()*n.bb);return n.l||(t*=2),t*e}function To(n,e){if(n.j.info("Error code "+e),2==e){var t=null;n.l&&(t=null);var i=ir(n.kb,n);t||(t=new kr("//www.google.com/images/cleardot.gif"),gt.location&&"http"==gt.location.protocol||xa(t,"https"),wd(t)),function uf(n,e){const t=new ar;if(gt.Image){const i=new Image;i.onload=Lh(cf,t,i,"TestLoadImage: loaded",!0,e),i.onerror=Lh(cf,t,i,"TestLoadImage: error",!1,e),i.onabort=Lh(cf,t,i,"TestLoadImage: abort",!1,e),i.ontimeout=Lh(cf,t,i,"TestLoadImage: timeout",!1,e),gt.setTimeout(function(){i.ontimeout&&i.ontimeout()},1e4),i.src=n}else e(!1)}(t.toString(),i)}else Er(2);n.G=0,n.l&&n.l.va(e),wv(n),yv(n)}function wv(n){if(n.G=0,n.la=[],n.l){const e=pv(n.h);(0!=e.length||0!=n.i.length)&&(Fh(n.la,e),Fh(n.la,n.i),n.h.i.length=0,Pc(n.i),n.i.length=0),n.l.ua()}}function Qc(n,e,t){var i=t instanceof kr?Xr(t):new kr(t,void 0);if(""!=i.g)e&&(i.g=e+"."+i.g),Cu(i,i.m);else{var a=gt.location;i=a.protocol,e=e?e+"."+a.hostname:a.hostname,a=+a.port;var c=new kr(null,void 0);i&&xa(c,i),e&&(c.g=e),a&&Cu(c,a),t&&(c.l=t),i=c}return e=n.za,(t=n.D)&&e&&pn(i,t,e),pn(i,"VER",n.ma),pf(n,i),i}function Ad(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Ln(t&&n.Da&&!n.ra?new bd({jb:!0}):n.ra)).Ka(n.H),e}function Dv(){}function mf(){if(yu&&!(10<=Number(_p)))throw Error("Environmental error: no available transport.")}function zi(n,e){or.call(this),this.g=new km(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.S=n,(n=e&&e.Yb)&&!Oc(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Oc(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new Xc(this)}function bv(n){Sa.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function Tv(){bu.call(this),this.status=1}function Xc(n){this.g=n}(rt=Ln.prototype).Ka=function(n){this.L=n},rt.da=function(n,e,t,i){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Id.g(),this.C=function vd(n){return n.h||(n.h=n.i())}(this.u?this.u:Id),this.g.onreadystatechange=ir(this.Ha,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(c){return void Nm(this,c)}if(n=t||"",t=new Map(this.headers),i)if(Object.getPrototypeOf(i)===Object.prototype)for(var a in i)t.set(a,i[a]);else{if("function"!=typeof i.keys||"function"!=typeof i.get)throw Error("Unknown input type for opt_headers: "+String(i));for(const c of i.keys())t.set(c,i.get(c))}i=Array.from(t.keys()).find(c=>"content-type"==c.toLowerCase()),a=gt.FormData&&n instanceof gt.FormData,!(0<=ym(yE,e))||i||a||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[c,p]of t)this.g.setRequestHeader(c,p);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{xp(this),0<this.B&&((this.K=function Mm(n){return yu&&function Bc(){return function yp(n){var e=Rr;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=Vh(String(Ir)).split("."),t=Vh("9").split("."),i=Math.max(e.length,t.length);for(let p=0;0==n&&p<i;p++){var a=e[p]||"",c=t[p]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],c=/(\d*)(\D*)(.*)/.exec(c)||["","","",""],0==a[0].length&&0==c[0].length)break;n=mi(0==a[1].length?0:parseInt(a[1],10),0==c[1].length?0:parseInt(c[1],10))||mi(0==a[2].length,0==c[2].length)||mi(a[2],c[2]),a=a[3],c=c[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=ir(this.qa,this)):this.A=Hc(this.qa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(c){Nm(this,c)}},rt.qa=function(){typeof Gr<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,jn(this,"timeout"),this.abort(8))},rt.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,jn(this,"complete"),jn(this,"abort"),Ap(this))},rt.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Ap(this,!0)),Ln.X.M.call(this)},rt.Ha=function(){this.s||(this.F||this.v||this.l?xu(this):this.fb())},rt.fb=function(){xu(this)},rt.aa=function(){try{return 2<_s(this)?this.g.status:-1}catch{return-1}},rt.fa=function(){try{return this.g?this.g.responseText:""}catch{return""}},rt.Sa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),gv(e)}},rt.Ea=function(){return this.m},rt.Oa=function(){return"string"==typeof this.j?this.j:String(this.j)},(rt=km.prototype).ma=8,rt.G=1,rt.Ja=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.U=Math.floor(1e5*Math.random()),n=this.U++;const a=new Tu(this,this.j,n,void 0);let c=this.s;if(this.S&&(c?(c=Eu(c),Ip(c,this.S)):c=this.S),null!==this.o||this.N||(a.H=c,c=null),this.O)e:{for(var e=0,t=0;t<this.i.length;t++){var i=this.i[t];if(void 0===(i="__data__"in i.g&&"string"==typeof(i=i.g.__data__)?i.length:void 0))break;if(4096<(e+=i)){e=t;break e}if(4096===e||t===this.i.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=vv(this,a,e),pn(t=Xr(this.F),"RID",n),pn(t,"CVER",22),this.D&&pn(t,"X-HTTP-Session-Id",this.D),pf(this,t),c&&(this.N?e="headers="+encodeURIComponent(String(Mp(c)))+"&"+e:this.o&&Cd(t,this.o,c)),Sm(this.h,a),this.Ya&&pn(t,"TYPE","init"),this.O?(pn(t,"$req",e),pn(t,"SID","null"),a.Z=!0,d(a,t,null)):d(a,t,e),this.G=2}}else 3==this.G&&(n?_v(this,n):0==this.i.length||bm(this.h)||_v(this))},rt.Ia=function(){if(this.u=null,Iv(this),this.$&&!(this.K||null==this.g||0>=this.P)){var n=2*this.P;this.j.info("BP detection timer enabled: "+n),this.B=Du(ir(this.eb,this),n)}},rt.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,Er(10),Np(this),Iv(this))},rt.cb=function(){null!=this.v&&(this.v=null,Np(this),Pm(this),Er(19))},rt.kb=function(n){n?(this.j.info("Successfully pinged google.com"),Er(2)):(this.j.info("Failed to ping google.com"),Er(1))},(rt=Dv.prototype).xa=function(){},rt.wa=function(){},rt.va=function(){},rt.ua=function(){},rt.Ra=function(){},mf.prototype.g=function(n,e){return new zi(n,e)},Nr(zi,or),zi.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;Er(0),n.V=e,n.ia=t||{},n.L=n.Y,n.F=Qc(n,null,n.V),ff(n)},zi.prototype.close=function(){hf(this.g)},zi.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=dd(n),n=t);e.i.push(new class{constructor(n,e){this.h=n,this.g=e}}(e.ab++,n)),3==e.G&&ff(e)},zi.prototype.M=function(){this.g.l=null,delete this.j,hf(this.g),delete this.g,zi.X.M.call(this)},Nr(bv,Sa),Nr(Tv,bu),Nr(Xc,Dv),Xc.prototype.xa=function(){jn(this.g,"a")},Xc.prototype.wa=function(n){jn(this.g,new bv(n))},Xc.prototype.va=function(n){jn(this.g,new Tv)},Xc.prototype.ua=function(){jn(this.g,"b")},mf.prototype.createWebChannel=mf.prototype.g,zi.prototype.send=zi.prototype.u,zi.prototype.open=zi.prototype.m,zi.prototype.close=zi.prototype.close,wr.NO_ERROR=0,wr.TIMEOUT=8,wr.HTTP_ERROR=6,ef.COMPLETE="complete",ms.EventType=ys,ys.OPEN="a",ys.CLOSE="b",ys.ERROR="c",ys.MESSAGE="d",or.prototype.listen=or.prototype.N,Ln.prototype.listenOnce=Ln.prototype.O,Ln.prototype.getLastError=Ln.prototype.Oa,Ln.prototype.getLastErrorCode=Ln.prototype.Ea,Ln.prototype.getStatus=Ln.prototype.aa,Ln.prototype.getResponseJson=Ln.prototype.Sa,Ln.prototype.getResponseText=Ln.prototype.fa,Ln.prototype.send=Ln.prototype.da,Ln.prototype.setWithCredentials=Ln.prototype.Ka;var Cv=rr.createWebChannelTransport=function(){return new mf},Om=rr.getStatEventTarget=function(){return _d()},yf=rr.ErrorCode=wr,vE=rr.EventType=ef,Lm=rr.Event=ba,xd=rr.Stat={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},IE=rr.FetchXmlHttpFactory=bd,Pp=rr.WebChannel=ms,EE=rr.XhrIo=Ln;const Sv="@firebase/firestore";class Pr{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Pr.UNAUTHENTICATED=new Pr(null),Pr.GOOGLE_CREDENTIALS=new Pr("google-credentials-uid"),Pr.FIRST_PARTY=new Pr("first-party-uid"),Pr.MOCK_USER=new Pr("mock-user");let Md="9.17.1";const Mu=new On.Yd("@firebase/firestore");function Nu(){return Mu.logLevel}function ke(n,...e){if(Mu.logLevel<=On.in.DEBUG){const t=e.map(Av);Mu.debug(`Firestore (${Md}): ${n}`,...t)}}function Jn(n,...e){if(Mu.logLevel<=On.in.ERROR){const t=e.map(Av);Mu.error(`Firestore (${Md}): ${n}`,...t)}}function Nd(n,...e){if(Mu.logLevel<=On.in.WARN){const t=e.map(Av);Mu.warn(`Firestore (${Md}): ${n}`,...t)}}function Av(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function it(n="Unexpected state"){const e=`FIRESTORE (${Md}) INTERNAL ASSERTION FAILED: `+n;throw Jn(e),new Error(e)}function ct(n,e){n||it()}function ze(n,e){return n}const re={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class De extends Dt.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Dr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class Mv{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Vs{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Pr.UNAUTHENTICATED))}shutdown(){}}class wE{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class Nv{constructor(e){this.t=e,this.currentUser=Pr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var i=this;let a=this.i;const c=T=>this.i!==a?(a=this.i,t(T)):Promise.resolve();let p=new Dr;this.o=()=>{this.i++,this.currentUser=this.u(),p.resolve(),p=new Dr,e.enqueueRetryable(()=>c(this.currentUser))};const y=()=>{const T=p;e.enqueueRetryable((0,z.Z)(function*(){yield T.promise,yield c(i.currentUser)}))},D=T=>{ke("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=T,this.auth.addAuthTokenListener(this.o),y()};this.t.onInit(T=>D(T)),setTimeout(()=>{if(!this.auth){const T=this.t.getImmediate({optional:!0});T?D(T):(ke("FirebaseAuthCredentialsProvider","Auth not yet detected"),p.resolve(),p=new Dr)}},0),y()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(i=>this.i!==e?(ke("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(ct("string"==typeof i.accessToken),new Mv(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return ct(null===e||"string"==typeof e),new Pr(e)}}class DE{constructor(e,t,i,a){this.h=e,this.l=t,this.m=i,this.g=a,this.type="FirstParty",this.user=Pr.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(ct(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class bE{constructor(e,t,i,a){this.h=e,this.l=t,this.m=i,this.g=a}getToken(){return Promise.resolve(new DE(this.h,this.l,this.m,this.g))}start(e,t){e.enqueueRetryable(()=>t(Pr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Rv{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class TE{constructor(e){this.T=e,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(e,t){const i=c=>{null!=c.error&&ke("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);const p=c.token!==this.A;return this.A=c.token,ke("FirebaseAppCheckTokenProvider",`Received ${p?"new":"existing"} token.`),p?t(c.token):Promise.resolve()};this.o=c=>{e.enqueueRetryable(()=>i(c))};const a=c=>{ke("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.appCheck.addTokenListener(this.o)};this.T.onInit(c=>a(c)),setTimeout(()=>{if(!this.appCheck){const c=this.T.getImmediate({optional:!0});c?a(c):ke("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(ct("string"==typeof t.token),this.A=t.token,new Rv(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function SE(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let i=0;i<n;i++)t[i]=Math.floor(256*Math.random());return t}class kv{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let i="";for(;i.length<20;){const a=SE(40);for(let c=0;c<a.length;++c)i.length<20&&a[c]<t&&(i+=e.charAt(a[c]%e.length))}return i}}function Lt(n,e){return n<e?-1:n>e?1:0}function At(n,e,t){return n.length===e.length&&n.every((i,a)=>t(i,e[a]))}function Fm(n){return n+"\0"}class An{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new De(re.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new De(re.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new De(re.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new De(re.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return An.fromMillis(Date.now())}static fromDate(e){return An.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor(1e6*(e-1e3*t));return new An(t,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Lt(this.nanoseconds,e.nanoseconds):Lt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class dt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new dt(e)}static min(){return new dt(new An(0,0))}static max(){return new dt(new An(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class _f{constructor(e,t,i){void 0===t?t=0:t>e.length&&it(),void 0===i?i=e.length-t:i>e.length-t&&it(),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return 0===_f.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof _f?e.forEach(i=>{t.push(i)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let a=0;a<i;a++){const c=e.get(a),p=t.get(a);if(c<p)return-1;if(c>p)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Jt extends _f{construct(e,t,i){return new Jt(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new De(re.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter(a=>a.length>0))}return new Jt(t)}static emptyPath(){return new Jt([])}}const Pv=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class qn extends _f{construct(e,t,i){return new qn(e,t,i)}static isValidIdentifier(e){return Pv.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),qn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new qn(["__name__"])}static fromServerFormat(e){const t=[];let i="",a=0;const c=()=>{if(0===i.length)throw new De(re.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let p=!1;for(;a<e.length;){const y=e[a];if("\\"===y){if(a+1===e.length)throw new De(re.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const D=e[a+1];if("\\"!==D&&"."!==D&&"`"!==D)throw new De(re.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=D,a+=2}else"`"===y?(p=!p,a++):"."!==y||p?(i+=y,a++):(c(),a++)}if(c(),p)throw new De(re.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new qn(t)}static emptyPath(){return new qn([])}}class $e{constructor(e){this.path=e}static fromPath(e){return new $e(Jt.fromString(e))}static fromName(e){return new $e(Jt.fromString(e).popFirst(5))}static empty(){return new $e(Jt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Jt.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Jt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new $e(new Jt(e.slice()))}}class Op{constructor(e,t,i,a){this.indexId=e,this.collectionGroup=t,this.fields=i,this.indexState=a}}function Vm(n){return n.fields.find(e=>2===e.kind)}function Rd(n){return n.fields.filter(e=>2!==e.kind)}Op.UNKNOWN_ID=-1;class vf{constructor(e,t){this.fieldPath=e,this.kind=t}}class If{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new If(0,Wi.min())}}function Lp(n,e){const t=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,a=dt.fromTimestamp(1e9===i?new An(t+1,0):new An(t,i));return new Wi(a,$e.empty(),e)}function Fp(n){return new Wi(n.readTime,n.key,-1)}class Wi{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new Wi(dt.min(),$e.empty(),-1)}static max(){return new Wi(dt.max(),$e.empty(),-1)}}function Lv(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=$e.comparator(n.documentKey,e.documentKey),0!==t?t:Lt(n.largestBatchId,e.largestBatchId))}const AE="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class xE{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function Ru(n){return Vp.apply(this,arguments)}function Vp(){return Vp=(0,z.Z)(function*(n){if(n.code!==re.FAILED_PRECONDITION||n.message!==AE)throw n;ke("LocalStore","Unexpectedly lost primary lease")}),Vp.apply(this,arguments)}class J{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&it(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new J((i,a)=>{this.nextCallback=c=>{this.wrapSuccess(e,c).next(i,a)},this.catchCallback=c=>{this.wrapFailure(t,c).next(i,a)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof J?t:J.resolve(t)}catch(t){return J.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):J.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):J.reject(t)}static resolve(e){return new J((t,i)=>{t(e)})}static reject(e){return new J((t,i)=>{i(e)})}static waitFor(e){return new J((t,i)=>{let a=0,c=0,p=!1;e.forEach(y=>{++a,y.next(()=>{++c,p&&c===a&&t()},D=>i(D))}),p=!0,c===a&&t()})}static or(e){let t=J.resolve(!1);for(const i of e)t=t.next(a=>a?J.resolve(a):i());return t}static forEach(e,t){const i=[];return e.forEach((a,c)=>{i.push(t.call(this,a,c))}),this.waitFor(i)}static mapArray(e,t){return new J((i,a)=>{const c=e.length,p=new Array(c);let y=0;for(let D=0;D<c;D++){const T=D;t(e[T]).next(x=>{p[T]=x,++y,y===c&&i(p)},x=>a(x))}})}static doWhile(e,t){return new J((i,a)=>{const c=()=>{!0===e()?t().next(()=>{c()},a):i()};c()})}}class Bp{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.P=new Dr,this.transaction.oncomplete=()=>{this.P.resolve()},this.transaction.onabort=()=>{t.error?this.P.reject(new kd(e,t.error)):this.P.resolve()},this.transaction.onerror=i=>{const a=Bm(i.target.error);this.P.reject(new kd(e,a))}}static open(e,t,i,a){try{return new Bp(t,e.transaction(a,i))}catch(c){throw new kd(t,c)}}get v(){return this.P.promise}abort(e){e&&this.P.reject(e),this.aborted||(ke("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}V(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new NE(t)}}class Jr{constructor(e,t,i){this.name=e,this.version=t,this.S=i,12.2===Jr.D((0,Dt.z$)())&&Jn("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return ke("SimpleDb","Removing database:",e),ku(window.indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!(0,Dt.hl)())return!1;if(Jr.N())return!0;const e=(0,Dt.z$)(),t=Jr.D(e),i=0<t&&t<10,a=Jr.k(e),c=0<a&&a<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||i||c)}static N(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.O)}static M(e,t){return e.store(t)}static D(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),i=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(i)}static k(e){const t=e.match(/Android ([\d.]+)/i),i=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(i)}F(e){var t=this;return(0,z.Z)(function*(){return t.db||(ke("SimpleDb","Opening database:",t.name),t.db=yield new Promise((i,a)=>{const c=indexedDB.open(t.name,t.version);c.onsuccess=p=>{i(p.target.result)},c.onblocked=()=>{a(new kd(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},c.onerror=p=>{const y=p.target.error;a("VersionError"===y.name?new De(re.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===y.name?new De(re.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+y):new kd(e,y))},c.onupgradeneeded=p=>{ke("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',p.oldVersion),t.S.$(p.target.result,c.transaction,p.oldVersion,t.version).next(()=>{ke("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.B&&(t.db.onversionchange=i=>t.B(i)),t.db})()}L(e){this.B=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,i,a){var c=this;return(0,z.Z)(function*(){const p="readonly"===t;let y=0;for(;;){++y;try{c.db=yield c.F(e);const D=Bp.open(c.db,e,p?"readonly":"readwrite",i),T=a(D).next(x=>(D.V(),x)).catch(x=>(D.abort(x),J.reject(x))).toPromise();return T.catch(()=>{}),yield D.v,T}catch(D){const T=D,x="FirebaseError"!==T.name&&y<3;if(ke("SimpleDb","Transaction failed with error:",T.message,"Retrying:",x),c.close(),!x)return Promise.reject(T)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class ME{constructor(e){this.q=e,this.U=!1,this.K=null}get isDone(){return this.U}get G(){return this.K}set cursor(e){this.q=e}done(){this.U=!0}j(e){this.K=e}delete(){return ku(this.q.delete())}}class kd extends De{constructor(e,t){super(re.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Bs(n){return"IndexedDbTransactionError"===n.name}class NE{constructor(e){this.store=e}put(e,t){let i;return void 0!==t?(ke("SimpleDb","PUT",this.store.name,e,t),i=this.store.put(t,e)):(ke("SimpleDb","PUT",this.store.name,"<auto-key>",e),i=this.store.put(e)),ku(i)}add(e){return ke("SimpleDb","ADD",this.store.name,e,e),ku(this.store.add(e))}get(e){return ku(this.store.get(e)).next(t=>(void 0===t&&(t=null),ke("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return ke("SimpleDb","DELETE",this.store.name,e),ku(this.store.delete(e))}count(){return ke("SimpleDb","COUNT",this.store.name),ku(this.store.count())}W(e,t){const i=this.options(e,t);if(i.index||"function"!=typeof this.store.getAll){const a=this.cursor(i),c=[];return this.H(a,(p,y)=>{c.push(y)}).next(()=>c)}{const a=this.store.getAll(i.range);return new J((c,p)=>{a.onerror=y=>{p(y.target.error)},a.onsuccess=y=>{c(y.target.result)}})}}J(e,t){const i=this.store.getAll(e,null===t?void 0:t);return new J((a,c)=>{i.onerror=p=>{c(p.target.error)},i.onsuccess=p=>{a(p.target.result)}})}Y(e,t){ke("SimpleDb","DELETE ALL",this.store.name);const i=this.options(e,t);i.X=!1;const a=this.cursor(i);return this.H(a,(c,p,y)=>y.delete())}Z(e,t){let i;t?i=e:(i={},t=e);const a=this.cursor(i);return this.H(a,t)}tt(e){const t=this.cursor({});return new J((i,a)=>{t.onerror=c=>{const p=Bm(c.target.error);a(p)},t.onsuccess=c=>{const p=c.target.result;p?e(p.primaryKey,p.value).next(y=>{y?p.continue():i()}):i()}})}H(e,t){const i=[];return new J((a,c)=>{e.onerror=p=>{c(p.target.error)},e.onsuccess=p=>{const y=p.target.result;if(!y)return void a();const D=new ME(y),T=t(y.primaryKey,y.value,D);if(T instanceof J){const x=T.catch(R=>(D.done(),J.reject(R)));i.push(x)}D.isDone?a():null===D.G?y.continue():y.continue(D.G)}}).next(()=>J.waitFor(i))}options(e,t){let i;return void 0!==e&&("string"==typeof e?i=e:t=e),{index:i,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const i=this.store.index(e.index);return e.X?i.openKeyCursor(e.range,t):i.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function ku(n){return new J((e,t)=>{n.onsuccess=i=>{e(i.target.result)},n.onerror=i=>{const a=Bm(i.target.error);t(a)}})}let Fv=!1;function Bm(n){const e=Jr.D((0,Dt.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const i=new De("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Fv||(Fv=!0,setTimeout(()=>{throw i},0)),i}}return n}class RE{constructor(e,t){this.asyncQueue=e,this.et=t,this.task=null}start(){this.nt(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}nt(e){var t=this;ke("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,z.Z)(function*(){t.task=null;try{ke("IndexBackiller",`Documents written: ${yield t.et.st()}`)}catch(i){Bs(i)?ke("IndexBackiller","Ignoring IndexedDB error during index backfill: ",i):yield Ru(i)}yield t.nt(6e4)}))}}class kE{constructor(e,t){this.localStore=e,this.persistence=t}st(e=50){var t=this;return(0,z.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",i=>t.it(i,e))})()}it(e,t){const i=new Set;let a=t,c=!0;return J.doWhile(()=>!0===c&&a>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(p=>{if(null!==p&&!i.has(p))return ke("IndexBackiller",`Processing collection: ${p}`),this.rt(e,p,a).next(y=>{a-=y,i.add(p)});c=!1})).next(()=>t-a)}rt(e,t,i){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(a=>this.localStore.localDocuments.getNextDocuments(e,t,a,i).next(c=>{const p=c.changes;return this.localStore.indexManager.updateIndexEntries(e,p).next(()=>this.ot(a,c)).next(y=>(ke("IndexBackiller",`Updating offset: ${y}`),this.localStore.indexManager.updateCollectionGroup(e,t,y))).next(()=>p.size)}))}ot(e,t){let i=e;return t.changes.forEach((a,c)=>{const p=Fp(c);Lv(p,i)>0&&(i=p)}),new Wi(i.readTime,i.documentKey,Math.max(t.batchId,e.largestBatchId))}}let qi=(()=>{class n{constructor(t,i){this.previousValue=t,i&&(i.sequenceNumberHandler=a=>this.ut(a),this.ct=a=>i.writeSequenceNumber(a))}ut(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ct&&this.ct(t),t}}return n.at=-1,n})();class Vv{constructor(e,t,i,a,c,p,y,D){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=a,this.ssl=c,this.forceLongPolling=p,this.autoDetectLongPolling=y,this.useFetchStreams=D}}class Pu{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Pu("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Pu&&e.projectId===this.projectId&&e.database===this.database}}function Um(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Ou(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function Up(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function jp(n){return null==n}function el(n){return 0===n&&1/n==-1/0}function Bv(n){return"number"==typeof n&&Number.isInteger(n)&&!el(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}class Fn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new Fn(t)}static fromUint8Array(e){const t=function(i){let a="";for(let c=0;c<i.length;++c)a+=String.fromCharCode(i[c]);return a}(e);return new Fn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let i=0;i<e.length;i++)t[i]=e.charCodeAt(i);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Lt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Fn.EMPTY_BYTE_STRING=new Fn("");const PE=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Lu(n){if(ct(!!n),"string"==typeof n){let e=0;const t=PE.exec(n);if(ct(!!t),t[1]){let a=t[1];a=(a+"000000000").substr(0,9),e=Number(a)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:$n(n.seconds),nanos:$n(n.nanos)}}function $n(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function tl(n){return"string"==typeof n?Fn.fromBase64String(n):Fn.fromUint8Array(n)}function jm(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function Ef(n){const e=n.mapValue.fields.__previous_value__;return jm(e)?Ef(e):e}function Co(n){const e=Lu(n.mapValue.fields.__local_write_time__.timestampValue);return new An(e.seconds,e.nanos)}const So={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Fu={nullValue:"NULL_VALUE"};function Na(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?jm(n)?4:jv(n)?9007199254740991:10:it()}function Ki(n,e){if(n===e)return!0;const t=Na(n);if(t!==Na(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Co(n).isEqual(Co(e));case 3:return function(i,a){if("string"==typeof i.timestampValue&&"string"==typeof a.timestampValue&&i.timestampValue.length===a.timestampValue.length)return i.timestampValue===a.timestampValue;const c=Lu(i.timestampValue),p=Lu(a.timestampValue);return c.seconds===p.seconds&&c.nanos===p.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return a=e,tl(n.bytesValue).isEqual(tl(a.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,a){return $n(i.geoPointValue.latitude)===$n(a.geoPointValue.latitude)&&$n(i.geoPointValue.longitude)===$n(a.geoPointValue.longitude)}(n,e);case 2:return function(i,a){if("integerValue"in i&&"integerValue"in a)return $n(i.integerValue)===$n(a.integerValue);if("doubleValue"in i&&"doubleValue"in a){const c=$n(i.doubleValue),p=$n(a.doubleValue);return c===p?el(c)===el(p):isNaN(c)&&isNaN(p)}return!1}(n,e);case 9:return At(n.arrayValue.values||[],e.arrayValue.values||[],Ki);case 10:return function(i,a){const c=i.mapValue.fields||{},p=a.mapValue.fields||{};if(Um(c)!==Um(p))return!1;for(const y in c)if(c.hasOwnProperty(y)&&(void 0===p[y]||!Ki(c[y],p[y])))return!1;return!0}(n,e);default:return it()}var a}function Pd(n,e){return void 0!==(n.values||[]).find(t=>Ki(t,e))}function Ao(n,e){if(n===e)return 0;const t=Na(n),i=Na(e);if(t!==i)return Lt(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return Lt(n.booleanValue,e.booleanValue);case 2:return function(a,c){const p=$n(a.integerValue||a.doubleValue),y=$n(c.integerValue||c.doubleValue);return p<y?-1:p>y?1:p===y?0:isNaN(p)?isNaN(y)?0:-1:1}(n,e);case 3:return $p(n.timestampValue,e.timestampValue);case 4:return $p(Co(n),Co(e));case 5:return Lt(n.stringValue,e.stringValue);case 6:return function(a,c){const p=tl(a),y=tl(c);return p.compareTo(y)}(n.bytesValue,e.bytesValue);case 7:return function(a,c){const p=a.split("/"),y=c.split("/");for(let D=0;D<p.length&&D<y.length;D++){const T=Lt(p[D],y[D]);if(0!==T)return T}return Lt(p.length,y.length)}(n.referenceValue,e.referenceValue);case 8:return function(a,c){const p=Lt($n(a.latitude),$n(c.latitude));return 0!==p?p:Lt($n(a.longitude),$n(c.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(a,c){const p=a.values||[],y=c.values||[];for(let D=0;D<p.length&&D<y.length;++D){const T=Ao(p[D],y[D]);if(T)return T}return Lt(p.length,y.length)}(n.arrayValue,e.arrayValue);case 10:return function(a,c){if(a===So.mapValue&&c===So.mapValue)return 0;if(a===So.mapValue)return 1;if(c===So.mapValue)return-1;const p=a.fields||{},y=Object.keys(p),D=c.fields||{},T=Object.keys(D);y.sort(),T.sort();for(let x=0;x<y.length&&x<T.length;++x){const R=Lt(y[x],T[x]);if(0!==R)return R;const q=Ao(p[y[x]],D[T[x]]);if(0!==q)return q}return Lt(y.length,T.length)}(n.mapValue,e.mapValue);default:throw it()}}function $p(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Lt(n,e);const t=Lu(n),i=Lu(e),a=Lt(t.seconds,i.seconds);return 0!==a?a:Lt(t.nanos,i.nanos)}function Vu(n){return Hp(n)}function Hp(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(i){const a=Lu(i);return`time(${a.seconds},${a.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?tl(n.bytesValue).toBase64():"referenceValue"in n?$e.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(i){let a="[",c=!0;for(const p of i.values||[])c?c=!1:a+=",",a+=Hp(p);return a+"]"}(n.arrayValue):"mapValue"in n?function(i){const a=Object.keys(i.fields||{}).sort();let c="{",p=!0;for(const y of a)p?p=!1:c+=",",c+=`${y}:${Hp(i.fields[y])}`;return c+"}"}(n.mapValue):it();var e}function Ra(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function $m(n){return!!n&&"integerValue"in n}function wf(n){return!!n&&"arrayValue"in n}function Hm(n){return!!n&&"nullValue"in n}function Uv(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Df(n){return!!n&&"mapValue"in n}function Od(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Ou(n.mapValue.fields,(t,i)=>e.mapValue.fields[t]=Od(i)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Od(n.arrayValue.values[t]);return e}return Object.assign({},n)}function jv(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function OE(n){return"nullValue"in n?Fu:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Ra(Pu.empty(),$e.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:it()}function Zi(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Ra(Pu.empty(),$e.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?So:it()}function Gm(n,e){const t=Ao(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function $v(n,e){const t=Ao(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class nl{constructor(e,t){this.position=e,this.inclusive=t}}function Gp(n,e,t){let i=0;for(let a=0;a<n.position.length;a++){const c=e[a],p=n.position[a];if(i=c.field.isKeyField()?$e.comparator($e.fromName(p.referenceValue),t.key):Ao(p,t.data.field(c.field)),"desc"===c.dir&&(i*=-1),0!==i)break}return i}function zm(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Ki(n.position[t],e.position[t]))return!1;return!0}class Hv{}class Qt extends Hv{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,i):new LE(e,t,i):"array-contains"===t?new FE(e,i):"in"===t?new Ym(e,i):"not-in"===t?new VE(e,i):"array-contains-any"===t?new BE(e,i):new Qt(e,t,i)}static createKeyFieldInFilter(e,t,i){return"in"===t?new xo(e,i):new Zm(e,i)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Ao(t,this.value)):null!==t&&Na(this.value)===Na(t)&&this.matchesComparison(Ao(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return it()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class un extends Hv{constructor(e,t){super(),this.filters=e,this.op=t,this.ht=null}static create(e,t){return new un(e,t)}matches(e){return rl(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.ht||(this.ht=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ht}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.lt(t=>t.isInequality());return null!==e?e.field:null}lt(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function rl(n){return"and"===n.op}function Wm(n){return"or"===n.op}function qm(n){return zp(n)&&rl(n)}function zp(n){for(const e of n.filters)if(e instanceof un)return!1;return!0}function Km(n){if(n instanceof Qt)return n.field.canonicalString()+n.op.toString()+Vu(n.value);if(qm(n))return n.filters.map(e=>Km(e)).join(",");{const e=n.filters.map(t=>Km(t)).join(",");return`${n.op}(${e})`}}function Gv(n,e){return n instanceof Qt?(t=n,(i=e)instanceof Qt&&t.op===i.op&&t.field.isEqual(i.field)&&Ki(t.value,i.value)):n instanceof un?function(t,i){return i instanceof un&&t.op===i.op&&t.filters.length===i.filters.length&&t.filters.reduce((a,c,p)=>a&&Gv(c,i.filters[p]),!0)}(n,e):void it();var t,i}function zv(n,e){const t=n.filters.concat(e);return un.create(t,n.op)}function Wv(n){return n instanceof Qt?`${(e=n).field.canonicalString()} ${e.op} ${Vu(e.value)}`:n instanceof un?function(e){return e.op.toString()+" {"+e.getFilters().map(Wv).join(" ,")+"}"}(n):"Filter";var e}class LE extends Qt{constructor(e,t,i){super(e,t,i),this.key=$e.fromName(i.referenceValue)}matches(e){const t=$e.comparator(e.key,this.key);return this.matchesComparison(t)}}class xo extends Qt{constructor(e,t){super(e,"in",t),this.keys=qv(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class Zm extends Qt{constructor(e,t){super(e,"not-in",t),this.keys=qv(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function qv(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(i=>$e.fromName(i.referenceValue))}class FE extends Qt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return wf(t)&&Pd(t.arrayValue,this.value)}}class Ym extends Qt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Pd(this.value.arrayValue,t)}}class VE extends Qt{constructor(e,t){super(e,"not-in",t)}matches(e){if(Pd(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Pd(this.value.arrayValue,t)}}class BE extends Qt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!wf(t)||!t.arrayValue.values)&&t.arrayValue.values.some(i=>Pd(this.value.arrayValue,i))}}class Ld{constructor(e,t="asc"){this.field=e,this.dir=t}}function Qm(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class Kn{constructor(e,t){this.comparator=e,this.root=t||cr.EMPTY}insert(e,t){return new Kn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,cr.BLACK,null,null))}remove(e){return new Kn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,cr.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(0===i)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const a=this.comparator(e,i.key);if(0===a)return t+i.left.size;a<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,i)=>(e(t,i),!1))}toString(){const e=[];return this.inorderTraversal((t,i)=>(e.push(`${t}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Wp(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Wp(this.root,e,this.comparator,!1)}getReverseIterator(){return new Wp(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Wp(this.root,e,this.comparator,!0)}}class Wp{constructor(e,t,i,a){this.isReverse=a,this.nodeStack=[];let c=1;for(;!e.isEmpty();)if(c=t?i(e.key,t):1,t&&a&&(c*=-1),c<0)e=this.isReverse?e.left:e.right;else{if(0===c){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class cr{constructor(e,t,i,a,c){this.key=e,this.value=t,this.color=i??cr.RED,this.left=a??cr.EMPTY,this.right=c??cr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,a,c){return new cr(e??this.key,t??this.value,i??this.color,a??this.left,c??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let a=this;const c=i(e,a.key);return a=c<0?a.copy(null,null,null,a.left.insert(e,t,i),null):0===c?a.copy(null,t,null,null,null):a.copy(null,null,null,null,a.right.insert(e,t,i)),a.fixUp()}removeMin(){if(this.left.isEmpty())return cr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,a=this;if(t(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,t),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),0===t(e,a.key)){if(a.right.isEmpty())return cr.EMPTY;i=a.right.min(),a=a.copy(i.key,i.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,t))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,cr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,cr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw it();const e=this.left.check();if(e!==this.right.check())throw it();return e+(this.isRed()?0:1)}}cr.EMPTY=null,cr.RED=!0,cr.BLACK=!1,cr.EMPTY=new class{constructor(){this.size=0}get key(){throw it()}get value(){throw it()}get color(){throw it()}get left(){throw it()}get right(){throw it()}copy(n,e,t,i,a){return this}insert(n,e,t){return new cr(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class sn{constructor(e){this.comparator=e,this.data=new Kn(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,i)=>(e(t),!1))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const a=i.getNext();if(this.comparator(a.key,e[1])>=0)return;t(a.key)}}forEachWhile(e,t){let i;for(i=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new bf(this.data.getIterator())}getIteratorFrom(e){return new bf(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(i=>{t=t.add(i)}),t}isEqual(e){if(!(e instanceof sn)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const a=t.getNext().key,c=i.getNext().key;if(0!==this.comparator(a,c))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new sn(this.comparator);return t.data=e,t}}class bf{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Tf(n){return n.hasNext()?n.getNext():void 0}class ei{constructor(e){this.fields=e,e.sort(qn.comparator)}static empty(){return new ei([])}unionWith(e){let t=new sn(qn.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new ei(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return At(this.fields,e.fields,(t,i)=>t.isEqual(i))}}class ti{constructor(e){this.value=e}static empty(){return new ti({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!Df(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Od(t)}setAll(e){let t=qn.emptyPath(),i={},a=[];e.forEach((p,y)=>{if(!t.isImmediateParentOf(y)){const D=this.getFieldsMap(t);this.applyChanges(D,i,a),i={},a=[],t=y.popLast()}p?i[y.lastSegment()]=Od(p):a.push(y.lastSegment())});const c=this.getFieldsMap(t);this.applyChanges(c,i,a)}delete(e){const t=this.field(e.popLast());Df(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ki(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let a=t.mapValue.fields[e.get(i)];Df(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=a),t=a}return t.mapValue.fields}applyChanges(e,t,i){Ou(t,(a,c)=>e[a]=c);for(const a of i)delete e[a]}clone(){return new ti(Od(this.value))}}function Xm(n){const e=[];return Ou(n.fields,(t,i)=>{const a=new qn([t]);if(Df(i)){const c=Xm(i.mapValue).fields;if(0===c.length)e.push(a);else for(const p of c)e.push(a.child(p))}else e.push(a)}),new ei(e)}class bn{constructor(e,t,i,a,c,p,y){this.key=e,this.documentType=t,this.version=i,this.readTime=a,this.createTime=c,this.data=p,this.documentState=y}static newInvalidDocument(e){return new bn(e,0,dt.min(),dt.min(),dt.min(),ti.empty(),0)}static newFoundDocument(e,t,i,a){return new bn(e,1,t,dt.min(),i,a,0)}static newNoDocument(e,t){return new bn(e,2,t,dt.min(),dt.min(),ti.empty(),0)}static newUnknownDocument(e,t){return new bn(e,3,t,dt.min(),dt.min(),ti.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(dt.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ti.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ti.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=dt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof bn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new bn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Kv{constructor(e,t=null,i=[],a=[],c=null,p=null,y=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=a,this.limit=c,this.startAt=p,this.endAt=y,this.ft=null}}function qp(n,e=null,t=[],i=[],a=null,c=null,p=null){return new Kv(n,e,t,i,a,c,p)}function ka(n){const e=ze(n);if(null===e.ft){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(i=>Km(i)).join(","),t+="|ob:",t+=e.orderBy.map(i=>{return(a=i).field.canonicalString()+a.dir;var a}).join(","),jp(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(i=>Vu(i)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(i=>Vu(i)).join(",")),e.ft=t}return e.ft}function Yi(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!Qm(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!Gv(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!zm(n.startAt,e.startAt)&&zm(n.endAt,e.endAt)}function il(n){return $e.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function sl(n,e){return n.filters.filter(t=>t instanceof Qt&&t.field.isEqual(e))}function Fd(n,e,t){let i=Fu,a=!0;for(const c of sl(n,e)){let p=Fu,y=!0;switch(c.op){case"<":case"<=":p=OE(c.value);break;case"==":case"in":case">=":p=c.value;break;case">":p=c.value,y=!1;break;case"!=":case"not-in":p=Fu}Gm({value:i,inclusive:a},{value:p,inclusive:y})<0&&(i=p,a=y)}if(null!==t)for(let c=0;c<n.orderBy.length;++c)if(n.orderBy[c].field.isEqual(e)){const p=t.position[c];Gm({value:i,inclusive:a},{value:p,inclusive:t.inclusive})<0&&(i=p,a=t.inclusive);break}return{value:i,inclusive:a}}function Zv(n,e,t){let i=So,a=!0;for(const c of sl(n,e)){let p=So,y=!0;switch(c.op){case">=":case">":p=Zi(c.value),y=!1;break;case"==":case"in":case"<=":p=c.value;break;case"<":p=c.value,y=!1;break;case"!=":case"not-in":p=So}$v({value:i,inclusive:a},{value:p,inclusive:y})>0&&(i=p,a=y)}if(null!==t)for(let c=0;c<n.orderBy.length;++c)if(n.orderBy[c].field.isEqual(e)){const p=t.position[c];$v({value:i,inclusive:a},{value:p,inclusive:t.inclusive})>0&&(i=p,a=t.inclusive);break}return{value:i,inclusive:a}}class Mo{constructor(e,t=null,i=[],a=[],c=null,p="F",y=null,D=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=a,this.limit=c,this.limitType=p,this.startAt=y,this.endAt=D,this.dt=null,this._t=null}}function Jm(n,e,t,i,a,c,p,y){return new Mo(n,e,t,i,a,c,p,y)}function Vd(n){return new Mo(n)}function Yv(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function ol(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function Kp(n){for(const e of n.filters){const t=e.getFirstInequalityField();if(null!==t)return t}return null}function Qv(n){return null!==n.collectionGroup}function al(n){const e=ze(n);if(null===e.dt){e.dt=[];const t=Kp(e),i=ol(e);if(null!==t&&null===i)t.isKeyField()||e.dt.push(new Ld(t)),e.dt.push(new Ld(qn.keyField(),"asc"));else{let a=!1;for(const c of e.explicitOrderBy)e.dt.push(c),c.field.isKeyField()&&(a=!0);if(!a){const c=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.dt.push(new Ld(qn.keyField(),c))}}}return e.dt}function yi(n){const e=ze(n);if(!e._t)if("F"===e.limitType)e._t=qp(e.path,e.collectionGroup,al(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const c of al(e))t.push(new Ld(c.field,"desc"===c.dir?"asc":"desc"));const i=e.endAt?new nl(e.endAt.position,e.endAt.inclusive):null,a=e.startAt?new nl(e.startAt.position,e.startAt.inclusive):null;e._t=qp(e.path,e.collectionGroup,t,e.filters,e.limit,i,a)}return e._t}function ey(n,e){e.getFirstInequalityField(),Kp(n);const t=n.filters.concat([e]);return new Mo(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Zp(n,e,t){return new Mo(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Cf(n,e){return Yi(yi(n),yi(e))&&n.limitType===e.limitType}function Xv(n){return`${ka(yi(n))}|lt:${n.limitType}`}function ty(n){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(i=>Wv(i)).join(", ")}]`),jp(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(i=>{return`${(a=i).field.canonicalString()} (${a.dir})`;var a}).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(i=>Vu(i)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(i=>Vu(i)).join(",")),`Target(${t})`}(yi(n))}; limitType=${n.limitType})`}function Bd(n,e){return e.isFoundDocument()&&function(t,i){const a=i.key.path;return null!==t.collectionGroup?i.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(a):$e.isDocumentKey(t.path)?t.path.isEqual(a):t.path.isImmediateParentOf(a)}(n,e)&&function(t,i){for(const a of al(t))if(!a.field.isKeyField()&&null===i.data.field(a.field))return!1;return!0}(n,e)&&function(t,i){for(const a of t.filters)if(!a.matches(i))return!1;return!0}(n,e)&&(i=e,!((t=n).startAt&&!function(a,c,p){const y=Gp(a,c,p);return a.inclusive?y<=0:y<0}(t.startAt,al(t),i)||t.endAt&&!function(a,c,p){const y=Gp(a,c,p);return a.inclusive?y>=0:y>0}(t.endAt,al(t),i)));var t,i}function ny(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function Jv(n){return(e,t)=>{let i=!1;for(const a of al(n)){const c=ry(a,e,t);if(0!==c)return c;i=i||a.field.isKeyField()}return 0}}function ry(n,e,t){const i=n.field.isKeyField()?$e.comparator(e.key,t.key):function(a,c,p){const y=c.data.field(a),D=p.data.field(a);return null!==y&&null!==D?Ao(y,D):it()}(n.field,e,t);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return it()}}function e0(n,e){if(n.wt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:el(e)?"-0":e}}function t0(n){return{integerValue:""+n}}function n0(n,e){return Bv(e)?t0(e):e0(n,e)}class Yp{constructor(){this._=void 0}}function UE(n,e,t){return n instanceof ul?function(i,a){const c={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return a&&(c.fields.__previous_value__=a),{mapValue:c}}(t,e):n instanceof Bu?s0(n,e):n instanceof Ud?iy(n,e):function(i,a){const c=r0(i,a),p=Uu(c)+Uu(i.gt);return $m(c)&&$m(i.gt)?t0(p):e0(i.yt,p)}(n,e)}function jE(n,e,t){return n instanceof Bu?s0(n,e):n instanceof Ud?iy(n,e):t}function r0(n,e){return n instanceof Pa?$m(t=e)||(i=t)&&"doubleValue"in i?e:{integerValue:0}:null;var i,t}class ul extends Yp{}class Bu extends Yp{constructor(e){super(),this.elements=e}}function s0(n,e){const t=$E(e);for(const i of n.elements)t.some(a=>Ki(a,i))||t.push(i);return{arrayValue:{values:t}}}class Ud extends Yp{constructor(e){super(),this.elements=e}}function iy(n,e){let t=$E(e);for(const i of n.elements)t=t.filter(a=>!Ki(a,i));return{arrayValue:{values:t}}}class Pa extends Yp{constructor(e,t){super(),this.yt=e,this.gt=t}}function Uu(n){return $n(n.integerValue||n.doubleValue)}function $E(n){return wf(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class ju{constructor(e,t){this.field=e,this.transform=t}}class GE{constructor(e,t){this.version=e,this.transformResults=t}}class Tn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Tn}static exists(e){return new Tn(void 0,e)}static updateTime(e){return new Tn(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Qp(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class Qi{}function jd(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new js(n.key,Tn.none()):new cl(n.key,n.data,Tn.none());{const t=n.data,i=ti.empty();let a=new sn(qn.comparator);for(let c of e.fields)if(!a.has(c)){let p=t.field(c);null===p&&c.length>1&&(c=c.popLast(),p=t.field(c)),null===p?i.delete(c):i.set(c,p),a=a.add(c)}return new Ai(n.key,i,new ei(a.toArray()),Tn.none())}}function ni(n,e,t){n instanceof cl?function(i,a,c){const p=i.value.clone(),y=dl(i.fieldTransforms,a,c.transformResults);p.setAll(y),a.convertToFoundDocument(c.version,p).setHasCommittedMutations()}(n,e,t):n instanceof Ai?function(i,a,c){if(!Qp(i.precondition,a))return void a.convertToUnknownDocument(c.version);const p=dl(i.fieldTransforms,a,c.transformResults),y=a.data;y.setAll(ll(i)),y.setAll(p),a.convertToFoundDocument(c.version,y).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function Us(n,e,t,i){return n instanceof cl?function(a,c,p,y){if(!Qp(a.precondition,c))return p;const D=a.value.clone(),T=hl(a.fieldTransforms,y,c);return D.setAll(T),c.convertToFoundDocument(c.version,D).setHasLocalMutations(),null}(n,e,t,i):n instanceof Ai?function(a,c,p,y){if(!Qp(a.precondition,c))return p;const D=hl(a.fieldTransforms,y,c),T=c.data;return T.setAll(ll(a)),T.setAll(D),c.convertToFoundDocument(c.version,T).setHasLocalMutations(),null===p?null:p.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map(x=>x.field))}(n,e,t,i):(p=t,Qp(n.precondition,c=e)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):p);var c,p}function Xp(n,e){let t=null;for(const i of n.fieldTransforms){const a=e.data.field(i.field),c=r0(i.transform,a||null);null!=c&&(null===t&&(t=ti.empty()),t.set(i.field,c))}return t||null}function Xi(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(i=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===i||t&&i&&At(t,i,(a,c)=>function HE(n,e){return n.field.isEqual(e.field)&&(i=e.transform,(t=n.transform)instanceof Bu&&i instanceof Bu||t instanceof Ud&&i instanceof Ud?At(t.elements,i.elements,Ki):t instanceof Pa&&i instanceof Pa?Ki(t.gt,i.gt):t instanceof ul&&i instanceof ul);var t,i}(a,c))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,i}class cl extends Qi{constructor(e,t,i,a=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class Ai extends Qi{constructor(e,t,i,a,c=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=a,this.fieldTransforms=c,this.type=1}getFieldMask(){return this.fieldMask}}function ll(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const i=n.data.field(t);e.set(t,i)}}),e}function dl(n,e,t){const i=new Map;ct(n.length===t.length);for(let a=0;a<t.length;a++){const c=n[a],p=c.transform,y=e.data.field(c.field);i.set(c.field,jE(p,y,t[a]))}return i}function hl(n,e,t){const i=new Map;for(const a of n){const c=a.transform,p=t.data.field(a.field);i.set(a.field,UE(c,p,e))}return i}class js extends Qi{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class $u extends Qi{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class $d{constructor(e){this.count=e}}var xn,Ht;function sy(n){switch(n){default:return it();case re.CANCELLED:case re.UNKNOWN:case re.DEADLINE_EXCEEDED:case re.RESOURCE_EXHAUSTED:case re.INTERNAL:case re.UNAVAILABLE:case re.UNAUTHENTICATED:return!1;case re.INVALID_ARGUMENT:case re.NOT_FOUND:case re.ALREADY_EXISTS:case re.PERMISSION_DENIED:case re.FAILED_PRECONDITION:case re.ABORTED:case re.OUT_OF_RANGE:case re.UNIMPLEMENTED:case re.DATA_LOSS:return!0}}function oy(n){if(void 0===n)return Jn("GRPC error has no .code"),re.UNKNOWN;switch(n){case xn.OK:return re.OK;case xn.CANCELLED:return re.CANCELLED;case xn.UNKNOWN:return re.UNKNOWN;case xn.DEADLINE_EXCEEDED:return re.DEADLINE_EXCEEDED;case xn.RESOURCE_EXHAUSTED:return re.RESOURCE_EXHAUSTED;case xn.INTERNAL:return re.INTERNAL;case xn.UNAVAILABLE:return re.UNAVAILABLE;case xn.UNAUTHENTICATED:return re.UNAUTHENTICATED;case xn.INVALID_ARGUMENT:return re.INVALID_ARGUMENT;case xn.NOT_FOUND:return re.NOT_FOUND;case xn.ALREADY_EXISTS:return re.ALREADY_EXISTS;case xn.PERMISSION_DENIED:return re.PERMISSION_DENIED;case xn.FAILED_PRECONDITION:return re.FAILED_PRECONDITION;case xn.ABORTED:return re.ABORTED;case xn.OUT_OF_RANGE:return re.OUT_OF_RANGE;case xn.UNIMPLEMENTED:return re.UNIMPLEMENTED;case xn.DATA_LOSS:return re.DATA_LOSS;default:return it()}}(Ht=xn||(xn={}))[Ht.OK=0]="OK",Ht[Ht.CANCELLED=1]="CANCELLED",Ht[Ht.UNKNOWN=2]="UNKNOWN",Ht[Ht.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ht[Ht.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ht[Ht.NOT_FOUND=5]="NOT_FOUND",Ht[Ht.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ht[Ht.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ht[Ht.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ht[Ht.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ht[Ht.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ht[Ht.ABORTED=10]="ABORTED",Ht[Ht.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ht[Ht.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ht[Ht.INTERNAL=13]="INTERNAL",Ht[Ht.UNAVAILABLE=14]="UNAVAILABLE",Ht[Ht.DATA_LOSS=15]="DATA_LOSS";class Oa{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(void 0!==i)for(const[a,c]of i)if(this.equalsFn(a,e))return c}has(e){return void 0!==this.get(e)}set(e,t){const i=this.mapKeyFn(e),a=this.inner[i];if(void 0===a)return this.inner[i]=[[e,t]],void this.innerSize++;for(let c=0;c<a.length;c++)if(this.equalsFn(a[c][0],e))return void(a[c]=[e,t]);a.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(void 0===i)return!1;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return 1===i.length?delete this.inner[t]:i.splice(a,1),this.innerSize--,!0;return!1}forEach(e){Ou(this.inner,(t,i)=>{for(const[a,c]of i)e(a,c)})}isEmpty(){return Up(this.inner)}size(){return this.innerSize}}const o0=new Kn($e.comparator);function _i(){return o0}const ay=new Kn($e.comparator);function Hd(...n){let e=ay;for(const t of n)e=e.insert(t.key,t);return e}function uy(n){let e=ay;return n.forEach((t,i)=>e=e.insert(t,i.overlayedDocument)),e}function $s(){return Sf()}function a0(){return Sf()}function Sf(){return new Oa(n=>n.toString(),(n,e)=>n.isEqual(e))}const u0=new Kn($e.comparator),zE=new sn($e.comparator);function Bt(...n){let e=zE;for(const t of n)e=e.add(t);return e}const cy=new sn(Lt);function Gd(){return cy}class Af{constructor(e,t,i,a,c){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=a,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const a=new Map;return a.set(e,Hu.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new Af(dt.min(),a,Gd(),_i(),Bt())}}class Hu{constructor(e,t,i,a,c){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=a,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new Hu(i,t,Bt(),Bt(),Bt())}}class fl{constructor(e,t,i,a){this.It=e,this.removedTargetIds=t,this.key=i,this.Tt=a}}class Jp{constructor(e,t){this.targetId=e,this.Et=t}}class c0{constructor(e,t,i=Fn.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=a}}class eg{constructor(){this.At=0,this.Rt=hy(),this.bt=Fn.EMPTY_BYTE_STRING,this.Pt=!1,this.vt=!0}get current(){return this.Pt}get resumeToken(){return this.bt}get Vt(){return 0!==this.At}get St(){return this.vt}Dt(e){e.approximateByteSize()>0&&(this.vt=!0,this.bt=e)}Ct(){let e=Bt(),t=Bt(),i=Bt();return this.Rt.forEach((a,c)=>{switch(c){case 0:e=e.add(a);break;case 2:t=t.add(a);break;case 1:i=i.add(a);break;default:it()}}),new Hu(this.bt,this.Pt,e,t,i)}xt(){this.vt=!1,this.Rt=hy()}Nt(e,t){this.vt=!0,this.Rt=this.Rt.insert(e,t)}kt(e){this.vt=!0,this.Rt=this.Rt.remove(e)}Ot(){this.At+=1}Mt(){this.At-=1}Ft(){this.vt=!0,this.Pt=!0}}class ly{constructor(e){this.$t=e,this.Bt=new Map,this.Lt=_i(),this.qt=dy(),this.Ut=new sn(Lt)}Kt(e){for(const t of e.It)e.Tt&&e.Tt.isFoundDocument()?this.Gt(t,e.Tt):this.Qt(t,e.key,e.Tt);for(const t of e.removedTargetIds)this.Qt(t,e.key,e.Tt)}jt(e){this.forEachTarget(e,t=>{const i=this.Wt(t);switch(e.state){case 0:this.zt(t)&&i.Dt(e.resumeToken);break;case 1:i.Mt(),i.Vt||i.xt(),i.Dt(e.resumeToken);break;case 2:i.Mt(),i.Vt||this.removeTarget(t);break;case 3:this.zt(t)&&(i.Ft(),i.Dt(e.resumeToken));break;case 4:this.zt(t)&&(this.Ht(t),i.Dt(e.resumeToken));break;default:it()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Bt.forEach((i,a)=>{this.zt(a)&&t(a)})}Jt(e){const t=e.targetId,i=e.Et.count,a=this.Yt(t);if(a){const c=a.target;if(il(c))if(0===i){const p=new $e(c.path);this.Qt(t,p,bn.newNoDocument(p,dt.min()))}else ct(1===i);else this.Xt(t)!==i&&(this.Ht(t),this.Ut=this.Ut.add(t))}}Zt(e){const t=new Map;this.Bt.forEach((c,p)=>{const y=this.Yt(p);if(y){if(c.current&&il(y.target)){const D=new $e(y.target.path);null!==this.Lt.get(D)||this.te(p,D)||this.Qt(p,D,bn.newNoDocument(D,e))}c.St&&(t.set(p,c.Ct()),c.xt())}});let i=Bt();this.qt.forEach((c,p)=>{let y=!0;p.forEachWhile(D=>{const T=this.Yt(D);return!T||2===T.purpose||(y=!1,!1)}),y&&(i=i.add(c))}),this.Lt.forEach((c,p)=>p.setReadTime(e));const a=new Af(e,t,this.Ut,this.Lt,i);return this.Lt=_i(),this.qt=dy(),this.Ut=new sn(Lt),a}Gt(e,t){if(!this.zt(e))return;const i=this.te(e,t.key)?2:0;this.Wt(e).Nt(t.key,i),this.Lt=this.Lt.insert(t.key,t),this.qt=this.qt.insert(t.key,this.ee(t.key).add(e))}Qt(e,t,i){if(!this.zt(e))return;const a=this.Wt(e);this.te(e,t)?a.Nt(t,1):a.kt(t),this.qt=this.qt.insert(t,this.ee(t).delete(e)),i&&(this.Lt=this.Lt.insert(t,i))}removeTarget(e){this.Bt.delete(e)}Xt(e){const t=this.Wt(e).Ct();return this.$t.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ot(e){this.Wt(e).Ot()}Wt(e){let t=this.Bt.get(e);return t||(t=new eg,this.Bt.set(e,t)),t}ee(e){let t=this.qt.get(e);return t||(t=new sn(Lt),this.qt=this.qt.insert(e,t)),t}zt(e){const t=null!==this.Yt(e);return t||ke("WatchChangeAggregator","Detected inactive target",e),t}Yt(e){const t=this.Bt.get(e);return t&&t.Vt?null:this.$t.ne(e)}Ht(e){this.Bt.set(e,new eg),this.$t.getRemoteKeysForTarget(e).forEach(t=>{this.Qt(e,t,null)})}te(e,t){return this.$t.getRemoteKeysForTarget(e).has(t)}}function dy(){return new Kn($e.comparator)}function hy(){return new Kn($e.comparator)}const fy={asc:"ASCENDING",desc:"DESCENDING"},l0={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},WE={and:"AND",or:"OR"};class py{constructor(e,t){this.databaseId=e,this.wt=t}}function pl(n,e){return n.wt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function d0(n,e){return n.wt?e.toBase64():e.toUint8Array()}function h0(n,e){return pl(n,e.toTimestamp())}function Zn(n){return ct(!!n),dt.fromTimestamp(function(e){const t=Lu(e);return new An(t.seconds,t.nanos)}(n))}function tg(n,e){return(t=n,new Jt(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function gy(n){const e=Jt.fromString(n);return ct(y0(e)),e}function xf(n,e){return tg(n.databaseId,e.path)}function No(n,e){const t=gy(e);if(t.get(1)!==n.databaseId.projectId)throw new De(re.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new De(re.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new $e(_y(t))}function my(n,e){return tg(n.databaseId,e)}function yy(n){const e=gy(n);return 4===e.length?Jt.emptyPath():_y(e)}function gl(n){return new Jt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function _y(n){return ct(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function vy(n,e,t){return{name:xf(n,e),fields:t.value.mapValue.fields}}function Iy(n,e,t){const i=No(n,e.name),a=Zn(e.updateTime),c=e.createTime?Zn(e.createTime):dt.min(),p=new ti({mapValue:{fields:e.fields}}),y=bn.newFoundDocument(i,a,c,p);return t&&y.setHasCommittedMutations(),t?y.setHasCommittedMutations():y}function zd(n,e){let t;if(e instanceof cl)t={update:vy(n,e.key,e.value)};else if(e instanceof js)t={delete:xf(n,e.key)};else if(e instanceof Ai)t={update:vy(n,e.key,e.data),updateMask:YE(e.fieldMask)};else{if(!(e instanceof $u))return it();t={verify:xf(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(i=>function(a,c){const p=c.transform;if(p instanceof ul)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(p instanceof Bu)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:p.elements}};if(p instanceof Ud)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:p.elements}};if(p instanceof Pa)return{fieldPath:c.field.canonicalString(),increment:p.gt};throw it()}(0,i))),e.precondition.isNone||(t.currentDocument=void 0!==(a=e.precondition).updateTime?{updateTime:h0(n,a.updateTime)}:void 0!==a.exists?{exists:a.exists}:it()),t;var a}function ng(n,e){const t=e.currentDocument?void 0!==(a=e.currentDocument).updateTime?Tn.updateTime(Zn(a.updateTime)):void 0!==a.exists?Tn.exists(a.exists):Tn.none():Tn.none(),i=e.updateTransforms?e.updateTransforms.map(a=>function(c,p){let y=null;"setToServerValue"in p?(ct("REQUEST_TIME"===p.setToServerValue),y=new ul):"appendMissingElements"in p?y=new Bu(p.appendMissingElements.values||[]):"removeAllFromArray"in p?y=new Ud(p.removeAllFromArray.values||[]):"increment"in p?y=new Pa(c,p.increment):it();const D=qn.fromServerFormat(p.fieldPath);return new ju(D,y)}(n,a)):[];var a;if(e.update){const a=No(n,e.update.name),c=new ti({mapValue:{fields:e.update.fields}});if(e.updateMask){const p=new ei((e.updateMask.fieldPaths||[]).map(T=>qn.fromServerFormat(T)));return new Ai(a,c,p,t,i)}return new cl(a,c,t,i)}if(e.delete){const a=No(n,e.delete);return new js(a,t)}if(e.verify){const a=No(n,e.verify);return new $u(a,t)}return it()}function Mf(n,e){return{documents:[my(n,e.path)]}}function Ro(n,e){const t={structuredQuery:{}},i=e.path;null!==e.collectionGroup?(t.parent=my(n,i),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=my(n,i.popLast()),t.structuredQuery.from=[{collectionId:i.lastSegment()}]);const a=function(D){if(0!==D.length)return ZE(un.create(D,"and"))}(e.filters);a&&(t.structuredQuery.where=a);const c=function(D){if(0!==D.length)return D.map(T=>{return{field:Gu((x=T).field),direction:ml(x.dir)};var x})}(e.orderBy);c&&(t.structuredQuery.orderBy=c);const p=(T=e.limit,n.wt||jp(T)?T:{value:T});var T,y,D;return null!==p&&(t.structuredQuery.limit=p),e.startAt&&(t.structuredQuery.startAt={before:(y=e.startAt).inclusive,values:y.position}),e.endAt&&(t.structuredQuery.endAt={before:!(D=e.endAt).inclusive,values:D.position}),t}function m0(n){let e=yy(n.parent);const t=n.structuredQuery,i=t.from?t.from.length:0;let a=null;if(i>0){ct(1===i);const x=t.from[0];x.allDescendants?a=x.collectionId:e=e.child(x.collectionId)}let c=[];t.where&&(c=function(x){const R=rg(x);return R instanceof un&&qm(R)?R.getFilters():[R]}(t.where));let p=[];t.orderBy&&(p=t.orderBy.map(x=>{return new Ld(Nf((R=x).field),function(q){switch(q){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(R.direction));var R}));let y=null;t.limit&&(y=function(x){let R;return R="object"==typeof x?x.value:x,jp(R)?null:R}(t.limit));let D=null;var x;t.startAt&&(D=new nl((x=t.startAt).values||[],!!x.before));let T=null;return t.endAt&&(T=function(x){return new nl(x.values||[],!x.before)}(t.endAt)),Jm(e,a,p,c,y,"F",D,T)}function rg(n){return void 0!==n.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=Nf(e.unaryFilter.field);return Qt.create(t,"==",{doubleValue:NaN});case"IS_NULL":const i=Nf(e.unaryFilter.field);return Qt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=Nf(e.unaryFilter.field);return Qt.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=Nf(e.unaryFilter.field);return Qt.create(c,"!=",{nullValue:"NULL_VALUE"});default:return it()}}(n):void 0!==n.fieldFilter?Qt.create(Nf((e=n).fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return it()}}(e.fieldFilter.op),e.fieldFilter.value):void 0!==n.compositeFilter?function(e){return un.create(e.compositeFilter.filters.map(t=>rg(t)),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return it()}}(e.compositeFilter.op))}(n):it();var e}function ml(n){return fy[n]}function Ey(n){return l0[n]}function KE(n){return WE[n]}function Gu(n){return{fieldPath:n.canonicalString()}}function Nf(n){return qn.fromServerFormat(n.fieldPath)}function ZE(n){return n instanceof Qt?function(e){if("=="===e.op){if(Uv(e.value))return{unaryFilter:{field:Gu(e.field),op:"IS_NAN"}};if(Hm(e.value))return{unaryFilter:{field:Gu(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Uv(e.value))return{unaryFilter:{field:Gu(e.field),op:"IS_NOT_NAN"}};if(Hm(e.value))return{unaryFilter:{field:Gu(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Gu(e.field),op:Ey(e.op),value:e.value}}}(n):n instanceof un?function(e){const t=e.getFilters().map(i=>ZE(i));return 1===t.length?t[0]:{compositeFilter:{op:KE(e.op),filters:t}}}(n):it()}function YE(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function y0(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function ri(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=lr(e)),e=QE(n.get(t),e);return lr(e)}function QE(n,e){let t=e;const i=n.length;for(let a=0;a<i;a++){const c=n.charAt(a);switch(c){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=c}}return t}function lr(n){return n+"\x01\x01"}function Hs(n){const e=n.length;if(ct(e>=2),2===e)return ct("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),Jt.emptyPath();const t=e-2,i=[];let a="";for(let c=0;c<e;){const p=n.indexOf("\x01",c);switch((p<0||p>t)&&it(),n.charAt(p+1)){case"\x01":const y=n.substring(c,p);let D;0===a.length?D=y:(a+=y,D=a,a=""),i.push(D);break;case"\x10":a+=n.substring(c,p),a+="\0";break;case"\x11":a+=n.substring(c,p+1);break;default:it()}c=p+2}return new Jt(i)}const _0=["userId","batchId"];function ig(n,e){return[n,ri(e)]}function wy(n,e,t){return[n,ri(e),t]}const XE={},v0=["prefixPath","collectionGroup","readTime","documentId"],I0=["prefixPath","collectionGroup","documentId"],Wd=["collectionGroup","readTime","prefixPath","documentId"],JE=["canonicalId","targetId"],ew=["targetId","path"],E0=["path","targetId"],tw=["collectionId","parent"],w0=["indexId","uid"],db=["uid","sequenceNumber"],D0=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],b0=["indexId","uid","orderedDocumentKey"],ko=["userId","collectionPath","documentId"],nw=["userId","collectionPath","largestBatchId"],rw=["userId","collectionGroup","largestBatchId"],Gs=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],zs=[...Gs,"documentOverlays"],vs=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Dy=vs,T0=[...Dy,"indexConfiguration","indexState","indexEntries"];class by extends xE{constructor(e,t){super(),this.se=e,this.currentSequenceNumber=t}}function Or(n,e){const t=ze(n);return Jr.M(t.se,e)}class Ty{constructor(e,t,i,a){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=a}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let a=0;a<this.mutations.length;a++){const c=this.mutations[a];c.key.isEqual(e.key)&&ni(c,e,i[a])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=Us(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=Us(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=a0();return this.mutations.forEach(a=>{const c=e.get(a.key),p=c.overlayedDocument;let y=this.applyToLocalView(p,c.mutatedFields);y=t.has(a.key)?null:y;const D=jd(p,y);null!==D&&i.set(a.key,D),p.isValidDocument()||p.convertToNoDocument(dt.min())}),i}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Bt())}isEqual(e){return this.batchId===e.batchId&&At(this.mutations,e.mutations,(t,i)=>Xi(t,i))&&At(this.baseMutations,e.baseMutations,(t,i)=>Xi(t,i))}}class Cy{constructor(e,t,i,a){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=a}static from(e,t,i){ct(e.mutations.length===i.length);let a=u0;const c=e.mutations;for(let p=0;p<c.length;p++)a=a.insert(c[p].key,i[p].version);return new Cy(e,t,i,a)}}class Rf{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Is{constructor(e,t,i,a,c=dt.min(),p=dt.min(),y=Fn.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=a,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=p,this.resumeToken=y}withSequenceNumber(e){return new Is(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new Is(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new Is(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class C0{constructor(e){this.ie=e}}function A0(n,e){const t=e.key,i={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:kf(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())i.document={name:xf(a=n.ie,(c=e).key),fields:c.data.value.mapValue.fields,updateTime:pl(a,c.version.toTimestamp()),createTime:pl(a,c.createTime.toTimestamp())};else if(e.isNoDocument())i.noDocument={path:t.path.toArray(),readTime:zu(e.version)};else{if(!e.isUnknownDocument())return it();i.unknownDocument={path:t.path.toArray(),version:zu(e.version)}}var a,c;return i}function kf(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function zu(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Po(n){const e=new An(n.seconds,n.nanoseconds);return dt.fromTimestamp(e)}function yl(n,e){const t=(e.baseMutations||[]).map(c=>ng(n.ie,c));for(let c=0;c<e.mutations.length-1;++c)c+1<e.mutations.length&&void 0!==e.mutations[c+1].transform&&(e.mutations[c].updateTransforms=e.mutations[c+1].transform.fieldTransforms,e.mutations.splice(c+1,1),++c);const i=e.mutations.map(c=>ng(n.ie,c)),a=An.fromMillis(e.localWriteTimeMs);return new Ty(e.batchId,a,t,i)}function qd(n){const e=Po(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?Po(n.lastLimboFreeSnapshotVersion):dt.min();let i;var a;return void 0!==n.query.documents?(ct(1===(a=n.query).documents.length),i=yi(Vd(yy(a.documents[0])))):i=yi(m0(n.query)),new Is(i,n.targetId,0,n.lastListenSequenceNumber,e,t,Fn.fromBase64String(n.resumeToken))}function Sy(n,e){const t=zu(e.snapshotVersion),i=zu(e.lastLimboFreeSnapshotVersion);let a;a=il(e.target)?Mf(n.ie,e.target):Ro(n.ie,e.target);const c=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:ka(e.target),readTime:t,resumeToken:c,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:a}}function sg(n){const e=m0({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?Zp(e,e.limit,"L"):e}function Kd(n,e){return new Rf(e.largestBatchId,ng(n.ie,e.overlayMutation))}function Ay(n,e){const t=e.path.lastSegment();return[n,ri(e.path.popLast()),t]}function xy(n,e,t,i){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:zu(i.readTime),documentKey:ri(i.documentKey.path),largestBatchId:i.largestBatchId}}class x0{getBundleMetadata(e,t){return My(e).get(t).next(i=>{if(i)return{id:(a=i).bundleId,createTime:Po(a.createTime),version:a.version};var a})}saveBundleMetadata(e,t){return My(e).put({bundleId:(i=t).id,createTime:zu(Zn(i.createTime)),version:i.version});var i}getNamedQuery(e,t){return Ny(e).get(t).next(i=>{if(i)return{name:(a=i).name,query:sg(a.bundledQuery),readTime:Po(a.readTime)};var a})}saveNamedQuery(e,t){return Ny(e).put({name:(i=t).name,readTime:zu(Zn(i.readTime)),bundledQuery:i.bundledQuery});var i}}function My(n){return Or(n,"bundles")}function Ny(n){return Or(n,"namedQueries")}class Pf{constructor(e,t){this.yt=e,this.userId=t}static re(e,t){return new Pf(e,t.uid||"")}getOverlay(e,t){return Zd(e).get(Ay(this.userId,t)).next(i=>i?Kd(this.yt,i):null)}getOverlays(e,t){const i=$s();return J.forEach(t,a=>this.getOverlay(e,a).next(c=>{null!==c&&i.set(a,c)})).next(()=>i)}saveOverlays(e,t,i){const a=[];return i.forEach((c,p)=>{const y=new Rf(t,p);a.push(this.oe(e,y))}),J.waitFor(a)}removeOverlaysForBatchId(e,t,i){const a=new Set;t.forEach(p=>a.add(ri(p.getCollectionPath())));const c=[];return a.forEach(p=>{const y=IDBKeyRange.bound([this.userId,p,i],[this.userId,p,i+1],!1,!0);c.push(Zd(e).Y("collectionPathOverlayIndex",y))}),J.waitFor(c)}getOverlaysForCollection(e,t,i){const a=$s(),c=ri(t),p=IDBKeyRange.bound([this.userId,c,i],[this.userId,c,Number.POSITIVE_INFINITY],!0);return Zd(e).W("collectionPathOverlayIndex",p).next(y=>{for(const D of y){const T=Kd(this.yt,D);a.set(T.getKey(),T)}return a})}getOverlaysForCollectionGroup(e,t,i,a){const c=$s();let p;const y=IDBKeyRange.bound([this.userId,t,i],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Zd(e).Z({index:"collectionGroupOverlayIndex",range:y},(D,T,x)=>{const R=Kd(this.yt,T);c.size()<a||R.largestBatchId===p?(c.set(R.getKey(),R),p=R.largestBatchId):x.done()}).next(()=>c)}oe(e,t){return Zd(e).put(function(i,a,c){const[p,y,D]=Ay(a,c.mutation.key);return{userId:a,collectionPath:y,documentId:D,collectionGroup:c.mutation.key.getCollectionGroup(),largestBatchId:c.largestBatchId,overlayMutation:zd(i.ie,c.mutation)}}(this.yt,this.userId,t))}}function Zd(n){return Or(n,"documentOverlays")}class Wu{constructor(){}ue(e,t){this.ce(e,t),t.ae()}ce(e,t){if("nullValue"in e)this.he(t,5);else if("booleanValue"in e)this.he(t,10),t.le(e.booleanValue?1:0);else if("integerValue"in e)this.he(t,15),t.le($n(e.integerValue));else if("doubleValue"in e){const i=$n(e.doubleValue);isNaN(i)?this.he(t,13):(this.he(t,15),el(i)?t.le(0):t.le(i))}else if("timestampValue"in e){const i=e.timestampValue;this.he(t,20),"string"==typeof i?t.fe(i):(t.fe(`${i.seconds||""}`),t.le(i.nanos||0))}else if("stringValue"in e)this.de(e.stringValue,t),this._e(t);else if("bytesValue"in e)this.he(t,30),t.we(tl(e.bytesValue)),this._e(t);else if("referenceValue"in e)this.me(e.referenceValue,t);else if("geoPointValue"in e){const i=e.geoPointValue;this.he(t,45),t.le(i.latitude||0),t.le(i.longitude||0)}else"mapValue"in e?jv(e)?this.he(t,Number.MAX_SAFE_INTEGER):(this.ge(e.mapValue,t),this._e(t)):"arrayValue"in e?(this.ye(e.arrayValue,t),this._e(t)):it()}de(e,t){this.he(t,25),this.pe(e,t)}pe(e,t){t.fe(e)}ge(e,t){const i=e.fields||{};this.he(t,55);for(const a of Object.keys(i))this.de(a,t),this.ce(i[a],t)}ye(e,t){const i=e.values||[];this.he(t,50);for(const a of i)this.ce(a,t)}me(e,t){this.he(t,37),$e.fromName(e).path.forEach(i=>{this.he(t,60),this.pe(i,t)})}he(e,t){e.le(t)}_e(e){e.le(2)}}function iw(n){if(0===n)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function M0(n){const e=64-function(t){let i=0;for(let a=0;a<8;++a){const c=iw(255&t[a]);if(i+=c,8!==c)break}return i}(n);return Math.ceil(e/8)}Wu.Ie=new Wu;class sw{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Te(e){const t=e[Symbol.iterator]();let i=t.next();for(;!i.done;)this.Ee(i.value),i=t.next();this.Ae()}Re(e){const t=e[Symbol.iterator]();let i=t.next();for(;!i.done;)this.be(i.value),i=t.next();this.Pe()}ve(e){for(const t of e){const i=t.charCodeAt(0);if(i<128)this.Ee(i);else if(i<2048)this.Ee(960|i>>>6),this.Ee(128|63&i);else if(t<"\ud800"||"\udbff"<t)this.Ee(480|i>>>12),this.Ee(128|63&i>>>6),this.Ee(128|63&i);else{const a=t.codePointAt(0);this.Ee(240|a>>>18),this.Ee(128|63&a>>>12),this.Ee(128|63&a>>>6),this.Ee(128|63&a)}}this.Ae()}Ve(e){for(const t of e){const i=t.charCodeAt(0);if(i<128)this.be(i);else if(i<2048)this.be(960|i>>>6),this.be(128|63&i);else if(t<"\ud800"||"\udbff"<t)this.be(480|i>>>12),this.be(128|63&i>>>6),this.be(128|63&i);else{const a=t.codePointAt(0);this.be(240|a>>>18),this.be(128|63&a>>>12),this.be(128|63&a>>>6),this.be(128|63&a)}}this.Pe()}Se(e){const t=this.De(e),i=M0(t);this.Ce(1+i),this.buffer[this.position++]=255&i;for(let a=t.length-i;a<t.length;++a)this.buffer[this.position++]=255&t[a]}xe(e){const t=this.De(e),i=M0(t);this.Ce(1+i),this.buffer[this.position++]=~(255&i);for(let a=t.length-i;a<t.length;++a)this.buffer[this.position++]=~(255&t[a])}Ne(){this.ke(255),this.ke(255)}Oe(){this.Me(255),this.Me(255)}reset(){this.position=0}seed(e){this.Ce(e.length),this.buffer.set(e,this.position),this.position+=e.length}Fe(){return this.buffer.slice(0,this.position)}De(e){const t=function(a){const c=new DataView(new ArrayBuffer(8));return c.setFloat64(0,a,!1),new Uint8Array(c.buffer)}(e),i=0!=(128&t[0]);t[0]^=i?255:128;for(let a=1;a<t.length;++a)t[a]^=i?255:0;return t}Ee(e){const t=255&e;0===t?(this.ke(0),this.ke(255)):255===t?(this.ke(255),this.ke(0)):this.ke(t)}be(e){const t=255&e;0===t?(this.Me(0),this.Me(255)):255===t?(this.Me(255),this.Me(0)):this.Me(e)}Ae(){this.ke(0),this.ke(1)}Pe(){this.Me(0),this.Me(1)}ke(e){this.Ce(1),this.buffer[this.position++]=e}Me(e){this.Ce(1),this.buffer[this.position++]=~e}Ce(e){const t=e+this.position;if(t<=this.buffer.length)return;let i=2*this.buffer.length;i<t&&(i=t);const a=new Uint8Array(i);a.set(this.buffer),this.buffer=a}}class ow{constructor(e){this.$e=e}we(e){this.$e.Te(e)}fe(e){this.$e.ve(e)}le(e){this.$e.Se(e)}ae(){this.$e.Ne()}}class aw{constructor(e){this.$e=e}we(e){this.$e.Re(e)}fe(e){this.$e.Ve(e)}le(e){this.$e.xe(e)}ae(){this.$e.Oe()}}class Of{constructor(){this.$e=new sw,this.Be=new ow(this.$e),this.Le=new aw(this.$e)}seed(e){this.$e.seed(e)}qe(e){return 0===e?this.Be:this.Le}Fe(){return this.$e.Fe()}reset(){this.$e.reset()}}class _l{constructor(e,t,i,a){this.indexId=e,this.documentKey=t,this.arrayValue=i,this.directionalValue=a}Ue(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,i=new Uint8Array(t);return i.set(this.directionalValue,0),t!==e?i.set([0],this.directionalValue.length):++i[i.length-1],new _l(this.indexId,this.documentKey,this.arrayValue,i)}}function qu(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=N0(n.arrayValue,e.arrayValue),0!==t?t:(t=N0(n.directionalValue,e.directionalValue),0!==t?t:$e.comparator(n.documentKey,e.documentKey)))}function N0(n,e){for(let t=0;t<n.length&&t<e.length;++t){const i=n[t]-e[t];if(0!==i)return i}return n.length-e.length}class uw{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ke=e.orderBy,this.Ge=[];for(const t of e.filters){const i=t;i.isInequality()?this.Qe=i:this.Ge.push(i)}}je(e){ct(e.collectionGroup===this.collectionId);const t=Vm(e);if(void 0!==t&&!this.We(t))return!1;const i=Rd(e);let a=0,c=0;for(;a<i.length&&this.We(i[a]);++a);if(a===i.length)return!0;if(void 0!==this.Qe){const p=i[a];if(!this.ze(this.Qe,p)||!this.He(this.Ke[c++],p))return!1;++a}for(;a<i.length;++a)if(c>=this.Ke.length||!this.He(this.Ke[c++],i[a]))return!1;return!0}We(e){for(const t of this.Ge)if(this.ze(t,e))return!0;return!1}ze(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}He(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function R0(n){var e,t;if(ct(n instanceof Qt||n instanceof un),n instanceof Qt){if(n instanceof Ym){const a=(null===(t=null===(e=n.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(c=>Qt.create(n.field,"==",c)))||[];return un.create(a,"or")}return n}const i=n.filters.map(a=>R0(a));return un.create(i,n.op)}function cw(n){if(0===n.getFilters().length)return[];const e=Py(R0(n));return ct(k0(e)),Ry(e)||ky(e)?[e]:e.getFilters()}function Ry(n){return n instanceof Qt}function ky(n){return n instanceof un&&qm(n)}function k0(n){return Ry(n)||ky(n)||function(e){if(e instanceof un&&Wm(e)){for(const t of e.getFilters())if(!Ry(t)&&!ky(t))return!1;return!0}return!1}(n)}function Py(n){if(ct(n instanceof Qt||n instanceof un),n instanceof Qt)return n;if(1===n.filters.length)return Py(n.filters[0]);const e=n.filters.map(i=>Py(i));let t=un.create(e,n.op);return t=Lf(t),k0(t)?t:(ct(t instanceof un),ct(rl(t)),ct(t.filters.length>1),t.filters.reduce((i,a)=>Oy(i,a)))}function Oy(n,e){let t;return ct(n instanceof Qt||n instanceof un),ct(e instanceof Qt||e instanceof un),t=n instanceof Qt?e instanceof Qt?un.create([n,e],"and"):P0(n,e):e instanceof Qt?P0(e,n):function(i,a){if(ct(i.filters.length>0&&a.filters.length>0),rl(i)&&rl(a))return zv(i,a.getFilters());const c=Wm(i)?i:a,p=Wm(i)?a:i,y=c.filters.map(D=>Oy(D,p));return un.create(y,"or")}(n,e),Lf(t)}function P0(n,e){if(rl(e))return zv(e,n.getFilters());{const t=e.filters.map(i=>Oy(n,i));return un.create(t,"or")}}function Lf(n){if(ct(n instanceof Qt||n instanceof un),n instanceof Qt)return n;const e=n.getFilters();if(1===e.length)return Lf(e[0]);if(zp(n))return n;const t=e.map(a=>Lf(a)),i=[];return t.forEach(a=>{a instanceof Qt?i.push(a):a instanceof un&&(a.op===n.op?i.push(...a.filters):i.push(a))}),1===i.length?i[0]:un.create(i,n.op)}class O0{constructor(){this.Je=new og}addToCollectionParentIndex(e,t){return this.Je.add(t),J.resolve()}getCollectionParents(e,t){return J.resolve(this.Je.getEntries(t))}addFieldIndex(e,t){return J.resolve()}deleteFieldIndex(e,t){return J.resolve()}getDocumentsMatchingTarget(e,t){return J.resolve(null)}getIndexType(e,t){return J.resolve(0)}getFieldIndexes(e,t){return J.resolve([])}getNextCollectionGroupToUpdate(e){return J.resolve(null)}getMinOffset(e,t){return J.resolve(Wi.min())}getMinOffsetFromCollectionGroup(e,t){return J.resolve(Wi.min())}updateCollectionGroup(e,t,i){return J.resolve()}updateIndexEntries(e,t){return J.resolve()}}class og{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),a=this.index[t]||new sn(Jt.comparator),c=!a.has(i);return this.index[t]=a.add(i),c}has(e){const t=e.lastSegment(),i=e.popLast(),a=this.index[t];return a&&a.has(i)}getEntries(e){return(this.index[e]||new sn(Jt.comparator)).toArray()}}const Ff=new Uint8Array(0);class L0{constructor(e,t){this.user=e,this.databaseId=t,this.Ye=new og,this.Xe=new Oa(i=>ka(i),(i,a)=>Yi(i,a)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Ye.has(t)){const i=t.lastSegment(),a=t.popLast();e.addOnCommittedListener(()=>{this.Ye.add(t)});const c={collectionId:i,parent:ri(a)};return Ly(e).put(c)}return J.resolve()}getCollectionParents(e,t){const i=[],a=IDBKeyRange.bound([t,""],[Fm(t),""],!1,!0);return Ly(e).W(a).next(c=>{for(const p of c){if(p.collectionId!==t)break;i.push(Hs(p.parent))}return i})}addFieldIndex(e,t){const i=Vf(e),a={indexId:(p=t).indexId,collectionGroup:p.collectionGroup,fields:p.fields.map(y=>[y.fieldPath.canonicalString(),y.kind])};var p;delete a.indexId;const c=i.add(a);if(t.indexState){const p=Qd(e);return c.next(y=>{p.put(xy(y,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return c.next()}deleteFieldIndex(e,t){const i=Vf(e),a=Qd(e),c=Yd(e);return i.delete(t.indexId).next(()=>a.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>c.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const i=Yd(e);let a=!0;const c=new Map;return J.forEach(this.Ze(t),p=>this.tn(e,p).next(y=>{a&&(a=!!y),c.set(p,y)})).next(()=>{if(a){let p=Bt();const y=[];return J.forEach(c,(D,T)=>{var x;ke("IndexedDbIndexManager",`Using index ${x=D,`id=${x.indexId}|cg=${x.collectionGroup}|f=${x.fields.map(jt=>`${jt.fieldPath}:${jt.kind}`).join(",")}`} to execute ${ka(t)}`);const R=function(jt,Ut){const Ft=Vm(Ut);if(void 0===Ft)return null;for(const Wt of sl(jt,Ft.fieldPath))switch(Wt.op){case"array-contains-any":return Wt.value.arrayValue.values||[];case"array-contains":return[Wt.value]}return null}(T,D),q=function(jt,Ut){const Ft=new Map;for(const Wt of Rd(Ut))for(const qr of sl(jt,Wt.fieldPath))switch(qr.op){case"==":case"in":Ft.set(Wt.fieldPath.canonicalString(),qr.value);break;case"not-in":case"!=":return Ft.set(Wt.fieldPath.canonicalString(),qr.value),Array.from(Ft.values())}return null}(T,D),ne=function(jt,Ut){const Ft=[];let Wt=!0;for(const qr of Rd(Ut)){const sv=0===qr.kind?Fd(jt,qr.fieldPath,jt.startAt):Zv(jt,qr.fieldPath,jt.startAt);Ft.push(sv.value),Wt&&(Wt=sv.inclusive)}return new nl(Ft,Wt)}(T,D),ge=function(jt,Ut){const Ft=[];let Wt=!0;for(const qr of Rd(Ut)){const sv=0===qr.kind?Zv(jt,qr.fieldPath,jt.endAt):Fd(jt,qr.fieldPath,jt.endAt);Ft.push(sv.value),Wt&&(Wt=sv.inclusive)}return new nl(Ft,Wt)}(T,D),Ue=this.en(D,T,ne),Ye=this.en(D,T,ge),zt=this.nn(D,T,q),Xt=this.sn(D.indexId,R,Ue,ne.inclusive,Ye,ge.inclusive,zt);return J.forEach(Xt,jt=>i.J(jt,t.limit).next(Ut=>{Ut.forEach(Ft=>{const Wt=$e.fromSegments(Ft.documentKey);p.has(Wt)||(p=p.add(Wt),y.push(Wt))})}))}).next(()=>y)}return J.resolve(null)})}Ze(e){let t=this.Xe.get(e);return t||(t=0===e.filters.length?[e]:cw(un.create(e.filters,"and")).map(i=>qp(e.path,e.collectionGroup,e.orderBy,i.getFilters(),e.limit,e.startAt,e.endAt)),this.Xe.set(e,t),t)}sn(e,t,i,a,c,p,y){const D=(null!=t?t.length:1)*Math.max(i.length,c.length),T=D/(null!=t?t.length:1),x=[];for(let R=0;R<D;++R){const q=t?this.rn(t[R/T]):Ff,ne=this.on(e,q,i[R%T],a),ge=this.un(e,q,c[R%T],p),Ue=y.map(Ye=>this.on(e,q,Ye,!0));x.push(...this.createRange(ne,ge,Ue))}return x}on(e,t,i,a){const c=new _l(e,$e.empty(),t,i);return a?c:c.Ue()}un(e,t,i,a){const c=new _l(e,$e.empty(),t,i);return a?c.Ue():c}tn(e,t){const i=new uw(t),a=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,a).next(c=>{let p=null;for(const y of c)i.je(y)&&(!p||y.fields.length>p.fields.length)&&(p=y);return p})}getIndexType(e,t){let i=2;const a=this.Ze(t);return J.forEach(a,c=>this.tn(e,c).next(p=>{p?0!==i&&p.fields.length<function(y){let D=new sn(qn.comparator),T=!1;for(const x of y.filters)for(const R of x.getFlattenedFilters())R.field.isKeyField()||("array-contains"===R.op||"array-contains-any"===R.op?T=!0:D=D.add(R.field));for(const x of y.orderBy)x.field.isKeyField()||(D=D.add(x.field));return D.size+(T?1:0)}(c)&&(i=1):i=0})).next(()=>null!==t.limit&&a.length>1&&2===i?1:i)}cn(e,t){const i=new Of;for(const a of Rd(e)){const c=t.data.field(a.fieldPath);if(null==c)return null;const p=i.qe(a.kind);Wu.Ie.ue(c,p)}return i.Fe()}rn(e){const t=new Of;return Wu.Ie.ue(e,t.qe(0)),t.Fe()}an(e,t){const i=new Of;return Wu.Ie.ue(Ra(this.databaseId,t),i.qe(function(a){const c=Rd(a);return 0===c.length?0:c[c.length-1].kind}(e))),i.Fe()}nn(e,t,i){if(null===i)return[];let a=[];a.push(new Of);let c=0;for(const p of Rd(e)){const y=i[c++];for(const D of a)if(this.hn(t,p.fieldPath)&&wf(y))a=this.ln(a,p,y);else{const T=D.qe(p.kind);Wu.Ie.ue(y,T)}}return this.fn(a)}en(e,t,i){return this.nn(e,t,i.position)}fn(e){const t=[];for(let i=0;i<e.length;++i)t[i]=e[i].Fe();return t}ln(e,t,i){const a=[...e],c=[];for(const p of i.arrayValue.values||[])for(const y of a){const D=new Of;D.seed(y.Fe()),Wu.Ie.ue(p,D.qe(t.kind)),c.push(D)}return c}hn(e,t){return!!e.filters.find(i=>i instanceof Qt&&i.field.isEqual(t)&&("in"===i.op||"not-in"===i.op))}getFieldIndexes(e,t){const i=Vf(e),a=Qd(e);return(t?i.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):i.W()).next(c=>{const p=[];return J.forEach(c,y=>a.get([y.indexId,this.uid]).next(D=>{p.push(function(T,x){const R=x?new If(x.sequenceNumber,new Wi(Po(x.readTime),new $e(Hs(x.documentKey)),x.largestBatchId)):If.empty(),q=T.fields.map(([ne,ge])=>new vf(qn.fromServerFormat(ne),ge));return new Op(T.indexId,T.collectionGroup,q,R)}(y,D))})).next(()=>p)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((i,a)=>{const c=i.indexState.sequenceNumber-a.indexState.sequenceNumber;return 0!==c?c:Lt(i.collectionGroup,a.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,i){const a=Vf(e),c=Qd(e);return this.dn(e).next(p=>a.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(y=>J.forEach(y,D=>c.put(xy(D.indexId,this.user,p,i)))))}updateIndexEntries(e,t){const i=new Map;return J.forEach(t,(a,c)=>{const p=i.get(a.collectionGroup);return(p?J.resolve(p):this.getFieldIndexes(e,a.collectionGroup)).next(y=>(i.set(a.collectionGroup,y),J.forEach(y,D=>this._n(e,a,D).next(T=>{const x=this.wn(c,D);return T.isEqual(x)?J.resolve():this.mn(e,c,D,T,x)}))))})}gn(e,t,i,a){return Yd(e).put({indexId:a.indexId,uid:this.uid,arrayValue:a.arrayValue,directionalValue:a.directionalValue,orderedDocumentKey:this.an(i,t.key),documentKey:t.key.path.toArray()})}yn(e,t,i,a){return Yd(e).delete([a.indexId,this.uid,a.arrayValue,a.directionalValue,this.an(i,t.key),t.key.path.toArray()])}_n(e,t,i){const a=Yd(e);let c=new sn(qu);return a.Z({index:"documentKeyIndex",range:IDBKeyRange.only([i.indexId,this.uid,this.an(i,t)])},(p,y)=>{c=c.add(new _l(i.indexId,t,y.arrayValue,y.directionalValue))}).next(()=>c)}wn(e,t){let i=new sn(qu);const a=this.cn(t,e);if(null==a)return i;const c=Vm(t);if(null!=c){const p=e.data.field(c.fieldPath);if(wf(p))for(const y of p.arrayValue.values||[])i=i.add(new _l(t.indexId,e.key,this.rn(y),a))}else i=i.add(new _l(t.indexId,e.key,Ff,a));return i}mn(e,t,i,a,c){ke("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const p=[];return function(y,D,T,x,R){const q=y.getIterator(),ne=D.getIterator();let ge=Tf(q),Ue=Tf(ne);for(;ge||Ue;){let Ye=!1,zt=!1;if(ge&&Ue){const Xt=T(ge,Ue);Xt<0?zt=!0:Xt>0&&(Ye=!0)}else null!=ge?zt=!0:Ye=!0;Ye?(x(Ue),Ue=Tf(ne)):zt?(R(ge),ge=Tf(q)):(ge=Tf(q),Ue=Tf(ne))}}(a,c,qu,y=>{p.push(this.gn(e,t,i,y))},y=>{p.push(this.yn(e,t,i,y))}),J.waitFor(p)}dn(e){let t=1;return Qd(e).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(i,a,c)=>{c.done(),t=a.sequenceNumber+1}).next(()=>t)}createRange(e,t,i){i=i.sort((p,y)=>qu(p,y)).filter((p,y,D)=>!y||0!==qu(p,D[y-1]));const a=[];a.push(e);for(const p of i){const y=qu(p,e),D=qu(p,t);if(0===y)a[0]=e.Ue();else if(y>0&&D<0)a.push(p),a.push(p.Ue());else if(D>0)break}a.push(t);const c=[];for(let p=0;p<a.length;p+=2){if(this.pn(a[p],a[p+1]))return[];c.push(IDBKeyRange.bound([a[p].indexId,this.uid,a[p].arrayValue,a[p].directionalValue,Ff,[]],[a[p+1].indexId,this.uid,a[p+1].arrayValue,a[p+1].directionalValue,Ff,[]]))}return c}pn(e,t){return qu(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(Fy)}getMinOffset(e,t){return J.mapArray(this.Ze(t),i=>this.tn(e,i).next(a=>a||it())).next(Fy)}}function Ly(n){return Or(n,"collectionParents")}function Yd(n){return Or(n,"indexEntries")}function Vf(n){return Or(n,"indexConfiguration")}function Qd(n){return Or(n,"indexState")}function Fy(n){ct(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let i=1;i<n.length;i++){const a=n[i].indexState.offset;Lv(a,e)<0&&(e=a),t<a.largestBatchId&&(t=a.largestBatchId)}return new Wi(e.readTime,e.documentKey,t)}const Vy={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class dr{constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}static withCacheSize(e){return new dr(e,dr.DEFAULT_COLLECTION_PERCENTILE,dr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function F0(n,e,t){const i=n.store("mutations"),a=n.store("documentMutations"),c=[],p=IDBKeyRange.only(t.batchId);let y=0;const D=i.Z({range:p},(x,R,q)=>(y++,q.delete()));c.push(D.next(()=>{ct(1===y)}));const T=[];for(const x of t.mutations){const R=wy(e,x.key.path,t.batchId);c.push(a.delete(R)),T.push(x.key)}return J.waitFor(c).next(()=>T)}function ag(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw it();e=n.noDocument}return JSON.stringify(e).length}dr.DEFAULT_COLLECTION_PERCENTILE=10,dr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,dr.DEFAULT=new dr(41943040,dr.DEFAULT_COLLECTION_PERCENTILE,dr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),dr.DISABLED=new dr(-1,0,0);class La{constructor(e,t,i,a){this.userId=e,this.yt=t,this.indexManager=i,this.referenceDelegate=a,this.In={}}static re(e,t,i,a){ct(""!==e.uid);const c=e.isAuthenticated()?e.uid:"";return new La(c,t,i,a)}checkEmpty(e){let t=!0;const i=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Oo(e).Z({index:"userMutationsIndex",range:i},(a,c,p)=>{t=!1,p.done()}).next(()=>t)}addMutationBatch(e,t,i,a){const c=Bf(e),p=Oo(e);return p.add({}).next(y=>{ct("number"==typeof y);const D=new Ty(y,t,i,a),T=function(q,ne,ge){const Ue=ge.baseMutations.map(zt=>zd(q.ie,zt)),Ye=ge.mutations.map(zt=>zd(q.ie,zt));return{userId:ne,batchId:ge.batchId,localWriteTimeMs:ge.localWriteTime.toMillis(),baseMutations:Ue,mutations:Ye}}(this.yt,this.userId,D),x=[];let R=new sn((q,ne)=>Lt(q.canonicalString(),ne.canonicalString()));for(const q of a){const ne=wy(this.userId,q.key.path,y);R=R.add(q.key.path.popLast()),x.push(p.put(T)),x.push(c.put(ne,XE))}return R.forEach(q=>{x.push(this.indexManager.addToCollectionParentIndex(e,q))}),e.addOnCommittedListener(()=>{this.In[y]=D.keys()}),J.waitFor(x).next(()=>D)})}lookupMutationBatch(e,t){return Oo(e).get(t).next(i=>i?(ct(i.userId===this.userId),yl(this.yt,i)):null)}Tn(e,t){return this.In[t]?J.resolve(this.In[t]):this.lookupMutationBatch(e,t).next(i=>{if(i){const a=i.keys();return this.In[t]=a,a}return null})}getNextMutationBatchAfterBatchId(e,t){const i=t+1,a=IDBKeyRange.lowerBound([this.userId,i]);let c=null;return Oo(e).Z({index:"userMutationsIndex",range:a},(p,y,D)=>{y.userId===this.userId&&(ct(y.batchId>=i),c=yl(this.yt,y)),D.done()}).next(()=>c)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let i=-1;return Oo(e).Z({index:"userMutationsIndex",range:t,reverse:!0},(a,c,p)=>{i=c.batchId,p.done()}).next(()=>i)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Oo(e).W("userMutationsIndex",t).next(i=>i.map(a=>yl(this.yt,a)))}getAllMutationBatchesAffectingDocumentKey(e,t){const i=ig(this.userId,t.path),a=IDBKeyRange.lowerBound(i),c=[];return Bf(e).Z({range:a},(p,y,D)=>{const[T,x,R]=p,q=Hs(x);if(T===this.userId&&t.path.isEqual(q))return Oo(e).get(R).next(ne=>{if(!ne)throw it();ct(ne.userId===this.userId),c.push(yl(this.yt,ne))});D.done()}).next(()=>c)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new sn(Lt);const a=[];return t.forEach(c=>{const p=ig(this.userId,c.path),y=IDBKeyRange.lowerBound(p),D=Bf(e).Z({range:y},(T,x,R)=>{const[q,ne,ge]=T,Ue=Hs(ne);q===this.userId&&c.path.isEqual(Ue)?i=i.add(ge):R.done()});a.push(D)}),J.waitFor(a).next(()=>this.En(e,i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,a=i.length+1,c=ig(this.userId,i),p=IDBKeyRange.lowerBound(c);let y=new sn(Lt);return Bf(e).Z({range:p},(D,T,x)=>{const[R,q,ne]=D,ge=Hs(q);R===this.userId&&i.isPrefixOf(ge)?ge.length===a&&(y=y.add(ne)):x.done()}).next(()=>this.En(e,y))}En(e,t){const i=[],a=[];return t.forEach(c=>{a.push(Oo(e).get(c).next(p=>{if(null===p)throw it();ct(p.userId===this.userId),i.push(yl(this.yt,p))}))}),J.waitFor(a).next(()=>i)}removeMutationBatch(e,t){return F0(e.se,this.userId,t).next(i=>(e.addOnCommittedListener(()=>{this.An(t.batchId)}),J.forEach(i,a=>this.referenceDelegate.markPotentiallyOrphaned(e,a))))}An(e){delete this.In[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return J.resolve();const i=IDBKeyRange.lowerBound([this.userId]),a=[];return Bf(e).Z({range:i},(c,p,y)=>{if(c[0]===this.userId){const D=Hs(c[1]);a.push(D)}else y.done()}).next(()=>{ct(0===a.length)})})}containsKey(e,t){return lw(e,this.userId,t)}Rn(e){return By(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function lw(n,e,t){const i=ig(e,t.path),a=i[1],c=IDBKeyRange.lowerBound(i);let p=!1;return Bf(n).Z({range:c,X:!0},(y,D,T)=>{const[x,R,q]=y;x===e&&R===a&&(p=!0),T.done()}).next(()=>p)}function Oo(n){return Or(n,"mutations")}function Bf(n){return Or(n,"documentMutations")}function By(n){return Or(n,"mutationQueues")}class Ku{constructor(e){this.bn=e}next(){return this.bn+=2,this.bn}static Pn(){return new Ku(0)}static vn(){return new Ku(-1)}}class hb{constructor(e,t){this.referenceDelegate=e,this.yt=t}allocateTargetId(e){return this.Vn(e).next(t=>{const i=new Ku(t.highestTargetId);return t.highestTargetId=i.next(),this.Sn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Vn(e).next(t=>dt.fromTimestamp(new An(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Vn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,i){return this.Vn(e).next(a=>(a.highestListenSequenceNumber=t,i&&(a.lastRemoteSnapshotVersion=i.toTimestamp()),t>a.highestListenSequenceNumber&&(a.highestListenSequenceNumber=t),this.Sn(e,a)))}addTargetData(e,t){return this.Dn(e,t).next(()=>this.Vn(e).next(i=>(i.targetCount+=1,this.Cn(t,i),this.Sn(e,i))))}updateTargetData(e,t){return this.Dn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>mt(e).delete(t.targetId)).next(()=>this.Vn(e)).next(i=>(ct(i.targetCount>0),i.targetCount-=1,this.Sn(e,i)))}removeTargets(e,t,i){let a=0;const c=[];return mt(e).Z((p,y)=>{const D=qd(y);D.sequenceNumber<=t&&null===i.get(D.targetId)&&(a++,c.push(this.removeTargetData(e,D)))}).next(()=>J.waitFor(c)).next(()=>a)}forEachTarget(e,t){return mt(e).Z((i,a)=>{const c=qd(a);t(c)})}Vn(e){return V0(e).get("targetGlobalKey").next(t=>(ct(null!==t),t))}Sn(e,t){return V0(e).put("targetGlobalKey",t)}Dn(e,t){return mt(e).put(Sy(this.yt,t))}Cn(e,t){let i=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,i=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,i=!0),i}getTargetCount(e){return this.Vn(e).next(t=>t.targetCount)}getTargetData(e,t){const i=ka(t),a=IDBKeyRange.bound([i,Number.NEGATIVE_INFINITY],[i,Number.POSITIVE_INFINITY]);let c=null;return mt(e).Z({range:a,index:"queryTargetsIndex"},(p,y,D)=>{const T=qd(y);Yi(t,T.target)&&(c=T,D.done())}).next(()=>c)}addMatchingKeys(e,t,i){const a=[],c=Zu(e);return t.forEach(p=>{const y=ri(p.path);a.push(c.put({targetId:i,path:y})),a.push(this.referenceDelegate.addReference(e,i,p))}),J.waitFor(a)}removeMatchingKeys(e,t,i){const a=Zu(e);return J.forEach(t,c=>{const p=ri(c.path);return J.waitFor([a.delete([i,p]),this.referenceDelegate.removeReference(e,i,c)])})}removeMatchingKeysForTargetId(e,t){const i=Zu(e),a=IDBKeyRange.bound([t],[t+1],!1,!0);return i.delete(a)}getMatchingKeysForTargetId(e,t){const i=IDBKeyRange.bound([t],[t+1],!1,!0),a=Zu(e);let c=Bt();return a.Z({range:i,X:!0},(p,y,D)=>{const T=Hs(p[1]),x=new $e(T);c=c.add(x)}).next(()=>c)}containsKey(e,t){const i=ri(t.path),a=IDBKeyRange.bound([i],[Fm(i)],!1,!0);let c=0;return Zu(e).Z({index:"documentTargetsIndex",X:!0,range:a},([p,y],D,T)=>{0!==p&&(c++,T.done())}).next(()=>c>0)}ne(e,t){return mt(e).get(t).next(i=>i?qd(i):null)}}function mt(n){return Or(n,"targets")}function V0(n){return Or(n,"targetGlobal")}function Zu(n){return Or(n,"targetDocuments")}function B0([n,e],[t,i]){const a=Lt(n,t);return 0===a?Lt(e,i):a}class Xd{constructor(e){this.xn=e,this.buffer=new sn(B0),this.Nn=0}kn(){return++this.Nn}On(e){const t=[e,this.kn()];if(this.buffer.size<this.xn)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();B0(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class dw{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Mn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Fn(6e4)}stop(){this.Mn&&(this.Mn.cancel(),this.Mn=null)}get started(){return null!==this.Mn}Fn(e){var t=this;ke("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Mn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,z.Z)(function*(){t.Mn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(i){Bs(i)?ke("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",i):yield Ru(i)}yield t.Fn(3e5)}))}}class ug{constructor(e,t){this.$n=e,this.params=t}calculateTargetCount(e,t){return this.$n.Bn(e).next(i=>Math.floor(t/100*i))}nthSequenceNumber(e,t){if(0===t)return J.resolve(qi.at);const i=new Xd(t);return this.$n.forEachTarget(e,a=>i.On(a.sequenceNumber)).next(()=>this.$n.Ln(e,a=>i.On(a))).next(()=>i.maxValue)}removeTargets(e,t,i){return this.$n.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.$n.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(ke("LruGarbageCollector","Garbage collection skipped; disabled"),J.resolve(Vy)):this.getCacheSize(e).next(i=>i<this.params.cacheSizeCollectionThreshold?(ke("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Vy):this.qn(e,t))}getCacheSize(e){return this.$n.getCacheSize(e)}qn(e,t){let i,a,c,p,y,D,T;const x=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(R=>(R>this.params.maximumSequenceNumbersToCollect?(ke("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${R}`),a=this.params.maximumSequenceNumbersToCollect):a=R,p=Date.now(),this.nthSequenceNumber(e,a))).next(R=>(i=R,y=Date.now(),this.removeTargets(e,i,t))).next(R=>(c=R,D=Date.now(),this.removeOrphanedDocuments(e,i))).next(R=>(T=Date.now(),Nu()<=On.in.DEBUG&&ke("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${p-x}ms\n\tDetermined least recently used ${a} in `+(y-p)+`ms\n\tRemoved ${c} targets in `+(D-y)+`ms\n\tRemoved ${R} documents in `+(T-D)+`ms\nTotal Duration: ${T-x}ms`),J.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:c,documentsRemoved:R})))}}class cg{constructor(e,t){this.db=e,this.garbageCollector=new ug(this,t)}Bn(e){const t=this.Un(e);return this.db.getTargetCache().getTargetCount(e).next(i=>t.next(a=>i+a))}Un(e){let t=0;return this.Ln(e,i=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Ln(e,t){return this.Kn(e,(i,a)=>t(a))}addReference(e,t,i){return Mn(e,i)}removeReference(e,t,i){return Mn(e,i)}removeTargets(e,t,i){return this.db.getTargetCache().removeTargets(e,t,i)}markPotentiallyOrphaned(e,t){return Mn(e,t)}Gn(e,t){return function(i,a){let c=!1;return By(i).tt(p=>lw(i,p,a).next(y=>(y&&(c=!0),J.resolve(!y)))).next(()=>c)}(e,t)}removeOrphanedDocuments(e,t){const i=this.db.getRemoteDocumentCache().newChangeBuffer(),a=[];let c=0;return this.Kn(e,(p,y)=>{if(y<=t){const D=this.Gn(e,p).next(T=>{if(!T)return c++,i.getEntry(e,p).next(()=>(i.removeEntry(p,dt.min()),Zu(e).delete([0,ri(p.path)])))});a.push(D)}}).next(()=>J.waitFor(a)).next(()=>i.apply(e)).next(()=>c)}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,i)}updateLimboDocument(e,t){return Mn(e,t)}Kn(e,t){const i=Zu(e);let a,c=qi.at;return i.Z({index:"documentTargetsIndex"},([p,y],{path:D,sequenceNumber:T})=>{0===p?(c!==qi.at&&t(new $e(Hs(a)),c),c=T,a=D):c=qi.at}).next(()=>{c!==qi.at&&t(new $e(Hs(a)),c)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Mn(n,e){return Zu(n).put((i=n.currentSequenceNumber,{targetId:0,path:ri(e.path),sequenceNumber:i}));var i}class hw{constructor(){this.changes=new Oa(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,bn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return void 0!==i?J.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class U0{constructor(e){this.yt=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,i){return Yu(e).put(i)}removeEntry(e,t,i){return Yu(e).delete(function(a,c){const p=a.path.toArray();return[p.slice(0,p.length-2),p[p.length-2],kf(c),p[p.length-1]]}(t,i))}updateMetadata(e,t){return this.getMetadata(e).next(i=>(i.byteSize+=t,this.Qn(e,i)))}getEntry(e,t){let i=bn.newInvalidDocument(t);return Yu(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(Jd(t))},(a,c)=>{i=this.jn(t,c)}).next(()=>i)}Wn(e,t){let i={size:0,document:bn.newInvalidDocument(t)};return Yu(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(Jd(t))},(a,c)=>{i={document:this.jn(t,c),size:ag(c)}}).next(()=>i)}getEntries(e,t){let i=_i();return this.zn(e,t,(a,c)=>{const p=this.jn(a,c);i=i.insert(a,p)}).next(()=>i)}Hn(e,t){let i=_i(),a=new Kn($e.comparator);return this.zn(e,t,(c,p)=>{const y=this.jn(c,p);i=i.insert(c,y),a=a.insert(c,ag(p))}).next(()=>({documents:i,Jn:a}))}zn(e,t,i){if(t.isEmpty())return J.resolve();let a=new sn(j0);t.forEach(D=>a=a.add(D));const c=IDBKeyRange.bound(Jd(a.first()),Jd(a.last())),p=a.getIterator();let y=p.getNext();return Yu(e).Z({index:"documentKeyIndex",range:c},(D,T,x)=>{const R=$e.fromSegments([...T.prefixPath,T.collectionGroup,T.documentId]);for(;y&&j0(y,R)<0;)i(y,null),y=p.getNext();y&&y.isEqual(R)&&(i(y,T),y=p.hasNext()?p.getNext():null),y?x.j(Jd(y)):x.done()}).next(()=>{for(;y;)i(y,null),y=p.hasNext()?p.getNext():null})}getDocumentsMatchingQuery(e,t,i,a){const c=t.path,p=[c.popLast().toArray(),c.lastSegment(),kf(i.readTime),i.documentKey.path.isEmpty()?"":i.documentKey.path.lastSegment()],y=[c.popLast().toArray(),c.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Yu(e).W(IDBKeyRange.bound(p,y,!0)).next(D=>{let T=_i();for(const x of D){const R=this.jn($e.fromSegments(x.prefixPath.concat(x.collectionGroup,x.documentId)),x);R.isFoundDocument()&&(Bd(t,R)||a.has(R.key))&&(T=T.insert(R.key,R))}return T})}getAllFromCollectionGroup(e,t,i,a){let c=_i();const p=$y(t,i),y=$y(t,Wi.max());return Yu(e).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(p,y,!0)},(D,T,x)=>{const R=this.jn($e.fromSegments(T.prefixPath.concat(T.collectionGroup,T.documentId)),T);c=c.insert(R.key,R),c.size===a&&x.done()}).next(()=>c)}newChangeBuffer(e){return new fw(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return jy(e).get("remoteDocumentGlobalKey").next(t=>(ct(!!t),t))}Qn(e,t){return jy(e).put("remoteDocumentGlobalKey",t)}jn(e,t){if(t){const i=function S0(n,e){let t;if(e.document)t=Iy(n.ie,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const i=$e.fromSegments(e.noDocument.path),a=Po(e.noDocument.readTime);t=bn.newNoDocument(i,a),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return it();{const i=$e.fromSegments(e.unknownDocument.path),a=Po(e.unknownDocument.version);t=bn.newUnknownDocument(i,a)}}return e.readTime&&t.setReadTime(function(i){const a=new An(i[0],i[1]);return dt.fromTimestamp(a)}(e.readTime)),t}(this.yt,t);if(!i.isNoDocument()||!i.version.isEqual(dt.min()))return i}return bn.newInvalidDocument(e)}}function Uy(n){return new U0(n)}class fw extends hw{constructor(e,t){super(),this.Yn=e,this.trackRemovals=t,this.Xn=new Oa(i=>i.toString(),(i,a)=>i.isEqual(a))}applyChanges(e){const t=[];let i=0,a=new sn((c,p)=>Lt(c.canonicalString(),p.canonicalString()));return this.changes.forEach((c,p)=>{const y=this.Xn.get(c);if(t.push(this.Yn.removeEntry(e,c,y.readTime)),p.isValidDocument()){const D=A0(this.Yn.yt,p);a=a.add(c.path.popLast());const T=ag(D);i+=T-y.size,t.push(this.Yn.addEntry(e,c,D))}else if(i-=y.size,this.trackRemovals){const D=A0(this.Yn.yt,p.convertToNoDocument(dt.min()));t.push(this.Yn.addEntry(e,c,D))}}),a.forEach(c=>{t.push(this.Yn.indexManager.addToCollectionParentIndex(e,c))}),t.push(this.Yn.updateMetadata(e,i)),J.waitFor(t)}getFromCache(e,t){return this.Yn.Wn(e,t).next(i=>(this.Xn.set(t,{size:i.size,readTime:i.document.readTime}),i.document))}getAllFromCache(e,t){return this.Yn.Hn(e,t).next(({documents:i,Jn:a})=>(a.forEach((c,p)=>{this.Xn.set(c,{size:p,readTime:i.get(c).readTime})}),i))}}function jy(n){return Or(n,"remoteDocumentGlobal")}function Yu(n){return Or(n,"remoteDocumentsV14")}function Jd(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function $y(n,e){const t=e.documentKey.path.toArray();return[n,kf(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function j0(n,e){const t=n.path.toArray(),i=e.path.toArray();let a=0;for(let c=0;c<t.length-2&&c<i.length-2;++c)if(a=Lt(t[c],i[c]),a)return a;return a=Lt(t.length,i.length),a||(a=Lt(t[t.length-2],i[i.length-2]),a||Lt(t[t.length-1],i[i.length-1]))}class pw{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class $0{constructor(e,t,i,a){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=a}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next(a=>(i=a,this.remoteDocumentCache.getEntry(e,t))).next(a=>(null!==i&&Us(i.mutation,a,ei.empty(),An.now()),a))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.getLocalViewOfDocuments(e,i,Bt()).next(()=>i))}getLocalViewOfDocuments(e,t,i=Bt()){const a=$s();return this.populateOverlays(e,a,t).next(()=>this.computeViews(e,t,a,i).next(c=>{let p=Hd();return c.forEach((y,D)=>{p=p.insert(y,D.overlayedDocument)}),p}))}getOverlayedDocuments(e,t){const i=$s();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,Bt()))}populateOverlays(e,t,i){const a=[];return i.forEach(c=>{t.has(c)||a.push(c)}),this.documentOverlayCache.getOverlays(e,a).next(c=>{c.forEach((p,y)=>{t.set(p,y)})})}computeViews(e,t,i,a){let c=_i();const p=Sf(),y=Sf();return t.forEach((D,T)=>{const x=i.get(T.key);a.has(T.key)&&(void 0===x||x.mutation instanceof Ai)?c=c.insert(T.key,T):void 0!==x?(p.set(T.key,x.mutation.getFieldMask()),Us(x.mutation,T,x.mutation.getFieldMask(),An.now())):p.set(T.key,ei.empty())}),this.recalculateAndSaveOverlays(e,c).next(D=>(D.forEach((T,x)=>p.set(T,x)),t.forEach((T,x)=>{var R;return y.set(T,new pw(x,null!==(R=p.get(T))&&void 0!==R?R:null))}),y))}recalculateAndSaveOverlays(e,t){const i=Sf();let a=new Kn((p,y)=>p-y),c=Bt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(p=>{for(const y of p)y.keys().forEach(D=>{const T=t.get(D);if(null===T)return;let x=i.get(D)||ei.empty();x=y.applyToLocalView(T,x),i.set(D,x);const R=(a.get(y.batchId)||Bt()).add(D);a=a.insert(y.batchId,R)})}).next(()=>{const p=[],y=a.getReverseIterator();for(;y.hasNext();){const D=y.getNext(),T=D.key,x=D.value,R=a0();x.forEach(q=>{if(!c.has(q)){const ne=jd(t.get(q),i.get(q));null!==ne&&R.set(q,ne),c=c.add(q)}}),p.push(this.documentOverlayCache.saveOverlays(e,T,R))}return J.waitFor(p)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,t,i){return $e.isDocumentKey((a=t).path)&&null===a.collectionGroup&&0===a.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):Qv(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i):this.getDocumentsMatchingCollectionQuery(e,t,i);var a}getNextDocuments(e,t,i,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,a).next(c=>{const p=a-c.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,a-c.size):J.resolve($s());let y=-1,D=c;return p.next(T=>J.forEach(T,(x,R)=>(y<R.largestBatchId&&(y=R.largestBatchId),c.get(x)?J.resolve():this.remoteDocumentCache.getEntry(e,x).next(q=>{D=D.insert(x,q)}))).next(()=>this.populateOverlays(e,T,c)).next(()=>this.computeViews(e,D,T,Bt())).next(x=>({batchId:y,changes:uy(x)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new $e(t)).next(i=>{let a=Hd();return i.isFoundDocument()&&(a=a.insert(i.key,i)),a})}getDocumentsMatchingCollectionGroupQuery(e,t,i){const a=t.collectionGroup;let c=Hd();return this.indexManager.getCollectionParents(e,a).next(p=>J.forEach(p,y=>{const D=(T=t,x=y.child(a),new Mo(x,null,T.explicitOrderBy.slice(),T.filters.slice(),T.limit,T.limitType,T.startAt,T.endAt));var T,x;return this.getDocumentsMatchingCollectionQuery(e,D,i).next(T=>{T.forEach((x,R)=>{c=c.insert(x,R)})})}).next(()=>c))}getDocumentsMatchingCollectionQuery(e,t,i){let a;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next(c=>(a=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,a))).next(c=>{a.forEach((y,D)=>{const T=D.getKey();null===c.get(T)&&(c=c.insert(T,bn.newInvalidDocument(T)))});let p=Hd();return c.forEach((y,D)=>{const T=a.get(y);void 0!==T&&Us(T.mutation,D,ei.empty(),An.now()),Bd(t,D)&&(p=p.insert(y,D))}),p})}}class Uf{constructor(e){this.yt=e,this.Zn=new Map,this.ts=new Map}getBundleMetadata(e,t){return J.resolve(this.Zn.get(t))}saveBundleMetadata(e,t){var i;return this.Zn.set(t.id,{id:(i=t).id,version:i.version,createTime:Zn(i.createTime)}),J.resolve()}getNamedQuery(e,t){return J.resolve(this.ts.get(t))}saveNamedQuery(e,t){return this.ts.set(t.name,{name:(i=t).name,query:sg(i.bundledQuery),readTime:Zn(i.readTime)}),J.resolve();var i}}class gw{constructor(){this.overlays=new Kn($e.comparator),this.es=new Map}getOverlay(e,t){return J.resolve(this.overlays.get(t))}getOverlays(e,t){const i=$s();return J.forEach(t,a=>this.getOverlay(e,a).next(c=>{null!==c&&i.set(a,c)})).next(()=>i)}saveOverlays(e,t,i){return i.forEach((a,c)=>{this.oe(e,t,c)}),J.resolve()}removeOverlaysForBatchId(e,t,i){const a=this.es.get(i);return void 0!==a&&(a.forEach(c=>this.overlays=this.overlays.remove(c)),this.es.delete(i)),J.resolve()}getOverlaysForCollection(e,t,i){const a=$s(),c=t.length+1,p=new $e(t.child("")),y=this.overlays.getIteratorFrom(p);for(;y.hasNext();){const D=y.getNext().value,T=D.getKey();if(!t.isPrefixOf(T.path))break;T.path.length===c&&D.largestBatchId>i&&a.set(D.getKey(),D)}return J.resolve(a)}getOverlaysForCollectionGroup(e,t,i,a){let c=new Kn((T,x)=>T-x);const p=this.overlays.getIterator();for(;p.hasNext();){const T=p.getNext().value;if(T.getKey().getCollectionGroup()===t&&T.largestBatchId>i){let x=c.get(T.largestBatchId);null===x&&(x=$s(),c=c.insert(T.largestBatchId,x)),x.set(T.getKey(),T)}}const y=$s(),D=c.getIterator();for(;D.hasNext()&&(D.getNext().value.forEach((T,x)=>y.set(T,x)),!(y.size()>=a)););return J.resolve(y)}oe(e,t,i){const a=this.overlays.get(i.key);if(null!==a){const p=this.es.get(a.largestBatchId).delete(i.key);this.es.set(a.largestBatchId,p)}this.overlays=this.overlays.insert(i.key,new Rf(t,i));let c=this.es.get(t);void 0===c&&(c=Bt(),this.es.set(t,c)),this.es.set(t,c.add(i.key))}}class Hy{constructor(){this.ns=new sn(Lr.ss),this.rs=new sn(Lr.os)}isEmpty(){return this.ns.isEmpty()}addReference(e,t){const i=new Lr(e,t);this.ns=this.ns.add(i),this.rs=this.rs.add(i)}us(e,t){e.forEach(i=>this.addReference(i,t))}removeReference(e,t){this.cs(new Lr(e,t))}hs(e,t){e.forEach(i=>this.removeReference(i,t))}ls(e){const t=new $e(new Jt([])),i=new Lr(t,e),a=new Lr(t,e+1),c=[];return this.rs.forEachInRange([i,a],p=>{this.cs(p),c.push(p.key)}),c}fs(){this.ns.forEach(e=>this.cs(e))}cs(e){this.ns=this.ns.delete(e),this.rs=this.rs.delete(e)}ds(e){const t=new $e(new Jt([])),i=new Lr(t,e),a=new Lr(t,e+1);let c=Bt();return this.rs.forEachInRange([i,a],p=>{c=c.add(p.key)}),c}containsKey(e){const t=new Lr(e,0),i=this.ns.firstAfterOrEqual(t);return null!==i&&e.isEqual(i.key)}}class Lr{constructor(e,t){this.key=e,this._s=t}static ss(e,t){return $e.comparator(e.key,t.key)||Lt(e._s,t._s)}static os(e,t){return Lt(e._s,t._s)||$e.comparator(e.key,t.key)}}class lg{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.ws=1,this.gs=new sn(Lr.ss)}checkEmpty(e){return J.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,i,a){const c=this.ws;this.ws++;const p=new Ty(c,t,i,a);this.mutationQueue.push(p);for(const y of a)this.gs=this.gs.add(new Lr(y.key,c)),this.indexManager.addToCollectionParentIndex(e,y.key.path.popLast());return J.resolve(p)}lookupMutationBatch(e,t){return J.resolve(this.ys(t))}getNextMutationBatchAfterBatchId(e,t){const a=this.ps(t+1),c=a<0?0:a;return J.resolve(this.mutationQueue.length>c?this.mutationQueue[c]:null)}getHighestUnacknowledgedBatchId(){return J.resolve(0===this.mutationQueue.length?-1:this.ws-1)}getAllMutationBatches(e){return J.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new Lr(t,0),a=new Lr(t,Number.POSITIVE_INFINITY),c=[];return this.gs.forEachInRange([i,a],p=>{const y=this.ys(p._s);c.push(y)}),J.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new sn(Lt);return t.forEach(a=>{const c=new Lr(a,0),p=new Lr(a,Number.POSITIVE_INFINITY);this.gs.forEachInRange([c,p],y=>{i=i.add(y._s)})}),J.resolve(this.Is(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,a=i.length+1;let c=i;$e.isDocumentKey(c)||(c=c.child(""));const p=new Lr(new $e(c),0);let y=new sn(Lt);return this.gs.forEachWhile(D=>{const T=D.key.path;return!!i.isPrefixOf(T)&&(T.length===a&&(y=y.add(D._s)),!0)},p),J.resolve(this.Is(y))}Is(e){const t=[];return e.forEach(i=>{const a=this.ys(i);null!==a&&t.push(a)}),t}removeMutationBatch(e,t){ct(0===this.Ts(t.batchId,"removed")),this.mutationQueue.shift();let i=this.gs;return J.forEach(t.mutations,a=>{const c=new Lr(a.key,t.batchId);return i=i.delete(c),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)}).next(()=>{this.gs=i})}An(e){}containsKey(e,t){const i=new Lr(t,0),a=this.gs.firstAfterOrEqual(i);return J.resolve(t.isEqual(a&&a.key))}performConsistencyCheck(e){return J.resolve()}Ts(e,t){return this.ps(e)}ps(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}ys(e){const t=this.ps(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class H0{constructor(e){this.Es=e,this.docs=new Kn($e.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,a=this.docs.get(i),c=a?a.size:0,p=this.Es(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:p}),this.size+=p-c,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return J.resolve(i?i.document.mutableCopy():bn.newInvalidDocument(t))}getEntries(e,t){let i=_i();return t.forEach(a=>{const c=this.docs.get(a);i=i.insert(a,c?c.document.mutableCopy():bn.newInvalidDocument(a))}),J.resolve(i)}getDocumentsMatchingQuery(e,t,i,a){let c=_i();const p=t.path,y=new $e(p.child("")),D=this.docs.getIteratorFrom(y);for(;D.hasNext();){const{key:T,value:{document:x}}=D.getNext();if(!p.isPrefixOf(T.path))break;T.path.length>p.length+1||Lv(Fp(x),i)<=0||(a.has(x.key)||Bd(t,x))&&(c=c.insert(x.key,x.mutableCopy()))}return J.resolve(c)}getAllFromCollectionGroup(e,t,i,a){it()}As(e,t){return J.forEach(this.docs,i=>t(i))}newChangeBuffer(e){return new G0(this)}getSize(e){return J.resolve(this.size)}}class G0 extends hw{constructor(e){super(),this.Yn=e}applyChanges(e){const t=[];return this.changes.forEach((i,a)=>{a.isValidDocument()?t.push(this.Yn.addEntry(e,a)):this.Yn.removeEntry(i)}),J.waitFor(t)}getFromCache(e,t){return this.Yn.getEntry(e,t)}getAllFromCache(e,t){return this.Yn.getEntries(e,t)}}class z0{constructor(e){this.persistence=e,this.Rs=new Oa(t=>ka(t),Yi),this.lastRemoteSnapshotVersion=dt.min(),this.highestTargetId=0,this.bs=0,this.Ps=new Hy,this.targetCount=0,this.vs=Ku.Pn()}forEachTarget(e,t){return this.Rs.forEach((i,a)=>t(a)),J.resolve()}getLastRemoteSnapshotVersion(e){return J.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return J.resolve(this.bs)}allocateTargetId(e){return this.highestTargetId=this.vs.next(),J.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.bs&&(this.bs=t),J.resolve()}Dn(e){this.Rs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.vs=new Ku(t),this.highestTargetId=t),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}addTargetData(e,t){return this.Dn(t),this.targetCount+=1,J.resolve()}updateTargetData(e,t){return this.Dn(t),J.resolve()}removeTargetData(e,t){return this.Rs.delete(t.target),this.Ps.ls(t.targetId),this.targetCount-=1,J.resolve()}removeTargets(e,t,i){let a=0;const c=[];return this.Rs.forEach((p,y)=>{y.sequenceNumber<=t&&null===i.get(y.targetId)&&(this.Rs.delete(p),c.push(this.removeMatchingKeysForTargetId(e,y.targetId)),a++)}),J.waitFor(c).next(()=>a)}getTargetCount(e){return J.resolve(this.targetCount)}getTargetData(e,t){const i=this.Rs.get(t)||null;return J.resolve(i)}addMatchingKeys(e,t,i){return this.Ps.us(t,i),J.resolve()}removeMatchingKeys(e,t,i){this.Ps.hs(t,i);const a=this.persistence.referenceDelegate,c=[];return a&&t.forEach(p=>{c.push(a.markPotentiallyOrphaned(e,p))}),J.waitFor(c)}removeMatchingKeysForTargetId(e,t){return this.Ps.ls(t),J.resolve()}getMatchingKeysForTargetId(e,t){const i=this.Ps.ds(t);return J.resolve(i)}containsKey(e,t){return J.resolve(this.Ps.containsKey(t))}}class W0{constructor(e,t){this.Vs={},this.overlays={},this.Ss=new qi(0),this.Ds=!1,this.Ds=!0,this.referenceDelegate=e(this),this.Cs=new z0(this),this.indexManager=new O0,this.remoteDocumentCache=new H0(i=>this.referenceDelegate.xs(i)),this.yt=new C0(t),this.Ns=new Uf(this.yt)}start(){return Promise.resolve()}shutdown(){return this.Ds=!1,Promise.resolve()}get started(){return this.Ds}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new gw,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.Vs[e.toKey()];return i||(i=new lg(t,this.referenceDelegate),this.Vs[e.toKey()]=i),i}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ns}runTransaction(e,t,i){ke("MemoryPersistence","Starting transaction:",e);const a=new jf(this.Ss.next());return this.referenceDelegate.ks(),i(a).next(c=>this.referenceDelegate.Os(a).next(()=>c)).toPromise().then(c=>(a.raiseOnCommittedEvent(),c))}Ms(e,t){return J.or(Object.values(this.Vs).map(i=>()=>i.containsKey(e,t)))}}class jf extends xE{constructor(e){super(),this.currentSequenceNumber=e}}class Qu{constructor(e){this.persistence=e,this.Fs=new Hy,this.$s=null}static Bs(e){return new Qu(e)}get Ls(){if(this.$s)return this.$s;throw it()}addReference(e,t,i){return this.Fs.addReference(i,t),this.Ls.delete(i.toString()),J.resolve()}removeReference(e,t,i){return this.Fs.removeReference(i,t),this.Ls.add(i.toString()),J.resolve()}markPotentiallyOrphaned(e,t){return this.Ls.add(t.toString()),J.resolve()}removeTarget(e,t){this.Fs.ls(t.targetId).forEach(a=>this.Ls.add(a.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next(a=>{a.forEach(c=>this.Ls.add(c.toString()))}).next(()=>i.removeTargetData(e,t))}ks(){this.$s=new Set}Os(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return J.forEach(this.Ls,i=>{const a=$e.fromPath(i);return this.qs(e,a).next(c=>{c||t.removeEntry(a,dt.min())})}).next(()=>(this.$s=null,t.apply(e)))}updateLimboDocument(e,t){return this.qs(e,t).next(i=>{i?this.Ls.delete(t.toString()):this.Ls.add(t.toString())})}xs(e){return 0}qs(e,t){return J.or([()=>J.resolve(this.Fs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ms(e,t)])}}class mw{constructor(e){this.yt=e}$(e,t,i,a){const c=new Bp("createOrUpgrade",t);var y;i<1&&a>=1&&(e.createObjectStore("owner"),(y=e).createObjectStore("mutationQueues",{keyPath:"userId"}),y.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",_0,{unique:!0}),y.createObjectStore("documentMutations"),q0(e),function(y){y.createObjectStore("remoteDocuments")}(e));let p=J.resolve();return i<3&&a>=3&&(0!==i&&(function(y){y.deleteObjectStore("targetDocuments"),y.deleteObjectStore("targets"),y.deleteObjectStore("targetGlobal")}(e),q0(e)),p=p.next(()=>function(y){const D=y.store("targetGlobal"),T={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:dt.min().toTimestamp(),targetCount:0};return D.put("targetGlobalKey",T)}(c))),i<4&&a>=4&&(0!==i&&(p=p.next(()=>function(y,D){return D.store("mutations").W().next(T=>{y.deleteObjectStore("mutations"),y.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",_0,{unique:!0});const x=D.store("mutations"),R=T.map(q=>x.put(q));return J.waitFor(R)})}(e,c))),p=p.next(()=>{!function(y){y.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),i<5&&a>=5&&(p=p.next(()=>this.Us(c))),i<6&&a>=6&&(p=p.next(()=>(function(y){y.createObjectStore("remoteDocumentGlobal")}(e),this.Ks(c)))),i<7&&a>=7&&(p=p.next(()=>this.Gs(c))),i<8&&a>=8&&(p=p.next(()=>this.Qs(e,c))),i<9&&a>=9&&(p=p.next(()=>{!function(y){y.objectStoreNames.contains("remoteDocumentChanges")&&y.deleteObjectStore("remoteDocumentChanges")}(e)})),i<10&&a>=10&&(p=p.next(()=>this.js(c))),i<11&&a>=11&&(p=p.next(()=>{(function(y){y.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(y){y.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),i<12&&a>=12&&(p=p.next(()=>{!function(y){const D=y.createObjectStore("documentOverlays",{keyPath:ko});D.createIndex("collectionPathOverlayIndex",nw,{unique:!1}),D.createIndex("collectionGroupOverlayIndex",rw,{unique:!1})}(e)})),i<13&&a>=13&&(p=p.next(()=>function(y){const D=y.createObjectStore("remoteDocumentsV14",{keyPath:v0});D.createIndex("documentKeyIndex",I0),D.createIndex("collectionGroupIndex",Wd)}(e)).next(()=>this.Ws(e,c)).next(()=>e.deleteObjectStore("remoteDocuments"))),i<14&&a>=14&&(p=p.next(()=>this.zs(e,c))),i<15&&a>=15&&(p=p.next(()=>function(y){y.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),y.createObjectStore("indexState",{keyPath:w0}).createIndex("sequenceNumberIndex",db,{unique:!1}),y.createObjectStore("indexEntries",{keyPath:D0}).createIndex("documentKeyIndex",b0,{unique:!1})}(e))),p}Ks(e){let t=0;return e.store("remoteDocuments").Z((i,a)=>{t+=ag(a)}).next(()=>{const i={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",i)})}Us(e){const t=e.store("mutationQueues"),i=e.store("mutations");return t.W().next(a=>J.forEach(a,c=>{const p=IDBKeyRange.bound([c.userId,-1],[c.userId,c.lastAcknowledgedBatchId]);return i.W("userMutationsIndex",p).next(y=>J.forEach(y,D=>{ct(D.userId===c.userId);const T=yl(this.yt,D);return F0(e,c.userId,T).next(()=>{})}))}))}Gs(e){const t=e.store("targetDocuments"),i=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(a=>{const c=[];return i.Z((p,y)=>{const D=new Jt(p),T=[0,ri(D)];c.push(t.get(T).next(x=>x?J.resolve():t.put({targetId:0,path:ri(D),sequenceNumber:a.highestListenSequenceNumber})))}).next(()=>J.waitFor(c))})}Qs(e,t){e.createObjectStore("collectionParents",{keyPath:tw});const i=t.store("collectionParents"),a=new og,c=p=>{if(a.add(p)){const y=p.lastSegment(),D=p.popLast();return i.put({collectionId:y,parent:ri(D)})}};return t.store("remoteDocuments").Z({X:!0},(p,y)=>{const D=new Jt(p);return c(D.popLast())}).next(()=>t.store("documentMutations").Z({X:!0},([p,y,D],T)=>{const x=Hs(y);return c(x.popLast())}))}js(e){const t=e.store("targets");return t.Z((i,a)=>{const c=qd(a),p=Sy(this.yt,c);return t.put(p)})}Ws(e,t){const i=t.store("remoteDocuments"),a=[];return i.Z((c,p)=>{const y=t.store("remoteDocumentsV14"),D=(T=p,T.document?new $e(Jt.fromString(T.document.name).popFirst(5)):T.noDocument?$e.fromSegments(T.noDocument.path):T.unknownDocument?$e.fromSegments(T.unknownDocument.path):it()).path.toArray();var T;const x={prefixPath:D.slice(0,D.length-2),collectionGroup:D[D.length-2],documentId:D[D.length-1],readTime:p.readTime||[0,0],unknownDocument:p.unknownDocument,noDocument:p.noDocument,document:p.document,hasCommittedMutations:!!p.hasCommittedMutations};a.push(y.put(x))}).next(()=>J.waitFor(a))}zs(e,t){const i=t.store("mutations"),a=Uy(this.yt),c=new W0(Qu.Bs,this.yt.ie);return i.W().next(p=>{const y=new Map;return p.forEach(D=>{var T;let x=null!==(T=y.get(D.userId))&&void 0!==T?T:Bt();yl(this.yt,D).keys().forEach(R=>x=x.add(R)),y.set(D.userId,x)}),J.forEach(y,(D,T)=>{const x=new Pr(T),R=Pf.re(this.yt,x),q=c.getIndexManager(x),ne=La.re(x,this.yt,q,c.referenceDelegate);return new $0(a,ne,R,q).recalculateAndSaveOverlaysForDocumentKeys(new by(t,qi.at),D).next()})})}}function q0(n){n.createObjectStore("targetDocuments",{keyPath:ew}).createIndex("documentTargetsIndex",E0,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",JE,{unique:!0}),n.createObjectStore("targetGlobal")}const Gy="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class dg{constructor(e,t,i,a,c,p,y,D,T,x,R=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=i,this.Hs=c,this.window=p,this.document=y,this.Js=T,this.Ys=x,this.Xs=R,this.Ss=null,this.Ds=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Zs=null,this.inForeground=!1,this.ti=null,this.ei=null,this.ni=Number.NEGATIVE_INFINITY,this.si=q=>Promise.resolve(),!dg.C())throw new De(re.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new cg(this,a),this.ii=t+"main",this.yt=new C0(D),this.ri=new Jr(this.ii,this.Xs,new mw(this.yt)),this.Cs=new hb(this.referenceDelegate,this.yt),this.remoteDocumentCache=Uy(this.yt),this.Ns=new x0,this.window&&this.window.localStorage?this.oi=this.window.localStorage:(this.oi=null,!1===x&&Jn("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ui().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new De(re.FAILED_PRECONDITION,Gy);return this.ci(),this.ai(),this.hi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Cs.getHighestSequenceNumber(e))}).then(e=>{this.Ss=new qi(e,this.Js)}).then(()=>{this.Ds=!0}).catch(e=>(this.ri&&this.ri.close(),Promise.reject(e)))}li(e){var t=this;return this.si=function(){var i=(0,z.Z)(function*(a){if(t.started)return e(a)});return function(a){return i.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ri.L(function(){var t=(0,z.Z)(function*(i){null===i.newVersion&&(yield e())});return function(i){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Hs.enqueueAndForget((0,z.Z)(function*(){t.started&&(yield t.ui())})))}ui(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>$f(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.fi(e).next(t=>{t||(this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)))})}).next(()=>this.di(e)).next(t=>this.isPrimary&&!t?this._i(e).next(()=>!1):!!t&&this.wi(e).next(()=>!0))).catch(e=>{if(Bs(e))return ke("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return ke("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Hs.enqueueRetryable(()=>this.si(e)),this.isPrimary=e})}fi(e){return eh(e).get("owner").next(t=>J.resolve(this.mi(t)))}gi(e){return $f(e).delete(this.clientId)}yi(){var e=this;return(0,z.Z)(function*(){if(e.isPrimary&&!e.pi(e.ni,18e5)){e.ni=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",i=>{const a=Or(i,"clientMetadata");return a.W().next(c=>{const p=e.Ii(c,18e5),y=c.filter(D=>-1===p.indexOf(D));return J.forEach(y,D=>a.delete(D.clientId)).next(()=>y)})}).catch(()=>[]);if(e.oi)for(const i of t)e.oi.removeItem(e.Ti(i.clientId))}})()}hi(){this.ei=this.Hs.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ui().then(()=>this.yi()).then(()=>this.hi()))}mi(e){return!!e&&e.ownerId===this.clientId}di(e){return this.Ys?J.resolve(!0):eh(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)){if(this.mi(t)&&this.networkEnabled)return!0;if(!this.mi(t)){if(!t.allowTabSynchronization)throw new De(re.FAILED_PRECONDITION,Gy);return!1}}return!(!this.networkEnabled||!this.inForeground)||$f(e).W().next(i=>void 0===this.Ii(i,5e3).find(a=>!(this.clientId===a.clientId||!(!this.networkEnabled&&a.networkEnabled||!this.inForeground&&a.inForeground&&this.networkEnabled===a.networkEnabled))))}).next(t=>(this.isPrimary!==t&&ke("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,z.Z)(function*(){e.Ds=!1,e.Ai(),e.ei&&(e.ei.cancel(),e.ei=null),e.Ri(),e.bi(),yield e.ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const i=new by(t,qi.at);return e._i(i).next(()=>e.gi(i))}),e.ri.close(),e.Pi()})()}Ii(e,t){return e.filter(i=>this.pi(i.updateTimeMs,t)&&!this.Ei(i.clientId))}vi(){return this.runTransaction("getActiveClients","readonly",e=>$f(e).W().next(t=>this.Ii(t,18e5).map(i=>i.clientId)))}get started(){return this.Ds}getMutationQueue(e,t){return La.re(e,this.yt,t,this.referenceDelegate)}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new L0(e,this.yt.ie.databaseId)}getDocumentOverlayCache(e){return Pf.re(this.yt,e)}getBundleCache(){return this.Ns}runTransaction(e,t,i){ke("IndexedDbPersistence","Starting transaction:",e);const a="readonly"===t?"readonly":"readwrite",c=15===(p=this.Xs)?T0:14===p?Dy:13===p?vs:12===p?zs:11===p?Gs:void it();var p;let y;return this.ri.runTransaction(e,a,c,D=>(y=new by(D,this.Ss?this.Ss.next():qi.at),"readwrite-primary"===t?this.fi(y).next(T=>!!T||this.di(y)).next(T=>{if(!T)throw Jn(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)),new De(re.FAILED_PRECONDITION,AE);return i(y)}).next(T=>this.wi(y).next(()=>T)):this.Vi(y).next(()=>i(y)))).then(D=>(y.raiseOnCommittedEvent(),D))}Vi(e){return eh(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)&&!this.mi(t)&&!(this.Ys||this.allowTabSynchronization&&t.allowTabSynchronization))throw new De(re.FAILED_PRECONDITION,Gy)})}wi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return eh(e).put("owner",t)}static C(){return Jr.C()}_i(e){const t=eh(e);return t.get("owner").next(i=>this.mi(i)?(ke("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):J.resolve())}pi(e,t){const i=Date.now();return!(e<i-t||e>i&&(Jn(`Detected an update time that is in the future: ${e} > ${i}`),1))}ci(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ti=()=>{this.Hs.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ui()))},this.document.addEventListener("visibilitychange",this.ti),this.inForeground="visible"===this.document.visibilityState)}Ri(){this.ti&&(this.document.removeEventListener("visibilitychange",this.ti),this.ti=null)}ai(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Zs=()=>{this.Ai(),(0,Dt.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Hs.enterRestrictedMode(!0),this.Hs.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Zs))}bi(){this.Zs&&(this.window.removeEventListener("pagehide",this.Zs),this.Zs=null)}Ei(e){var t;try{const i=null!==(null===(t=this.oi)||void 0===t?void 0:t.getItem(this.Ti(e)));return ke("IndexedDbPersistence",`Client '${e}' ${i?"is":"is not"} zombied in LocalStorage`),i}catch(i){return Jn("IndexedDbPersistence","Failed to get zombied client id.",i),!1}}Ai(){if(this.oi)try{this.oi.setItem(this.Ti(this.clientId),String(Date.now()))}catch(e){Jn("Failed to set zombie client id.",e)}}Pi(){if(this.oi)try{this.oi.removeItem(this.Ti(this.clientId))}catch{}}Ti(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function eh(n){return Or(n,"owner")}function $f(n){return Or(n,"clientMetadata")}function zy(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class hg{constructor(e,t,i,a){this.targetId=e,this.fromCache=t,this.Si=i,this.Di=a}static Ci(e,t){let i=Bt(),a=Bt();for(const c of t.docChanges)switch(c.type){case 0:i=i.add(c.doc.key);break;case 1:a=a.add(c.doc.key)}return new hg(e,t.fromCache,i,a)}}class K0{constructor(){this.xi=!1}initialize(e,t){this.Ni=e,this.indexManager=t,this.xi=!0}getDocumentsMatchingQuery(e,t,i,a){return this.ki(e,t).next(c=>c||this.Oi(e,t,a,i)).next(c=>c||this.Mi(e,t))}ki(e,t){if(Yv(t))return J.resolve(null);let i=yi(t);return this.indexManager.getIndexType(e,i).next(a=>0===a?null:(null!==t.limit&&1===a&&(t=Zp(t,null,"F"),i=yi(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next(c=>{const p=Bt(...c);return this.Ni.getDocuments(e,p).next(y=>this.indexManager.getMinOffset(e,i).next(D=>{const T=this.Fi(t,y);return this.$i(t,T,p,D.readTime)?this.ki(e,Zp(t,null,"F")):this.Bi(e,T,t,D)}))})))}Oi(e,t,i,a){return Yv(t)||a.isEqual(dt.min())?this.Mi(e,t):this.Ni.getDocuments(e,i).next(c=>{const p=this.Fi(t,c);return this.$i(t,p,i,a)?this.Mi(e,t):(Nu()<=On.in.DEBUG&&ke("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),ty(t)),this.Bi(e,p,t,Lp(a,-1)))})}Fi(e,t){let i=new sn(Jv(e));return t.forEach((a,c)=>{Bd(e,c)&&(i=i.add(c))}),i}$i(e,t,i,a){if(null===e.limit)return!1;if(i.size!==t.size)return!0;const c="F"===e.limitType?t.last():t.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(a)>0)}Mi(e,t){return Nu()<=On.in.DEBUG&&ke("QueryEngine","Using full collection scan to execute query:",ty(t)),this.Ni.getDocumentsMatchingQuery(e,t,Wi.min())}Bi(e,t,i,a){return this.Ni.getDocumentsMatchingQuery(e,i,a).next(c=>(t.forEach(p=>{c=c.insert(p.key,p)}),c))}}class yw{constructor(e,t,i,a){this.persistence=e,this.Li=t,this.yt=a,this.qi=new Kn(Lt),this.Ui=new Oa(c=>ka(c),Yi),this.Ki=new Map,this.Gi=e.getRemoteDocumentCache(),this.Cs=e.getTargetCache(),this.Ns=e.getBundleCache(),this.Qi(i)}Qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new $0(this.Gi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Gi.setIndexManager(this.indexManager),this.Li.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.qi))}}function _w(n,e,t,i){return new yw(n,e,t,i)}function vw(n,e){return Z0.apply(this,arguments)}function Z0(){return Z0=(0,z.Z)(function*(n,e){const t=ze(n);return yield t.persistence.runTransaction("Handle user change","readonly",i=>{let a;return t.mutationQueue.getAllMutationBatches(i).next(c=>(a=c,t.Qi(e),t.mutationQueue.getAllMutationBatches(i))).next(c=>{const p=[],y=[];let D=Bt();for(const T of a){p.push(T.batchId);for(const x of T.mutations)D=D.add(x.key)}for(const T of c){y.push(T.batchId);for(const x of T.mutations)D=D.add(x.key)}return t.localDocuments.getDocuments(i,D).next(T=>({ji:T,removedBatchIds:p,addedBatchIds:y}))})})}),Z0.apply(this,arguments)}function Wy(n){const e=ze(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Cs.getLastRemoteSnapshotVersion(t))}function Y0(n,e,t){let i=Bt(),a=Bt();return t.forEach(c=>i=i.add(c)),e.getEntries(n,i).next(c=>{let p=_i();return t.forEach((y,D)=>{const T=c.get(y);D.isFoundDocument()!==T.isFoundDocument()&&(a=a.add(y)),D.isNoDocument()&&D.version.isEqual(dt.min())?(e.removeEntry(y,D.readTime),p=p.insert(y,D)):!T.isValidDocument()||D.version.compareTo(T.version)>0||0===D.version.compareTo(T.version)&&T.hasPendingWrites?(e.addEntry(D),p=p.insert(y,D)):ke("LocalStore","Ignoring outdated watch update for ",y,". Current version:",T.version," Watch version:",D.version)}),{Wi:p,zi:a}})}function Iw(n,e){const t=ze(n);return t.persistence.runTransaction("Get next mutation batch","readonly",i=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function vl(n,e){const t=ze(n);return t.persistence.runTransaction("Allocate target","readwrite",i=>{let a;return t.Cs.getTargetData(i,e).next(c=>c?(a=c,J.resolve(a)):t.Cs.allocateTargetId(i).next(p=>(a=new Is(e,p,0,i.currentSequenceNumber),t.Cs.addTargetData(i,a).next(()=>a))))}).then(i=>{const a=t.qi.get(i.targetId);return(null===a||i.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(t.qi=t.qi.insert(i.targetId,i),t.Ui.set(e,i.targetId)),i})}function Lo(n,e,t){return qy.apply(this,arguments)}function qy(){return qy=(0,z.Z)(function*(n,e,t){const i=ze(n),a=i.qi.get(e),c=t?"readwrite":"readwrite-primary";try{t||(yield i.persistence.runTransaction("Release target",c,p=>i.persistence.referenceDelegate.removeTarget(p,a)))}catch(p){if(!Bs(p))throw p;ke("LocalStore",`Failed to update sequence numbers for target ${e}: ${p}`)}i.qi=i.qi.remove(e),i.Ui.delete(a.target)}),qy.apply(this,arguments)}function pg(n,e,t){const i=ze(n);let a=dt.min(),c=Bt();return i.persistence.runTransaction("Execute query","readonly",p=>function(y,D,T){const x=ze(y),R=x.Ui.get(T);return void 0!==R?J.resolve(x.qi.get(R)):x.Cs.getTargetData(D,T)}(i,p,yi(e)).next(y=>{if(y)return a=y.lastLimboFreeSnapshotVersion,i.Cs.getMatchingKeysForTargetId(p,y.targetId).next(D=>{c=D})}).next(()=>i.Li.getDocumentsMatchingQuery(p,e,t?a:dt.min(),t?c:Bt())).next(y=>(Ew(i,ny(e),y),{documents:y,Hi:c})))}function Q0(n,e){const t=ze(n),i=ze(t.Cs),a=t.qi.get(e);return a?Promise.resolve(a.target):t.persistence.runTransaction("Get target data","readonly",c=>i.ne(c,e).next(p=>p?p.target:null))}function X0(n,e){const t=ze(n),i=t.Ki.get(e)||dt.min();return t.persistence.runTransaction("Get new document changes","readonly",a=>t.Gi.getAllFromCollectionGroup(a,e,Lp(i,-1),Number.MAX_SAFE_INTEGER)).then(a=>(Ew(t,e,a),a))}function Ew(n,e,t){let i=n.Ki.get(e)||dt.min();t.forEach((a,c)=>{c.readTime.compareTo(i)>0&&(i=c.readTime)}),n.Ki.set(e,i)}function gg(){return gg=(0,z.Z)(function*(n,e,t,i){const a=ze(n);let c=Bt(),p=_i();for(const T of t){const x=e.Ji(T.metadata.name);T.document&&(c=c.add(x));const R=e.Yi(T);R.setReadTime(e.Xi(T.metadata.readTime)),p=p.insert(x,R)}const y=a.Gi.newChangeBuffer({trackRemovals:!0}),D=yield vl(a,(T=i,yi(Vd(Jt.fromString(`__bundle__/docs/${T}`)))));var T;return a.persistence.runTransaction("Apply bundle documents","readwrite",T=>Y0(T,y,p).next(x=>(y.apply(T),x)).next(x=>a.Cs.removeMatchingKeysForTargetId(T,D.targetId).next(()=>a.Cs.addMatchingKeys(T,c,D.targetId)).next(()=>a.localDocuments.getLocalViewOfDocuments(T,x.Wi,x.zi)).next(()=>x.Wi)))}),gg.apply(this,arguments)}function Dw(n,e){return Ky.apply(this,arguments)}function Ky(){return Ky=(0,z.Z)(function*(n,e,t=Bt()){const i=yield vl(n,yi(sg(e.bundledQuery))),a=ze(n);return a.persistence.runTransaction("Save named query","readwrite",c=>{const p=Zn(e.readTime);if(i.snapshotVersion.compareTo(p)>=0)return a.Ns.saveNamedQuery(c,e);const y=i.withResumeToken(Fn.EMPTY_BYTE_STRING,p);return a.qi=a.qi.insert(y.targetId,y),a.Cs.updateTargetData(c,y).next(()=>a.Cs.removeMatchingKeysForTargetId(c,i.targetId)).next(()=>a.Cs.addMatchingKeys(c,t,i.targetId)).next(()=>a.Ns.saveNamedQuery(c,e))})}),Ky.apply(this,arguments)}function th(n,e){return`firestore_clients_${n}_${e}`}function J0(n,e,t){let i=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(i+=`_${e.uid}`),i}function mg(n,e){return`firestore_targets_${n}_${e}`}class yg{constructor(e,t,i,a){this.user=e,this.batchId=t,this.state=i,this.error=a}static Zi(e,t,i){const a=JSON.parse(i);let c,p="object"==typeof a&&-1!==["pending","acknowledged","rejected"].indexOf(a.state)&&(void 0===a.error||"object"==typeof a.error);return p&&a.error&&(p="string"==typeof a.error.message&&"string"==typeof a.error.code,p&&(c=new De(a.error.code,a.error.message))),p?new yg(e,t,a.state,c):(Jn("SharedClientState",`Failed to parse mutation state for ID '${t}': ${i}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class nh{constructor(e,t,i){this.targetId=e,this.state=t,this.error=i}static Zi(e,t){const i=JSON.parse(t);let a,c="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return c&&i.error&&(c="string"==typeof i.error.message&&"string"==typeof i.error.code,c&&(a=new De(i.error.code,i.error.message))),c?new nh(e,i.state,a):(Jn("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class _g{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Zi(e,t){const i=JSON.parse(t);let a="object"==typeof i&&i.activeTargetIds instanceof Array,c=Gd();for(let p=0;a&&p<i.activeTargetIds.length;++p)a=Bv(i.activeTargetIds[p]),c=c.add(i.activeTargetIds[p]);return a?new _g(e,c):(Jn("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class vg{constructor(e,t){this.clientId=e,this.onlineState=t}static Zi(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new vg(t.clientId,t.onlineState):(Jn("SharedClientState",`Failed to parse online state: ${e}`),null)}}class Zy{constructor(){this.activeTargetIds=Gd()}er(e){this.activeTargetIds=this.activeTargetIds.add(e)}nr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}tr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Hf{constructor(e,t,i,a,c){this.window=e,this.Hs=t,this.persistenceKey=i,this.sr=a,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ir=this.rr.bind(this),this.ur=new Kn(Lt),this.started=!1,this.cr=[];const p=i.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=c,this.ar=th(this.persistenceKey,this.sr),this.hr=`firestore_sequence_number_${this.persistenceKey}`,this.ur=this.ur.insert(this.sr,new Zy),this.lr=new RegExp(`^firestore_clients_${p}_([^_]*)$`),this.dr=new RegExp(`^firestore_mutations_${p}_(\\d+)(?:_(.*))?$`),this._r=new RegExp(`^firestore_targets_${p}_(\\d+)$`),this.wr=`firestore_online_state_${this.persistenceKey}`,this.mr=function(y){return`firestore_bundle_loaded_v2_${y}`}(this.persistenceKey),this.window.addEventListener("storage",this.ir)}static C(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,z.Z)(function*(){const t=yield e.syncEngine.vi();for(const a of t){if(a===e.sr)continue;const c=e.getItem(th(e.persistenceKey,a));if(c){const p=_g.Zi(a,c);p&&(e.ur=e.ur.insert(p.clientId,p))}}e.gr();const i=e.storage.getItem(e.wr);if(i){const a=e.yr(i);a&&e.pr(a)}for(const a of e.cr)e.rr(a);e.cr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.hr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ir(this.ur)}isActiveQueryTarget(e){let t=!1;return this.ur.forEach((i,a)=>{a.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Tr(e,"pending")}updateMutationState(e,t,i){this.Tr(e,t,i),this.Er(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const i=this.storage.getItem(mg(this.persistenceKey,e));if(i){const a=nh.Zi(e,i);a&&(t=a.state)}}return this.Ar.er(e),this.gr(),t}removeLocalQueryTarget(e){this.Ar.nr(e),this.gr()}isLocalQueryTarget(e){return this.Ar.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(mg(this.persistenceKey,e))}updateQueryState(e,t,i){this.Rr(e,t,i)}handleUserChange(e,t,i){t.forEach(a=>{this.Er(a)}),this.currentUser=e,i.forEach(a=>{this.addPendingMutation(a)})}setOnlineState(e){this.br(e)}notifyBundleLoaded(e){this.Pr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ir),this.removeItem(this.ar),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return ke("SharedClientState","READ",e,t),t}setItem(e,t){ke("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){ke("SharedClientState","REMOVE",e),this.storage.removeItem(e)}rr(e){var t=this;const i=e;if(i.storageArea===this.storage){if(ke("SharedClientState","EVENT",i.key,i.newValue),i.key===this.ar)return void Jn("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Hs.enqueueRetryable((0,z.Z)(function*(){if(t.started){if(null!==i.key)if(t.lr.test(i.key)){if(null==i.newValue){const a=t.vr(i.key);return t.Vr(a,null)}{const a=t.Sr(i.key,i.newValue);if(a)return t.Vr(a.clientId,a)}}else if(t.dr.test(i.key)){if(null!==i.newValue){const a=t.Dr(i.key,i.newValue);if(a)return t.Cr(a)}}else if(t._r.test(i.key)){if(null!==i.newValue){const a=t.Nr(i.key,i.newValue);if(a)return t.kr(a)}}else if(i.key===t.wr){if(null!==i.newValue){const a=t.yr(i.newValue);if(a)return t.pr(a)}}else if(i.key===t.hr){const a=function(c){let p=qi.at;if(null!=c)try{const y=JSON.parse(c);ct("number"==typeof y),p=y}catch(y){Jn("SharedClientState","Failed to read sequence number from WebStorage",y)}return p}(i.newValue);a!==qi.at&&t.sequenceNumberHandler(a)}else if(i.key===t.mr){const a=t.Or(i.newValue);yield Promise.all(a.map(c=>t.syncEngine.Mr(c)))}}else t.cr.push(i)}))}}get Ar(){return this.ur.get(this.sr)}gr(){this.setItem(this.ar,this.Ar.tr())}Tr(e,t,i){const a=new yg(this.currentUser,e,t,i),c=J0(this.persistenceKey,this.currentUser,e);this.setItem(c,a.tr())}Er(e){const t=J0(this.persistenceKey,this.currentUser,e);this.removeItem(t)}br(e){this.storage.setItem(this.wr,JSON.stringify({clientId:this.sr,onlineState:e}))}Rr(e,t,i){const a=mg(this.persistenceKey,e),c=new nh(e,t,i);this.setItem(a,c.tr())}Pr(e){const t=JSON.stringify(Array.from(e));this.setItem(this.mr,t)}vr(e){const t=this.lr.exec(e);return t?t[1]:null}Sr(e,t){const i=this.vr(e);return _g.Zi(i,t)}Dr(e,t){const i=this.dr.exec(e),a=Number(i[1]);return yg.Zi(new Pr(void 0!==i[2]?i[2]:null),a,t)}Nr(e,t){const i=this._r.exec(e),a=Number(i[1]);return nh.Zi(a,t)}yr(e){return vg.Zi(e)}Or(e){return JSON.parse(e)}Cr(e){var t=this;return(0,z.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.Fr(e.batchId,e.state,e.error);ke("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}kr(e){return this.syncEngine.$r(e.targetId,e.state,e.error)}Vr(e,t){const i=t?this.ur.insert(e,t):this.ur.remove(e),a=this.Ir(this.ur),c=this.Ir(i),p=[],y=[];return c.forEach(D=>{a.has(D)||p.push(D)}),a.forEach(D=>{c.has(D)||y.push(D)}),this.syncEngine.Br(p,y).then(()=>{this.ur=i})}pr(e){this.ur.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ir(e){let t=Gd();return e.forEach((i,a)=>{t=t.unionWith(a.activeTargetIds)}),t}}class eI{constructor(){this.Lr=new Zy,this.qr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e){return this.Lr.er(e),this.qr[e]||"not-current"}updateQueryState(e,t,i){this.qr[e]=t}removeLocalQueryTarget(e){this.Lr.nr(e)}isLocalQueryTarget(e){return this.Lr.activeTargetIds.has(e)}clearQueryState(e){delete this.qr[e]}getAllActiveQueryTargets(){return this.Lr.activeTargetIds}isActiveQueryTarget(e){return this.Lr.activeTargetIds.has(e)}start(){return this.Lr=new Zy,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class tI{Ur(e){}shutdown(){}}class Yy{constructor(){this.Kr=()=>this.Gr(),this.Qr=()=>this.jr(),this.Wr=[],this.zr()}Ur(e){this.Wr.push(e)}shutdown(){window.removeEventListener("online",this.Kr),window.removeEventListener("offline",this.Qr)}zr(){window.addEventListener("online",this.Kr),window.addEventListener("offline",this.Qr)}Gr(){ke("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Wr)e(0)}jr(){ke("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Wr)e(1)}static C(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const bw={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Tw{constructor(e){this.Hr=e.Hr,this.Jr=e.Jr}Yr(e){this.Xr=e}Zr(e){this.eo=e}onMessage(e){this.no=e}close(){this.Jr()}send(e){this.Hr(e)}so(){this.Xr()}io(e){this.eo(e)}ro(e){this.no(e)}}class Cw extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.oo=(e.ssl?"https":"http")+"://"+e.host,this.uo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get co(){return!1}ao(e,t,i,a,c){const p=this.ho(e,t);ke("RestConnection","Sending: ",p,i);const y={};return this.lo(y,a,c),this.fo(e,p,y,i).then(D=>(ke("RestConnection","Received: ",D),D),D=>{throw Nd("RestConnection",`${e} failed with error: `,D,"url: ",p,"request:",i),D})}_o(e,t,i,a,c,p){return this.ao(e,t,i,a,c)}lo(e,t,i){e["X-Goog-Api-Client"]="gl-js/ fire/"+Md,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((a,c)=>e[c]=a),i&&i.headers.forEach((a,c)=>e[c]=a)}ho(e,t){return`${this.oo}/v1/${t}:${bw[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}fo(e,t,i,a){return new Promise((c,p)=>{const y=new EE;y.setWithCredentials(!0),y.listenOnce(vE.COMPLETE,()=>{try{switch(y.getLastErrorCode()){case yf.NO_ERROR:const T=y.getResponseJson();ke("Connection","XHR received:",JSON.stringify(T)),c(T);break;case yf.TIMEOUT:ke("Connection",'RPC "'+e+'" timed out'),p(new De(re.DEADLINE_EXCEEDED,"Request time out"));break;case yf.HTTP_ERROR:const x=y.getStatus();if(ke("Connection",'RPC "'+e+'" failed with status:',x,"response text:",y.getResponseText()),x>0){let R=y.getResponseJson();Array.isArray(R)&&(R=R[0]);const q=R?.error;if(q&&q.status&&q.message){const ne=function(ge){const Ue=ge.toLowerCase().replace(/_/g,"-");return Object.values(re).indexOf(Ue)>=0?Ue:re.UNKNOWN}(q.status);p(new De(ne,q.message))}else p(new De(re.UNKNOWN,"Server responded with status "+y.getStatus()))}else p(new De(re.UNAVAILABLE,"Connection failed."));break;default:it()}}finally{ke("Connection",'RPC "'+e+'" completed.')}});const D=JSON.stringify(a);y.send(t,"POST",D,i,15)})}wo(e,t,i){const a=[this.oo,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=Cv(),p=Om(),y={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(y.xmlHttpFactory=new IE({})),this.lo(y.initMessageHeaders,t,i),y.encodeInitMessageHeaders=!0;const D=a.join("");ke("Connection","Creating WebChannel: "+D,y);const T=c.createWebChannel(D,y);let x=!1,R=!1;const q=new Tw({Hr:ge=>{R?ke("Connection","Not sending because WebChannel is closed:",ge):(x||(ke("Connection","Opening WebChannel transport."),T.open(),x=!0),ke("Connection","WebChannel sending:",ge),T.send(ge))},Jr:()=>T.close()}),ne=(ge,Ue,Ye)=>{ge.listen(Ue,zt=>{try{Ye(zt)}catch(Xt){setTimeout(()=>{throw Xt},0)}})};return ne(T,Pp.EventType.OPEN,()=>{R||ke("Connection","WebChannel transport opened.")}),ne(T,Pp.EventType.CLOSE,()=>{R||(R=!0,ke("Connection","WebChannel transport closed"),q.io())}),ne(T,Pp.EventType.ERROR,ge=>{R||(R=!0,Nd("Connection","WebChannel transport errored:",ge),q.io(new De(re.UNAVAILABLE,"The operation could not be completed")))}),ne(T,Pp.EventType.MESSAGE,ge=>{var Ue;if(!R){const Ye=ge.data[0];ct(!!Ye);const Xt=Ye.error||(null===(Ue=Ye[0])||void 0===Ue?void 0:Ue.error);if(Xt){ke("Connection","WebChannel received error:",Xt);const jt=Xt.status;let Ut=function(Wt){const qr=xn[Wt];if(void 0!==qr)return oy(qr)}(jt),Ft=Xt.message;void 0===Ut&&(Ut=re.INTERNAL,Ft="Unknown error status: "+jt+" with message "+Xt.message),R=!0,q.io(new De(Ut,Ft)),T.close()}else ke("Connection","WebChannel received:",Ye),q.ro(Ye)}}),ne(p,Lm.STAT_EVENT,ge=>{ge.stat===xd.PROXY?ke("Connection","Detected buffering proxy"):ge.stat===xd.NOPROXY&&ke("Connection","Detected no buffering proxy")}),setTimeout(()=>{q.so()},0),q}}function Ig(){return typeof window<"u"?window:null}function Eg(){return typeof document<"u"?document:null}function rh(n){return new py(n,!0)}class Qy{constructor(e,t,i=1e3,a=1.5,c=6e4){this.Hs=e,this.timerId=t,this.mo=i,this.yo=a,this.po=c,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}reset(){this.Io=0}Ao(){this.Io=this.po}Ro(e){this.cancel();const t=Math.floor(this.Io+this.bo()),i=Math.max(0,Date.now()-this.Eo),a=Math.max(0,t-i);a>0&&ke("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.Io} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.To=this.Hs.enqueueAfterDelay(this.timerId,a,()=>(this.Eo=Date.now(),e())),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}Po(){null!==this.To&&(this.To.skipDelay(),this.To=null)}cancel(){null!==this.To&&(this.To.cancel(),this.To=null)}bo(){return(Math.random()-.5)*this.Io}}class nI{constructor(e,t,i,a,c,p,y,D){this.Hs=e,this.vo=i,this.Vo=a,this.connection=c,this.authCredentialsProvider=p,this.appCheckCredentialsProvider=y,this.listener=D,this.state=0,this.So=0,this.Do=null,this.Co=null,this.stream=null,this.xo=new Qy(e,t)}No(){return 1===this.state||5===this.state||this.ko()}ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Oo()}stop(){var e=this;return(0,z.Z)(function*(){e.No()&&(yield e.close(0))})()}Mo(){this.state=0,this.xo.reset()}Fo(){this.ko()&&null===this.Do&&(this.Do=this.Hs.enqueueAfterDelay(this.vo,6e4,()=>this.$o()))}Bo(e){this.Lo(),this.stream.send(e)}$o(){var e=this;return(0,z.Z)(function*(){if(e.ko())return e.close(0)})()}Lo(){this.Do&&(this.Do.cancel(),this.Do=null)}qo(){this.Co&&(this.Co.cancel(),this.Co=null)}close(e,t){var i=this;return(0,z.Z)(function*(){i.Lo(),i.qo(),i.xo.cancel(),i.So++,4!==e?i.xo.reset():t&&t.code===re.RESOURCE_EXHAUSTED?(Jn(t.toString()),Jn("Using maximum backoff delay to prevent overloading the backend."),i.xo.Ao()):t&&t.code===re.UNAUTHENTICATED&&3!==i.state&&(i.authCredentialsProvider.invalidateToken(),i.appCheckCredentialsProvider.invalidateToken()),null!==i.stream&&(i.Uo(),i.stream.close(),i.stream=null),i.state=e,yield i.listener.Zr(t)})()}Uo(){}auth(){this.state=1;const e=this.Ko(this.So),t=this.So;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,a])=>{this.So===t&&this.Go(i,a)},i=>{e(()=>{const a=new De(re.UNKNOWN,"Fetching auth token failed: "+i.message);return this.Qo(a)})})}Go(e,t){const i=this.Ko(this.So);this.stream=this.jo(e,t),this.stream.Yr(()=>{i(()=>(this.state=2,this.Co=this.Hs.enqueueAfterDelay(this.Vo,1e4,()=>(this.ko()&&(this.state=3),Promise.resolve())),this.listener.Yr()))}),this.stream.Zr(a=>{i(()=>this.Qo(a))}),this.stream.onMessage(a=>{i(()=>this.onMessage(a))})}Oo(){var e=this;this.state=5,this.xo.Ro((0,z.Z)(function*(){e.state=0,e.start()}))}Qo(e){return ke("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Ko(e){return t=>{this.Hs.enqueueAndForget(()=>this.So===e?t():(ke("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Sw extends nI{constructor(e,t,i,a,c,p){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,a,p),this.yt=c}jo(e,t){return this.connection.wo("Listen",e,t)}onMessage(e){this.xo.reset();const t=function p0(n,e){let t;if("targetChange"in e){const i="NO_CHANGE"===(D=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===D?1:"REMOVE"===D?2:"CURRENT"===D?3:"RESET"===D?4:it(),a=e.targetChange.targetIds||[],c=function(D,T){return D.wt?(ct(void 0===T||"string"==typeof T),Fn.fromBase64String(T||"")):(ct(void 0===T||T instanceof Uint8Array),Fn.fromUint8Array(T||new Uint8Array))}(n,e.targetChange.resumeToken),p=e.targetChange.cause,y=p&&function(D){const T=void 0===D.code?re.UNKNOWN:oy(D.code);return new De(T,D.message||"")}(p);t=new c0(i,a,c,y||null)}else if("documentChange"in e){const i=e.documentChange,a=No(n,i.document.name),c=Zn(i.document.updateTime),p=i.document.createTime?Zn(i.document.createTime):dt.min(),y=new ti({mapValue:{fields:i.document.fields}}),D=bn.newFoundDocument(a,c,p,y);t=new fl(i.targetIds||[],i.removedTargetIds||[],D.key,D)}else if("documentDelete"in e){const i=e.documentDelete,a=No(n,i.document),c=i.readTime?Zn(i.readTime):dt.min(),p=bn.newNoDocument(a,c);t=new fl([],i.removedTargetIds||[],p.key,p)}else if("documentRemove"in e){const i=e.documentRemove,a=No(n,i.document);t=new fl([],i.removedTargetIds||[],a,null)}else{if(!("filter"in e))return it();{const i=e.filter,c=new $d(i.count||0);t=new Jp(i.targetId,c)}}var D;return t}(this.yt,e),i=function(a){if(!("targetChange"in a))return dt.min();const c=a.targetChange;return c.targetIds&&c.targetIds.length?dt.min():c.readTime?Zn(c.readTime):dt.min()}(e);return this.listener.Wo(t,i)}zo(e){const t={};t.database=gl(this.yt),t.addTarget=function(a,c){let p;const y=c.target;return p=il(y)?{documents:Mf(a,y)}:{query:Ro(a,y)},p.targetId=c.targetId,c.resumeToken.approximateByteSize()>0?p.resumeToken=d0(a,c.resumeToken):c.snapshotVersion.compareTo(dt.min())>0&&(p.readTime=pl(a,c.snapshotVersion.toTimestamp())),p}(this.yt,e);const i=function qE(n,e){const t=function(i,a){switch(a){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return it()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);i&&(t.labels=i),this.Bo(t)}Ho(e){const t={};t.database=gl(this.yt),t.removeTarget=e,this.Bo(t)}}class Aw extends nI{constructor(e,t,i,a,c,p){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,a,p),this.yt=c,this.Jo=!1}get Yo(){return this.Jo}start(){this.Jo=!1,this.lastStreamToken=void 0,super.start()}Uo(){this.Jo&&this.Xo([])}jo(e,t){return this.connection.wo("Write",e,t)}onMessage(e){if(ct(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Jo){this.xo.reset();const t=function g0(n,e){return n&&n.length>0?(ct(void 0!==e),n.map(t=>function(i,a){let c=Zn(i.updateTime?i.updateTime:a);return c.isEqual(dt.min())&&(c=Zn(a)),new GE(c,i.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),i=Zn(e.commitTime);return this.listener.Zo(i,t)}return ct(!e.writeResults||0===e.writeResults.length),this.Jo=!0,this.listener.tu()}eu(){const e={};e.database=gl(this.yt),this.Bo(e)}Xo(e){const t={streamToken:this.lastStreamToken,writes:e.map(i=>zd(this.yt,i))};this.Bo(t)}}class xw extends class{}{constructor(e,t,i,a){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.yt=a,this.nu=!1}su(){if(this.nu)throw new De(re.FAILED_PRECONDITION,"The client has already been terminated.")}ao(e,t,i){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,c])=>this.connection.ao(e,t,i,a,c)).catch(a=>{throw"FirebaseError"===a.name?(a.code===re.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new De(re.UNKNOWN,a.toString())})}_o(e,t,i,a){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([c,p])=>this.connection._o(e,t,i,c,p,a)).catch(c=>{throw"FirebaseError"===c.name?(c.code===re.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new De(re.UNKNOWN,c.toString())})}terminate(){this.nu=!0}}class Nw{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.iu=0,this.ru=null,this.ou=!0}uu(){0===this.iu&&(this.cu("Unknown"),this.ru=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ru=null,this.au("Backend didn't respond within 10 seconds."),this.cu("Offline"),Promise.resolve())))}hu(e){"Online"===this.state?this.cu("Unknown"):(this.iu++,this.iu>=1&&(this.lu(),this.au(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.cu("Offline")))}set(e){this.lu(),this.iu=0,"Online"===e&&(this.ou=!1),this.cu(e)}cu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}au(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ou?(Jn(t),this.ou=!1):ke("OnlineStateTracker",t)}lu(){null!==this.ru&&(this.ru.cancel(),this.ru=null)}}class rI{constructor(e,t,i,a,c){var p=this;this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.fu=[],this.du=new Map,this._u=new Set,this.wu=[],this.mu=c,this.mu.Ur(y=>{i.enqueueAndForget((0,z.Z)(function*(){var D;Ws(p)&&(ke("RemoteStore","Restarting streams for network reachability change."),yield(D=(0,z.Z)(function*(T){const x=ze(T);x._u.add(4),yield sh(x),x.gu.set("Unknown"),x._u.delete(4),yield ih(x)}),function(T){return D.apply(this,arguments)})(p))}))}),this.gu=new Nw(i,a)}}function ih(n){return Jy.apply(this,arguments)}function Jy(){return Jy=(0,z.Z)(function*(n){if(Ws(n))for(const e of n.wu)yield e(!0)}),Jy.apply(this,arguments)}function sh(n){return wg.apply(this,arguments)}function wg(){return wg=(0,z.Z)(function*(n){for(const e of n.wu)yield e(!1)}),wg.apply(this,arguments)}function Dg(n,e){const t=ze(n);t.du.has(e.targetId)||(t.du.set(e.targetId,e),Tg(t)?zf(t):ah(t).ko()&&e_(t,e))}function Gf(n,e){const t=ze(n),i=ah(t);t.du.delete(e),i.ko()&&bg(t,e),0===t.du.size&&(i.ko()?i.Fo():Ws(t)&&t.gu.set("Unknown"))}function e_(n,e){n.yu.Ot(e.targetId),ah(n).zo(e)}function bg(n,e){n.yu.Ot(e),ah(n).Ho(e)}function zf(n){n.yu=new ly({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ne:e=>n.du.get(e)||null}),ah(n).start(),n.gu.uu()}function Tg(n){return Ws(n)&&!ah(n).No()&&n.du.size>0}function Ws(n){return 0===ze(n)._u.size}function iI(n){n.yu=void 0}function Rw(n){return Wf.apply(this,arguments)}function Wf(){return Wf=(0,z.Z)(function*(n){n.du.forEach((e,t)=>{e_(n,e)})}),Wf.apply(this,arguments)}function kw(n,e){return t_.apply(this,arguments)}function t_(){return t_=(0,z.Z)(function*(n,e){iI(n),Tg(n)?(n.gu.hu(e),zf(n)):n.gu.set("Unknown")}),t_.apply(this,arguments)}function oh(n,e,t){return n_.apply(this,arguments)}function n_(){return n_=(0,z.Z)(function*(n,e,t){if(n.gu.set("Online"),e instanceof c0&&2===e.state&&e.cause)try{yield(i=(0,z.Z)(function*(a,c){const p=c.cause;for(const y of c.targetIds)a.du.has(y)&&(yield a.remoteSyncer.rejectListen(y,p),a.du.delete(y),a.yu.removeTarget(y))}),function(a,c){return i.apply(this,arguments)})(n,e)}catch(i){ke("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),i),yield Cg(n,i)}else if(e instanceof fl?n.yu.Kt(e):e instanceof Jp?n.yu.Jt(e):n.yu.jt(e),!t.isEqual(dt.min()))try{const i=yield Wy(n.localStore);t.compareTo(i)>=0&&(yield function(a,c){const p=a.yu.Zt(c);return p.targetChanges.forEach((y,D)=>{if(y.resumeToken.approximateByteSize()>0){const T=a.du.get(D);T&&a.du.set(D,T.withResumeToken(y.resumeToken,c))}}),p.targetMismatches.forEach(y=>{const D=a.du.get(y);if(!D)return;a.du.set(y,D.withResumeToken(Fn.EMPTY_BYTE_STRING,D.snapshotVersion)),bg(a,y);const T=new Is(D.target,y,1,D.sequenceNumber);e_(a,T)}),a.remoteSyncer.applyRemoteEvent(p)}(n,t))}catch(i){ke("RemoteStore","Failed to raise snapshot:",i),yield Cg(n,i)}var i}),n_.apply(this,arguments)}function Cg(n,e,t){return sI.apply(this,arguments)}function sI(){return sI=(0,z.Z)(function*(n,e,t){if(!Bs(e))throw e;n._u.add(1),yield sh(n),n.gu.set("Offline"),t||(t=()=>Wy(n.localStore)),n.asyncQueue.enqueueRetryable((0,z.Z)(function*(){ke("RemoteStore","Retrying IndexedDB access"),yield t(),n._u.delete(1),yield ih(n)}))}),sI.apply(this,arguments)}function r_(n,e){return e().catch(t=>Cg(n,t,e))}function Xu(n){return i_.apply(this,arguments)}function i_(){return i_=(0,z.Z)(function*(n){const e=ze(n),t=Il(e);let i=e.fu.length>0?e.fu[e.fu.length-1].batchId:-1;for(;oI(e);)try{const a=yield Iw(e.localStore,i);if(null===a){0===e.fu.length&&t.Fo();break}i=a.batchId,Pw(e,a)}catch(a){yield Cg(e,a)}aI(e)&&Sg(e)}),i_.apply(this,arguments)}function oI(n){return Ws(n)&&n.fu.length<10}function Pw(n,e){n.fu.push(e);const t=Il(n);t.ko()&&t.Yo&&t.Xo(e.mutations)}function aI(n){return Ws(n)&&!Il(n).No()&&n.fu.length>0}function Sg(n){Il(n).start()}function uI(n){return Ag.apply(this,arguments)}function Ag(){return Ag=(0,z.Z)(function*(n){Il(n).eu()}),Ag.apply(this,arguments)}function cI(n){return xg.apply(this,arguments)}function xg(){return xg=(0,z.Z)(function*(n){const e=Il(n);for(const t of n.fu)e.Xo(t.mutations)}),xg.apply(this,arguments)}function Ow(n,e,t){return s_.apply(this,arguments)}function s_(){return s_=(0,z.Z)(function*(n,e,t){const i=n.fu.shift(),a=Cy.from(i,e,t);yield r_(n,()=>n.remoteSyncer.applySuccessfulWrite(a)),yield Xu(n)}),s_.apply(this,arguments)}function Lw(n,e){return o_.apply(this,arguments)}function o_(){return o_=(0,z.Z)(function*(n,e){var t;e&&Il(n).Yo&&(yield(t=(0,z.Z)(function*(i,a){if(sy(c=a.code)&&c!==re.ABORTED){const p=i.fu.shift();Il(i).Mo(),yield r_(i,()=>i.remoteSyncer.rejectFailedWrite(p.batchId,a)),yield Xu(i)}var c}),function(i,a){return t.apply(this,arguments)})(n,e)),aI(n)&&Sg(n)}),o_.apply(this,arguments)}function a_(n,e){return lI.apply(this,arguments)}function lI(){return lI=(0,z.Z)(function*(n,e){const t=ze(n);t.asyncQueue.verifyOperationInProgress(),ke("RemoteStore","RemoteStore received new credentials");const i=Ws(t);t._u.add(3),yield sh(t),i&&t.gu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t._u.delete(3),yield ih(t)}),lI.apply(this,arguments)}function Mg(n,e){return u_.apply(this,arguments)}function u_(){return u_=(0,z.Z)(function*(n,e){const t=ze(n);e?(t._u.delete(2),yield ih(t)):e||(t._u.add(2),yield sh(t),t.gu.set("Unknown"))}),u_.apply(this,arguments)}function ah(n){return n.pu||(n.pu=function(e,t,i){const a=ze(e);return a.su(),new Sw(t,a.connection,a.authCredentials,a.appCheckCredentials,a.yt,i)}(n.datastore,n.asyncQueue,{Yr:Rw.bind(null,n),Zr:kw.bind(null,n),Wo:oh.bind(null,n)}),n.wu.push(function(){var e=(0,z.Z)(function*(t){t?(n.pu.Mo(),Tg(n)?zf(n):n.gu.set("Unknown")):(yield n.pu.stop(),iI(n))});return function(t){return e.apply(this,arguments)}}())),n.pu}function Il(n){return n.Iu||(n.Iu=function(e,t,i){const a=ze(e);return a.su(),new Aw(t,a.connection,a.authCredentials,a.appCheckCredentials,a.yt,i)}(n.datastore,n.asyncQueue,{Yr:uI.bind(null,n),Zr:Lw.bind(null,n),tu:cI.bind(null,n),Zo:Ow.bind(null,n)}),n.wu.push(function(){var e=(0,z.Z)(function*(t){t?(n.Iu.Mo(),yield Xu(n)):(yield n.Iu.stop(),n.fu.length>0&&(ke("RemoteStore",`Stopping write stream with ${n.fu.length} pending writes`),n.fu=[]))});return function(t){return e.apply(this,arguments)}}())),n.Iu}class c_{constructor(e,t,i,a,c){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=a,this.removalCallback=c,this.deferred=new Dr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(p=>{})}static createAndSchedule(e,t,i,a,c){const p=Date.now()+i,y=new c_(e,t,p,a,c);return y.start(i),y}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new De(re.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function uh(n,e){if(Jn("AsyncQueue",`${e}: ${n}`),Bs(n))return new De(re.UNAVAILABLE,`${e}: ${n}`);throw n}class ch{constructor(e){this.comparator=e?(t,i)=>e(t,i)||$e.comparator(t.key,i.key):(t,i)=>$e.comparator(t.key,i.key),this.keyedMap=Hd(),this.sortedSet=new Kn(this.comparator)}static emptySet(e){return new ch(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,i)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof ch)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const a=t.getNext().key,c=i.getNext().key;if(!a.isEqual(c))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const i=new ch;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}class dI{constructor(){this.Tu=new Kn($e.comparator)}track(e){const t=e.doc.key,i=this.Tu.get(t);i?0!==e.type&&3===i.type?this.Tu=this.Tu.insert(t,e):3===e.type&&1!==i.type?this.Tu=this.Tu.insert(t,{type:i.type,doc:e.doc}):2===e.type&&2===i.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===i.type?this.Tu=this.Tu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===i.type?this.Tu=this.Tu.remove(t):1===e.type&&2===i.type?this.Tu=this.Tu.insert(t,{type:1,doc:i.doc}):0===e.type&&1===i.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):it():this.Tu=this.Tu.insert(t,e)}Eu(){const e=[];return this.Tu.inorderTraversal((t,i)=>{e.push(i)}),e}}class lh{constructor(e,t,i,a,c,p,y,D,T){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=a,this.mutatedKeys=c,this.fromCache=p,this.syncStateChanged=y,this.excludesMetadataChanges=D,this.hasCachedResults=T}static fromInitialDocuments(e,t,i,a,c){const p=[];return t.forEach(y=>{p.push({type:0,doc:y})}),new lh(e,t,ch.emptySet(t),p,i,a,!0,!1,c)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Cf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let a=0;a<t.length;a++)if(t[a].type!==i[a].type||!t[a].doc.isEqual(i[a].doc))return!1;return!0}}class Fw{constructor(){this.Au=void 0,this.listeners=[]}}class Vw{constructor(){this.queries=new Oa(e=>Xv(e),Cf),this.onlineState="Unknown",this.Ru=new Set}}function l_(n,e){return d_.apply(this,arguments)}function d_(){return d_=(0,z.Z)(function*(n,e){const t=ze(n),i=e.query;let a=!1,c=t.queries.get(i);if(c||(a=!0,c=new Fw),a)try{c.Au=yield t.onListen(i)}catch(p){const y=uh(p,`Initialization of query '${ty(e.query)}' failed`);return void e.onError(y)}t.queries.set(i,c),c.listeners.push(e),e.bu(t.onlineState),c.Au&&e.Pu(c.Au)&&Ng(t)}),d_.apply(this,arguments)}function h_(n,e){return f_.apply(this,arguments)}function f_(){return f_=(0,z.Z)(function*(n,e){const t=ze(n),i=e.query;let a=!1;const c=t.queries.get(i);if(c){const p=c.listeners.indexOf(e);p>=0&&(c.listeners.splice(p,1),a=0===c.listeners.length)}if(a)return t.queries.delete(i),t.onUnlisten(i)}),f_.apply(this,arguments)}function Bw(n,e){const t=ze(n);let i=!1;for(const a of e){const p=t.queries.get(a.query);if(p){for(const y of p.listeners)y.Pu(a)&&(i=!0);p.Au=a}}i&&Ng(t)}function qf(n,e,t){const i=ze(n),a=i.queries.get(e);if(a)for(const c of a.listeners)c.onError(t);i.queries.delete(e)}function Ng(n){n.Ru.forEach(e=>{e.next()})}class Rg{constructor(e,t,i){this.query=e,this.vu=t,this.Vu=!1,this.Su=null,this.onlineState="Unknown",this.options=i||{}}Pu(e){if(!this.options.includeMetadataChanges){const i=[];for(const a of e.docChanges)3!==a.type&&i.push(a);e=new lh(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Vu?this.Du(e)&&(this.vu.next(e),t=!0):this.Cu(e,this.onlineState)&&(this.xu(e),t=!0),this.Su=e,t}onError(e){this.vu.error(e)}bu(e){this.onlineState=e;let t=!1;return this.Su&&!this.Vu&&this.Cu(this.Su,e)&&(this.xu(this.Su),t=!0),t}Cu(e,t){return!e.fromCache||(!this.options.Nu||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Du(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Su&&this.Su.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}xu(e){e=lh.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Vu=!0,this.vu.next(e)}}class hI{constructor(e,t){this.ku=e,this.byteLength=t}Ou(){return"metadata"in this.ku}}class p_{constructor(e){this.yt=e}Ji(e){return No(this.yt,e)}Yi(e){return e.metadata.exists?Iy(this.yt,e.document,!1):bn.newNoDocument(this.Ji(e.metadata.name),this.Xi(e.metadata.readTime))}Xi(e){return Zn(e)}}class fI{constructor(e,t,i){this.Mu=e,this.localStore=t,this.yt=i,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=pI(e)}Fu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.ku.namedQuery)this.queries.push(e.ku.namedQuery);else if(e.ku.documentMetadata){this.documents.push({metadata:e.ku.documentMetadata}),e.ku.documentMetadata.exists||++t;const i=Jt.fromString(e.ku.documentMetadata.name);this.collectionGroups.add(i.get(i.length-2))}else e.ku.document&&(this.documents[this.documents.length-1].document=e.ku.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}$u(e){const t=new Map,i=new p_(this.yt);for(const a of e)if(a.metadata.queries){const c=i.Ji(a.metadata.name);for(const p of a.metadata.queries){const y=(t.get(p)||Bt()).add(c);t.set(p,y)}}return t}complete(){var e=this;return(0,z.Z)(function*(){const t=yield function ww(n,e,t,i){return gg.apply(this,arguments)}(e.localStore,new p_(e.yt),e.documents,e.Mu.id),i=e.$u(e.documents);for(const a of e.queries)yield Dw(e.localStore,a,i.get(a.name));return e.progress.taskState="Success",{progress:e.progress,Bu:e.collectionGroups,Lu:t}})()}}function pI(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class gI{constructor(e){this.key=e}}class Uw{constructor(e){this.key=e}}class mI{constructor(e,t){this.query=e,this.qu=t,this.Uu=null,this.hasCachedResults=!1,this.current=!1,this.Ku=Bt(),this.mutatedKeys=Bt(),this.Gu=Jv(e),this.Qu=new ch(this.Gu)}get ju(){return this.qu}Wu(e,t){const i=t?t.zu:new dI,a=t?t.Qu:this.Qu;let c=t?t.mutatedKeys:this.mutatedKeys,p=a,y=!1;const D="F"===this.query.limitType&&a.size===this.query.limit?a.last():null,T="L"===this.query.limitType&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal((x,R)=>{const q=a.get(x),ne=Bd(this.query,R)?R:null,ge=!!q&&this.mutatedKeys.has(q.key),Ue=!!ne&&(ne.hasLocalMutations||this.mutatedKeys.has(ne.key)&&ne.hasCommittedMutations);let Ye=!1;q&&ne?q.data.isEqual(ne.data)?ge!==Ue&&(i.track({type:3,doc:ne}),Ye=!0):this.Hu(q,ne)||(i.track({type:2,doc:ne}),Ye=!0,(D&&this.Gu(ne,D)>0||T&&this.Gu(ne,T)<0)&&(y=!0)):!q&&ne?(i.track({type:0,doc:ne}),Ye=!0):q&&!ne&&(i.track({type:1,doc:q}),Ye=!0,(D||T)&&(y=!0)),Ye&&(ne?(p=p.add(ne),c=Ue?c.add(x):c.delete(x)):(p=p.delete(x),c=c.delete(x)))}),null!==this.query.limit)for(;p.size>this.query.limit;){const x="F"===this.query.limitType?p.last():p.first();p=p.delete(x.key),c=c.delete(x.key),i.track({type:1,doc:x})}return{Qu:p,zu:i,$i:y,mutatedKeys:c}}Hu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i){const a=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;const c=e.zu.Eu();c.sort((T,x)=>function(R,q){const ne=ge=>{switch(ge){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return it()}};return ne(R)-ne(q)}(T.type,x.type)||this.Gu(T.doc,x.doc)),this.Ju(i);const p=t?this.Yu():[],y=0===this.Ku.size&&this.current?1:0,D=y!==this.Uu;return this.Uu=y,0!==c.length||D?{snapshot:new lh(this.query,e.Qu,a,c,e.mutatedKeys,0===y,D,!1,!!i&&i.resumeToken.approximateByteSize()>0),Xu:p}:{Xu:p}}bu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new dI,mutatedKeys:this.mutatedKeys,$i:!1},!1)):{Xu:[]}}Zu(e){return!this.qu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}Ju(e){e&&(e.addedDocuments.forEach(t=>this.qu=this.qu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.qu=this.qu.delete(t)),this.current=e.current)}Yu(){if(!this.current)return[];const e=this.Ku;this.Ku=Bt(),this.Qu.forEach(i=>{this.Zu(i.key)&&(this.Ku=this.Ku.add(i.key))});const t=[];return e.forEach(i=>{this.Ku.has(i)||t.push(new Uw(i))}),this.Ku.forEach(i=>{e.has(i)||t.push(new gI(i))}),t}tc(e){this.qu=e.Hi,this.Ku=Bt();const t=this.Wu(e.documents);return this.applyChanges(t,!0)}ec(){return lh.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.Uu,this.hasCachedResults)}}class jw{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class $w{constructor(e){this.key=e,this.nc=!1}}class Hw{constructor(e,t,i,a,c,p){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=a,this.currentUser=c,this.maxConcurrentLimboResolutions=p,this.sc={},this.ic=new Oa(y=>Xv(y),Cf),this.rc=new Map,this.oc=new Set,this.uc=new Kn($e.comparator),this.cc=new Map,this.ac=new Hy,this.hc={},this.lc=new Map,this.fc=Ku.vn(),this.onlineState="Unknown",this.dc=void 0}get isPrimaryClient(){return!0===this.dc}}function Gw(n,e){return El.apply(this,arguments)}function El(){return El=(0,z.Z)(function*(n,e){const t=Ug(n);let i,a;const c=t.ic.get(e);if(c)i=c.targetId,t.sharedClientState.addLocalQueryTarget(i),a=c.view.ec();else{const p=yield vl(t.localStore,yi(e));t.isPrimaryClient&&Dg(t.remoteStore,p);const y=t.sharedClientState.addLocalQueryTarget(p.targetId);i=p.targetId,a=yield g_(t,e,i,"current"===y,p.resumeToken)}return a}),El.apply(this,arguments)}function g_(n,e,t,i,a){return Kf.apply(this,arguments)}function Kf(){return Kf=(0,z.Z)(function*(n,e,t,i,a){n._c=(R,q,ne)=>{return(ge=(0,z.Z)(function*(Ue,Ye,zt,Xt){let jt=Ye.view.Wu(zt);jt.$i&&(jt=yield pg(Ue.localStore,Ye.query,!1).then(({documents:Wt})=>Ye.view.Wu(Wt,jt)));const Ut=Xt&&Xt.targetChanges.get(Ye.targetId),Ft=Ye.view.applyChanges(jt,Ue.isPrimaryClient,Ut);return Qf(Ue,Ye.targetId,Ft.Xu),Ft.snapshot}),function(Ue,Ye,zt,Xt){return ge.apply(this,arguments)})(n,R,q,ne);var ge};const c=yield pg(n.localStore,e,!0),p=new mI(e,c.Hi),y=p.Wu(c.documents),D=Hu.createSynthesizedTargetChangeForCurrentChange(t,i&&"Offline"!==n.onlineState,a),T=p.applyChanges(y,n.isPrimaryClient,D);Qf(n,t,T.Xu);const x=new jw(e,t,p);return n.ic.set(e,x),n.rc.has(t)?n.rc.get(t).push(e):n.rc.set(t,[e]),T.snapshot}),Kf.apply(this,arguments)}function Fa(n,e){return m_.apply(this,arguments)}function m_(){return m_=(0,z.Z)(function*(n,e){const t=ze(n),i=t.ic.get(e),a=t.rc.get(i.targetId);if(a.length>1)return t.rc.set(i.targetId,a.filter(c=>!Cf(c,e))),void t.ic.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(i.targetId),t.sharedClientState.isActiveQueryTarget(i.targetId)||(yield Lo(t.localStore,i.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(i.targetId),Gf(t.remoteStore,i.targetId),Dl(t,i.targetId)}).catch(Ru))):(Dl(t,i.targetId),yield Lo(t.localStore,i.targetId,!0))}),m_.apply(this,arguments)}function wl(){return wl=(0,z.Z)(function*(n,e,t){const i=Tl(n);try{const a=yield function(c,p){const y=ze(c),D=An.now(),T=p.reduce((q,ne)=>q.add(ne.key),Bt());let x,R;return y.persistence.runTransaction("Locally write mutations","readwrite",q=>{let ne=_i(),ge=Bt();return y.Gi.getEntries(q,T).next(Ue=>{ne=Ue,ne.forEach((Ye,zt)=>{zt.isValidDocument()||(ge=ge.add(Ye))})}).next(()=>y.localDocuments.getOverlayedDocuments(q,ne)).next(Ue=>{x=Ue;const Ye=[];for(const zt of p){const Xt=Xp(zt,x.get(zt.key).overlayedDocument);null!=Xt&&Ye.push(new Ai(zt.key,Xt,Xm(Xt.value.mapValue),Tn.exists(!0)))}return y.mutationQueue.addMutationBatch(q,D,Ye,p)}).next(Ue=>{R=Ue;const Ye=Ue.applyToLocalDocumentSet(x,ge);return y.documentOverlayCache.saveOverlays(q,Ue.batchId,Ye)})}).then(()=>({batchId:R.batchId,changes:uy(x)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(a.batchId),function(c,p,y){let D=c.hc[c.currentUser.toKey()];D||(D=new Kn(Lt)),D=D.insert(p,y),c.hc[c.currentUser.toKey()]=D}(i,a.batchId,t),yield Va(i,a.changes),yield Xu(i.remoteStore)}catch(a){const c=uh(a,"Failed to persist write");t.reject(c)}}),wl.apply(this,arguments)}function yI(n,e){return __.apply(this,arguments)}function __(){return __=(0,z.Z)(function*(n,e){const t=ze(n);try{const i=yield function fg(n,e){const t=ze(n),i=e.snapshotVersion;let a=t.qi;return t.persistence.runTransaction("Apply remote event","readwrite-primary",c=>{const p=t.Gi.newChangeBuffer({trackRemovals:!0});a=t.qi;const y=[];e.targetChanges.forEach((x,R)=>{const q=a.get(R);if(!q)return;y.push(t.Cs.removeMatchingKeys(c,x.removedDocuments,R).next(()=>t.Cs.addMatchingKeys(c,x.addedDocuments,R)));let ne=q.withSequenceNumber(c.currentSequenceNumber);var ge,Ue,Ye;e.targetMismatches.has(R)?ne=ne.withResumeToken(Fn.EMPTY_BYTE_STRING,dt.min()).withLastLimboFreeSnapshotVersion(dt.min()):x.resumeToken.approximateByteSize()>0&&(ne=ne.withResumeToken(x.resumeToken,i)),a=a.insert(R,ne),Ue=ne,Ye=x,(0===(ge=q).resumeToken.approximateByteSize()||Ue.snapshotVersion.toMicroseconds()-ge.snapshotVersion.toMicroseconds()>=3e8||Ye.addedDocuments.size+Ye.modifiedDocuments.size+Ye.removedDocuments.size>0)&&y.push(t.Cs.updateTargetData(c,ne))});let D=_i(),T=Bt();if(e.documentUpdates.forEach(x=>{e.resolvedLimboDocuments.has(x)&&y.push(t.persistence.referenceDelegate.updateLimboDocument(c,x))}),y.push(Y0(c,p,e.documentUpdates).next(x=>{D=x.Wi,T=x.zi})),!i.isEqual(dt.min())){const x=t.Cs.getLastRemoteSnapshotVersion(c).next(R=>t.Cs.setTargetsMetadata(c,c.currentSequenceNumber,i));y.push(x)}return J.waitFor(y).next(()=>p.apply(c)).next(()=>t.localDocuments.getLocalViewOfDocuments(c,D,T)).next(()=>D)}).then(c=>(t.qi=a,c))}(t.localStore,e);e.targetChanges.forEach((a,c)=>{const p=t.cc.get(c);p&&(ct(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1),a.addedDocuments.size>0?p.nc=!0:a.modifiedDocuments.size>0?ct(p.nc):a.removedDocuments.size>0&&(ct(p.nc),p.nc=!1))}),yield Va(t,i,e)}catch(i){yield Ru(i)}}),__.apply(this,arguments)}function _I(n,e,t){const i=ze(n);if(i.isPrimaryClient&&0===t||!i.isPrimaryClient&&1===t){const a=[];i.ic.forEach((c,p)=>{const y=p.view.bu(e);y.snapshot&&a.push(y.snapshot)}),function(c,p){const y=ze(c);y.onlineState=p;let D=!1;y.queries.forEach((T,x)=>{for(const R of x.listeners)R.bu(p)&&(D=!0)}),D&&Ng(y)}(i.eventManager,e),a.length&&i.sc.Wo(a),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}function kg(n,e,t){return dh.apply(this,arguments)}function dh(){return dh=(0,z.Z)(function*(n,e,t){const i=ze(n);i.sharedClientState.updateQueryState(e,"rejected",t);const a=i.cc.get(e),c=a&&a.key;if(c){let p=new Kn($e.comparator);p=p.insert(c,bn.newNoDocument(c,dt.min()));const y=Bt().add(c),D=new Af(dt.min(),new Map,new sn(Lt),p,y);yield yI(i,D),i.uc=i.uc.remove(c),i.cc.delete(e),E_(i)}else yield Lo(i.localStore,e,!1).then(()=>Dl(i,e,t)).catch(Ru)}),dh.apply(this,arguments)}function zw(n,e){return v_.apply(this,arguments)}function v_(){return v_=(0,z.Z)(function*(n,e){const t=ze(n),i=e.batch.batchId;try{const a=yield function fb(n,e){const t=ze(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const a=e.batch.keys(),c=t.Gi.newChangeBuffer({trackRemovals:!0});return function(p,y,D,T){const x=D.batch,R=x.keys();let q=J.resolve();return R.forEach(ne=>{q=q.next(()=>T.getEntry(y,ne)).next(ge=>{const Ue=D.docVersions.get(ne);ct(null!==Ue),ge.version.compareTo(Ue)<0&&(x.applyToRemoteDocument(ge,D),ge.isValidDocument()&&(ge.setReadTime(D.commitVersion),T.addEntry(ge)))})}),q.next(()=>p.mutationQueue.removeMutationBatch(y,x))}(t,i,e,c).next(()=>c.apply(i)).next(()=>t.mutationQueue.performConsistencyCheck(i)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(i,a,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(p){let y=Bt();for(let D=0;D<p.mutationResults.length;++D)p.mutationResults[D].transformResults.length>0&&(y=y.add(p.batch.mutations[D].key));return y}(e))).next(()=>t.localDocuments.getDocuments(i,a))})}(t.localStore,e);Yf(t,i,null),Zf(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),yield Va(t,a)}catch(a){yield Ru(a)}}),v_.apply(this,arguments)}function vI(n,e,t){return Pg.apply(this,arguments)}function Pg(){return Pg=(0,z.Z)(function*(n,e,t){const i=ze(n);try{const a=yield function(c,p){const y=ze(c);return y.persistence.runTransaction("Reject batch","readwrite-primary",D=>{let T;return y.mutationQueue.lookupMutationBatch(D,p).next(x=>(ct(null!==x),T=x.keys(),y.mutationQueue.removeMutationBatch(D,x))).next(()=>y.mutationQueue.performConsistencyCheck(D)).next(()=>y.documentOverlayCache.removeOverlaysForBatchId(D,T,p)).next(()=>y.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(D,T)).next(()=>y.localDocuments.getDocuments(D,T))})}(i.localStore,e);Yf(i,e,t),Zf(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),yield Va(i,a)}catch(a){yield Ru(a)}}),Pg.apply(this,arguments)}function Og(){return Og=(0,z.Z)(function*(n,e){const t=ze(n);Ws(t.remoteStore)||ke("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const i=yield function(c){const p=ze(c);return p.persistence.runTransaction("Get highest unacknowledged batch id","readonly",y=>p.mutationQueue.getHighestUnacknowledgedBatchId(y))}(t.localStore);if(-1===i)return void e.resolve();const a=t.lc.get(i)||[];a.push(e),t.lc.set(i,a)}catch(i){const a=uh(i,"Initialization of waitForPendingWrites() operation failed");e.reject(a)}}),Og.apply(this,arguments)}function Zf(n,e){(n.lc.get(e)||[]).forEach(t=>{t.resolve()}),n.lc.delete(e)}function Yf(n,e,t){const i=ze(n);let a=i.hc[i.currentUser.toKey()];if(a){const c=a.get(e);c&&(t?c.reject(t):c.resolve(),a=a.remove(e)),i.hc[i.currentUser.toKey()]=a}}function Dl(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const i of n.rc.get(e))n.ic.delete(i),t&&n.sc.wc(i,t);n.rc.delete(e),n.isPrimaryClient&&n.ac.ls(e).forEach(i=>{n.ac.containsKey(i)||Lg(n,i)})}function Lg(n,e){n.oc.delete(e.path.canonicalString());const t=n.uc.get(e);null!==t&&(Gf(n.remoteStore,t),n.uc=n.uc.remove(e),n.cc.delete(t),E_(n))}function Qf(n,e,t){for(const i of t)i instanceof gI?(n.ac.addReference(i.key,e),Ww(n,i)):i instanceof Uw?(ke("SyncEngine","Document no longer in limbo: "+i.key),n.ac.removeReference(i.key,e),n.ac.containsKey(i.key)||Lg(n,i.key)):it()}function Ww(n,e){const t=e.key,i=t.path.canonicalString();n.uc.get(t)||n.oc.has(i)||(ke("SyncEngine","New document in limbo: "+t),n.oc.add(i),E_(n))}function E_(n){for(;n.oc.size>0&&n.uc.size<n.maxConcurrentLimboResolutions;){const e=n.oc.values().next().value;n.oc.delete(e);const t=new $e(Jt.fromString(e)),i=n.fc.next();n.cc.set(i,new $w(t)),n.uc=n.uc.insert(t,i),Dg(n.remoteStore,new Is(yi(Vd(t.path)),i,2,qi.at))}}function Va(n,e,t){return w_.apply(this,arguments)}function w_(){return w_=(0,z.Z)(function*(n,e,t){const i=ze(n),a=[],c=[],p=[];var y;i.ic.isEmpty()||(i.ic.forEach((y,D)=>{p.push(i._c(D,e,t).then(T=>{if((T||t)&&i.isPrimaryClient&&i.sharedClientState.updateQueryState(D.targetId,T?.fromCache?"not-current":"current"),T){a.push(T);const x=hg.Ci(D.targetId,T);c.push(x)}}))}),yield Promise.all(p),i.sc.Wo(a),yield(y=(0,z.Z)(function*(D,T){const x=ze(D);try{yield x.persistence.runTransaction("notifyLocalViewChanges","readwrite",R=>J.forEach(T,q=>J.forEach(q.Si,ne=>x.persistence.referenceDelegate.addReference(R,q.targetId,ne)).next(()=>J.forEach(q.Di,ne=>x.persistence.referenceDelegate.removeReference(R,q.targetId,ne)))))}catch(R){if(!Bs(R))throw R;ke("LocalStore","Failed to update sequence numbers: "+R)}for(const R of T){const q=R.targetId;if(!R.fromCache){const ne=x.qi.get(q),Ue=ne.withLastLimboFreeSnapshotVersion(ne.snapshotVersion);x.qi=x.qi.insert(q,Ue)}}}),function(D,T){return y.apply(this,arguments)})(i.localStore,c))}),w_.apply(this,arguments)}function II(n,e){return Xf.apply(this,arguments)}function Xf(){return Xf=(0,z.Z)(function*(n,e){const t=ze(n);if(!t.currentUser.isEqual(e)){ke("SyncEngine","User change. New user:",e.toKey());const i=yield vw(t.localStore,e);t.currentUser=e,(a=t).lc.forEach(p=>{p.forEach(y=>{y.reject(new De(re.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),a.lc.clear(),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),yield Va(t,i.ji)}var a}),Xf.apply(this,arguments)}function qw(n,e){const t=ze(n),i=t.cc.get(e);if(i&&i.nc)return Bt().add(i.key);{let a=Bt();const c=t.rc.get(e);if(!c)return a;for(const p of c){const y=t.ic.get(p);a=a.unionWith(y.view.ju)}return a}}function Kw(n,e){return D_.apply(this,arguments)}function D_(){return D_=(0,z.Z)(function*(n,e){const t=ze(n),i=yield pg(t.localStore,e.query,!0),a=e.view.tc(i);return t.isPrimaryClient&&Qf(t,e.targetId,a.Xu),a}),D_.apply(this,arguments)}function Zw(n,e){return b_.apply(this,arguments)}function b_(){return b_=(0,z.Z)(function*(n,e){const t=ze(n);return X0(t.localStore,e).then(i=>Va(t,i))}),b_.apply(this,arguments)}function EI(n,e,t,i){return Fg.apply(this,arguments)}function Fg(){return Fg=(0,z.Z)(function*(n,e,t,i){const a=ze(n),c=yield function(p,y){const D=ze(p),T=ze(D.mutationQueue);return D.persistence.runTransaction("Lookup mutation documents","readonly",x=>T.Tn(x,y).next(R=>R?D.localDocuments.getDocuments(x,R):J.resolve(null)))}(a.localStore,e);var y;null!==c?("pending"===t?yield Xu(a.remoteStore):"acknowledged"===t||"rejected"===t?(Yf(a,e,i||null),Zf(a,e),y=e,ze(ze(a.localStore).mutationQueue).An(y)):it(),yield Va(a,c)):ke("SyncEngine","Cannot apply mutation batch with id: "+e)}),Fg.apply(this,arguments)}function Vg(){return Vg=(0,z.Z)(function*(n,e){const t=ze(n);if(Ug(t),Tl(t),!0===e&&!0!==t.dc){const i=t.sharedClientState.getAllActiveQueryTargets(),a=yield wI(t,i.toArray());t.dc=!0,yield Mg(t.remoteStore,!0);for(const c of a)Dg(t.remoteStore,c)}else if(!1===e&&!1!==t.dc){const i=[];let a=Promise.resolve();t.rc.forEach((c,p)=>{t.sharedClientState.isLocalQueryTarget(p)?i.push(p):a=a.then(()=>(Dl(t,p),Lo(t.localStore,p,!0))),Gf(t.remoteStore,p)}),yield a,yield wI(t,i),function(c){const p=ze(c);p.cc.forEach((y,D)=>{Gf(p.remoteStore,D)}),p.ac.fs(),p.cc=new Map,p.uc=new Kn($e.comparator)}(t),t.dc=!1,yield Mg(t.remoteStore,!1)}}),Vg.apply(this,arguments)}function wI(n,e,t){return zr.apply(this,arguments)}function zr(){return zr=(0,z.Z)(function*(n,e,t){const i=ze(n),a=[],c=[];for(const p of e){let y;const D=i.rc.get(p);if(D&&0!==D.length){y=yield vl(i.localStore,yi(D[0]));for(const T of D){const x=i.ic.get(T),R=yield Kw(i,x);R.snapshot&&c.push(R.snapshot)}}else{const T=yield Q0(i.localStore,p);y=yield vl(i.localStore,T),yield g_(i,bl(T),p,!1,y.resumeToken)}a.push(y)}return i.sc.Wo(c),a}),zr.apply(this,arguments)}function bl(n){return Jm(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function Qw(n){const e=ze(n);return ze(ze(e.localStore).persistence).vi()}function Xw(n,e,t,i){return DI.apply(this,arguments)}function DI(){return DI=(0,z.Z)(function*(n,e,t,i){const a=ze(n);if(a.dc)return void ke("SyncEngine","Ignoring unexpected query state notification.");const c=a.rc.get(e);if(c&&c.length>0)switch(t){case"current":case"not-current":{const p=yield X0(a.localStore,ny(c[0])),y=Af.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,Fn.EMPTY_BYTE_STRING);yield Va(a,p,y);break}case"rejected":yield Lo(a.localStore,e,!0),Dl(a,e,i);break;default:it()}}),DI.apply(this,arguments)}function pb(n,e,t){return Bg.apply(this,arguments)}function Bg(){return Bg=(0,z.Z)(function*(n,e,t){const i=Ug(n);if(i.dc){for(const a of e){if(i.rc.has(a)){ke("SyncEngine","Adding an already active target "+a);continue}const c=yield Q0(i.localStore,a),p=yield vl(i.localStore,c);yield g_(i,bl(c),p.targetId,!1,p.resumeToken),Dg(i.remoteStore,p)}for(const a of t)i.rc.has(a)&&(yield Lo(i.localStore,a,!1).then(()=>{Gf(i.remoteStore,a),Dl(i,a)}).catch(Ru))}}),Bg.apply(this,arguments)}function Ug(n){const e=ze(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=yI.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=qw.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=kg.bind(null,e),e.sc.Wo=Bw.bind(null,e.eventManager),e.sc.wc=qf.bind(null,e.eventManager),e}function Tl(n){const e=ze(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=zw.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=vI.bind(null,e),e}class jg{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,z.Z)(function*(){t.yt=rh(e.databaseInfo.databaseId),t.sharedClientState=t.gc(e),t.persistence=t.yc(e),yield t.persistence.start(),t.localStore=t.Ic(e),t.gcScheduler=t.Tc(e,t.localStore),t.indexBackfillerScheduler=t.Ec(e,t.localStore)})()}Tc(e,t){return null}Ec(e,t){return null}Ic(e){return _w(this.persistence,new K0,e.initialUser,this.yt)}yc(e){return new W0(Qu.Bs,this.yt)}gc(e){return new eI}terminate(){var e=this;return(0,z.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class bI extends jg{constructor(e,t,i){super(),this.Ac=e,this.cacheSizeBytes=t,this.forceOwnership=i,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,i=this;return(0,z.Z)(function*(){yield t().call(i,e),yield i.Ac.initialize(i,e),yield Tl(i.Ac.syncEngine),yield Xu(i.Ac.remoteStore),yield i.persistence.li(()=>(i.gcScheduler&&!i.gcScheduler.started&&i.gcScheduler.start(),i.indexBackfillerScheduler&&!i.indexBackfillerScheduler.started&&i.indexBackfillerScheduler.start(),Promise.resolve()))})()}Ic(e){return _w(this.persistence,new K0,e.initialUser,this.yt)}Tc(e,t){return new dw(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}Ec(e,t){const i=new kE(t,this.persistence);return new RE(e.asyncQueue,i)}yc(e){const t=zy(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),i=void 0!==this.cacheSizeBytes?dr.withCacheSize(this.cacheSizeBytes):dr.DEFAULT;return new dg(this.synchronizeTabs,t,e.clientId,i,e.asyncQueue,Ig(),Eg(),this.yt,this.sharedClientState,!!this.forceOwnership)}gc(e){return new eI}}class TI extends bI{constructor(e,t){super(e,t,!1),this.Ac=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,i=this;return(0,z.Z)(function*(){yield t().call(i,e);const a=i.Ac.syncEngine;i.sharedClientState instanceof Hf&&(i.sharedClientState.syncEngine={Fr:EI.bind(null,a),$r:Xw.bind(null,a),Br:pb.bind(null,a),vi:Qw.bind(null,a),Mr:Zw.bind(null,a)},yield i.sharedClientState.start()),yield i.persistence.li(function(){var c=(0,z.Z)(function*(p){yield function Yw(n,e){return Vg.apply(this,arguments)}(i.Ac.syncEngine,p),i.gcScheduler&&(p&&!i.gcScheduler.started?i.gcScheduler.start():p||i.gcScheduler.stop()),i.indexBackfillerScheduler&&(p&&!i.indexBackfillerScheduler.started?i.indexBackfillerScheduler.start():p||i.indexBackfillerScheduler.stop())});return function(p){return c.apply(this,arguments)}}())})()}gc(e){const t=Ig();if(!Hf.C(t))throw new De(re.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const i=zy(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Hf(t,e.asyncQueue,i,e.clientId,e.initialUser)}}class T_{initialize(e,t){var i=this;return(0,z.Z)(function*(){i.localStore||(i.localStore=e.localStore,i.sharedClientState=e.sharedClientState,i.datastore=i.createDatastore(t),i.remoteStore=i.createRemoteStore(t),i.eventManager=i.createEventManager(t),i.syncEngine=i.createSyncEngine(t,!e.synchronizeTabs),i.sharedClientState.onlineStateHandler=a=>_I(i.syncEngine,a,1),i.remoteStore.remoteSyncer.handleCredentialChange=II.bind(null,i.syncEngine),yield Mg(i.remoteStore,i.syncEngine.isPrimaryClient))})()}createEventManager(e){return new Vw}createDatastore(e){const t=rh(e.databaseInfo.databaseId),i=new Cw(e.databaseInfo);return new xw(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return t=this.localStore,i=this.datastore,a=e.asyncQueue,c=y=>_I(this.syncEngine,y,0),p=Yy.C()?new Yy:new tI,new rI(t,i,a,c,p);var t,i,a,c,p}createSyncEngine(e,t){return function(i,a,c,p,y,D,T){const x=new Hw(i,a,c,p,y,D);return T&&(x.dc=!0),x}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,z.Z)(function*(t){const i=ze(t);ke("RemoteStore","RemoteStore shutting down."),i._u.add(5),yield sh(i),i.mu.shutdown(),i.gu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function C_(n,e,t){if(!t)throw new De(re.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function CI(n,e,t,i){if(!0===e&&!0===i)throw new De(re.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function $g(n){if(!$e.isDocumentKey(n))throw new De(re.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function S_(n){if($e.isDocumentKey(n))throw new De(re.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Jf(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":it()}function Gt(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new De(re.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Jf(n);throw new De(re.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function Hg(n,e){if(e<=0)throw new De(re.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}const eD=new Map;class A_{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new De(re.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new De(re.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,CI("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class ep{constructor(e,t,i,a){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new A_({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new De(re.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new De(re.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new A_(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new Vs;switch(t.type){case"gapi":return new bE(t.client,t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new De(re.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=eD.get(e);t&&(ke("ComponentProvider","Removing Datastore"),eD.delete(e),t.terminate())}(this),Promise.resolve()}}class on{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new qs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new on(this.firestore,e,this._key)}}class Wr{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new Wr(this.firestore,e,this._query)}}class qs extends Wr{constructor(e,t,i){super(e,t,Vd(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new on(this.firestore,null,new $e(e))}withConverter(e){return new qs(this.firestore,e,this._path)}}function Gg(n,e,...t){if(n=(0,Dt.m9)(n),C_("collection","path",e),n instanceof ep){const i=Jt.fromString(e,...t);return S_(i),new qs(n,null,i)}{if(!(n instanceof on||n instanceof qs))throw new De(re.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(Jt.fromString(e,...t));return S_(i),new qs(n.firestore,null,i)}}function zg(n,e,...t){if(n=(0,Dt.m9)(n),1===arguments.length&&(e=kv.R()),C_("doc","path",e),n instanceof ep){const i=Jt.fromString(e,...t);return $g(i),new on(n,null,new $e(i))}{if(!(n instanceof on||n instanceof qs))throw new De(re.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(Jt.fromString(e,...t));return $g(i),new on(n.firestore,n instanceof qs?n.converter:null,new $e(i))}}function tD(n,e){return n=(0,Dt.m9)(n),e=(0,Dt.m9)(e),(n instanceof on||n instanceof qs)&&(e instanceof on||e instanceof qs)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function M_(n,e){return n=(0,Dt.m9)(n),e=(0,Dt.m9)(e),n instanceof Wr&&e instanceof Wr&&n.firestore===e.firestore&&Cf(n._query,e._query)&&n.converter===e.converter}function SI(n,e=10240){let t=0;return{read:()=>(0,z.Z)(function*(){if(t<n.byteLength){const i={value:n.slice(t,t+e),done:!1};return t+=e,i}return{done:!0}})(),cancel:()=>(0,z.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class Wg{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Rc(this.observer.next,e)}error(e){this.observer.error?this.Rc(this.observer.error,e):Jn("Uncaught Error in snapshot listener:",e.toString())}bc(){this.muted=!0}Rc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class AI{constructor(e,t){this.Pc=e,this.yt=t,this.metadata=new Dr,this.buffer=new Uint8Array,this.vc=new TextDecoder("utf-8"),this.Vc().then(i=>{i&&i.Ou()?this.metadata.resolve(i.ku.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(i?.ku)}`))},i=>this.metadata.reject(i))}close(){return this.Pc.cancel()}getMetadata(){var e=this;return(0,z.Z)(function*(){return e.metadata.promise})()}mc(){var e=this;return(0,z.Z)(function*(){return yield e.getMetadata(),e.Vc()})()}Vc(){var e=this;return(0,z.Z)(function*(){const t=yield e.Sc();if(null===t)return null;const i=e.vc.decode(t),a=Number(i);isNaN(a)&&e.Dc(`length string (${i}) is not valid number`);const c=yield e.Cc(a);return new hI(JSON.parse(c),t.length+a)})()}xc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Sc(){var e=this;return(0,z.Z)(function*(){for(;e.xc()<0&&!(yield e.Nc()););if(0===e.buffer.length)return null;const t=e.xc();t<0&&e.Dc("Reached the end of bundle when a length string is expected.");const i=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),i})()}Cc(e){var t=this;return(0,z.Z)(function*(){for(;t.buffer.length<e;)(yield t.Nc())&&t.Dc("Reached the end of bundle when more is expected.");const i=t.vc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),i})()}Dc(e){throw this.Pc.cancel(),new Error(`Invalid bundle format: ${e}`)}Nc(){var e=this;return(0,z.Z)(function*(){const t=yield e.Pc.read();if(!t.done){const i=new Uint8Array(e.buffer.length+t.value.length);i.set(e.buffer),i.set(t.value,e.buffer.length),e.buffer=i}return t.done})()}}class MI{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,z.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new De(re.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const i=yield(a=(0,z.Z)(function*(c,p){const y=ze(c),D=gl(y.yt)+"/documents",T={documents:p.map(ne=>xf(y.yt,ne))},x=yield y._o("BatchGetDocuments",D,T,p.length),R=new Map;x.forEach(ne=>{const ge=function f0(n,e){return"found"in e?function(t,i){ct(!!i.found);const a=No(t,i.found.name),c=Zn(i.found.updateTime),p=i.found.createTime?Zn(i.found.createTime):dt.min(),y=new ti({mapValue:{fields:i.found.fields}});return bn.newFoundDocument(a,c,p,y)}(n,e):"missing"in e?function(t,i){ct(!!i.missing),ct(!!i.readTime);const a=No(t,i.missing),c=Zn(i.readTime);return bn.newNoDocument(a,c)}(n,e):it()}(y.yt,ne);R.set(ge.key.toString(),ge)});const q=[];return p.forEach(ne=>{const ge=R.get(ne.toString());ct(!!ge),q.push(ge)}),q}),function(c,p){return a.apply(this,arguments)})(t.datastore,e);var a;return i.forEach(a=>t.recordVersion(a)),i})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(i){this.lastWriteError=i}this.writtenDocs.add(e.toString())}delete(e){this.write(new js(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,z.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var i;e.mutations.forEach(i=>{t.delete(i.key.toString())}),t.forEach((i,a)=>{const c=$e.fromPath(a);e.mutations.push(new $u(c,e.precondition(c)))}),yield(i=(0,z.Z)(function*(a,c){const p=ze(a),y=gl(p.yt)+"/documents",D={writes:c.map(T=>zd(p.yt,T))};yield p.ao("Commit",y,D)}),function(a,c){return i.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw it();t=dt.min()}const i=this.readVersions.get(e.key.toString());if(i){if(!t.isEqual(i))throw new De(re.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(dt.min())?Tn.exists(!1):Tn.updateTime(t):Tn.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(dt.min()))throw new De(re.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Tn.updateTime(t)}return Tn.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class iD{constructor(e,t,i,a,c){this.asyncQueue=e,this.datastore=t,this.options=i,this.updateFunction=a,this.deferred=c,this.kc=i.maxAttempts,this.xo=new Qy(this.asyncQueue,"transaction_retry")}run(){this.kc-=1,this.Oc()}Oc(){var e=this;this.xo.Ro((0,z.Z)(function*(){const t=new MI(e.datastore),i=e.Mc(t);i&&i.then(a=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(a)}).catch(c=>{e.Fc(c)}))}).catch(a=>{e.Fc(a)})}))}Mc(e){try{const t=this.updateFunction(e);return!jp(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Fc(e){this.kc>0&&this.$c(e)?(this.kc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Oc(),Promise.resolve()))):this.deferred.reject(e)}$c(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!sy(t)}return!1}}class sD{constructor(e,t,i,a){var c=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=a,this.user=Pr.UNAUTHENTICATED,this.clientId=kv.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(i,function(){var p=(0,z.Z)(function*(y){ke("FirestoreClient","Received user=",y.uid),yield c.authCredentialListener(y),c.user=y});return function(y){return p.apply(this,arguments)}}()),this.appCheckCredentials.start(i,p=>(ke("FirestoreClient","Received new app check token=",p),this.appCheckCredentialListener(p,this.user)))}getConfiguration(){var e=this;return(0,z.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new De(re.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Dr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,z.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(i){const a=uh(i,"Failed to shutdown persistence");t.reject(a)}})),t.promise}}function N_(n,e){return R_.apply(this,arguments)}function R_(){return R_=(0,z.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),ke("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let i=t.initialUser;n.setCredentialChangeListener(function(){var a=(0,z.Z)(function*(c){i.isEqual(c)||(yield vw(e.localStore,c),i=c)});return function(c){return a.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),R_.apply(this,arguments)}function k_(n,e){return qg.apply(this,arguments)}function qg(){return qg=(0,z.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield Kg(n);ke("FirestoreClient","Initializing OnlineComponentProvider");const i=yield n.getConfiguration();yield e.initialize(t,i),n.setCredentialChangeListener(a=>a_(e.remoteStore,a)),n.setAppCheckTokenChangeListener((a,c)=>a_(e.remoteStore,c)),n.onlineComponents=e}),qg.apply(this,arguments)}function Kg(n){return Zg.apply(this,arguments)}function Zg(){return Zg=(0,z.Z)(function*(n){return n.offlineComponents||(ke("FirestoreClient","Using default OfflineComponentProvider"),yield N_(n,new jg)),n.offlineComponents}),Zg.apply(this,arguments)}function Yg(n){return P_.apply(this,arguments)}function P_(){return P_=(0,z.Z)(function*(n){return n.onlineComponents||(ke("FirestoreClient","Using default OnlineComponentProvider"),yield k_(n,new T_)),n.onlineComponents}),P_.apply(this,arguments)}function oD(n){return Kg(n).then(e=>e.persistence)}function tp(n){return Kg(n).then(e=>e.localStore)}function NI(n){return Yg(n).then(e=>e.remoteStore)}function RI(n){return Yg(n).then(e=>e.syncEngine)}function np(n){return kI.apply(this,arguments)}function kI(){return kI=(0,z.Z)(function*(n){const e=yield Yg(n),t=e.eventManager;return t.onListen=Gw.bind(null,e.syncEngine),t.onUnlisten=Fa.bind(null,e.syncEngine),t}),kI.apply(this,arguments)}function rp(n,e,t={}){const i=new Dr;return n.asyncQueue.enqueueAndForget((0,z.Z)(function*(){return function(a,c,p,y,D){const T=new Wg({next:R=>{c.enqueueAndForget(()=>h_(a,x));const q=R.docs.has(p);!q&&R.fromCache?D.reject(new De(re.UNAVAILABLE,"Failed to get document because the client is offline.")):q&&R.fromCache&&y&&"server"===y.source?D.reject(new De(re.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):D.resolve(R)},error:R=>D.reject(R)}),x=new Rg(Vd(p.path),T,{includeMetadataChanges:!0,Nu:!0});return l_(a,x)}(yield np(n),n.asyncQueue,e,t,i)})),i.promise}function O_(n,e,t={}){const i=new Dr;return n.asyncQueue.enqueueAndForget((0,z.Z)(function*(){return function(a,c,p,y,D){const T=new Wg({next:R=>{c.enqueueAndForget(()=>h_(a,x)),R.fromCache&&"server"===y.source?D.reject(new De(re.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):D.resolve(R)},error:R=>D.reject(R)}),x=new Rg(p,T,{includeMetadataChanges:!0,Nu:!0});return l_(a,x)}(yield np(n),n.asyncQueue,e,t,i)})),i.promise}class Ib{constructor(){this.Bc=Promise.resolve(),this.Lc=[],this.qc=!1,this.Uc=[],this.Kc=null,this.Gc=!1,this.Qc=!1,this.jc=[],this.xo=new Qy(this,"async_queue_retry"),this.Wc=()=>{const t=Eg();t&&ke("AsyncQueue","Visibility state changed to "+t.visibilityState),this.xo.Po()};const e=Eg();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Wc)}get isShuttingDown(){return this.qc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.zc(),this.Hc(e)}enterRestrictedMode(e){if(!this.qc){this.qc=!0,this.Qc=e||!1;const t=Eg();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Wc)}}enqueue(e){if(this.zc(),this.qc)return new Promise(()=>{});const t=new Dr;return this.Hc(()=>this.qc&&this.Qc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Lc.push(e),this.Jc()))}Jc(){var e=this;return(0,z.Z)(function*(){if(0!==e.Lc.length){try{yield e.Lc[0](),e.Lc.shift(),e.xo.reset()}catch(t){if(!Bs(t))throw t;ke("AsyncQueue","Operation failed with retryable error: "+t)}e.Lc.length>0&&e.xo.Ro(()=>e.Jc())}})()}Hc(e){const t=this.Bc.then(()=>(this.Gc=!0,e().catch(i=>{throw this.Kc=i,this.Gc=!1,Jn("INTERNAL UNHANDLED ERROR: ",function(c){let p=c.message||"";return c.stack&&(p=c.stack.includes(c.message)?c.stack:c.message+"\n"+c.stack),p}(i)),i}).then(i=>(this.Gc=!1,i))));return this.Bc=t,t}enqueueAfterDelay(e,t,i){this.zc(),this.jc.indexOf(e)>-1&&(t=0);const a=c_.createAndSchedule(this,e,t,i,c=>this.Yc(c));return this.Uc.push(a),a}zc(){this.Kc&&it()}verifyOperationInProgress(){}Xc(){var e=this;return(0,z.Z)(function*(){let t;do{t=e.Bc,yield t}while(t!==e.Bc)})()}Zc(e){for(const t of this.Uc)if(t.timerId===e)return!0;return!1}ta(e){return this.Xc().then(()=>{this.Uc.sort((t,i)=>t.targetTimeMs-i.targetTimeMs);for(const t of this.Uc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Xc()})}ea(e){this.jc.push(e)}Yc(e){const t=this.Uc.indexOf(e);this.Uc.splice(t,1)}}function ip(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const i=e;for(const a of["next","error","complete"])if(a in i&&"function"==typeof i[a])return!0;return!1}(n)}class LI{constructor(){this._progressObserver={},this._taskCompletionResolver=new Dr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,i){this._progressObserver={next:e,error:t,complete:i}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Nn extends ep{constructor(e,t,i,a){super(e,t,i,a),this.type="firestore",this._queue=new Ib,this._persistenceKey=a?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||FI(this),this._firestoreClient.terminate()}}function hr(n){return n._firestoreClient||FI(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function FI(n){var e;const t=n._freezeSettings(),i=(c=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new Vv(n._databaseId,c,n._persistenceKey,(y=t).host,y.ssl,y.experimentalForceLongPolling,y.experimentalAutoDetectLongPolling,y.useFetchStreams));var c,y;n._firestoreClient=new sD(n._authCredentials,n._appCheckCredentials,n._queue,i)}function lD(n,e,t){const i=new Dr;return n.asyncQueue.enqueue((0,z.Z)(function*(){try{yield N_(n,t),yield k_(n,e),i.resolve()}catch(a){const c=a;if(!("FirebaseError"===(p=c).name?p.code===re.FAILED_PRECONDITION||p.code===re.UNIMPLEMENTED:!(typeof DOMException<"u"&&p instanceof DOMException)||22===p.code||20===p.code||11===p.code))throw c;Nd("Error enabling offline persistence. Falling back to persistence disabled: "+c),i.reject(c)}var p})).then(()=>i.promise)}function L_(n){if(n._initialized||n._terminated)throw new De(re.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Ks{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ks(Fn.fromBase64String(e))}catch(t){throw new De(re.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Ks(Fn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Ju{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new De(re.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new qn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Cl{constructor(e){this._methodName=e}}class hh{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new De(re.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new De(re.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Lt(this._lat,e._lat)||Lt(this._long,e._long)}}const fD=/^__.*__$/;class Cb{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return null!==this.fieldMask?new Ai(e,this.data,this.fieldMask,t,this.fieldTransforms):new cl(e,this.data,t,this.fieldTransforms)}}class Ji{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new Ai(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function VI(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw it()}}class fh{constructor(e,t,i,a,c,p){this.settings=e,this.databaseId=t,this.yt=i,this.ignoreUndefinedProperties=a,void 0===c&&this.na(),this.fieldTransforms=c||[],this.fieldMask=p||[]}get path(){return this.settings.path}get sa(){return this.settings.sa}ia(e){return new fh(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.yt,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ra(e){var t;const i=null===(t=this.path)||void 0===t?void 0:t.child(e),a=this.ia({path:i,oa:!1});return a.ua(e),a}ca(e){var t;const i=null===(t=this.path)||void 0===t?void 0:t.child(e),a=this.ia({path:i,oa:!1});return a.na(),a}aa(e){return this.ia({path:void 0,oa:!0})}ha(e){return $_(e,this.settings.methodName,this.settings.la||!1,this.path,this.settings.fa)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}na(){if(this.path)for(let e=0;e<this.path.length;e++)this.ua(this.path.get(e))}ua(e){if(0===e.length)throw this.ha("Document fields must not be empty");if(VI(this.sa)&&fD.test(e))throw this.ha('Document fields cannot begin and end with "__"')}}class pD{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.yt=i||rh(e)}da(e,t,i,a=!1){return new fh({sa:e,methodName:t,fa:i,path:qn.emptyPath(),oa:!1,la:a},this.databaseId,this.yt,this.ignoreUndefinedProperties)}}function Sl(n){const e=n._freezeSettings(),t=rh(n._databaseId);return new pD(n._databaseId,!!e.ignoreUndefinedProperties,t)}function ph(n,e,t,i,a,c={}){const p=n.da(c.merge||c.mergeFields?2:0,e,t,a);Zs("Data must be an object, but it was:",p,i);const y=U_(i,p);let D,T;if(c.merge)D=new ei(p.fieldMask),T=p.fieldTransforms;else if(c.mergeFields){const x=[];for(const R of c.mergeFields){const q=j_(e,R,t);if(!p.contains(q))throw new De(re.INVALID_ARGUMENT,`Field '${q}' is specified in your field mask but missing from your input data.`);jI(x,q)||x.push(q)}D=new ei(x),T=p.fieldTransforms.filter(R=>D.covers(R.field))}else D=null,T=p.fieldTransforms;return new Cb(new ti(y),D,T)}class gh extends Cl{_toFieldTransform(e){if(2!==e.sa)throw e.ha(1===e.sa?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof gh}}function F_(n,e,t){return new fh({sa:3,fa:e.settings.fa,methodName:n._methodName,oa:t},e.databaseId,e.yt,e.ignoreUndefinedProperties)}class V_ extends Cl{_toFieldTransform(e){return new ju(e.path,new ul)}isEqual(e){return e instanceof V_}}class BI extends Cl{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=F_(this,e,!0),i=this._a.map(c=>xi(c,t)),a=new Bu(i);return new ju(e.path,a)}isEqual(e){return this===e}}class UI extends Cl{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=F_(this,e,!0),i=this._a.map(c=>xi(c,t)),a=new Ud(i);return new ju(e.path,a)}isEqual(e){return this===e}}class gD extends Cl{constructor(e,t){super(e),this.wa=t}_toFieldTransform(e){const t=new Pa(e.yt,n0(e.yt,this.wa));return new ju(e.path,t)}isEqual(e){return this===e}}function Jg(n,e,t,i){const a=n.da(1,e,t);Zs("Data must be an object, but it was:",a,i);const c=[],p=ti.empty();Ou(i,(D,T)=>{const x=nm(e,D,t);T=(0,Dt.m9)(T);const R=a.ca(x);if(T instanceof gh)c.push(x);else{const q=xi(T,R);null!=q&&(c.push(x),p.set(x,q))}});const y=new ei(c);return new Ji(p,y,a.fieldTransforms)}function B_(n,e,t,i,a,c){const p=n.da(1,e,t),y=[j_(e,i,t)],D=[a];if(c.length%2!=0)throw new De(re.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let q=0;q<c.length;q+=2)y.push(j_(e,c[q])),D.push(c[q+1]);const T=[],x=ti.empty();for(let q=y.length-1;q>=0;--q)if(!jI(T,y[q])){const ne=y[q];let ge=D[q];ge=(0,Dt.m9)(ge);const Ue=p.ca(ne);if(ge instanceof gh)T.push(ne);else{const Ye=xi(ge,Ue);null!=Ye&&(T.push(ne),x.set(ne,Ye))}}const R=new ei(T);return new Ji(x,R,p.fieldTransforms)}function em(n,e,t,i=!1){return xi(t,n.da(i?4:3,e))}function xi(n,e){if(tm(n=(0,Dt.m9)(n)))return Zs("Unsupported field value:",e,n),U_(n,e);if(n instanceof Cl)return function(t,i){if(!VI(i.sa))throw i.ha(`${t._methodName}() can only be used with update() and set()`);if(!i.path)throw i.ha(`${t._methodName}() is not currently supported inside arrays`);const a=t._toFieldTransform(i);a&&i.fieldTransforms.push(a)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.oa&&4!==e.sa)throw e.ha("Nested arrays are not supported");return function(t,i){const a=[];let c=0;for(const p of t){let y=xi(p,i.aa(c));null==y&&(y={nullValue:"NULL_VALUE"}),a.push(y),c++}return{arrayValue:{values:a}}}(n,e)}return function(t,i){if(null===(t=(0,Dt.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return n0(i.yt,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const a=An.fromDate(t);return{timestampValue:pl(i.yt,a)}}if(t instanceof An){const a=new An(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:pl(i.yt,a)}}if(t instanceof hh)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Ks)return{bytesValue:d0(i.yt,t._byteString)};if(t instanceof on){const a=i.databaseId,c=t.firestore._databaseId;if(!c.isEqual(a))throw i.ha(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:tg(t.firestore._databaseId||i.databaseId,t._key.path)}}throw i.ha(`Unsupported field value: ${Jf(t)}`)}(n,e)}function U_(n,e){const t={};return Up(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ou(n,(i,a)=>{const c=xi(a,e.ra(i));null!=c&&(t[i]=c)}),{mapValue:{fields:t}}}function tm(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof An||n instanceof hh||n instanceof Ks||n instanceof on||n instanceof Cl)}function Zs(n,e,t){if(!tm(t)||"object"!=typeof(i=t)||null===i||Object.getPrototypeOf(i)!==Object.prototype&&null!==Object.getPrototypeOf(i)){const i=Jf(t);throw e.ha("an object"===i?n+" a custom object":n+" "+i)}var i}function j_(n,e,t){if((e=(0,Dt.m9)(e))instanceof Ju)return e._internalPath;if("string"==typeof e)return nm(n,e);throw $_("Field path arguments must be of type string or ",n,!1,void 0,t)}const Sb=new RegExp("[~\\*/\\[\\]]");function nm(n,e,t){if(e.search(Sb)>=0)throw $_(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Ju(...e.split("."))._internalPath}catch{throw $_(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function $_(n,e,t,i,a){const c=i&&!i.isEmpty(),p=void 0!==a;let y=`Function ${e}() called with invalid data`;t&&(y+=" (via `toFirestore()`)"),y+=". ";let D="";return(c||p)&&(D+=" (found",c&&(D+=` in field ${i}`),p&&(D+=` in document ${a}`),D+=")"),new De(re.INVALID_ARGUMENT,y+n+D)}function jI(n,e){return n.some(t=>t.isEqual(e))}class sp{constructor(e,t,i,a,c){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=a,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new on(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new $I(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(H_("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class $I extends sp{data(){return super.data()}}function H_(n,e){return"string"==typeof e?nm(n,e):e instanceof Ju?e._internalPath:e._delegate._internalPath}function G_(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new De(re.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class z_{}class mh extends z_{}function Al(n,e,...t){let i=[];e instanceof z_&&i.push(e),i=i.concat(t),function(a){const c=a.filter(y=>y instanceof Ml).length,p=a.filter(y=>y instanceof xl).length;if(c>1||c>0&&p>0)throw new De(re.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(const a of i)n=a._apply(n);return n}class xl extends mh{constructor(e,t,i){super(),this._field=e,this._op=t,this._value=i,this.type="where"}static _create(e,t,i){return new xl(e,t,i)}_apply(e){const t=this._parse(e);return wD(e._query,t),new Wr(e.firestore,e.converter,ey(e._query,t))}_parse(e){const t=Sl(e.firestore);return function(a,c,p,y,D,T,x){let R;if(D.isKeyField()){if("array-contains"===T||"array-contains-any"===T)throw new De(re.INVALID_ARGUMENT,`Invalid Query. You can't perform '${T}' queries on documentId().`);if("in"===T||"not-in"===T){ED(x,T);const q=[];for(const ne of x)q.push(qI(y,a,ne));R={arrayValue:{values:q}}}else R=qI(y,a,x)}else"in"!==T&&"not-in"!==T&&"array-contains-any"!==T||ED(x,T),R=em(p,"where",x,"in"===T||"not-in"===T);return Qt.create(D,T,R)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class Ml extends z_{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Ml(e,t)}_parse(e){const t=this._queryConstraints.map(i=>i._parse(e)).filter(i=>i.getFilters().length>0);return 1===t.length?t[0]:un.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(i,a){let c=i;const p=a.getFlattenedFilters();for(const y of p)wD(c,y),c=ey(c,y)}(e._query,t),new Wr(e.firestore,e.converter,ey(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class rm extends mh{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new rm(e,t)}_apply(e){const t=function(i,a,c){if(null!==i.startAt)throw new De(re.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==i.endAt)throw new De(re.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const p=new Ld(a,c);return function(y,D){if(null===ol(y)){const T=Kp(y);null!==T&&DD(0,T,D.field)}}(i,p),p}(e._query,this._field,this._direction);return new Wr(e.firestore,e.converter,function(i,a){const c=i.explicitOrderBy.concat([a]);return new Mo(i.path,i.collectionGroup,c,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}}class Nl extends mh{constructor(e,t,i){super(),this.type=e,this._limit=t,this._limitType=i}static _create(e,t,i){return new Nl(e,t,i)}_apply(e){return new Wr(e.firestore,e.converter,Zp(e._query,this._limit,this._limitType))}}class im extends mh{constructor(e,t,i){super(),this.type=e,this._docOrFields=t,this._inclusive=i}static _create(e,t,i){return new im(e,t,i)}_apply(e){const t=WI(e,this.type,this._docOrFields,this._inclusive);return new Wr(e.firestore,e.converter,(a=t,new Mo((i=e._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,a,i.endAt)));var i,a}}class q_ extends mh{constructor(e,t,i){super(),this.type=e,this._docOrFields=t,this._inclusive=i}static _create(e,t,i){return new q_(e,t,i)}_apply(e){const t=WI(e,this.type,this._docOrFields,this._inclusive);return new Wr(e.firestore,e.converter,(a=t,new Mo((i=e._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,a)));var i,a}}function WI(n,e,t,i){if(t[0]=(0,Dt.m9)(t[0]),t[0]instanceof sp)return function(a,c,p,y,D){if(!y)throw new De(re.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${p}().`);const T=[];for(const x of al(a))if(x.field.isKeyField())T.push(Ra(c,y.key));else{const R=y.data.field(x.field);if(jm(R))throw new De(re.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+x.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===R){const q=x.field.canonicalString();throw new De(re.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${q}' (used as the orderBy) does not exist.`)}T.push(R)}return new nl(T,D)}(n._query,n.firestore._databaseId,e,t[0]._document,i);{const a=Sl(n.firestore);return function(c,p,y,D,T,x){const R=c.explicitOrderBy;if(T.length>R.length)throw new De(re.INVALID_ARGUMENT,`Too many arguments provided to ${D}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const q=[];for(let ne=0;ne<T.length;ne++){const ge=T[ne];if(R[ne].field.isKeyField()){if("string"!=typeof ge)throw new De(re.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${D}(), but got a ${typeof ge}`);if(!Qv(c)&&-1!==ge.indexOf("/"))throw new De(re.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${D}() must be a plain document ID, but '${ge}' contains a slash.`);const Ue=c.path.child(Jt.fromString(ge));if(!$e.isDocumentKey(Ue))throw new De(re.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${D}() must result in a valid document path, but '${Ue}' is not because it contains an odd number of segments.`);const Ye=new $e(Ue);q.push(Ra(p,Ye))}else{const Ue=em(y,D,ge);q.push(Ue)}}return new nl(q,x)}(n._query,n.firestore._databaseId,a,e,t,i)}}function qI(n,e,t){if("string"==typeof(t=(0,Dt.m9)(t))){if(""===t)throw new De(re.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Qv(e)&&-1!==t.indexOf("/"))throw new De(re.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const i=e.path.child(Jt.fromString(t));if(!$e.isDocumentKey(i))throw new De(re.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return Ra(n,new $e(i))}if(t instanceof on)return Ra(n,t._key);throw new De(re.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Jf(t)}.`)}function ED(n,e){if(!Array.isArray(n)||0===n.length)throw new De(re.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new De(re.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function wD(n,e){if(e.isInequality()){const i=Kp(n),a=e.field;if(null!==i&&!i.isEqual(a))throw new De(re.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${i.toString()}' and '${a.toString()}'`);const c=ol(n);null!==c&&DD(0,a,c)}const t=function(i,a){for(const c of i)for(const p of c.getFlattenedFilters())if(a.indexOf(p.op)>=0)return p.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new De(re.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function DD(n,e,t){if(!t.isEqual(e))throw new De(re.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class KI{convertValue(e,t="none"){switch(Na(e)){case 0:return null;case 1:return e.booleanValue;case 2:return $n(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(tl(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw it()}}convertObject(e,t){const i={};return Ou(e.fields,(a,c)=>{i[a]=this.convertValue(c,t)}),i}convertGeoPoint(e){return new hh($n(e.latitude),$n(e.longitude))}convertArray(e,t){return(e.values||[]).map(i=>this.convertValue(i,t))}convertServerTimestamp(e,t){switch(t){case"previous":const i=Ef(e);return null==i?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(Co(e));default:return null}}convertTimestamp(e){const t=Lu(e);return new An(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=Jt.fromString(e);ct(y0(i));const a=new Pu(i.get(1),i.get(3)),c=new $e(i.popFirst(5));return a.isEqual(t)||Jn(`Document ${c} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),c}}function sm(n,e,t){let i;return i=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,i}class om extends KI{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ks(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new on(this.firestore,null,t)}}class Rl{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ba extends sp{constructor(e,t,i,a,c,p){super(e,t,i,a,p),this._firestore=e,this._firestoreImpl=e,this.metadata=c}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new yh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(H_("DocumentSnapshot.get",e));if(null!==i)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}}class yh extends Ba{data(e={}){return super.data(e)}}class Mi{constructor(e,t,i,a){this._firestore=e,this._userDataWriter=t,this._snapshot=a,this.metadata=new Rl(a.hasPendingWrites,a.fromCache),this.query=i}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(i=>{e.call(t,new yh(this._firestore,this._userDataWriter,i.key,i,new Rl(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new De(re.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,a){if(i._snapshot.oldDocs.isEmpty()){let c=0;return i._snapshot.docChanges.map(p=>({type:"added",doc:new yh(i._firestore,i._userDataWriter,p.doc.key,p.doc,new Rl(i._snapshot.mutatedKeys.has(p.doc.key),i._snapshot.fromCache),i.query.converter),oldIndex:-1,newIndex:c++}))}{let c=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(p=>a||3!==p.type).map(p=>{const y=new yh(i._firestore,i._userDataWriter,p.doc.key,p.doc,new Rl(i._snapshot.mutatedKeys.has(p.doc.key),i._snapshot.fromCache),i.query.converter);let D=-1,T=-1;return 0!==p.type&&(D=c.indexOf(p.doc.key),c=c.delete(p.doc.key)),1!==p.type&&(c=c.add(p.doc),T=c.indexOf(p.doc.key)),{type:ZI(p.type),doc:y,oldIndex:D,newIndex:T}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function ZI(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return it()}}function am(n,e){return n instanceof Ba&&e instanceof Ba?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Mi&&e instanceof Mi&&n._firestore===e._firestore&&M_(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class ec extends KI{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ks(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new on(this.firestore,null,t)}}function TD(n,e,t){n=Gt(n,on);const i=Gt(n.firestore,Nn),a=sm(n.converter,e,t);return _h(i,[ph(Sl(i),"setDoc",n._key,a,null!==n.converter,t).toMutation(n._key,Tn.none())])}function CD(n,e,t,...i){n=Gt(n,on);const a=Gt(n.firestore,Nn),c=Sl(a);let p;return p="string"==typeof(e=(0,Dt.m9)(e))||e instanceof Ju?B_(c,"updateDoc",n._key,e,t,i):Jg(c,"updateDoc",n._key,e),_h(a,[p.toMutation(n._key,Tn.exists(!0))])}function QI(n,...e){var t,i,a;n=(0,Dt.m9)(n);let c={includeMetadataChanges:!1},p=0;"object"!=typeof e[p]||ip(e[p])||(c=e[p],p++);const y={includeMetadataChanges:c.includeMetadataChanges};if(ip(e[p])){const R=e[p];e[p]=null===(t=R.next)||void 0===t?void 0:t.bind(R),e[p+1]=null===(i=R.error)||void 0===i?void 0:i.bind(R),e[p+2]=null===(a=R.complete)||void 0===a?void 0:a.bind(R)}let D,T,x;if(n instanceof on)T=Gt(n.firestore,Nn),x=Vd(n._key.path),D={next:R=>{e[p]&&e[p](cm(T,n,R))},error:e[p+1],complete:e[p+2]};else{const R=Gt(n,Wr);T=Gt(R.firestore,Nn),x=R._query;const q=new ec(T);D={next:ne=>{e[p]&&e[p](new Mi(T,q,R,ne))},error:e[p+1],complete:e[p+2]},G_(n._query)}return function(R,q,ne,ge){const Ue=new Wg(ge),Ye=new Rg(q,Ue,ne);return R.asyncQueue.enqueueAndForget((0,z.Z)(function*(){return l_(yield np(R),Ye)})),()=>{Ue.bc(),R.asyncQueue.enqueueAndForget((0,z.Z)(function*(){return h_(yield np(R),Ye)}))}}(hr(T),x,y,D)}function _h(n,e){return function(t,i){const a=new Dr;return t.asyncQueue.enqueueAndForget((0,z.Z)(function*(){return function y_(n,e,t){return wl.apply(this,arguments)}(yield RI(t),i,a)})),a.promise}(hr(n),e)}function cm(n,e,t){const i=t.docs.get(e._key),a=new ec(n);return new Ba(n,a,e._key,i,new Rl(t.hasPendingWrites,t.fromCache),e.converter)}const ND={maxAttempts:5};class XI{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Sl(e)}set(e,t,i){this._verifyNotCommitted();const a=Ua(e,this._firestore),c=sm(a.converter,t,i),p=ph(this._dataReader,"WriteBatch.set",a._key,c,null!==a.converter,i);return this._mutations.push(p.toMutation(a._key,Tn.none())),this}update(e,t,i,...a){this._verifyNotCommitted();const c=Ua(e,this._firestore);let p;return p="string"==typeof(t=(0,Dt.m9)(t))||t instanceof Ju?B_(this._dataReader,"WriteBatch.update",c._key,t,i,a):Jg(this._dataReader,"WriteBatch.update",c._key,t),this._mutations.push(p.toMutation(c._key,Tn.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Ua(e,this._firestore);return this._mutations=this._mutations.concat(new js(t._key,Tn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new De(re.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Ua(n,e){if((n=(0,Dt.m9)(n)).firestore!==e)throw new De(re.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class Q_ extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Sl(e)}get(e){const t=Ua(e,this._firestore),i=new om(this._firestore);return this._transaction.lookup([t._key]).then(a=>{if(!a||1!==a.length)return it();const c=a[0];if(c.isFoundDocument())return new sp(this._firestore,i,c.key,c,t.converter);if(c.isNoDocument())return new sp(this._firestore,i,t._key,null,t.converter);throw it()})}set(e,t,i){const a=Ua(e,this._firestore),c=sm(a.converter,t,i),p=ph(this._dataReader,"Transaction.set",a._key,c,null!==a.converter,i);return this._transaction.set(a._key,p),this}update(e,t,i,...a){const c=Ua(e,this._firestore);let p;return p="string"==typeof(t=(0,Dt.m9)(t))||t instanceof Ju?B_(this._dataReader,"Transaction.update",c._key,t,i,a):Jg(this._dataReader,"Transaction.update",c._key,t),this._transaction.update(c._key,p),this}delete(e){const t=Ua(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Ua(e,this._firestore),i=new ec(this._firestore);return super.get(e).then(a=>new Ba(this._firestore,i,t._key,a._document,new Rl(!1,!1),t.converter))}}!function(n,e=!0){Md=Rt.SDK_VERSION,(0,Rt._registerComponent)(new wt.wA("firestore",(t,{instanceIdentifier:i,options:a})=>{const c=t.getProvider("app").getImmediate(),p=new Nn(new Nv(t.getProvider("auth-internal")),new TE(t.getProvider("app-check-internal")),function(y,D){if(!Object.prototype.hasOwnProperty.apply(y.options,["projectId"]))throw new De(re.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Pu(y.options.projectId,D)}(c,i),c);return a=Object.assign({useFetchStreams:e},a),p._setSettings(a),p},"PUBLIC").setMultipleInstances(!0)),(0,Rt.registerVersion)(Sv,"3.8.3",n),(0,Rt.registerVersion)(Sv,"3.8.3","esm2017")}();function tE(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new De("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function PD(){if(typeof Uint8Array>"u")throw new De("unimplemented","Uint8Arrays are not available in this environment.")}function OD(){if(!function lb(){return typeof atob<"u"}())throw new De("unimplemented","Blobs are unavailable in Firestore in this environment.")}class lm{constructor(e){this._delegate=e}static fromBase64String(e){return OD(),new lm(Ks.fromBase64String(e))}static fromUint8Array(e){return PD(),new lm(Ks.fromUint8Array(e))}toBase64(){return OD(),this._delegate.toBase64()}toUint8Array(){return PD(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function J_(n){return function Lb(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const i of e)if(i in t&&"function"==typeof t[i])return!0;return!1}(n,["next","error","complete"])}class Fb{enableIndexedDbPersistence(e,t){return function Xg(n,e){L_(n=Gt(n,Nn));const t=hr(n),i=n._freezeSettings(),a=new T_;return lD(t,a,new bI(a,i.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function cD(n){L_(n=Gt(n,Nn));const e=hr(n),t=n._freezeSettings(),i=new T_;return lD(e,i,new TI(i,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function Eb(n){if(n._initialized&&!n._terminated)throw new De(re.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Dr;return n._queue.enqueueAndForgetEvenWhileRestricted((0,z.Z)(function*(){try{yield(t=(0,z.Z)(function*(i){if(!Jr.C())return Promise.resolve();const a=i+"main";yield Jr.delete(a)}),function(i){return t.apply(this,arguments)})(zy(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class LD{constructor(e,t,i){this._delegate=t,this._persistenceProvider=i,this.INTERNAL={delete:()=>this.terminate()},e instanceof Pu||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Nd("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,i={}){!function x_(n,e,t,i={}){var a;const c=(n=Gt(n,ep))._getSettings();if("firestore.googleapis.com"!==c.host&&c.host!==e&&Nd("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},c),{host:`${e}:${t}`,ssl:!1})),i.mockUserToken){let p,y;if("string"==typeof i.mockUserToken)p=i.mockUserToken,y=Pr.MOCK_USER;else{p=(0,Dt.Sg)(i.mockUserToken,null===(a=n._app)||void 0===a?void 0:a.options.projectId);const D=i.mockUserToken.sub||i.mockUserToken.user_id;if(!D)throw new De(re.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");y=new Pr(D)}n._authCredentials=new wE(new Mv(p,y))}}(this._delegate,e,t,i)}enableNetwork(){return function dD(n){return function mb(n){return n.asyncQueue.enqueue((0,z.Z)(function*(){const e=yield oD(n),t=yield NI(n);return e.setNetworkEnabled(!0),function(i){const a=ze(i);return a._u.delete(0),ih(a)}(t)}))}(hr(n=Gt(n,Nn)))}(this._delegate)}disableNetwork(){return function Db(n){return function yb(n){return n.asyncQueue.enqueue((0,z.Z)(function*(){const e=yield oD(n),t=yield NI(n);return e.setNetworkEnabled(!1),(i=(0,z.Z)(function*(a){const c=ze(a);c._u.add(0),yield sh(c),c.gu.set("Offline")}),function(a){return i.apply(this,arguments)})(t);var i}))}(hr(n=Gt(n,Nn)))}(this._delegate)}enablePersistence(e){let t=!1,i=!1;return e&&(t=!!e.synchronizeTabs,i=!!e.experimentalForceOwningTab,CI("synchronizeTabs",t,"experimentalForceOwningTab",i)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,i)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function wb(n){return function(e){const t=new Dr;return e.asyncQueue.enqueueAndForget((0,z.Z)(function*(){return function I_(n,e){return Og.apply(this,arguments)}(yield RI(e),t)})),t.promise}(hr(n=Gt(n,Nn)))}(this._delegate)}onSnapshotsInSync(e){return function AD(n,e){return function Qg(n,e){const t=new Wg(e);return n.asyncQueue.enqueueAndForget((0,z.Z)(function*(){return i=yield np(n),a=t,ze(i).Ru.add(a),void a.next();var i,a})),()=>{t.bc(),n.asyncQueue.enqueueAndForget((0,z.Z)(function*(){return i=yield np(n),a=t,void ze(i).Ru.delete(a);var i,a}))}}(hr(n=Gt(n,Nn)),ip(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new De("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new P(this,Gg(this._delegate,e))}catch(t){throw u(t,"collection()","Firestore.collection()")}}doc(e){try{return new o(this,zg(this._delegate,e))}catch(t){throw u(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new E(this,function gb(n,e){if(n=Gt(n,ep),C_("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new De(re.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Wr(n,null,(t=e,new Mo(Jt.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw u(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function Nb(n,e,t){n=Gt(n,Nn);const i=Object.assign(Object.assign({},ND),t);return function(a){if(a.maxAttempts<1)throw new De(re.INVALID_ARGUMENT,"Max attempts must be at least 1")}(i),function(a,c,p){const y=new Dr;return a.asyncQueue.enqueueAndForget((0,z.Z)(function*(){const D=yield function aD(n){return Yg(n).then(e=>e.datastore)}(a);new iD(a.asyncQueue,D,p,c,y).run()})),y.promise}(hr(n),a=>e(new Q_(n,a)),i)}(this._delegate,t=>e(new FD(this,t)))}batch(){return hr(this._delegate),new r(new XI(this._delegate,e=>_h(this._delegate,e)))}loadBundle(e){return function Tb(n,e){const t=hr(n=Gt(n,Nn)),i=new LI;return function PI(n,e,t,i){const a=function(c,p){let y;return y="string"==typeof c?(new TextEncoder).encode(c):c,D=function(D,T){if(D instanceof Uint8Array)return SI(D,T);if(D instanceof ArrayBuffer)return SI(new Uint8Array(D),T);if(D instanceof ReadableStream)return D.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(y),new AI(D,p);var D}(t,rh(e));n.asyncQueue.enqueueAndForget((0,z.Z)(function*(){!function Jw(n,e,t){const i=ze(n);var a;(a=(0,z.Z)(function*(c,p,y){try{const D=yield p.getMetadata();if(yield function(q,ne){const ge=ze(q),Ue=Zn(ne.createTime);return ge.persistence.runTransaction("hasNewerBundle","readonly",Ye=>ge.Ns.getBundleMetadata(Ye,ne.id)).then(Ye=>!!Ye&&Ye.createTime.compareTo(Ue)>=0)}(c.localStore,D))return yield p.close(),y._completeWith({taskState:"Success",documentsLoaded:(q=D).totalDocuments,bytesLoaded:q.totalBytes,totalDocuments:q.totalDocuments,totalBytes:q.totalBytes}),Promise.resolve(new Set);y._updateProgress(pI(D));const T=new fI(D,c.localStore,p.yt);let x=yield p.mc();for(;x;){const q=yield T.Fu(x);q&&y._updateProgress(q),x=yield p.mc()}const R=yield T.complete();return yield Va(c,R.Lu,void 0),yield function(q,ne){const ge=ze(q);return ge.persistence.runTransaction("Save bundle","readwrite",Ue=>ge.Ns.saveBundleMetadata(Ue,ne))}(c.localStore,D),y._completeWith(R.progress),Promise.resolve(R.Bu)}catch(D){return Nd("SyncEngine",`Loading bundle failed with ${D}`),y._failWith(D),Promise.resolve(new Set)}var q}),function(c,p,y){return a.apply(this,arguments)})(i,e,t).then(a=>{i.sharedClientState.notifyBundleLoaded(a)})}(yield RI(n),a,i)}))}(t,n._databaseId,e,i),i}(this._delegate,e)}namedQuery(e){return function hD(n,e){return function OI(n,e){return n.asyncQueue.enqueue((0,z.Z)(function*(){return function(t,i){const a=ze(t);return a.persistence.runTransaction("Get named query","readonly",c=>a.Ns.getNamedQuery(c,i))}(yield tp(n),e)}))}(hr(n=Gt(n,Nn)),e).then(t=>t?new Wr(n,null,t.query):null)}(this._delegate,e).then(t=>t?new E(this,t):null)}}class ev extends KI{constructor(e){super(),this.firestore=e}convertBytes(e){return new lm(new Ks(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return o.forKey(t,this.firestore,null)}}class FD{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new ev(e)}get(e){const t=$(e);return this._delegate.get(t).then(i=>new m(this._firestore,new Ba(this._firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,t.converter)))}set(e,t,i){const a=$(e);return i?(tE("Transaction.set",i),this._delegate.set(a,t,i)):this._delegate.set(a,t),this}update(e,t,i,...a){const c=$(e);return 2===arguments.length?this._delegate.update(c,t):this._delegate.update(c,t,i,...a),this}delete(e){const t=$(e);return this._delegate.delete(t),this}}class r{constructor(e){this._delegate=e}set(e,t,i){const a=$(e);return i?(tE("WriteBatch.set",i),this._delegate.set(a,t,i)):this._delegate.set(a,t),this}update(e,t,i,...a){const c=$(e);return 2===arguments.length?this._delegate.update(c,t):this._delegate.update(c,t,i,...a),this}delete(e){const t=$(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class s{constructor(e,t,i){this._firestore=e,this._userDataWriter=t,this._delegate=i}fromFirestore(e,t){const i=new yh(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new v(this._firestore,i),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const i=s.INSTANCES;let a=i.get(e);a||(a=new WeakMap,i.set(e,a));let c=a.get(t);return c||(c=new s(e,new ev(e),t),a.set(t,c)),c}}s.INSTANCES=new WeakMap;class o{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new ev(e)}static forPath(e,t,i){if(e.length%2!=0)throw new De("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new o(t,new on(t._delegate,i,new $e(e)))}static forKey(e,t,i){return new o(t,new on(t._delegate,i,e))}get id(){return this._delegate.id}get parent(){return new P(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new P(this.firestore,Gg(this._delegate,e))}catch(t){throw u(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,Dt.m9)(e))instanceof on&&tD(this._delegate,e)}set(e,t){t=tE("DocumentReference.set",t);try{return t?TD(this._delegate,e,t):TD(this._delegate,e)}catch(i){throw u(i,"setDoc()","DocumentReference.set()")}}update(e,t,...i){try{return 1===arguments.length?CD(this._delegate,e):CD(this._delegate,e,t,...i)}catch(a){throw u(a,"updateDoc()","DocumentReference.update()")}}delete(){return function YI(n){return _h(Gt(n.firestore,Nn),[new js(n._key,Tn.none())])}(this._delegate)}onSnapshot(...e){const t=l(e),i=h(e,a=>new m(this.firestore,new Ba(this.firestore._delegate,this._userDataWriter,a._key,a._document,a.metadata,this._delegate.converter)));return QI(this._delegate,t,i)}get(e){let t;return t="cache"===e?.source?function Z_(n){n=Gt(n,on);const e=Gt(n.firestore,Nn),t=hr(e),i=new ec(e);return function _b(n,e){const t=new Dr;return n.asyncQueue.enqueueAndForget((0,z.Z)(function*(){return(i=(0,z.Z)(function*(a,c,p){try{const y=yield function(D,T){const x=ze(D);return x.persistence.runTransaction("read document","readonly",R=>x.localDocuments.getDocument(R,T))}(a,c);y.isFoundDocument()?p.resolve(y):y.isNoDocument()?p.resolve(null):p.reject(new De(re.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(y){const D=uh(y,`Failed to get document '${c} from cache`);p.reject(D)}}),function(a,c,p){return i.apply(this,arguments)})(yield tp(n),e,t);var i})),t.promise}(t,n._key).then(a=>new Ba(e,i,n._key,a,new Rl(null!==a&&a.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function Y_(n){n=Gt(n,on);const e=Gt(n.firestore,Nn);return rp(hr(e),n._key,{source:"server"}).then(t=>cm(e,n,t))}(this._delegate):function K_(n){n=Gt(n,on);const e=Gt(n.firestore,Nn);return rp(hr(e),n._key).then(t=>cm(e,n,t))}(this._delegate),t.then(i=>new m(this.firestore,new Ba(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)))}withConverter(e){return new o(this.firestore,this._delegate.withConverter(e?s.getInstance(this.firestore,e):null))}}function u(n,e,t){return n.message=n.message.replace(e,t),n}function l(n){for(const e of n)if("object"==typeof e&&!J_(e))return e;return{}}function h(n,e){var t,i;let a;return a=J_(n[0])?n[0]:J_(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:c=>{a.next&&a.next(e(c))},error:null===(t=a.error)||void 0===t?void 0:t.bind(a),complete:null===(i=a.complete)||void 0===i?void 0:i.bind(a)}}class m{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new o(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return am(this._delegate,e._delegate)}}class v extends m{data(e){const t=this._delegate.data(e);return function xv(n,e){n||it()}(void 0!==t),t}}class E{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new ev(e)}where(e,t,i){try{return new E(this.firestore,Al(this._delegate,function HI(n,e,t){const i=e,a=H_("where",n);return xl._create(a,i,t)}(e,t,i)))}catch(a){throw u(a,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new E(this.firestore,Al(this._delegate,function W_(n,e="asc"){const t=e,i=H_("orderBy",n);return rm._create(i,t)}(e,t)))}catch(i){throw u(i,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new E(this.firestore,Al(this._delegate,function GI(n){return Hg("limit",n),Nl._create("limit",n,"F")}(e)))}catch(t){throw u(t,"limit()","Query.limit()")}}limitToLast(e){try{return new E(this.firestore,Al(this._delegate,function _D(n){return Hg("limitToLast",n),Nl._create("limitToLast",n,"L")}(e)))}catch(t){throw u(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new E(this.firestore,Al(this._delegate,function vD(...n){return im._create("startAt",n,!0)}(...e)))}catch(t){throw u(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new E(this.firestore,Al(this._delegate,function Ab(...n){return im._create("startAfter",n,!1)}(...e)))}catch(t){throw u(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new E(this.firestore,Al(this._delegate,function zI(...n){return q_._create("endBefore",n,!1)}(...e)))}catch(t){throw u(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new E(this.firestore,Al(this._delegate,function ID(...n){return q_._create("endAt",n,!0)}(...e)))}catch(t){throw u(t,"endAt()","Query.endAt()")}}isEqual(e){return M_(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function xb(n){n=Gt(n,Wr);const e=Gt(n.firestore,Nn),t=hr(e),i=new ec(e);return function vb(n,e){const t=new Dr;return n.asyncQueue.enqueueAndForget((0,z.Z)(function*(){return(i=(0,z.Z)(function*(a,c,p){try{const y=yield pg(a,c,!0),D=new mI(c,y.Hi),T=D.Wu(y.documents),x=D.applyChanges(T,!1);p.resolve(x.snapshot)}catch(y){const D=uh(y,`Failed to execute query '${c} against cache`);p.reject(D)}}),function(a,c,p){return i.apply(this,arguments)})(yield tp(n),e,t);var i})),t.promise}(t,n._query).then(a=>new Mi(e,i,n,a))}(this._delegate):"server"===e?.source?function Mb(n){n=Gt(n,Wr);const e=Gt(n.firestore,Nn),t=hr(e),i=new ec(e);return O_(t,n._query,{source:"server"}).then(a=>new Mi(e,i,n,a))}(this._delegate):function um(n){n=Gt(n,Wr);const e=Gt(n.firestore,Nn),t=hr(e),i=new ec(e);return G_(n._query),O_(t,n._query).then(a=>new Mi(e,i,n,a))}(this._delegate),t.then(i=>new M(this.firestore,new Mi(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)))}onSnapshot(...e){const t=l(e),i=h(e,a=>new M(this.firestore,new Mi(this.firestore._delegate,this._userDataWriter,this._delegate,a._snapshot)));return QI(this._delegate,t,i)}withConverter(e){return new E(this.firestore,this._delegate.withConverter(e?s.getInstance(this.firestore,e):null))}}class C{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new v(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class M{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new E(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new v(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new C(this._firestore,t))}forEach(e,t){this._delegate.forEach(i=>{e.call(t,new v(this._firestore,i))})}isEqual(e){return am(this._delegate,e._delegate)}}class P extends E{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new o(this.firestore,e):null}doc(e){try{return new o(this.firestore,void 0===e?zg(this._delegate):zg(this._delegate,e))}catch(t){throw u(t,"doc()","CollectionReference.doc()")}}add(e){return function SD(n,e){const t=Gt(n.firestore,Nn),i=zg(n),a=sm(n.converter,e);return _h(t,[ph(Sl(n.firestore),"addDoc",i._key,a,null!==n.converter,{}).toMutation(i._key,Tn.exists(!1))]).then(()=>i)}(this._delegate,e).then(t=>new o(this.firestore,t))}isEqual(e){return tD(this._delegate,e._delegate)}withConverter(e){return new P(this.firestore,this._delegate.withConverter(e?s.getInstance(this.firestore,e):null))}}function $(n){return Gt(n,on)}class Y{constructor(...e){this._delegate=new Ju(...e)}static documentId(){return new Y(qn.keyField().canonicalString())}isEqual(e){return(e=(0,Dt.m9)(e))instanceof Ju&&this._delegate._internalPath.isEqual(e._internalPath)}}class de{constructor(e){this._delegate=e}static serverTimestamp(){const e=function X_(){return new V_("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new de(e)}static delete(){const e=function JI(){return new gh("deleteField")}();return e._methodName="FieldValue.delete",new de(e)}static arrayUnion(...e){const t=function RD(...n){return new BI("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new de(t)}static arrayRemove(...e){const t=function kD(...n){return new UI("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new de(t)}static increment(e){const t=function Rb(n){return new gD("increment",n)}(e);return t._methodName="FieldValue.increment",new de(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const Oe={Firestore:LD,GeoPoint:hh,Timestamp:An,Blob:lm,Transaction:FD,WriteBatch:r,DocumentReference:o,DocumentSnapshot:m,Query:E,QueryDocumentSnapshot:v,QuerySnapshot:M,CollectionReference:P,FieldPath:Y,FieldValue:de,setLogLevel:function Vb(n){!function Ma(n){Mu.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function ot(n){(function We(n,e){n.INTERNAL.registerComponent(new wt.wA("firestore-compat",t=>{const i=t.getProvider("app-compat").getImmediate(),a=t.getProvider("firestore").getImmediate();return e(i,a)},"PUBLIC").setServiceProps(Object.assign({},Oe)))})(n,(e,t)=>new LD(e,t,new Fb)),n.registerVersion("@firebase/firestore-compat","0.3.3")}(Ze.Z);var bt=O(7579),Ae=O(6451),xt=O(5363),Vn=O(8421);function hn(n,e){return(0,Hr.e)((t,i)=>{let a=null,c=0,p=!1;const y=()=>p&&!a&&i.complete();t.subscribe((0,Hi.x)(i,D=>{a?.unsubscribe();let T=0;const x=c++;(0,Vn.Xf)(n(D,x)).subscribe(a=(0,Hi.x)(i,R=>i.next(e?e(D,R,x,T++):R),()=>{a=null,y()}))},()=>{p=!0,y()}))})}var Bb=O(6063);class kT extends bt.x{constructor(e=1/0,t=1/0,i=Bb.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=i,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:i,_infiniteTimeWindow:a,_timestampProvider:c,_windowTime:p}=this;t||(i.push(e),!a&&i.push(c.now()+p)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:i,_buffer:a}=this,c=a.slice();for(let p=0;p<c.length&&!e.closed;p+=i?1:2)e.next(c[p]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:i,_infiniteTimeWindow:a}=this,c=(a?1:2)*e;if(e<1/0&&c<i.length&&i.splice(0,i.length-c),!a){const p=t.now();let y=0;for(let D=1;D<i.length&&i[D]<=p;D+=2)y=D;y&&i.splice(0,y+1)}}}var PT=O(3099);function Ub(n,e,t){let i,a=!1;return n&&"object"==typeof n?({bufferSize:i=1/0,windowTime:e=1/0,refCount:a=!1,scheduler:t}=n):i=n??1/0,(0,PT.B)({connector:()=>new kT(i,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:a})}const jb=(0,O(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var LT=O(515);function BT(n=UT){return(0,Hr.e)((e,t)=>{let i=!1;e.subscribe((0,Hi.x)(t,a=>{i=!0,t.next(a)},()=>i?t.complete():t.error(n())))})}function UT(){return new jb}var $T=O(576);function $b(n,e){return(0,$T.m)(e)?hn(()=>n,e):hn(()=>n)}var VD=O(9468);O(259);const UD=new Map,Gb={activated:!1,tokenObservers:[]},qT={initialized:!1,enabled:!1};function vi(n){return UD.get(n)||Object.assign({},Gb)}function rE(){return qT}const jD="https://content-firebaseappcheck.googleapis.com/v1",QT="exchangeDebugToken",zb={OFFSET_DURATION:3e5,RETRIAL_MIN_WAIT:3e4,RETRIAL_MAX_WAIT:96e4};class JT{constructor(e,t,i,a,c){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=i,this.lowerBound=a,this.upperBound=c,this.pending=null,this.nextErrorWaitInterval=a,a>c)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,z.Z)(function*(){t.stop();try{t.pending=new Dt.BH,yield function eC(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new Dt.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(i){t.retryPolicy(i)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const es=new Dt.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function GD(){return GD=(0,z.Z)(function*({url:n,body:e},t){const i={"Content-Type":"application/json"},a=t.getImmediate({optional:!0});if(a){const R=yield a.getHeartbeatsHeader();R&&(i["X-Firebase-Client"]=R)}const c={method:"POST",body:JSON.stringify(e),headers:i};let p,y;try{p=yield fetch(n,c)}catch(R){throw es.create("fetch-network-error",{originalErrorMessage:R?.message})}if(200!==p.status)throw es.create("fetch-status-error",{httpStatus:p.status});try{y=yield p.json()}catch(R){throw es.create("fetch-parse-error",{originalErrorMessage:R?.message})}const D=y.ttl.match(/^([\d.]+)(s)$/);if(!D||!D[2]||isNaN(Number(D[1])))throw es.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${y.ttl}`});const T=1e3*Number(D[1]),x=Date.now();return{token:y.token,expireTimeMillis:x+T,issuedAtTimeMillis:x}}),GD.apply(this,arguments)}const sC="firebase-app-check-database",oC=1,tv="firebase-app-check-store";let oE=null;function zD(){return zD=(0,z.Z)(function*(n,e){const i=(yield function Kb(){return oE||(oE=new Promise((n,e)=>{try{const t=indexedDB.open(sC,oC);t.onsuccess=i=>{n(i.target.result)},t.onerror=i=>{var a;e(es.create("storage-open",{originalErrorMessage:null===(a=i.target.error)||void 0===a?void 0:a.message}))},t.onupgradeneeded=i=>{0===i.oldVersion&&i.target.result.createObjectStore(tv,{keyPath:"compositeKey"})}}catch(t){e(es.create("storage-open",{originalErrorMessage:t?.message}))}}),oE)}()).transaction(tv,"readwrite"),c=i.objectStore(tv).put({compositeKey:n,value:e});return new Promise((p,y)=>{c.onsuccess=D=>{p()},i.onerror=D=>{var T;y(es.create("storage-set",{originalErrorMessage:null===(T=D.target.error)||void 0===T?void 0:T.message}))}})}),zD.apply(this,arguments)}const nv=new On.Yd("@firebase/app-check");function KD(n,e){return(0,Dt.hl)()?function uC(n,e){return function Zb(n,e){return zD.apply(this,arguments)}(function Qb(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{nv.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function YD(){return YD=(0,z.Z)(function*(){const n=rE();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),YD.apply(this,arguments)}const pC={error:"UNKNOWN_ERROR"};function gC(n){return Dt.US.encodeString(JSON.stringify(n),!1)}function aE(n){return QD.apply(this,arguments)}function QD(){return QD=(0,z.Z)(function*(n,e=!1){const t=n.app;!function Wb(n){if(!vi(n).activated)throw es.create("use-before-activation",{appName:n.name})}(t);const i=vi(t);let c,a=i.token;if(a&&!dm(a)&&(i.token=void 0,a=void 0),!a){const D=yield i.cachedTokenPromise;D&&(dm(D)?a=D:yield KD(t,void 0))}if(!e&&a&&dm(a))return{token:a.token};let y,p=!1;if(function Xb(){return rE().enabled}()){i.exchangeTokenPromise||(i.exchangeTokenPromise=function HD(n,e){return GD.apply(this,arguments)}(function iC(n,e){const{projectId:t,appId:i,apiKey:a}=n.options;return{url:`${jD}/projects/${t}/apps/${i}:${QT}?key=${a}`,body:{debug_token:e}}}(t,yield function Jb(){return YD.apply(this,arguments)}()),n.heartbeatServiceProvider).finally(()=>{i.exchangeTokenPromise=void 0}),p=!0);const D=yield i.exchangeTokenPromise;return yield KD(t,D),i.token=D,{token:D.token}}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),p=!0),a=yield vi(t).exchangeTokenPromise}catch(D){"appCheck/throttled"===D.code?nv.warn(D.message):nv.error(D),c=D}return a?c?y=dm(a)?{token:a.token,internalError:c}:nT(c):(y={token:a.token},i.token=a,yield KD(t,a)):y=nT(c),p&&function tT(n,e){const t=vi(n).tokenObservers;for(const i of t)try{"EXTERNAL"===i.type&&null!=e.error?i.error(e.error):i.next(e)}catch{}}(t,y),y}),QD.apply(this,arguments)}function JD(n,e){const t=vi(n),i=t.tokenObservers.filter(a=>a.next!==e);0===i.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=i}function eT(n){const{app:e}=n,t=vi(e);let i=t.tokenRefresher;i||(i=function mC(n){const{app:e}=n;return new JT((0,z.Z)(function*(){let i;if(i=vi(e).token?yield aE(n,!0):yield aE(n),i.error)throw i.error;if(i.internalError)throw i.internalError}),()=>!0,()=>{const t=vi(e);if(t.token){let i=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return i=Math.min(i,t.token.expireTimeMillis-3e5),Math.max(0,i-Date.now())}return 0},zb.RETRIAL_MIN_WAIT,zb.RETRIAL_MAX_WAIT)}(n),t.tokenRefresher=i),!i.isRunning()&&t.isTokenAutoRefreshEnabled&&i.start()}function dm(n){return n.expireTimeMillis-Date.now()>0}function nT(n){return{token:gC(pC),error:n}}class yC{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=vi(this.app);for(const t of e)JD(this.app,t.next);return Promise.resolve()}}const lT="app-check-internal";!function NC(){(0,Rt._registerComponent)(new wt.wA("app-check",n=>function _C(n,e){return new yC(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(lT).initialize()})),(0,Rt._registerComponent)(new wt.wA(lT,n=>function vC(n){return{getToken:e=>aE(n,e),addTokenListener:e=>function XD(n,e,t,i){const{app:a}=n,c=vi(a);if(c.tokenObservers=[...c.tokenObservers,{next:t,error:i,type:e}],c.token&&dm(c.token)){const y=c.token;Promise.resolve().then(()=>{t({token:y.token}),eT(n)}).catch(()=>{})}c.cachedTokenPromise.then(()=>eT(n))}(n,"INTERNAL",e),removeTokenListener:e=>JD(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Rt.registerVersion)("@firebase/app-check","0.6.3")}();class rb{constructor(){return(0,Pn.vb)("app-check")}}typeof window<"u"&&window;var LC=O(9260);const hT=new I.OlP("angularfire2.auth.use-emulator"),fT=new I.OlP("angularfire2.auth.settings"),pT=new I.OlP("angularfire2.auth.tenant-id"),gT=new I.OlP("angularfire2.auth.langugage-code"),mT=new I.OlP("angularfire2.auth.use-device-language"),yT=new I.OlP("angularfire.auth.persistence"),_T=(n,e,t,i,a,c,p,y)=>(0,pi.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const D=e.runOutsideAngular(()=>n.auth());if(t&&D.useEmulator(...t),i&&(D.tenantId=i),D.languageCode=a,c&&D.useDeviceLanguage(),p)for(const[T,x]of Object.entries(p))D.settings[T]=x;return y&&D.setPersistence(y),D},[t,i,a,c,p,y]);let vT=(()=>{class n{constructor(t,i,a,c,p,y,D,T,x,R,q,ne){const ge=new bt.x,Ue=Mr(void 0).pipe((0,xt.Q)(p.outsideAngular),hn(()=>c.runOutsideAngular(()=>Promise.resolve().then(O.bind(O,407)))),(0,w.U)(()=>(0,pi.on)(t,c,i)),(0,w.U)(Ye=>_T(Ye,c,y,T,x,R,D,q)),Ub({bufferSize:1,refCount:!1}));if($a(a))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=Mr(null);else{Ue.pipe(function jT(n,e){const t=arguments.length>=2;return i=>i.pipe(n?Ie((a,c)=>n(a,c,i)):L.y,function FT(n){return n<=0?()=>LT.E:(0,Hr.e)((e,t)=>{let i=0;e.subscribe((0,Hi.x)(t,a=>{++i<=n&&(t.next(a),n<=i&&t.complete())}))})}(1),t?function VT(n){return(0,Hr.e)((e,t)=>{let i=!1;e.subscribe((0,Hi.x)(t,a=>{i=!0,t.next(a)},()=>{i||t.next(n),t.complete()}))})}(e):BT(()=>new jb))}()).subscribe();const zt=Ue.pipe(hn(Ut=>Ut.getRedirectResult().then(Ft=>Ft,()=>null)),Pn.iC,Ub({bufferSize:1,refCount:!1})),Xt=Ue.pipe(hn(Ut=>new vo.y(Ft=>({unsubscribe:c.runOutsideAngular(()=>Ut.onAuthStateChanged(Wt=>Ft.next(Wt),Wt=>Ft.error(Wt),()=>Ft.complete()))})))),jt=Ue.pipe(hn(Ut=>new vo.y(Ft=>({unsubscribe:c.runOutsideAngular(()=>Ut.onIdTokenChanged(Wt=>Ft.next(Wt),Wt=>Ft.error(Wt),()=>Ft.complete()))}))));this.authState=zt.pipe($b(Xt),(0,VD.R)(p.outsideAngular),(0,xt.Q)(p.insideAngular)),this.user=zt.pipe($b(jt),(0,VD.R)(p.outsideAngular),(0,xt.Q)(p.insideAngular)),this.idToken=this.user.pipe(hn(Ut=>Ut?(0,Ci.D)(Ut.getIdToken()):Mr(null))),this.idTokenResult=this.user.pipe(hn(Ut=>Ut?(0,Ci.D)(Ut.getIdTokenResult()):Mr(null))),this.credential=(0,Ae.T)(zt,ge,this.authState.pipe(Ie(Ut=>!Ut))).pipe((0,w.U)(Ut=>Ut?.user?Ut:null),(0,VD.R)(p.outsideAngular),(0,xt.Q)(p.insideAngular))}return(0,pi.pX)(this,Ue,c,{spy:{apply:(Ye,zt,Xt)=>{(Ye.startsWith("signIn")||Ye.startsWith("createUser"))&&Xt.then(jt=>ge.next(jt))}}})}}return n.\u0275fac=function(t){return new(t||n)(I.LFG(pi.Dh),I.LFG(pi.xv,8),I.LFG(I.Lbi),I.LFG(I.R0b),I.LFG(Pn.HU),I.LFG(hT,8),I.LFG(fT,8),I.LFG(pT,8),I.LFG(gT,8),I.LFG(mT,8),I.LFG(yT,8),I.LFG(rb,8))},n.\u0275prov=I.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();function IT(n,e){return function VC(n,e=ds.z){return new vo.y(t=>{let i;return null!=e?e.schedule(()=>{i=n.onSnapshot({includeMetadataChanges:!0},t)}):i=n.onSnapshot({includeMetadataChanges:!0},t),()=>{i?.()}})}(n,e)}function sb(n,e){return IT(n,e).pipe((0,w.U)(t=>({payload:t,type:"query"})))}function cE(n,e){return sb(n,e).pipe(Io(void 0),ga(),(0,w.U)(([t,i])=>{const a=i.payload.docChanges(),c=a.map(p=>({type:p.type,payload:p}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(i.payload.metadata)&&i.payload.docs.forEach((p,y)=>{const D=a.find(x=>x.doc.ref.isEqual(p.ref)),T=t?.payload.docs.find(x=>x.ref.isEqual(p.ref));D&&JSON.stringify(D.doc.metadata)===JSON.stringify(p.metadata)||!D&&T&&JSON.stringify(T.metadata)===JSON.stringify(p.metadata)||c.push({type:"modified",payload:{oldIndex:y,newIndex:y,type:"modified",doc:p}})}),c}))}function ET(n,e,t){return cE(n,t).pipe(A((i,a)=>function UC(n,e,t){return e.forEach(i=>{t.indexOf(i.type)>-1&&(n=function jC(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return ob(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return ob(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return ob(n,e.oldIndex,1)}return n}(n,i))}),n}(i,a.map(c=>c.payload),e),[]),function W(n,e=L.y){return n=n??Z,(0,Hr.e)((t,i)=>{let a,c=!0;t.subscribe((0,Hi.x)(i,p=>{const y=e(p);(c||!n(a,y))&&(c=!1,a=y,i.next(p))}))})}(),(0,w.U)(i=>i.map(a=>({type:a.type,payload:a}))))}function ob(n,e,t,...i){const a=n.slice();return a.splice(e,t,...i),a}function wT(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class DT{constructor(e,t,i){this.ref=e,this.query=t,this.afs=i}stateChanges(e){let t=cE(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,w.U)(i=>i.filter(a=>e.indexOf(a.type)>-1)))),t.pipe(Io(void 0),ga(),Ie(([i,a])=>a.length>0||!i),(0,w.U)(([i,a])=>a),Pn.iC)}auditTrail(e){return this.stateChanges(e).pipe(A((t,i)=>[...t,...i],[]))}snapshotChanges(e){const t=wT(e);return ET(this.query,t,this.afs.schedulers.outsideAngular).pipe(Pn.iC)}valueChanges(e={}){return sb(this.query,this.afs.schedulers.outsideAngular).pipe((0,w.U)(t=>t.payload.docs.map(i=>e.idField?Object.assign(Object.assign({},i.data()),{[e.idField]:i.id}):i.data())),Pn.iC)}get(e){return(0,Ci.D)(this.query.get(e)).pipe(Pn.iC)}add(e){return this.ref.add(e)}doc(e){return new bT(this.ref.doc(e),this.afs)}}class bT{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const i=this.ref.collection(e),{ref:a,query:c}=ST(i,t);return new DT(a,c,this.afs)}snapshotChanges(){return function BC(n,e){return IT(n,e).pipe(Io(void 0),ga(),(0,w.U)(([t,i])=>i.exists?t?.exists?{payload:i,type:"modified"}:{payload:i,type:"added"}:{payload:i,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Pn.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,w.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,Ci.D)(this.ref.get(e)).pipe(Pn.iC)}}class $C{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?cE(this.query,this.afs.schedulers.outsideAngular).pipe((0,w.U)(t=>t.filter(i=>e.indexOf(i.type)>-1)),Ie(t=>t.length>0),Pn.iC):cE(this.query,this.afs.schedulers.outsideAngular).pipe(Pn.iC)}auditTrail(e){return this.stateChanges(e).pipe(A((t,i)=>[...t,...i],[]))}snapshotChanges(e){const t=wT(e);return ET(this.query,t,this.afs.schedulers.outsideAngular).pipe(Pn.iC)}valueChanges(e={}){return sb(this.query,this.afs.schedulers.outsideAngular).pipe((0,w.U)(i=>i.payload.docs.map(a=>e.idField?Object.assign({[e.idField]:a.id},a.data()):a.data())),Pn.iC)}get(e){return(0,Ci.D)(this.query.get(e)).pipe(Pn.iC)}}const TT=new I.OlP("angularfire2.enableFirestorePersistence"),CT=new I.OlP("angularfire2.firestore.persistenceSettings"),HC=new I.OlP("angularfire2.firestore.settings"),GC=new I.OlP("angularfire2.firestore.use-emulator");function ST(n,e=(t=>t)){return{query:e(n),ref:n}}let AT=(()=>{class n{constructor(t,i,a,c,p,y,D,T,x,R,q,ne,ge,Ue,Ye,zt,Xt){this.schedulers=D;const jt=(0,pi.on)(t,y,i),Ut=x;R&&_T(jt,y,q,ge,Ue,Ye,ne,zt),[this.firestore,this.persistenceEnabled$]=(0,pi.cc)(`${jt.name}.firestore`,"AngularFirestore",jt.name,()=>{const Ft=y.runOutsideAngular(()=>jt.firestore());if(c&&Ft.settings(c),Ut&&Ft.useEmulator(...Ut),a&&!$a(p)){const Wt=()=>{try{return(0,Ci.D)(Ft.enablePersistence(T||void 0).then(()=>!0,()=>!1))}catch(qr){return typeof console<"u"&&console.warn(qr),Mr(!1)}};return[Ft,y.runOutsideAngular(Wt)]}return[Ft,Mr(!1)]},[c,Ut,a])}collection(t,i){let a;a="string"==typeof t?this.firestore.collection(t):t;const{ref:c,query:p}=ST(a,i),y=this.schedulers.ngZone.run(()=>c);return new DT(y,p,this)}collectionGroup(t,i){const a=i||(p=>p),c=this.firestore.collectionGroup(t);return new $C(a(c),this)}doc(t){let i;i="string"==typeof t?this.firestore.doc(t):t;const a=this.schedulers.ngZone.run(()=>i);return new bT(a,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(I.LFG(pi.Dh),I.LFG(pi.xv,8),I.LFG(TT,8),I.LFG(HC,8),I.LFG(I.Lbi),I.LFG(I.R0b),I.LFG(Pn.HU),I.LFG(CT,8),I.LFG(GC,8),I.LFG(vT,8),I.LFG(hT,8),I.LFG(fT,8),I.LFG(pT,8),I.LFG(gT,8),I.LFG(mT,8),I.LFG(yT,8),I.LFG(rb,8))},n.\u0275prov=I.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),zC=(()=>{class n{constructor(){LC.Z.registerVersion("angularfire",Pn.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:TT,useValue:!0},{provide:CT,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=I.oAB({type:n}),n.\u0275inj=I.cJS({providers:[AT]}),n})();class hm{constructor(e){this.firestore=e,this.firestoreCollection=e.collection("todos")}addTodo(e){this.firestoreCollection.add({title:e,isDone:!1})}updateTodoStatus(e,t){this.firestoreCollection.doc(e).update({isDone:t})}deleteTodo(e){this.firestoreCollection.doc(e).delete()}}function WC(n,e){if(1&n){const t=I.EpF();I.TgZ(0,"li",12)(1,"span")(2,"i",13),I.NdJ("click",function(){const c=I.CHM(t).$implicit,p=I.oxw();return I.KtG(p.onStatusChange(c.id,!c.isDone))}),I.qZA(),I._uU(3),I.TgZ(4,"span",14),I.NdJ("click",function(){const c=I.CHM(t).$implicit,p=I.oxw();return I.KtG(p.onDelete(c.id))}),I._UZ(5,"i",15),I.qZA()()()}if(2&n){const t=e.$implicit;I.xp6(2),I.Q6J("ngClass",t.isDone?"fa-solid fa-circle-check":"fa-regular fa-circle"),I.xp6(1),I.hij(" ",t.title," ")}}hm.\u0275fac=function(e){return new(e||hm)(I.LFG(AT))},hm.\u0275prov=I.Yz7({token:hm,factory:hm.\u0275fac,providedIn:"root"});class rv{constructor(e){this.todoService=e,this.todos=[]}ngOnInit(){this.todoService.firestoreCollection.valueChanges({idField:"id"}).subscribe(e=>{this.todos=e.sort((t,i)=>t.isDone-i.isDone)})}onClick(e){e.value&&(this.todoService.addTodo(e.value),e.value="")}onStatusChange(e,t){this.todoService.updateTodoStatus(e,t)}onDelete(e){this.todoService.deleteTodo(e)}}rv.\u0275fac=function(e){return new(e||rv)(I.Y36(hm))},rv.\u0275cmp=I.Xpm({type:rv,selectors:[["app-todo"]],decls:13,vars:1,consts:[[1,"card","shadow-lg","mt-5"],[1,"card-header","text-center","py-4","border-0"],[1,"display-6","fw-bold"],[1,"card-body","p-4"],[1,"list-group"],[1,"list-group-item","mb-2","border","py-0","rounded-3"],[1,"input-group"],["type","text","placeholder","Title goes here",1,"form-control","border-0","py-3","shadow-none"],["titleInput",""],[1,"btn","text-success","border-0",3,"click"],[1,"fa-solid","fa-circle-plus","fa-xl"],["class","list-group-item mb-2 border py-3 rounded-3",4,"ngFor","ngForOf"],[1,"list-group-item","mb-2","border","py-3","rounded-3"],[1,"text-success",3,"ngClass","click"],[1,"float-end","text-secondary",3,"click"],[1,"fa-solid","fa-trash-can"]],template:function(e,t){if(1&e){const i=I.EpF();I.TgZ(0,"div",0)(1,"div",1)(2,"h1",2),I._uU(3,"To Do List"),I.qZA()(),I.TgZ(4,"div",3)(5,"ul",4)(6,"li",5)(7,"div",6),I._UZ(8,"input",7,8),I.TgZ(10,"button",9),I.NdJ("click",function(){I.CHM(i);const c=I.MAs(9);return I.KtG(t.onClick(c))}),I._UZ(11,"i",10),I.qZA()()(),I.YNc(12,WC,6,2,"li",11),I.qZA()()()}2&e&&(I.xp6(12),I.Q6J("ngForOf",t.todos))},dependencies:[Nt,ai]});class iv{constructor(){this.title="todo-list"}}iv.\u0275fac=function(e){return new(e||iv)},iv.\u0275cmp=I.Xpm({type:iv,selectors:[["app-root"]],decls:4,vars:0,consts:[[1,"container"],[1,"row","justify-content-center"],[1,"col-md-5"]],template:function(e,t){1&e&&(I.TgZ(0,"div",0)(1,"div",1)(2,"div",2),I._UZ(3,"app-todo"),I.qZA()()())},dependencies:[rv]});class fm{}fm.\u0275fac=function(e){return new(e||fm)},fm.\u0275mod=I.oAB({type:fm,bootstrap:[iv]}),fm.\u0275inj=I.cJS({imports:[da,pi.hO.initializeApp({apiKey:"AIzaSyCt8B_KXm99TkNva8bAYg_arMhEEYV1MvY",authDomain:"todo-list-app-65736.firebaseapp.com",projectId:"todo-list-app-65736",storageBucket:"todo-list-app-65736.appspot.com",messagingSenderId:"61003765676",appId:"1:61003765676:web:0167b73c4a8bf3fb4d8c09"}),zC]}),Ql().bootstrapModule(fm).catch(n=>console.error(n))},8306:(ht,Te,O)=>{O.d(Te,{y:()=>j});var I=O(2961),X=O(727),k=O(8822),ie=O(4671);var me=O(2416),ce=O(576),ve=O(2806);let j=(()=>{class Se{constructor(Ge){Ge&&(this._subscribe=Ge)}lift(Ge){const oe=new Se;return oe.source=this,oe.operator=Ge,oe}subscribe(Ge,oe,xe){const _e=function Qe(Se){return Se&&Se instanceof I.Lv||function K(Se){return Se&&(0,ce.m)(Se.next)&&(0,ce.m)(Se.error)&&(0,ce.m)(Se.complete)}(Se)&&(0,X.Nn)(Se)}(Ge)?Ge:new I.Hp(Ge,oe,xe);return(0,ve.x)(()=>{const{operator:Me,source:Ee}=this;_e.add(Me?Me.call(_e,Ee):Ee?this._subscribe(_e):this._trySubscribe(_e))}),_e}_trySubscribe(Ge){try{return this._subscribe(Ge)}catch(oe){Ge.error(oe)}}forEach(Ge,oe){return new(oe=U(oe))((xe,_e)=>{const Me=new I.Hp({next:Ee=>{try{Ge(Ee)}catch(ye){_e(ye),Me.unsubscribe()}},error:_e,complete:xe});this.subscribe(Me)})}_subscribe(Ge){var oe;return null===(oe=this.source)||void 0===oe?void 0:oe.subscribe(Ge)}[k.L](){return this}pipe(...Ge){return function se(Se){return 0===Se.length?ie.y:1===Se.length?Se[0]:function(Ge){return Se.reduce((oe,xe)=>xe(oe),Ge)}}(Ge)(this)}toPromise(Ge){return new(Ge=U(Ge))((oe,xe)=>{let _e;this.subscribe(Me=>_e=Me,Me=>xe(Me),()=>oe(_e))})}}return Se.create=vt=>new Se(vt),Se})();function U(Se){var vt;return null!==(vt=Se??me.v.Promise)&&void 0!==vt?vt:Promise}},7579:(ht,Te,O)=>{O.d(Te,{x:()=>me});var I=O(8306),X=O(727);const ie=(0,O(3888).d)(ve=>function(){ve(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ee=O(8737),se=O(2806);let me=(()=>{class ve extends I.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(U){const K=new ce(this,this);return K.operator=U,K}_throwIfClosed(){if(this.closed)throw new ie}next(U){(0,se.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const K of this.currentObservers)K.next(U)}})}error(U){(0,se.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=U;const{observers:K}=this;for(;K.length;)K.shift().error(U)}})}complete(){(0,se.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:U}=this;for(;U.length;)U.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var U;return(null===(U=this.observers)||void 0===U?void 0:U.length)>0}_trySubscribe(U){return this._throwIfClosed(),super._trySubscribe(U)}_subscribe(U){return this._throwIfClosed(),this._checkFinalizedStatuses(U),this._innerSubscribe(U)}_innerSubscribe(U){const{hasError:K,isStopped:Qe,observers:Se}=this;return K||Qe?X.Lc:(this.currentObservers=null,Se.push(U),new X.w0(()=>{this.currentObservers=null,(0,ee.P)(Se,U)}))}_checkFinalizedStatuses(U){const{hasError:K,thrownError:Qe,isStopped:Se}=this;K?U.error(Qe):Se&&U.complete()}asObservable(){const U=new I.y;return U.source=this,U}}return ve.create=(j,U)=>new ce(j,U),ve})();class ce extends me{constructor(j,U){super(),this.destination=j,this.source=U}next(j){var U,K;null===(K=null===(U=this.destination)||void 0===U?void 0:U.next)||void 0===K||K.call(U,j)}error(j){var U,K;null===(K=null===(U=this.destination)||void 0===U?void 0:U.error)||void 0===K||K.call(U,j)}complete(){var j,U;null===(U=null===(j=this.destination)||void 0===j?void 0:j.complete)||void 0===U||U.call(j)}_subscribe(j){var U,K;return null!==(K=null===(U=this.source)||void 0===U?void 0:U.subscribe(j))&&void 0!==K?K:X.Lc}}},2961:(ht,Te,O)=>{O.d(Te,{Hp:()=>Ge,Lv:()=>K});var I=O(576),X=O(727),k=O(2416),ie=O(7849);function ee(){}const se=ve("C",void 0,void 0);function ve(Ee,ye,Ce){return{kind:Ee,value:ye,error:Ce}}var j=O(3410),U=O(2806);class K extends X.w0{constructor(ye){super(),this.isStopped=!1,ye?(this.destination=ye,(0,X.Nn)(ye)&&ye.add(this)):this.destination=Me}static create(ye,Ce,Le){return new Ge(ye,Ce,Le)}next(ye){this.isStopped?_e(function ce(Ee){return ve("N",Ee,void 0)}(ye),this):this._next(ye)}error(ye){this.isStopped?_e(function me(Ee){return ve("E",void 0,Ee)}(ye),this):(this.isStopped=!0,this._error(ye))}complete(){this.isStopped?_e(se,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(ye){this.destination.next(ye)}_error(ye){try{this.destination.error(ye)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Qe=Function.prototype.bind;function Se(Ee,ye){return Qe.call(Ee,ye)}class vt{constructor(ye){this.partialObserver=ye}next(ye){const{partialObserver:Ce}=this;if(Ce.next)try{Ce.next(ye)}catch(Le){oe(Le)}}error(ye){const{partialObserver:Ce}=this;if(Ce.error)try{Ce.error(ye)}catch(Le){oe(Le)}else oe(ye)}complete(){const{partialObserver:ye}=this;if(ye.complete)try{ye.complete()}catch(Ce){oe(Ce)}}}class Ge extends K{constructor(ye,Ce,Le){let Re;if(super(),(0,I.m)(ye)||!ye)Re={next:ye??void 0,error:Ce??void 0,complete:Le??void 0};else{let V;this&&k.v.useDeprecatedNextContext?(V=Object.create(ye),V.unsubscribe=()=>this.unsubscribe(),Re={next:ye.next&&Se(ye.next,V),error:ye.error&&Se(ye.error,V),complete:ye.complete&&Se(ye.complete,V)}):Re=ye}this.destination=new vt(Re)}}function oe(Ee){k.v.useDeprecatedSynchronousErrorHandling?(0,U.O)(Ee):(0,ie.h)(Ee)}function _e(Ee,ye){const{onStoppedNotification:Ce}=k.v;Ce&&j.z.setTimeout(()=>Ce(Ee,ye))}const Me={closed:!0,next:ee,error:function xe(Ee){throw Ee},complete:ee}},727:(ht,Te,O)=>{O.d(Te,{Lc:()=>se,w0:()=>ee,Nn:()=>me});var I=O(576);const k=(0,O(3888).d)(ve=>function(U){ve(this),this.message=U?`${U.length} errors occurred during unsubscription:\n${U.map((K,Qe)=>`${Qe+1}) ${K.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=U});var ie=O(8737);class ee{constructor(j){this.initialTeardown=j,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let j;if(!this.closed){this.closed=!0;const{_parentage:U}=this;if(U)if(this._parentage=null,Array.isArray(U))for(const Se of U)Se.remove(this);else U.remove(this);const{initialTeardown:K}=this;if((0,I.m)(K))try{K()}catch(Se){j=Se instanceof k?Se.errors:[Se]}const{_finalizers:Qe}=this;if(Qe){this._finalizers=null;for(const Se of Qe)try{ce(Se)}catch(vt){j=j??[],vt instanceof k?j=[...j,...vt.errors]:j.push(vt)}}if(j)throw new k(j)}}add(j){var U;if(j&&j!==this)if(this.closed)ce(j);else{if(j instanceof ee){if(j.closed||j._hasParent(this))return;j._addParent(this)}(this._finalizers=null!==(U=this._finalizers)&&void 0!==U?U:[]).push(j)}}_hasParent(j){const{_parentage:U}=this;return U===j||Array.isArray(U)&&U.includes(j)}_addParent(j){const{_parentage:U}=this;this._parentage=Array.isArray(U)?(U.push(j),U):U?[U,j]:j}_removeParent(j){const{_parentage:U}=this;U===j?this._parentage=null:Array.isArray(U)&&(0,ie.P)(U,j)}remove(j){const{_finalizers:U}=this;U&&(0,ie.P)(U,j),j instanceof ee&&j._removeParent(this)}}ee.EMPTY=(()=>{const ve=new ee;return ve.closed=!0,ve})();const se=ee.EMPTY;function me(ve){return ve instanceof ee||ve&&"closed"in ve&&(0,I.m)(ve.remove)&&(0,I.m)(ve.add)&&(0,I.m)(ve.unsubscribe)}function ce(ve){(0,I.m)(ve)?ve():ve.unsubscribe()}},2416:(ht,Te,O)=>{O.d(Te,{v:()=>I});const I={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(ht,Te,O)=>{O.d(Te,{E:()=>X});const X=new(O(8306).y)(ee=>ee.complete())},8996:(ht,Te,O)=>{O.d(Te,{D:()=>ye});var I=O(8421),X=O(5363),k=O(9468),se=O(8306),ce=O(2202),ve=O(576),j=O(9672);function K(Ce,Le){if(!Ce)throw new Error("Iterable cannot be null");return new se.y(Re=>{(0,j.f)(Re,Le,()=>{const V=Ce[Symbol.asyncIterator]();(0,j.f)(Re,Le,()=>{V.next().then(fe=>{fe.done?Re.complete():Re.next(fe.value)})},0,!0)})})}var Qe=O(3670),Se=O(8239),vt=O(1144),Ge=O(6495),oe=O(2206),xe=O(4532),_e=O(3260);function ye(Ce,Le){return Le?function Ee(Ce,Le){if(null!=Ce){if((0,Qe.c)(Ce))return function ie(Ce,Le){return(0,I.Xf)(Ce).pipe((0,k.R)(Le),(0,X.Q)(Le))}(Ce,Le);if((0,vt.z)(Ce))return function me(Ce,Le){return new se.y(Re=>{let V=0;return Le.schedule(function(){V===Ce.length?Re.complete():(Re.next(Ce[V++]),Re.closed||this.schedule())})})}(Ce,Le);if((0,Se.t)(Ce))return function ee(Ce,Le){return(0,I.Xf)(Ce).pipe((0,k.R)(Le),(0,X.Q)(Le))}(Ce,Le);if((0,oe.D)(Ce))return K(Ce,Le);if((0,Ge.T)(Ce))return function U(Ce,Le){return new se.y(Re=>{let V;return(0,j.f)(Re,Le,()=>{V=Ce[ce.h](),(0,j.f)(Re,Le,()=>{let fe,Ne;try{({value:fe,done:Ne}=V.next())}catch(He){return void Re.error(He)}Ne?Re.complete():Re.next(fe)},0,!0)}),()=>(0,ve.m)(V?.return)&&V.return()})}(Ce,Le);if((0,_e.L)(Ce))return function Me(Ce,Le){return K((0,_e.Q)(Ce),Le)}(Ce,Le)}throw(0,xe.z)(Ce)}(Ce,Le):(0,I.Xf)(Ce)}},8421:(ht,Te,O)=>{O.d(Te,{Xf:()=>Qe});var I=O(655),X=O(1144),k=O(8239),ie=O(8306),ee=O(3670),se=O(2206),me=O(4532),ce=O(6495),ve=O(3260),j=O(576),U=O(7849),K=O(8822);function Qe(Ee){if(Ee instanceof ie.y)return Ee;if(null!=Ee){if((0,ee.c)(Ee))return function Se(Ee){return new ie.y(ye=>{const Ce=Ee[K.L]();if((0,j.m)(Ce.subscribe))return Ce.subscribe(ye);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Ee);if((0,X.z)(Ee))return function vt(Ee){return new ie.y(ye=>{for(let Ce=0;Ce<Ee.length&&!ye.closed;Ce++)ye.next(Ee[Ce]);ye.complete()})}(Ee);if((0,k.t)(Ee))return function Ge(Ee){return new ie.y(ye=>{Ee.then(Ce=>{ye.closed||(ye.next(Ce),ye.complete())},Ce=>ye.error(Ce)).then(null,U.h)})}(Ee);if((0,se.D)(Ee))return xe(Ee);if((0,ce.T)(Ee))return function oe(Ee){return new ie.y(ye=>{for(const Ce of Ee)if(ye.next(Ce),ye.closed)return;ye.complete()})}(Ee);if((0,ve.L)(Ee))return function _e(Ee){return xe((0,ve.Q)(Ee))}(Ee)}throw(0,me.z)(Ee)}function xe(Ee){return new ie.y(ye=>{(function Me(Ee,ye){var Ce,Le,Re,V;return(0,I.mG)(this,void 0,void 0,function*(){try{for(Ce=(0,I.KL)(Ee);!(Le=yield Ce.next()).done;)if(ye.next(Le.value),ye.closed)return}catch(fe){Re={error:fe}}finally{try{Le&&!Le.done&&(V=Ce.return)&&(yield V.call(Ce))}finally{if(Re)throw Re.error}}ye.complete()})})(Ee,ye).catch(Ce=>ye.error(Ce))})}},6451:(ht,Te,O)=>{O.d(Te,{T:()=>se});var I=O(6131),X=O(8421),k=O(515),ie=O(7669),ee=O(8996);function se(...me){const ce=(0,ie.yG)(me),ve=(0,ie._6)(me,1/0),j=me;return j.length?1===j.length?(0,X.Xf)(j[0]):(0,I.J)(ve)((0,ee.D)(j,ce)):k.E}},5403:(ht,Te,O)=>{O.d(Te,{x:()=>X});var I=O(2961);function X(ie,ee,se,me,ce){return new k(ie,ee,se,me,ce)}class k extends I.Lv{constructor(ee,se,me,ce,ve,j){super(ee),this.onFinalize=ve,this.shouldUnsubscribe=j,this._next=se?function(U){try{se(U)}catch(K){ee.error(K)}}:super._next,this._error=ce?function(U){try{ce(U)}catch(K){ee.error(K)}finally{this.unsubscribe()}}:super._error,this._complete=me?function(){try{me()}catch(U){ee.error(U)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var ee;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:se}=this;super.unsubscribe(),!se&&(null===(ee=this.onFinalize)||void 0===ee||ee.call(this))}}}},4004:(ht,Te,O)=>{O.d(Te,{U:()=>k});var I=O(4482),X=O(5403);function k(ie,ee){return(0,I.e)((se,me)=>{let ce=0;se.subscribe((0,X.x)(me,ve=>{me.next(ie.call(ee,ve,ce++))}))})}},6131:(ht,Te,O)=>{O.d(Te,{J:()=>j});var I=O(4004),X=O(8421),k=O(4482),ie=O(9672),ee=O(5403),me=O(576);function ce(U,K,Qe=1/0){return(0,me.m)(K)?ce((Se,vt)=>(0,I.U)((Ge,oe)=>K(Se,Ge,vt,oe))((0,X.Xf)(U(Se,vt))),Qe):("number"==typeof K&&(Qe=K),(0,k.e)((Se,vt)=>function se(U,K,Qe,Se,vt,Ge,oe,xe){const _e=[];let Me=0,Ee=0,ye=!1;const Ce=()=>{ye&&!_e.length&&!Me&&K.complete()},Le=V=>Me<Se?Re(V):_e.push(V),Re=V=>{Ge&&K.next(V),Me++;let fe=!1;(0,X.Xf)(Qe(V,Ee++)).subscribe((0,ee.x)(K,Ne=>{vt?.(Ne),Ge?Le(Ne):K.next(Ne)},()=>{fe=!0},void 0,()=>{if(fe)try{for(Me--;_e.length&&Me<Se;){const Ne=_e.shift();oe?(0,ie.f)(K,oe,()=>Re(Ne)):Re(Ne)}Ce()}catch(Ne){K.error(Ne)}}))};return U.subscribe((0,ee.x)(K,Le,()=>{ye=!0,Ce()})),()=>{xe?.()}}(Se,vt,U,Qe)))}var ve=O(4671);function j(U=1/0){return ce(ve.y,U)}},5363:(ht,Te,O)=>{O.d(Te,{Q:()=>ie});var I=O(9672),X=O(4482),k=O(5403);function ie(ee,se=0){return(0,X.e)((me,ce)=>{me.subscribe((0,k.x)(ce,ve=>(0,I.f)(ce,ee,()=>ce.next(ve),se),()=>(0,I.f)(ce,ee,()=>ce.complete(),se),ve=>(0,I.f)(ce,ee,()=>ce.error(ve),se)))})}},3099:(ht,Te,O)=>{O.d(Te,{B:()=>ee});var I=O(8421),X=O(7579),k=O(2961),ie=O(4482);function ee(me={}){const{connector:ce=(()=>new X.x),resetOnError:ve=!0,resetOnComplete:j=!0,resetOnRefCountZero:U=!0}=me;return K=>{let Qe,Se,vt,Ge=0,oe=!1,xe=!1;const _e=()=>{Se?.unsubscribe(),Se=void 0},Me=()=>{_e(),Qe=vt=void 0,oe=xe=!1},Ee=()=>{const ye=Qe;Me(),ye?.unsubscribe()};return(0,ie.e)((ye,Ce)=>{Ge++,!xe&&!oe&&_e();const Le=vt=vt??ce();Ce.add(()=>{Ge--,0===Ge&&!xe&&!oe&&(Se=se(Ee,U))}),Le.subscribe(Ce),!Qe&&Ge>0&&(Qe=new k.Hp({next:Re=>Le.next(Re),error:Re=>{xe=!0,_e(),Se=se(Me,ve,Re),Le.error(Re)},complete:()=>{oe=!0,_e(),Se=se(Me,j),Le.complete()}}),(0,I.Xf)(ye).subscribe(Qe))})(K)}}function se(me,ce,...ve){if(!0===ce)return void me();if(!1===ce)return;const j=new k.Hp({next:()=>{j.unsubscribe(),me()}});return(0,I.Xf)(ce(...ve)).subscribe(j)}},9468:(ht,Te,O)=>{O.d(Te,{R:()=>X});var I=O(4482);function X(k,ie=0){return(0,I.e)((ee,se)=>{se.add(k.schedule(()=>ee.subscribe(se),ie))})}},4408:(ht,Te,O)=>{O.d(Te,{o:()=>ee});var I=O(727);class X extends I.w0{constructor(me,ce){super()}schedule(me,ce=0){return this}}const k={setInterval(se,me,...ce){const{delegate:ve}=k;return ve?.setInterval?ve.setInterval(se,me,...ce):setInterval(se,me,...ce)},clearInterval(se){const{delegate:me}=k;return(me?.clearInterval||clearInterval)(se)},delegate:void 0};var ie=O(8737);class ee extends X{constructor(me,ce){super(me,ce),this.scheduler=me,this.work=ce,this.pending=!1}schedule(me,ce=0){var ve;if(this.closed)return this;this.state=me;const j=this.id,U=this.scheduler;return null!=j&&(this.id=this.recycleAsyncId(U,j,ce)),this.pending=!0,this.delay=ce,this.id=null!==(ve=this.id)&&void 0!==ve?ve:this.requestAsyncId(U,this.id,ce),this}requestAsyncId(me,ce,ve=0){return k.setInterval(me.flush.bind(me,this),ve)}recycleAsyncId(me,ce,ve=0){if(null!=ve&&this.delay===ve&&!1===this.pending)return ce;null!=ce&&k.clearInterval(ce)}execute(me,ce){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const ve=this._execute(me,ce);if(ve)return ve;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(me,ce){let j,ve=!1;try{this.work(me)}catch(U){ve=!0,j=U||new Error("Scheduled action threw falsy error")}if(ve)return this.unsubscribe(),j}unsubscribe(){if(!this.closed){const{id:me,scheduler:ce}=this,{actions:ve}=ce;this.work=this.state=this.scheduler=null,this.pending=!1,(0,ie.P)(ve,this),null!=me&&(this.id=this.recycleAsyncId(ce,me,null)),this.delay=null,super.unsubscribe()}}}},7565:(ht,Te,O)=>{O.d(Te,{v:()=>k});var I=O(6063);class X{constructor(ee,se=X.now){this.schedulerActionCtor=ee,this.now=se}schedule(ee,se=0,me){return new this.schedulerActionCtor(this,ee).schedule(me,se)}}X.now=I.l.now;class k extends X{constructor(ee,se=X.now){super(ee,se),this.actions=[],this._active=!1}flush(ee){const{actions:se}=this;if(this._active)return void se.push(ee);let me;this._active=!0;do{if(me=ee.execute(ee.state,ee.delay))break}while(ee=se.shift());if(this._active=!1,me){for(;ee=se.shift();)ee.unsubscribe();throw me}}}},4986:(ht,Te,O)=>{O.d(Te,{z:()=>k});var I=O(4408);const k=new(O(7565).v)(I.o)},6063:(ht,Te,O)=>{O.d(Te,{l:()=>I});const I={now:()=>(I.delegate||Date).now(),delegate:void 0}},3410:(ht,Te,O)=>{O.d(Te,{z:()=>I});const I={setTimeout(X,k,...ie){const{delegate:ee}=I;return ee?.setTimeout?ee.setTimeout(X,k,...ie):setTimeout(X,k,...ie)},clearTimeout(X){const{delegate:k}=I;return(k?.clearTimeout||clearTimeout)(X)},delegate:void 0}},2202:(ht,Te,O)=>{O.d(Te,{h:()=>X});const X=function I(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(ht,Te,O)=>{O.d(Te,{L:()=>I});const I="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(ht,Te,O)=>{O.d(Te,{_6:()=>se,yG:()=>ee});var I=O(576);function k(me){return me[me.length-1]}function ee(me){return function X(me){return me&&(0,I.m)(me.schedule)}(k(me))?me.pop():void 0}function se(me,ce){return"number"==typeof k(me)?me.pop():ce}},8737:(ht,Te,O)=>{function I(X,k){if(X){const ie=X.indexOf(k);0<=ie&&X.splice(ie,1)}}O.d(Te,{P:()=>I})},3888:(ht,Te,O)=>{function I(X){const ie=X(ee=>{Error.call(ee),ee.stack=(new Error).stack});return ie.prototype=Object.create(Error.prototype),ie.prototype.constructor=ie,ie}O.d(Te,{d:()=>I})},2806:(ht,Te,O)=>{O.d(Te,{O:()=>ie,x:()=>k});var I=O(2416);let X=null;function k(ee){if(I.v.useDeprecatedSynchronousErrorHandling){const se=!X;if(se&&(X={errorThrown:!1,error:null}),ee(),se){const{errorThrown:me,error:ce}=X;if(X=null,me)throw ce}}else ee()}function ie(ee){I.v.useDeprecatedSynchronousErrorHandling&&X&&(X.errorThrown=!0,X.error=ee)}},9672:(ht,Te,O)=>{function I(X,k,ie,ee=0,se=!1){const me=k.schedule(function(){ie(),se?X.add(this.schedule(null,ee)):this.unsubscribe()},ee);if(X.add(me),!se)return me}O.d(Te,{f:()=>I})},4671:(ht,Te,O)=>{function I(X){return X}O.d(Te,{y:()=>I})},1144:(ht,Te,O)=>{O.d(Te,{z:()=>I});const I=X=>X&&"number"==typeof X.length&&"function"!=typeof X},2206:(ht,Te,O)=>{O.d(Te,{D:()=>X});var I=O(576);function X(k){return Symbol.asyncIterator&&(0,I.m)(k?.[Symbol.asyncIterator])}},576:(ht,Te,O)=>{function I(X){return"function"==typeof X}O.d(Te,{m:()=>I})},3670:(ht,Te,O)=>{O.d(Te,{c:()=>k});var I=O(8822),X=O(576);function k(ie){return(0,X.m)(ie[I.L])}},6495:(ht,Te,O)=>{O.d(Te,{T:()=>k});var I=O(2202),X=O(576);function k(ie){return(0,X.m)(ie?.[I.h])}},8239:(ht,Te,O)=>{O.d(Te,{t:()=>X});var I=O(576);function X(k){return(0,I.m)(k?.then)}},3260:(ht,Te,O)=>{O.d(Te,{L:()=>ie,Q:()=>k});var I=O(655),X=O(576);function k(ee){return(0,I.FC)(this,arguments,function*(){const me=ee.getReader();try{for(;;){const{value:ce,done:ve}=yield(0,I.qq)(me.read());if(ve)return yield(0,I.qq)(void 0);yield yield(0,I.qq)(ce)}}finally{me.releaseLock()}})}function ie(ee){return(0,X.m)(ee?.getReader)}},4482:(ht,Te,O)=>{O.d(Te,{e:()=>k});var I=O(576);function k(ie){return ee=>{if(function X(ie){return(0,I.m)(ie?.lift)}(ee))return ee.lift(function(se){try{return ie(se,this)}catch(me){this.error(me)}});throw new TypeError("Unable to lift unknown Observable type")}}},7849:(ht,Te,O)=>{O.d(Te,{h:()=>k});var I=O(2416),X=O(3410);function k(ie){X.z.setTimeout(()=>{const{onUnhandledError:ee}=I.v;if(!ee)throw ie;ee(ie)})}},4532:(ht,Te,O)=>{function I(X){return new TypeError(`You provided ${null!==X&&"object"==typeof X?"an invalid object":`'${X}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}O.d(Te,{z:()=>I})},655:(ht,Te,O)=>{function ie(te,ue){var pe={};for(var be in te)Object.prototype.hasOwnProperty.call(te,be)&&ue.indexOf(be)<0&&(pe[be]=te[be]);if(null!=te&&"function"==typeof Object.getOwnPropertySymbols){var Pe=0;for(be=Object.getOwnPropertySymbols(te);Pe<be.length;Pe++)ue.indexOf(be[Pe])<0&&Object.prototype.propertyIsEnumerable.call(te,be[Pe])&&(pe[be[Pe]]=te[be[Pe]])}return pe}function K(te,ue,pe,be){return new(pe||(pe=Promise))(function(Ve,qe){function je(Yt){try{_t(be.next(Yt))}catch(et){qe(et)}}function en(Yt){try{_t(be.throw(Yt))}catch(et){qe(et)}}function _t(Yt){Yt.done?Ve(Yt.value):function Pe(Ve){return Ve instanceof pe?Ve:new pe(function(qe){qe(Ve)})}(Yt.value).then(je,en)}_t((be=be.apply(te,ue||[])).next())})}function Ee(te){return this instanceof Ee?(this.v=te,this):new Ee(te)}function ye(te,ue,pe){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Pe,be=pe.apply(te,ue||[]),Ve=[];return Pe={},qe("next"),qe("throw"),qe("return"),Pe[Symbol.asyncIterator]=function(){return this},Pe;function qe(Mt){be[Mt]&&(Pe[Mt]=function(fn){return new Promise(function(gn,mn){Ve.push([Mt,fn,gn,mn])>1||je(Mt,fn)})})}function je(Mt,fn){try{!function en(Mt){Mt.value instanceof Ee?Promise.resolve(Mt.value.v).then(_t,Yt):et(Ve[0][2],Mt)}(be[Mt](fn))}catch(gn){et(Ve[0][3],gn)}}function _t(Mt){je("next",Mt)}function Yt(Mt){je("throw",Mt)}function et(Mt,fn){Mt(fn),Ve.shift(),Ve.length&&je(Ve[0][0],Ve[0][1])}}function Le(te){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var pe,ue=te[Symbol.asyncIterator];return ue?ue.call(te):(te=function Ge(te){var ue="function"==typeof Symbol&&Symbol.iterator,pe=ue&&te[ue],be=0;if(pe)return pe.call(te);if(te&&"number"==typeof te.length)return{next:function(){return te&&be>=te.length&&(te=void 0),{value:te&&te[be++],done:!te}}};throw new TypeError(ue?"Object is not iterable.":"Symbol.iterator is not defined.")}(te),pe={},be("next"),be("throw"),be("return"),pe[Symbol.asyncIterator]=function(){return this},pe);function be(Ve){pe[Ve]=te[Ve]&&function(qe){return new Promise(function(je,en){!function Pe(Ve,qe,je,en){Promise.resolve(en).then(function(_t){Ve({value:_t,done:je})},qe)}(je,en,(qe=te[Ve](qe)).done,qe.value)})}}}O.d(Te,{FC:()=>ye,KL:()=>Le,_T:()=>ie,mG:()=>K,qq:()=>Ee})},4650:(ht,Te,O)=>{O.d(Te,{$8M:()=>uu,AFp:()=>PI,AaK:()=>ce,CHM:()=>mc,CZH:()=>Qg,EJc:()=>cD,EpF:()=>hy,F4k:()=>l0,FYo:()=>mf,FiY:()=>pa,G48:()=>vD,GfV:()=>Xc,JOm:()=>mi,KtG:()=>Ul,LFG:()=>Be,Lbi:()=>uD,Lck:()=>Cg,MAs:()=>Bt,NdJ:()=>py,OlP:()=>nn,Q6J:()=>cy,QGY:()=>fy,Qsj:()=>zi,R0b:()=>Ji,RDi:()=>ms,Rgc:()=>wl,SBq:()=>Ad,TTD:()=>Ha,TgZ:()=>Hu,X6Q:()=>im,Xpm:()=>Uo,Y36:()=>Fn,YNc:()=>u0,Yjl:()=>$o,Yz7:()=>et,ZZ4:()=>Q_,_UZ:()=>Jp,_c5:()=>kb,_uU:()=>Sy,aQg:()=>X_,cJS:()=>fn,cg1:()=>Oo,dDg:()=>gD,dqk:()=>St,eFA:()=>G_,eoX:()=>Jg,g9A:()=>LI,h0i:()=>oh,hGG:()=>eE,hij:()=>Kd,ifc:()=>$t,ip1:()=>O_,kL8:()=>By,lG2:()=>jo,lri:()=>BI,oAB:()=>En,oxw:()=>gy,q4F:()=>Cv,qLn:()=>xd,qZA:()=>fl,rWj:()=>UI,sBO:()=>ID,s_b:()=>dh,soG:()=>Xg,vHH:()=>oe,wAp:()=>mt,xp6:()=>Fm,zSh:()=>xp,zs3:()=>Jc});var I=O(7579),X=O(727),k=O(8306),ie=O(6451),ee=O(3099);function se(r){for(let s in r)if(r[s]===se)return s;throw Error("Could not find renamed property on target object.")}function ce(r){if("string"==typeof r)return r;if(Array.isArray(r))return"["+r.map(ce).join(", ")+"]";if(null==r)return""+r;if(r.overriddenName)return`${r.overriddenName}`;if(r.name)return`${r.name}`;const s=r.toString();if(null==s)return""+s;const o=s.indexOf("\n");return-1===o?s:s.substring(0,o)}function ve(r,s){return null==r||""===r?null===s?"":s:null==s||""===s?r:r+" "+s}const j=se({__forward_ref__:se});function U(r){return r.__forward_ref__=U,r.toString=function(){return ce(this())},r}function K(r){return function Qe(r){return"function"==typeof r&&r.hasOwnProperty(j)&&r.__forward_ref__===U}(r)?r():r}function Se(r){return r&&!!r.\u0275providers}class oe extends Error{constructor(s,o){super(xe(s,o)),this.code=s}}function xe(r,s){return`NG0${Math.abs(r)}${s?": "+s.trim():""}`}function _e(r){return"string"==typeof r?r:null==r?"":String(r)}function Le(r,s){throw new oe(-201,!1)}function qe(r,s){null==r&&function je(r,s,o,u){throw new Error(`ASSERTION ERROR: ${r}`+(null==u?"":` [Expected=> ${o} ${u} ${s} <=Actual]`))}(s,r,null,"!=")}function et(r){return{token:r.token,providedIn:r.providedIn||null,factory:r.factory,value:void 0}}function fn(r){return{providers:r.providers||[],imports:r.imports||[]}}function gn(r){return yn(r,br)||yn(r,an)}function yn(r,s){return r.hasOwnProperty(s)?r[s]:null}function ii(r){return r&&(r.hasOwnProperty(Es)||r.hasOwnProperty(Fr))?r[Es]:null}const br=se({\u0275prov:se}),Es=se({\u0275inj:se}),an=se({ngInjectableDef:se}),Fr=se({ngInjectorDef:se});var ft=(()=>((ft=ft||{})[ft.Default=0]="Default",ft[ft.Host=1]="Host",ft[ft.Self=2]="Self",ft[ft.SkipSelf=4]="SkipSelf",ft[ft.Optional=8]="Optional",ft))();let Ni;function _n(r){const s=Ni;return Ni=r,s}function Tr(r,s,o){const u=gn(r);return u&&"root"==u.providedIn?void 0===u.value?u.value=u.factory():u.value:o&ft.Optional?null:void 0!==s?s:void Le(ce(r))}const St=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),Cn={},vn="__NG_DI_FLAG__",oi="ngTempTokenPath",fr="ngTokenPath",Vo=/\n/gm,tn="\u0275",ki="__source";let qt;function pr(r){const s=qt;return qt=r,s}function Ii(r,s=ft.Default){if(void 0===qt)throw new oe(-203,!1);return null===qt?Tr(r,void 0,s):qt.get(r,s&ft.Optional?null:void 0,s)}function Be(r,s=ft.Default){return(function si(){return Ni}()||Ii)(K(r),s)}function Et(r){return typeof r>"u"||"number"==typeof r?r:0|(r.optional&&8)|(r.host&&1)|(r.self&&2)|(r.skipSelf&&4)}function Tt(r){const s=[];for(let o=0;o<r.length;o++){const u=K(r[o]);if(Array.isArray(u)){if(0===u.length)throw new oe(900,!1);let l,h=ft.Default;for(let m=0;m<u.length;m++){const v=u[m],E=B(v);"number"==typeof E?-1===E?l=v.token:h|=E:l=v}s.push(Be(l,h))}else s.push(Be(u))}return s}function kt(r,s){return r[vn]=s,r.prototype[vn]=s,r}function B(r){return r[vn]}function he(r){return{toString:r}.toString()}var Q=(()=>((Q=Q||{})[Q.OnPush=0]="OnPush",Q[Q.Default=1]="Default",Q))(),$t=(()=>{return(r=$t||($t={}))[r.Emulated=0]="Emulated",r[r.None=2]="None",r[r.ShadowDom=3]="ShadowDom",$t;var r})();const In={},yt=[],Yn=se({\u0275cmp:se}),Vt=se({\u0275dir:se}),Hn=se({\u0275pipe:se}),Ys=se({\u0275mod:se}),gr=se({\u0275fac:se}),Bo=se({__NG_ELEMENT_ID__:se});let vh=0;function Uo(r){return he(()=>{const o=!0===r.standalone,u={},l={type:r.type,providersResolver:null,decls:r.decls,vars:r.vars,factory:null,template:r.template||null,consts:r.consts||null,ngContentSelectors:r.ngContentSelectors,hostBindings:r.hostBindings||null,hostVars:r.hostVars||0,hostAttrs:r.hostAttrs||null,contentQueries:r.contentQueries||null,declaredInputs:u,inputs:null,outputs:null,exportAs:r.exportAs||null,onPush:r.changeDetection===Q.OnPush,directiveDefs:null,pipeDefs:null,standalone:o,dependencies:o&&r.dependencies||null,getStandaloneInjector:null,selectors:r.selectors||yt,viewQuery:r.viewQuery||null,features:r.features||null,data:r.data||{},encapsulation:r.encapsulation||$t.Emulated,id:"c"+vh++,styles:r.styles||yt,_:null,setInput:null,schemas:r.schemas||null,tView:null,findHostDirectiveDefs:null,hostDirectives:null},h=r.dependencies,m=r.features;return l.inputs=nc(r.inputs,u),l.outputs=nc(r.outputs),m&&m.forEach(v=>v(l)),l.directiveDefs=h?()=>("function"==typeof h?h():h).map(tc).filter(kl):null,l.pipeDefs=h?()=>("function"==typeof h?h():h).map(Rn).filter(kl):null,l})}function tc(r){return Kt(r)||Gn(r)}function kl(r){return null!==r}function En(r){return he(()=>({type:r.type,bootstrap:r.bootstrap||yt,declarations:r.declarations||yt,imports:r.imports||yt,exports:r.exports||yt,transitiveCompileScopes:null,schemas:r.schemas||null,id:r.id||null}))}function nc(r,s){if(null==r)return In;const o={};for(const u in r)if(r.hasOwnProperty(u)){let l=r[u],h=l;Array.isArray(l)&&(h=l[1],l=l[0]),o[l]=u,s&&(s[l]=h)}return o}const jo=Uo;function $o(r){return{type:r.type,name:r.name,factory:null,pure:!1!==r.pure,standalone:!0===r.standalone,onDestroy:r.type.prototype.ngOnDestroy||null}}function Kt(r){return r[Yn]||null}function Gn(r){return r[Vt]||null}function Rn(r){return r[Hn]||null}const Zr=0,Ke=1,Nt=2,cn=3,Cr=4,Pi=5,Bn=6,ai=7,wn=8,Qs=9,Xs=10,Ot=11,rc=12,rs=13,ic=14,ui=15,yr=16,Js=17,ws=18,ci=19,is=20,Oi=21,rn=22,Yr=1,Ol=2,eo=7,Ds=8,Sr=9,_r=10;function Vr(r){return Array.isArray(r)&&"object"==typeof r[Yr]}function li(r){return Array.isArray(r)&&!0===r[Yr]}function Ho(r){return 0!=(4&r.flags)}function di(r){return r.componentOffset>-1}function sc(r){return 1==(1&r.flags)}function Br(r){return null!==r.template}function Go(r){return 0!=(256&r[Nt])}function Ts(r,s){return r.hasOwnProperty(gr)?r[gr]:null}class Cs{constructor(s,o,u){this.previousValue=s,this.currentValue=o,this.firstChange=u}isFirstChange(){return this.firstChange}}function Ha(){return Wo}function Wo(r){return r.type.prototype.ngOnChanges&&(r.setInput=ro),dc}function dc(){const r=qo(this),s=r?.current;if(s){const o=r.previous;if(o===In)r.previous=s;else for(let u in s)o[u]=s[u];r.current=null,this.ngOnChanges(s)}}function ro(r,s,o,u){const l=this.declaredInputs[o],h=qo(r)||function Vl(r,s){return r[Ss]=s}(r,{previous:In,current:null}),m=h.current||(h.current={}),v=h.previous,E=v[l];m[l]=new Cs(E&&E.currentValue,s,v===In),r[u]=s}Ha.ngInherit=!0;const Ss="__ngSimpleChanges__";function qo(r){return r[Ss]||null}const Ur=function(r,s,o){};function kn(r){for(;Array.isArray(r);)r=r[Zr];return r}function Un(r,s){return kn(s[r.index])}function ao(r,s){return r.data[s]}function Qn(r,s){const o=s[r];return Vr(o)?o:o[Zr]}function uo(r){return 64==(64&r[Nt])}function Fi(r,s){return null==s?null:r[s]}function Zo(r){r[ws]=0}function Yo(r,s){r[Pi]+=s;let o=r,u=r[cn];for(;null!==u&&(1===s&&1===o[Pi]||-1===s&&0===o[Pi]);)u[Pi]+=s,o=u,u=u[cn]}const Ct={lFrame:pm(null),bindingsEnabled:!0};function Ka(){return Ct.bindingsEnabled}function le(){return Ct.lFrame.lView}function Zt(){return Ct.lFrame.tView}function mc(r){return Ct.lFrame.contextLView=r,r[wn]}function Ul(r){return Ct.lFrame.contextLView=null,r}function er(){let r=Qo();for(;null!==r&&64===r.type;)r=r.parent;return r}function Qo(){return Ct.lFrame.currentTNode}function jr(r,s){const o=Ct.lFrame;o.currentTNode=r,o.isParent=s}function Ya(){return Ct.lFrame.isParent}function Ms(){return Ct.lFrame.bindingIndex++}function Hl(r,s){const o=Ct.lFrame;o.bindingIndex=o.bindingRootIndex=r,vc(s)}function vc(r){Ct.lFrame.currentDirectiveIndex=r}function Ic(r){Ct.lFrame.currentQueryIndex=r}function zl(r){const s=r[Ke];return 2===s.type?s.declTNode:1===s.type?r[Bn]:null}function Th(r,s,o){if(o&ft.SkipSelf){let l=s,h=r;for(;!(l=l.parent,null!==l||o&ft.Host||(l=zl(h),null===l||(h=h[ui],10&l.type))););if(null===l)return!1;s=l,r=h}const u=Ct.lFrame=Ch();return u.currentTNode=s,u.lView=r,!0}function Ja(r){const s=Ch(),o=r[Ke];Ct.lFrame=s,s.currentTNode=o.firstChild,s.lView=r,s.tView=o,s.contextLView=r,s.bindingIndex=o.bindingStartIndex,s.inI18n=!1}function Ch(){const r=Ct.lFrame,s=null===r?null:r.child;return null===s?pm(r):s}function pm(r){const s={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:r,child:null,inI18n:!1};return null!==r&&(r.child=s),s}function up(){const r=Ct.lFrame;return Ct.lFrame=r.parent,r.currentTNode=null,r.lView=null,r}const Ec=up;function cp(){const r=up();r.isParent=!0,r.tView=null,r.selectedIndex=-1,r.contextLView=null,r.elementDepthCount=0,r.currentDirectiveIndex=-1,r.currentNamespace=null,r.bindingRootIndex=-1,r.bindingIndex=-1,r.currentQueryIndex=0}function xr(){return Ct.lFrame.selectedIndex}function co(r){Ct.lFrame.selectedIndex=r}function Jo(r,s){for(let o=s.directiveStart,u=s.directiveEnd;o<u;o++){const h=r.data[o].type.prototype,{ngAfterContentInit:m,ngAfterContentChecked:v,ngAfterViewInit:E,ngAfterViewChecked:C,ngOnDestroy:M}=h;m&&(r.contentHooks||(r.contentHooks=[])).push(-o,m),v&&((r.contentHooks||(r.contentHooks=[])).push(o,v),(r.contentCheckHooks||(r.contentCheckHooks=[])).push(o,v)),E&&(r.viewHooks||(r.viewHooks=[])).push(-o,E),C&&((r.viewHooks||(r.viewHooks=[])).push(o,C),(r.viewCheckHooks||(r.viewCheckHooks=[])).push(o,C)),null!=M&&(r.destroyHooks||(r.destroyHooks=[])).push(o,M)}}function Ns(r,s,o){ea(r,s,3,o)}function Dc(r,s,o,u){(3&r[Nt])===o&&ea(r,s,o,u)}function os(r,s){let o=r[Nt];(3&o)===s&&(o&=2047,o+=1,r[Nt]=o)}function ea(r,s,o,u){const h=u??-1,m=s.length-1;let v=0;for(let E=void 0!==u?65535&r[ws]:0;E<m;E++)if("number"==typeof s[E+1]){if(v=s[E],null!=u&&v>=u)break}else s[E]<0&&(r[ws]+=65536),(v<h||-1==h)&&(ta(r,o,s,E),r[ws]=(4294901760&r[ws])+E+2),E++}function ta(r,s,o,u){const l=o[u]<0,h=o[u+1],v=r[l?-o[u]:o[u]];if(l){if(r[Nt]>>11<r[ws]>>16&&(3&r[Nt])===s){r[Nt]+=2048,Ur(4,v,h);try{h.call(v)}finally{Ur(5,v,h)}}}else{Ur(4,v,h);try{h.call(v)}finally{Ur(5,v,h)}}}const ho=-1;class as{constructor(s,o,u){this.factory=s,this.resolving=!1,this.canSeeViewProviders=o,this.injectImpl=u}}function Dn(r,s,o){let u=0;for(;u<o.length;){const l=o[u];if("number"==typeof l){if(0!==l)break;u++;const h=o[u++],m=o[u++],v=o[u++];r.setAttribute(s,m,v,h)}else{const h=l,m=o[++u];Bi(h)?r.setProperty(s,h,m):r.setAttribute(s,h,m),u++}}return u}function ra(r){return 3===r||4===r||6===r}function Bi(r){return 64===r.charCodeAt(0)}function Ui(r,s){if(null!==s&&0!==s.length)if(null===r||0===r.length)r=s.slice();else{let o=-1;for(let u=0;u<s.length;u++){const l=s[u];"number"==typeof l?o=l:0===o||fo(r,o,l,null,-1===o||2===o?s[++u]:null)}}return r}function fo(r,s,o,u,l){let h=0,m=r.length;if(-1===s)m=-1;else for(;h<r.length;){const v=r[h++];if("number"==typeof v){if(v===s){m=-1;break}if(v>s){m=h-1;break}}}for(;h<r.length;){const v=r[h];if("number"==typeof v)break;if(v===o){if(null===u)return void(null!==l&&(r[h+1]=l));if(u===r[h+1])return void(r[h+2]=l)}h++,null!==u&&h++,null!==l&&h++}-1!==m&&(r.splice(m,0,s),h=m+1),r.splice(h++,0,o),null!==u&&r.splice(h++,0,u),null!==l&&r.splice(h++,0,l)}function bc(r){return r!==ho}function ia(r){return 32767&r}function nu(r,s){let o=function tu(r){return r>>16}(r),u=s;for(;o>0;)u=u[ui],o--;return u}let us=!0;function po(r){const s=us;return us=r,s}const sa=255,oa=5;let ru=0;const vr={};function mo(r,s){const o=ua(r,s);if(-1!==o)return o;const u=s[Ke];u.firstCreatePass&&(r.injectorIndex=s.length,cs(u.data,r),cs(s,null),cs(u.blueprint,null));const l=iu(r,s),h=r.injectorIndex;if(bc(l)){const m=ia(l),v=nu(l,s),E=v[Ke].data;for(let C=0;C<8;C++)s[h+C]=v[m+C]|E[m+C]}return s[h+8]=l,h}function cs(r,s){r.push(0,0,0,0,0,0,0,0,s)}function ua(r,s){return-1===r.injectorIndex||r.parent&&r.parent.injectorIndex===r.injectorIndex||null===s[r.injectorIndex+8]?-1:r.injectorIndex}function iu(r,s){if(r.parent&&-1!==r.parent.injectorIndex)return r.parent.injectorIndex;let o=0,u=null,l=s;for(;null!==l;){if(u=Cc(l),null===u)return ho;if(o++,l=l[ui],-1!==u.injectorIndex)return u.injectorIndex|o<<16}return ho}function ca(r,s,o){!function aa(r,s,o){let u;"string"==typeof o?u=o.charCodeAt(0)||0:o.hasOwnProperty(Bo)&&(u=o[Bo]),null==u&&(u=o[Bo]=ru++);const l=u&sa;s.data[r+(l>>oa)]|=1<<l}(r,s,o)}function Ps(r,s,o){if(o&ft.Optional||void 0!==r)return r;Le()}function la(r,s,o,u){if(o&ft.Optional&&void 0===u&&(u=null),!(o&(ft.Self|ft.Host))){const l=r[Qs],h=_n(void 0);try{return l?l.get(s,u,o&ft.Optional):Tr(s,u,o&ft.Optional)}finally{_n(h)}}return Ps(u,0,o)}function Zl(r,s,o,u=ft.Default,l){if(null!==r){if(1024&s[Nt]){const m=function Ql(r,s,o,u,l){let h=r,m=s;for(;null!==h&&null!==m&&1024&m[Nt]&&!(256&m[Nt]);){const v=bi(h,m,o,u|ft.Self,vr);if(v!==vr)return v;let E=h.parent;if(!E){const C=m[Oi];if(C){const M=C.get(o,vr,u);if(M!==vr)return M}E=Cc(m),m=m[ui]}h=E}return l}(r,s,o,u,vr);if(m!==vr)return m}const h=bi(r,s,o,u,vr);if(h!==vr)return h}return la(s,o,u,l)}function bi(r,s,o,u,l){const h=function Yl(r){if("string"==typeof r)return r.charCodeAt(0)||0;const s=r.hasOwnProperty(Bo)?r[Bo]:void 0;return"number"==typeof s?s>=0?s&sa:hp:s}(o);if("function"==typeof h){if(!Th(s,r,u))return u&ft.Host?Ps(l,0,u):la(s,o,u,l);try{const m=h(u);if(null!=m||u&ft.Optional)return m;Le()}finally{Ec()}}else if("number"==typeof h){let m=null,v=ua(r,s),E=ho,C=u&ft.Host?s[yr][Bn]:null;for((-1===v||u&ft.SkipSelf)&&(E=-1===v?iu(r,s):s[v+8],E!==ho&&ji(u,!1)?(m=s[Ke],v=ia(E),s=nu(E,s)):v=-1);-1!==v;){const M=s[Ke];if(ou(h,v,M.data)){const P=su(v,s,o,m,u,C);if(P!==vr)return P}E=s[v+8],E!==ho&&ji(u,s[Ke].data[v+8]===C)&&ou(h,v,s)?(m=M,v=ia(E),s=nu(E,s)):v=-1}}return l}function su(r,s,o,u,l,h){const m=s[Ke],v=m.data[r+8],M=function Os(r,s,o,u,l){const h=r.providerIndexes,m=s.data,v=1048575&h,E=r.directiveStart,M=h>>20,$=l?v+M:r.directiveEnd;for(let Y=u?v:v+M;Y<$;Y++){const de=m[Y];if(Y<E&&o===de||Y>=E&&de.type===o)return Y}if(l){const Y=m[E];if(Y&&Br(Y)&&Y.type===o)return E}return null}(v,m,o,null==u?di(v)&&us:u!=m&&0!=(3&v.type),l&ft.Host&&h===v);return null!==M?Ti(s,m,M,v):vr}function Ti(r,s,o,u){let l=r[o];const h=s.data;if(function Qr(r){return r instanceof as}(l)){const m=l;m.resolving&&function Ee(r,s){const o=s?`. Dependency path: ${s.join(" > ")} > ${r}`:"";throw new oe(-200,`Circular dependency in DI detected for ${r}${o}`)}(function Me(r){return"function"==typeof r?r.name||r.toString():"object"==typeof r&&null!=r&&"function"==typeof r.type?r.type.name||r.type.toString():_e(r)}(h[o]));const v=po(m.canSeeViewProviders);m.resolving=!0;const E=m.injectImpl?_n(m.injectImpl):null;Th(r,u,ft.Default);try{l=r[o]=m.factory(void 0,h,r,u),s.firstCreatePass&&o>=u.directiveStart&&function dp(r,s,o){const{ngOnChanges:u,ngOnInit:l,ngDoCheck:h}=s.type.prototype;if(u){const m=Wo(s);(o.preOrderHooks||(o.preOrderHooks=[])).push(r,m),(o.preOrderCheckHooks||(o.preOrderCheckHooks=[])).push(r,m)}l&&(o.preOrderHooks||(o.preOrderHooks=[])).push(0-r,l),h&&((o.preOrderHooks||(o.preOrderHooks=[])).push(r,h),(o.preOrderCheckHooks||(o.preOrderCheckHooks=[])).push(r,h))}(o,h[o],s)}finally{null!==E&&_n(E),po(v),m.resolving=!1,Ec()}}return l}function ou(r,s,o){return!!(o[s+(r>>oa)]&1<<r)}function ji(r,s){return!(r&ft.Self||r&ft.Host&&s)}class hi{constructor(s,o){this._tNode=s,this._lView=o}get(s,o,u){return Zl(this._tNode,this._lView,s,Et(u),o)}}function hp(){return new hi(er(),le())}function Cc(r){const s=r[Ke],o=s.type;return 2===o?s.declTNode:1===o?r[Bn]:null}function uu(r){return function Tc(r,s){if("class"===s)return r.classes;if("style"===s)return r.styles;const o=r.attrs;if(o){const u=o.length;let l=0;for(;l<u;){const h=o[l];if(ra(h))break;if(0===h)l+=2;else if("number"==typeof h)for(l++;l<u&&"string"==typeof o[l];)l++;else{if(h===s)return o[l+1];l+=2}}}return null}(er(),r)}const da="__parameters__";function lu(r,s,o){return he(()=>{const u=function Mh(r){return function(...o){if(r){const u=r(...o);for(const l in u)this[l]=u[l]}}}(s);function l(...h){if(this instanceof l)return u.apply(this,h),this;const m=new l(...h);return v.annotation=m,v;function v(E,C,M){const P=E.hasOwnProperty(da)?E[da]:Object.defineProperty(E,da,{value:[]})[da];for(;P.length<=M;)P.push(null);return(P[M]=P[M]||[]).push(m),E}}return o&&(l.prototype=Object.create(o.prototype)),l.prototype.ngMetadataName=r,l.annotationCls=l,l})}class nn{constructor(s,o){this._desc=s,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof o?this.__NG_ELEMENT_ID__=o:void 0!==o&&(this.\u0275prov=et({token:this,providedIn:o.providedIn||"root",factory:o.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function ls(r,s){r.forEach(o=>Array.isArray(o)?ls(o,s):s(o))}function nd(r,s,o){s>=r.length?r.push(o):r.splice(s,0,o)}function yo(r,s){return s>=r.length-1?r.pop():r.splice(s,1)[0]}const pa=kt(lu("Optional"),8),Io=kt(lu("SkipSelf"),4);var mi=(()=>((mi=mi||{})[mi.Important=1]="Important",mi[mi.DashCase=2]="DashCase",mi))();const Lc=new Map;let yu=0;const Vc="__ngContext__";function Rr(r,s){Vr(s)?(r[Vc]=s[is],function Uh(r){Lc.set(r[is],r)}(s)):r[Vc]=s}let Eu;function ld(r,s){return Eu(r,s)}function fs(r){const s=r[cn];return li(s)?s[cn]:s}function _a(r){return zh(r[rs])}function Uc(r){return zh(r[Cr])}function zh(r){for(;null!==r&&!li(r);)r=r[Cr];return r}function va(r,s,o,u,l){if(null!=u){let h,m=!1;li(u)?h=u:Vr(u)&&(m=!0,u=u[Zr]);const v=kn(u);0===r&&null!==o?null==l?Do(s,o,v):wo(s,o,v,l||null,!0):1===r&&null!==o?wo(s,o,v,l||null,!0):2===r?function Da(r,s,o){const u=fd(r,s);u&&function hd(r,s,o,u){r.removeChild(s,o,u)}(r,u,s,o)}(s,v,m):3===r&&s.destroyNode(v),null!=h&&function ba(r,s,o,u,l){const h=o[eo];h!==kn(o)&&va(s,r,u,h,l);for(let v=_r;v<o.length;v++){const E=o[v];ps(E[Ke],E,r,s,u,h)}}(s,r,h,o,l)}}function Ia(r,s,o){return r.createElement(s,o)}function jn(r,s){const o=r[Sr],u=o.indexOf(s),l=s[cn];512&s[Nt]&&(s[Nt]&=-513,Yo(l,-1)),o.splice(u,1)}function wu(r,s){if(r.length<=_r)return;const o=_r+s,u=r[o];if(u){const l=u[Js];null!==l&&l!==r&&jn(l,u),s>0&&(r[o-1][Cr]=u[Cr]);const h=yo(r,_r+s);!function Ep(r,s){ps(r,s,s[Ot],2,null,null),s[Zr]=null,s[Bn]=null}(u[Ke],u);const m=h[ci];null!==m&&m.detachView(h[Ke]),u[cn]=null,u[Cr]=null,u[Nt]&=-65}return u}function dd(r,s){if(!(128&s[Nt])){const o=s[Ot];o.destroyNode&&ps(r,s,o,3,null,null),function $c(r){let s=r[rs];if(!s)return Yh(r[Ke],r);for(;s;){let o=null;if(Vr(s))o=s[rs];else{const u=s[_r];u&&(o=u)}if(!o){for(;s&&!s[Cr]&&s!==r;)Vr(s)&&Yh(s[Ke],s),s=s[cn];null===s&&(s=r),Vr(s)&&Yh(s[Ke],s),o=s&&s[Cr]}s=o}}(s)}}function Yh(r,s){if(!(128&s[Nt])){s[Nt]&=-65,s[Nt]|=128,function Dp(r,s){let o;if(null!=r&&null!=(o=r.destroyHooks))for(let u=0;u<o.length;u+=2){const l=s[o[u]];if(!(l instanceof as)){const h=o[u+1];if(Array.isArray(h))for(let m=0;m<h.length;m+=2){const v=l[h[m]],E=h[m+1];Ur(4,v,E);try{E.call(v)}finally{Ur(5,v,E)}}else{Ur(4,l,h);try{h.call(l)}finally{Ur(5,l,h)}}}}}(r,s),function wp(r,s){const o=r.cleanup,u=s[ai];let l=-1;if(null!==o)for(let h=0;h<o.length-1;h+=2)if("string"==typeof o[h]){const m=o[h+3];m>=0?u[l=m]():u[l=-m].unsubscribe(),h+=2}else{const m=u[l=o[h+1]];o[h].call(m)}if(null!==u){for(let h=l+1;h<u.length;h++)(0,u[h])();s[ai]=null}}(r,s),1===s[Ke].type&&s[Ot].destroy();const o=s[Js];if(null!==o&&li(s[cn])){o!==s[cn]&&jn(o,s);const u=s[ci];null!==u&&u.detachView(r)}!function _m(r){Lc.delete(r[is])}(s)}}function bp(r,s,o){return function Tp(r,s,o){let u=s;for(;null!==u&&40&u.type;)u=(s=u).parent;if(null===u)return o[Zr];{const{componentOffset:l}=u;if(l>-1){const{encapsulation:h}=r.data[u.directiveStart+l];if(h===$t.None||h===$t.Emulated)return null}return Un(u,o)}}(r,s.parent,o)}function wo(r,s,o,u,l){r.insertBefore(s,o,u,l)}function Do(r,s,o){r.appendChild(s,o)}function Cp(r,s,o,u,l){null!==u?wo(r,s,o,u,l):Do(r,s,o)}function fd(r,s){return r.parentNode(s)}let zc,vd,Gc=function Hc(r,s,o){return 40&r.type?Un(r,o):null};function Wc(r,s,o,u){const l=bp(r,u,s),h=s[Ot],v=function gd(r,s,o){return Gc(r,s,o)}(u.parent||s[Bn],u,s);if(null!=l)if(Array.isArray(o))for(let E=0;E<o.length;E++)Cp(h,l,o[E],v,!1);else Cp(h,l,o,v,!1);void 0!==zc&&zc(h,u,s,o,l)}function wa(r,s){if(null!==s){const o=s.type;if(3&o)return Un(s,r);if(4&o)return ar(-1,r[s.index]);if(8&o){const u=s.child;if(null!==u)return wa(r,u);{const l=r[s.index];return li(l)?ar(-1,l):kn(l)}}if(32&o)return ld(s,r)()||kn(r[s.index]);{const u=Qh(r,s);return null!==u?Array.isArray(u)?u[0]:wa(fs(r[yr]),u):wa(r,s.next)}}return null}function Qh(r,s){return null!==s?r[yr][Bn].projection[s.projection]:null}function ar(r,s){const o=_r+r+1;if(o<s.length){const u=s[o],l=u[Ke].firstChild;if(null!==l)return wa(u,l)}return s[eo]}function md(r,s,o,u,l,h,m){for(;null!=o;){const v=u[o.index],E=o.type;if(m&&0===s&&(v&&Rr(kn(v),u),o.flags|=2),32!=(32&o.flags))if(8&E)md(r,s,o.child,u,l,h,!1),va(s,r,l,v,h);else if(32&E){const C=ld(o,u);let M;for(;M=C();)va(s,r,l,M,h);va(s,r,l,v,h)}else 16&E?yd(r,s,u,o,l,h):va(s,r,l,v,h);o=m?o.projectionNext:o.next}}function ps(r,s,o,u,l,h){md(o,u,r.firstChild,s,l,h,!1)}function yd(r,s,o,u,l,h){const m=o[yr],E=m[Bn].projection[u.projection];if(Array.isArray(E))for(let C=0;C<E.length;C++)va(s,r,l,E[C],h);else md(r,s,E,m[cn],l,h,!0)}function gs(r,s,o){""===o?r.removeAttribute(s,"class"):r.setAttribute(s,"class",o)}function Ta(r,s,o){const{mergedAttrs:u,classes:l,styles:h}=o;null!==u&&Dn(r,s,u),null!==l&&gs(r,s,l),null!==h&&function _d(r,s,o){r.setAttribute(s,"style",o)}(r,s,h)}function ms(r){vd=r}const cf=new nn("ENVIRONMENT_INITIALIZER"),bd=new nn("INJECTOR",-1),lf=new nn("INJECTOR_DEF_TYPES");class Sp{get(s,o=Cn){if(o===Cn){const u=new Error(`NullInjectorError: No provider for ${ce(s)}!`);throw u.name="NullInjectorError",u}return o}}function df(...r){return{\u0275providers:Td(0,r),\u0275fromNgModule:!0}}function Td(r,...s){const o=[],u=new Set;let l;return ls(s,h=>{const m=h;Ln(m,o,[],u)&&(l||(l=[]),l.push(m))}),void 0!==l&&gv(l,o),o}function gv(r,s){for(let o=0;o<r.length;o++){const{providers:l}=r[o];xm(l,h=>{s.push(h)})}}function Ln(r,s,o,u){if(!(r=K(r)))return!1;let l=null,h=ii(r);const m=!h&&Kt(r);if(h||m){if(m&&!m.standalone)return!1;l=r}else{const E=r.ngModule;if(h=ii(E),!h)return!1;l=E}const v=u.has(l);if(m){if(v)return!1;if(u.add(l),m.dependencies){const E="function"==typeof m.dependencies?m.dependencies():m.dependencies;for(const C of E)Ln(C,s,o,u)}}else{if(!h)return!1;{if(null!=h.imports&&!v){let C;u.add(l);try{ls(h.imports,M=>{Ln(M,s,o,u)&&(C||(C=[]),C.push(M))})}finally{}void 0!==C&&gv(C,s)}if(!v){const C=Ts(l)||(()=>new l);s.push({provide:l,useFactory:C,deps:yt},{provide:lf,useValue:l,multi:!0},{provide:cf,useValue:()=>Be(l),multi:!0})}const E=h.providers;null==E||v||xm(E,M=>{s.push(M)})}}return l!==r&&void 0!==r.providers}function xm(r,s){for(let o of r)Se(o)&&(o=o.\u0275providers),Array.isArray(o)?xm(o,s):s(o)}const yE=se({provide:String,useValue:se});function Mm(r){return null!==r&&"object"==typeof r&&yE in r}function xu(r){return"function"==typeof r}const xp=new nn("Set Injector scope."),_s={},mv={};let Mp;function Cd(){return void 0===Mp&&(Mp=new Sp),Mp}class bo{}class km extends bo{get destroyed(){return this._destroyed}constructor(s,o,u,l){super(),this.parent=o,this.source=u,this.scopes=l,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Rp(s,m=>this.processProvider(m)),this.records.set(bd,Sd(void 0,this)),l.has("environment")&&this.records.set(bo,Sd(void 0,this));const h=this.records.get(xp);null!=h&&"string"==typeof h.value&&this.scopes.add(h.value),this.injectorDefTypes=new Set(this.get(lf.multi,yt,ft.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const s of this._ngOnDestroyHooks)s.ngOnDestroy();for(const s of this._onDestroyHooks)s()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(s){this._onDestroyHooks.push(s)}runInContext(s){this.assertNotDestroyed();const o=pr(this),u=_n(void 0);try{return s()}finally{pr(o),_n(u)}}get(s,o=Cn,u=ft.Default){this.assertNotDestroyed(),u=Et(u);const l=pr(this),h=_n(void 0);try{if(!(u&ft.SkipSelf)){let v=this.records.get(s);if(void 0===v){const E=function vv(r){return"function"==typeof r||"object"==typeof r&&r instanceof nn}(s)&&gn(s);v=E&&this.injectableDefInScope(E)?Sd(hf(s),_s):null,this.records.set(s,v)}if(null!=v)return this.hydrate(s,v)}return(u&ft.Self?Cd():this.parent).get(s,o=u&ft.Optional&&o===Cn?null:o)}catch(m){if("NullInjectorError"===m.name){if((m[oi]=m[oi]||[]).unshift(ce(s)),l)throw m;return function F(r,s,o,u){const l=r[oi];throw s[ki]&&l.unshift(s[ki]),r.message=function G(r,s,o,u=null){r=r&&"\n"===r.charAt(0)&&r.charAt(1)==tn?r.slice(2):r;let l=ce(s);if(Array.isArray(s))l=s.map(ce).join(" -> ");else if("object"==typeof s){let h=[];for(let m in s)if(s.hasOwnProperty(m)){let v=s[m];h.push(m+":"+("string"==typeof v?JSON.stringify(v):ce(v)))}l=`{${h.join(", ")}}`}return`${o}${u?"("+u+")":""}[${l}]: ${r.replace(Vo,"\n  ")}`}("\n"+r.message,l,o,u),r[fr]=l,r[oi]=null,r}(m,s,"R3InjectorError",this.source)}throw m}finally{_n(h),pr(l)}}resolveInjectorInitializers(){const s=pr(this),o=_n(void 0);try{const u=this.get(cf.multi,yt,ft.Self);for(const l of u)l()}finally{pr(s),_n(o)}}toString(){const s=[],o=this.records;for(const u of o.keys())s.push(ce(u));return`R3Injector[${s.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new oe(205,!1)}processProvider(s){let o=xu(s=K(s))?s:K(s&&s.provide);const u=function yv(r){return Mm(r)?Sd(void 0,r.useValue):Sd(function ff(r,s,o){let u;if(xu(r)){const l=K(r);return Ts(l)||hf(l)}if(Mm(r))u=()=>K(r.useValue);else if(function Rm(r){return!(!r||!r.useFactory)}(r))u=()=>r.useFactory(...Tt(r.deps||[]));else if(function Nm(r){return!(!r||!r.useExisting)}(r))u=()=>Be(K(r.useExisting));else{const l=K(r&&(r.useClass||r.provide));if(!function _v(r){return!!r.deps}(r))return Ts(l)||hf(l);u=()=>new l(...Tt(r.deps))}return u}(r),_s)}(s);if(xu(s)||!0!==s.multi)this.records.get(o);else{let l=this.records.get(o);l||(l=Sd(void 0,_s,!0),l.factory=()=>Tt(l.multi),this.records.set(o,l)),o=s,l.multi.push(s)}this.records.set(o,u)}hydrate(s,o){return o.value===_s&&(o.value=mv,o.value=o.factory()),"object"==typeof o.value&&o.value&&function pf(r){return null!==r&&"object"==typeof r&&"function"==typeof r.ngOnDestroy}(o.value)&&this._ngOnDestroyHooks.add(o.value),o.value}injectableDefInScope(s){if(!s.providedIn)return!1;const o=K(s.providedIn);return"string"==typeof o?"any"===o||this.scopes.has(o):this.injectorDefTypes.has(o)}}function hf(r){const s=gn(r),o=null!==s?s.factory:Ts(r);if(null!==o)return o;if(r instanceof nn)throw new oe(204,!1);if(r instanceof Function)return function Np(r){const s=r.length;if(s>0)throw function _o(r,s){const o=[];for(let u=0;u<r;u++)o.push(s);return o}(s,"?"),new oe(204,!1);const o=function Kr(r){const s=r&&(r[br]||r[an]);return s?(function ts(r){if(r.hasOwnProperty("name"))return r.name;(""+r).match(/^function\s*([^\s(]+)/)}(r),s):null}(r);return null!==o?()=>o.factory(r):()=>new r}(r);throw new oe(204,!1)}function Sd(r,s,o=!1){return{factory:r,value:s,multi:o?[]:void 0}}function Rp(r,s){for(const o of r)Array.isArray(o)?Rp(o,s):o&&Se(o)?Rp(o.\u0275providers,s):s(o)}class Pm{}class kp{}class Ev{resolveComponentFactory(s){throw function Iv(r){const s=Error(`No component factory found for ${ce(r)}. Did you add it to @NgModule.entryComponents?`);return s.ngComponent=r,s}(s)}}let To=(()=>{class r{}return r.NULL=new Ev,r})();function wv(){return Qc(er(),le())}function Qc(r,s){return new Ad(Un(r,s))}let Ad=(()=>{class r{constructor(o){this.nativeElement=o}}return r.__NG_ELEMENT_ID__=wv,r})();class mf{}let zi=(()=>{class r{}return r.__NG_ELEMENT_ID__=()=>function bv(){const r=le(),o=Qn(er().index,r);return(Vr(o)?o:r)[Ot]}(),r})(),Tv=(()=>{class r{}return r.\u0275prov=et({token:r,providedIn:"root",factory:()=>null}),r})();class Xc{constructor(s){this.full=s,this.major=s.split(".")[0],this.minor=s.split(".")[1],this.patch=s.split(".").slice(2).join(".")}}const Cv=new Xc("15.2.0"),Om={},yf="ngOriginalError";function Lm(r){return r[yf]}class xd{constructor(){this._console=console}handleError(s){const o=this._findOriginalError(s);this._console.error("ERROR",s),o&&this._console.error("ORIGINAL ERROR",o)}_findOriginalError(s){let o=s&&Lm(s);for(;o&&Lm(o);)o=Lm(o);return o||null}}function xv(r,s,o){let u=r.length;for(;;){const l=r.indexOf(s,o);if(-1===l)return l;if(0===l||r.charCodeAt(l-1)<=32){const h=s.length;if(l+h===u||r.charCodeAt(l+h)<=32)return l}o=l+1}}const ze="ng-template";function re(r,s,o){let u=0;for(;u<r.length;){let l=r[u++];if(o&&"class"===l){if(l=r[u],-1!==xv(l.toLowerCase(),s,0))return!0}else if(1===l){for(;u<r.length&&"string"==typeof(l=r[u++]);)if(l.toLowerCase()===s)return!0;return!1}}return!1}function De(r){return 4===r.type&&r.value!==ze}function Dr(r,s,o){return s===(4!==r.type||o?r.value:ze)}function Mv(r,s,o){let u=4;const l=r.attrs||[],h=function bE(r){for(let s=0;s<r.length;s++)if(ra(r[s]))return s;return r.length}(l);let m=!1;for(let v=0;v<s.length;v++){const E=s[v];if("number"!=typeof E){if(!m)if(4&u){if(u=2|1&u,""!==E&&!Dr(r,E,o)||""===E&&1===s.length){if(Vs(u))return!1;m=!0}}else{const C=8&u?E:s[++v];if(8&u&&null!==r.attrs){if(!re(r.attrs,C,o)){if(Vs(u))return!1;m=!0}continue}const P=wE(8&u?"class":E,l,De(r),o);if(-1===P){if(Vs(u))return!1;m=!0;continue}if(""!==C){let $;$=P>h?"":l[P+1].toLowerCase();const Y=8&u?$:null;if(Y&&-1!==xv(Y,C,0)||2&u&&C!==$){if(Vs(u))return!1;m=!0}}}}else{if(!m&&!Vs(u)&&!Vs(E))return!1;if(m&&Vs(E))continue;m=!1,u=E|1&u}}return Vs(u)||m}function Vs(r){return 0==(1&r)}function wE(r,s,o,u){if(null===s)return-1;let l=0;if(u||!o){let h=!1;for(;l<s.length;){const m=s[l];if(m===r)return l;if(3===m||6===m)h=!0;else{if(1===m||2===m){let v=s[++l];for(;"string"==typeof v;)v=s[++l];continue}if(4===m)break;if(0===m){l+=4;continue}}l+=h?1:2}return-1}return function Rv(r,s){let o=r.indexOf(4);if(o>-1)for(o++;o<r.length;){const u=r[o];if("number"==typeof u)return-1;if(u===s)return o;o++}return-1}(s,r)}function Nv(r,s,o=!1){for(let u=0;u<s.length;u++)if(Mv(r,s[u],o))return!0;return!1}function CE(r,s){return r?":not("+s.trim()+")":s}function SE(r){let s=r[0],o=1,u=2,l="",h=!1;for(;o<r.length;){let m=r[o];if("string"==typeof m)if(2&u){const v=r[++o];l+="["+m+(v.length>0?'="'+v+'"':"")+"]"}else 8&u?l+="."+m:4&u&&(l+=" "+m);else""!==l&&!Vs(m)&&(s+=CE(h,l),l=""),u=m,h=h||!Vs(u);o++}return""!==l&&(s+=CE(h,l)),s}const At={};function Fm(r){An(Zt(),le(),xr()+r,!1)}function An(r,s,o,u){if(!u)if(3==(3&s[Nt])){const h=r.preOrderCheckHooks;null!==h&&Ns(s,h,o)}else{const h=r.preOrderHooks;null!==h&&Dc(s,h,0,o)}co(o)}function Ov(r,s=null,o=null,u){const l=vf(r,s,o,u);return l.resolveInjectorInitializers(),l}function vf(r,s=null,o=null,u,l=new Set){const h=[o||yt,df(r)];return u=u||("object"==typeof r?void 0:ce(r)),new km(h,s||Cd(),u||null,l)}let Jc=(()=>{class r{static create(o,u){if(Array.isArray(o))return Ov({name:""},u,o,"");{const l=o.name??"";return Ov({name:l},o.parent,o.providers,l)}}}return r.THROW_IF_NOT_FOUND=Cn,r.NULL=new Sp,r.\u0275prov=et({token:r,providedIn:"any",factory:()=>Be(bd)}),r.__NG_ELEMENT_ID__=-1,r})();function Fn(r,s=ft.Default){const o=le();return null===o?Be(r,s):Zl(er(),o,K(r),s)}function $n(r,s){const o=r.contentQueries;if(null!==o)for(let u=0;u<o.length;u+=2){const h=o[u+1];if(-1!==h){const m=r.data[h];Ic(o[u]),m.contentQueries(2,s[h],h)}}}function Ef(r,s,o,u,l,h,m,v,E,C,M){const P=s.blueprint.slice();return P[Zr]=l,P[Nt]=76|u,(null!==M||r&&1024&r[Nt])&&(P[Nt]|=1024),Zo(P),P[cn]=P[ui]=r,P[wn]=o,P[Xs]=m||r&&r[Xs],P[Ot]=v||r&&r[Ot],P[rc]=E||r&&r[rc]||null,P[Qs]=C||r&&r[Qs]||null,P[Bn]=h,P[is]=function od(){return yu++}(),P[Oi]=M,P[yr]=2==s.type?r[yr]:P,P}function Co(r,s,o,u,l){let h=r.data[s];if(null===h)h=function So(r,s,o,u,l){const h=Qo(),m=Ya(),E=r.data[s]=function Uv(r,s,o,u,l,h){return{type:o,index:u,insertBeforeIndex:null,injectorIndex:s?s.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:0,providerIndexes:0,value:l,attrs:h,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:s,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,m?h:h&&h.parent,o,s,u,l);return null===r.firstChild&&(r.firstChild=E),null!==h&&(m?null==h.child&&null!==E.parent&&(h.child=E):null===h.next&&(h.next=E)),E}(r,s,o,u,l),function $l(){return Ct.lFrame.inI18n}()&&(h.flags|=32);else if(64&h.type){h.type=o,h.value=u,h.attrs=l;const m=function Za(){const r=Ct.lFrame,s=r.currentTNode;return r.isParent?s:s.parent}();h.injectorIndex=null===m?-1:m.injectorIndex}return jr(h,!0),h}function Fu(r,s,o,u){if(0===o)return-1;const l=s.length;for(let h=0;h<o;h++)s.push(u),r.blueprint.push(u),r.data.push(null);return l}function Na(r,s,o){Ja(s);try{const u=r.viewQuery;null!==u&&ei(1,u,o);const l=r.template;null!==l&&Pd(r,s,l,1,o),r.firstCreatePass&&(r.firstCreatePass=!1),r.staticContentQueries&&$n(r,s),r.staticViewQueries&&ei(2,r.viewQuery,o);const h=r.components;null!==h&&function jm(r,s){for(let o=0;o<s.length;o++)Kn(r,s[o])}(s,h)}catch(u){throw r.firstCreatePass&&(r.incompleteFirstPass=!0,r.firstCreatePass=!1),u}finally{s[Nt]&=-5,cp()}}function Ki(r,s,o,u){const l=s[Nt];if(128!=(128&l)){Ja(s);try{Zo(s),function ss(r){return Ct.lFrame.bindingIndex=r}(r.bindingStartIndex),null!==o&&Pd(r,s,o,2,u);const m=3==(3&l);if(m){const C=r.preOrderCheckHooks;null!==C&&Ns(s,C,null)}else{const C=r.preOrderHooks;null!==C&&Dc(s,C,0,null),os(s,0)}if(function BE(r){for(let s=_a(r);null!==s;s=Uc(s)){if(!s[Ol])continue;const o=s[Sr];for(let u=0;u<o.length;u++){const l=o[u];512&l[Nt]||Yo(l[cn],1),l[Nt]|=512}}}(s),function VE(r){for(let s=_a(r);null!==s;s=Uc(s))for(let o=_r;o<s.length;o++){const u=s[o],l=u[Ke];uo(u)&&Ki(l,u,l.template,u[wn])}}(s),null!==r.contentQueries&&$n(r,s),m){const C=r.contentCheckHooks;null!==C&&Ns(s,C)}else{const C=r.contentHooks;null!==C&&Dc(s,C,1),os(s,1)}!function Lu(r,s){const o=r.hostBindingOpCodes;if(null!==o)try{for(let u=0;u<o.length;u++){const l=o[u];if(l<0)co(~l);else{const h=l,m=o[++u],v=o[++u];Hl(m,h),v(2,s[h])}}}finally{co(-1)}}(r,s);const v=r.components;null!==v&&function tl(r,s){for(let o=0;o<s.length;o++)Ld(r,s[o])}(s,v);const E=r.viewQuery;if(null!==E&&ei(2,E,u),m){const C=r.viewCheckHooks;null!==C&&Ns(s,C)}else{const C=r.viewHooks;null!==C&&Dc(s,C,2),os(s,2)}!0===r.firstUpdatePass&&(r.firstUpdatePass=!1),s[Nt]&=-41,512&s[Nt]&&(s[Nt]&=-513,Yo(s[cn],-1))}finally{cp()}}}function Pd(r,s,o,u,l){const h=xr(),m=2&u;try{co(-1),m&&s.length>rn&&An(r,s,rn,!1),Ur(m?2:0,l),o(u,l)}finally{co(h),Ur(m?3:1,l)}}function Ao(r,s,o){if(Ho(s)){const l=s.directiveEnd;for(let h=s.directiveStart;h<l;h++){const m=r.data[h];m.contentQueries&&m.contentQueries(1,o[h],h)}}}function $p(r,s,o){Ka()&&(function un(r,s,o,u){const l=o.directiveStart,h=o.directiveEnd;di(o)&&function LE(r,s,o){const u=Un(s,r),l=Hp(o),h=r[Xs],m=cr(r,Ef(r,l,null,o.onPush?32:16,u,s,h,h.createRenderer(u,o),null,null,null));r[s.index]=m}(s,o,r.data[l+o.componentOffset]),r.firstCreatePass||mo(o,s),Rr(u,s);const m=o.initialInputs;for(let v=l;v<h;v++){const E=r.data[v],C=Ti(s,r,v,o);Rr(C,s),null!==m&&qv(0,v-l,C,E,0,m),Br(E)&&(Qn(o.index,s)[wn]=Ti(s,r,v,o))}}(r,s,o,Un(o,s)),64==(64&o.flags)&&rl(r,s,o))}function Vu(r,s,o=Un){const u=s.localNames;if(null!==u){let l=s.index+1;for(let h=0;h<u.length;h+=2){const m=u[h+1],v=-1===m?o(s,r):r[m];r[l++]=v}}}function Hp(r){const s=r.tView;return null===s||s.incompleteFirstPass?r.tView=Ra(1,null,r.template,r.decls,r.vars,r.directiveDefs,r.pipeDefs,r.viewQuery,r.schemas,r.consts):s}function Ra(r,s,o,u,l,h,m,v,E,C){const M=rn+u,P=M+l,$=function $m(r,s){const o=[];for(let u=0;u<s;u++)o.push(u<r?null:At);return o}(M,P),Y="function"==typeof C?C():C;return $[Ke]={type:r,blueprint:$,template:o,queries:null,viewQuery:v,declTNode:s,data:$.slice().fill(null,M),bindingStartIndex:M,expandoStartIndex:P,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof h?h():h,pipeRegistry:"function"==typeof m?m():m,firstChild:null,schemas:E,consts:Y,incompleteFirstPass:!1}}function Df(r,s,o,u){for(let l in r)if(r.hasOwnProperty(l)){o=null===o?{}:o;const h=r[l];null===u?Od(o,s,l,h):u.hasOwnProperty(l)&&Od(o,s,u[l],h)}return o}function Od(r,s,o,u){r.hasOwnProperty(o)?r[o].push(s,u):r[o]=[s,u]}function Gm(r,s){const o=Qn(s,r);16&o[Nt]||(o[Nt]|=32)}function Gp(r,s,o,u){let l=!1;if(Ka()){const h=null===u?null:{"":-1},m=function qm(r,s){const o=r.directiveRegistry;let u=null,l=null;if(o)for(let h=0;h<o.length;h++){const m=o[h];if(Nv(s,m.selectors,!1))if(u||(u=[]),Br(m))if(null!==m.findHostDirectiveDefs){const v=[];l=l||new Map,m.findHostDirectiveDefs(m,v,l),u.unshift(...v,m),zp(r,s,v.length)}else u.unshift(m),zp(r,s,0);else l=l||new Map,m.findHostDirectiveDefs?.(m,u,l),u.push(m)}return null===u?null:[u,l]}(r,o);let v,E;null===m?v=E=null:[v,E]=m,null!==v&&(l=!0,zm(r,s,o,v,h,E)),h&&function Km(r,s,o){if(s){const u=r.localNames=[];for(let l=0;l<s.length;l+=2){const h=o[s[l+1]];if(null==h)throw new oe(-301,!1);u.push(s[l],h)}}}(o,u,h)}return o.mergedAttrs=Ui(o.mergedAttrs,o.attrs),l}function zm(r,s,o,u,l,h){for(let C=0;C<u.length;C++)ca(mo(o,s),r,u[C].type);!function zv(r,s,o){r.flags|=1,r.directiveStart=s,r.directiveEnd=s+o,r.providerIndexes=s}(o,r.data.length,u.length);for(let C=0;C<u.length;C++){const M=u[C];M.providersResolver&&M.providersResolver(M)}let m=!1,v=!1,E=Fu(r,s,u.length,null);for(let C=0;C<u.length;C++){const M=u[C];o.mergedAttrs=Ui(o.mergedAttrs,M.hostAttrs),Wv(r,o,s,E,M),Gv(E,M,l),null!==M.contentQueries&&(o.flags|=4),(null!==M.hostBindings||null!==M.hostAttrs||0!==M.hostVars)&&(o.flags|=64);const P=M.type.prototype;!m&&(P.ngOnChanges||P.ngOnInit||P.ngDoCheck)&&((r.preOrderHooks||(r.preOrderHooks=[])).push(o.index),m=!0),!v&&(P.ngOnChanges||P.ngDoCheck)&&((r.preOrderCheckHooks||(r.preOrderCheckHooks=[])).push(o.index),v=!0),E++}!function jv(r,s,o){const l=s.directiveEnd,h=r.data,m=s.attrs,v=[];let E=null,C=null;for(let M=s.directiveStart;M<l;M++){const P=h[M],$=o?o.get(P):null,de=$?$.outputs:null;E=Df(P.inputs,M,E,$?$.inputs:null),C=Df(P.outputs,M,C,de);const Oe=null===E||null===m||De(s)?null:FE(E,M,m);v.push(Oe)}null!==E&&(E.hasOwnProperty("class")&&(s.flags|=8),E.hasOwnProperty("style")&&(s.flags|=16)),s.initialInputs=v,s.inputs=E,s.outputs=C}(r,o,h)}function rl(r,s,o){const u=o.directiveStart,l=o.directiveEnd,h=o.index,m=function _c(){return Ct.lFrame.currentDirectiveIndex}();try{co(h);for(let v=u;v<l;v++){const E=r.data[v],C=s[v];vc(v),(null!==E.hostBindings||0!==E.hostVars||null!==E.hostAttrs)&&Wm(E,C)}}finally{co(-1),vc(m)}}function Wm(r,s){null!==r.hostBindings&&r.hostBindings(1,s)}function zp(r,s,o){s.componentOffset=o,(r.components||(r.components=[])).push(s.index)}function Gv(r,s,o){if(o){if(s.exportAs)for(let u=0;u<s.exportAs.length;u++)o[s.exportAs[u]]=r;Br(s)&&(o[""]=r)}}function Wv(r,s,o,u,l){r.data[u]=l;const h=l.factory||(l.factory=Ts(l.type)),m=new as(h,Br(l),Fn);r.blueprint[u]=m,o[u]=m,function Hv(r,s,o,u,l){const h=l.hostBindings;if(h){let m=r.hostBindingOpCodes;null===m&&(m=r.hostBindingOpCodes=[]);const v=~s.index;(function Qt(r){let s=r.length;for(;s>0;){const o=r[--s];if("number"==typeof o&&o<0)return o}return 0})(m)!=v&&m.push(v),m.push(o,u,h)}}(r,s,u,Fu(r,o,l.hostVars,At),l)}function qv(r,s,o,u,l,h){const m=h[s];if(null!==m){const v=u.setInput;for(let E=0;E<m.length;){const C=m[E++],M=m[E++],P=m[E++];null!==v?u.setInput(o,P,C,M):o[M]=P}}}function FE(r,s,o){let u=null,l=0;for(;l<o.length;){const h=o[l];if(0!==h)if(5!==h){if("number"==typeof h)break;if(r.hasOwnProperty(h)){null===u&&(u=[]);const m=r[h];for(let v=0;v<m.length;v+=2)if(m[v]===s){u.push(h,m[v+1],o[l+1]);break}}l+=2}else l+=2;else l+=4}return u}function Ym(r,s,o,u){return[r,!0,!1,s,null,0,u,o,null,null]}function Ld(r,s){const o=Qn(s,r);if(uo(o)){const u=o[Ke];48&o[Nt]?Ki(u,o,u.template,o[wn]):o[Pi]>0&&Qm(o)}}function Qm(r){for(let u=_a(r);null!==u;u=Uc(u))for(let l=_r;l<u.length;l++){const h=u[l];if(uo(h))if(512&h[Nt]){const m=h[Ke];Ki(m,h,m.template,h[wn])}else h[Pi]>0&&Qm(h)}const o=r[Ke].components;if(null!==o)for(let u=0;u<o.length;u++){const l=Qn(o[u],r);uo(l)&&l[Pi]>0&&Qm(l)}}function Kn(r,s){const o=Qn(s,r),u=o[Ke];(function Wp(r,s){for(let o=s.length;o<r.blueprint.length;o++)s.push(r.blueprint[o])})(u,o),Na(u,o,o[wn])}function cr(r,s){return r[rs]?r[ic][Cr]=s:r[rs]=s,r[ic]=s,s}function sn(r){for(;r;){r[Nt]|=32;const s=fs(r);if(Go(r)&&!s)return r;r=s}return null}function bf(r,s,o,u=!0){const l=s[Xs];l.begin&&l.begin();try{Ki(r,s,r.template,o)}catch(m){throw u&&qp(s,m),m}finally{l.end&&l.end()}}function ei(r,s,o){Ic(0),s(r,o)}function Xm(r){return r[ai]||(r[ai]=[])}function bn(r){return r.cleanup||(r.cleanup=[])}function qp(r,s){const o=r[Qs],u=o?o.get(xd,null):null;u&&u.handleError(s)}function ka(r,s,o,u,l){for(let h=0;h<o.length;){const m=o[h++],v=o[h++],E=s[m],C=r.data[m];null!==C.setInput?C.setInput(E,l,u,v):E[v]=l}}function Yi(r,s,o){const u=function As(r,s){return kn(s[r])}(s,r);!function qh(r,s,o){r.setValue(s,o)}(r[Ot],u,o)}function il(r,s,o){let u=o?r.styles:null,l=o?r.classes:null,h=0;if(null!==s)for(let m=0;m<s.length;m++){const v=s[m];"number"==typeof v?h=v:1==h?l=ve(l,v):2==h&&(u=ve(u,v+": "+s[++m]+";"))}o?r.styles=u:r.stylesWithoutHost=u,o?r.classes=l:r.classesWithoutHost=l}function sl(r,s,o,u,l=!1){for(;null!==o;){const h=s[o.index];if(null!==h&&u.push(kn(h)),li(h))for(let v=_r;v<h.length;v++){const E=h[v],C=E[Ke].firstChild;null!==C&&sl(E[Ke],E,C,u)}const m=o.type;if(8&m)sl(r,s,o.child,u);else if(32&m){const v=ld(o,s);let E;for(;E=v();)u.push(E)}else if(16&m){const v=Qh(s,o);if(Array.isArray(v))u.push(...v);else{const E=fs(s[yr]);sl(E[Ke],E,v,u,!0)}}o=l?o.projectionNext:o.next}return u}class Fd{get rootNodes(){const s=this._lView,o=s[Ke];return sl(o,s,o.firstChild,[])}constructor(s,o){this._lView=s,this._cdRefInjectingView=o,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[wn]}set context(s){this._lView[wn]=s}get destroyed(){return 128==(128&this._lView[Nt])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const s=this._lView[cn];if(li(s)){const o=s[Ds],u=o?o.indexOf(this):-1;u>-1&&(wu(s,u),yo(o,u))}this._attachedToViewContainer=!1}dd(this._lView[Ke],this._lView)}onDestroy(s){!function Hm(r,s,o,u){const l=Xm(s);null===o?l.push(u):(l.push(o),r.firstCreatePass&&bn(r).push(u,l.length-1))}(this._lView[Ke],this._lView,null,s)}markForCheck(){sn(this._cdRefInjectingView||this._lView)}detach(){this._lView[Nt]&=-65}reattach(){this._lView[Nt]|=64}detectChanges(){bf(this._lView[Ke],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new oe(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function jc(r,s){ps(r,s,s[Ot],2,null,null)}(this._lView[Ke],this._lView)}attachToAppRef(s){if(this._attachedToViewContainer)throw new oe(902,!1);this._appRef=s}}class Zv extends Fd{constructor(s){super(s),this._view=s}detectChanges(){const s=this._view;bf(s[Ke],s,s[wn],!1)}checkNoChanges(){}get context(){return null}}class Mo extends To{constructor(s){super(),this.ngModule=s}resolveComponentFactory(s){const o=Kt(s);return new ol(o,this.ngModule)}}function Jm(r){const s=[];for(let o in r)r.hasOwnProperty(o)&&s.push({propName:r[o],templateName:o});return s}class Yv{constructor(s,o){this.injector=s,this.parentInjector=o}get(s,o,u){u=Et(u);const l=this.injector.get(s,Om,u);return l!==Om||o===Om?l:this.parentInjector.get(s,o,u)}}class ol extends kp{get inputs(){return Jm(this.componentDef.inputs)}get outputs(){return Jm(this.componentDef.outputs)}constructor(s,o){super(),this.componentDef=s,this.ngModule=o,this.componentType=s.type,this.selector=function kv(r){return r.map(SE).join(",")}(s.selectors),this.ngContentSelectors=s.ngContentSelectors?s.ngContentSelectors:[],this.isBoundToModule=!!o}create(s,o,u,l){let h=(l=l||this.ngModule)instanceof bo?l:l?.injector;h&&null!==this.componentDef.getStandaloneInjector&&(h=this.componentDef.getStandaloneInjector(h)||h);const m=h?new Yv(s,h):s,v=m.get(mf,null);if(null===v)throw new oe(407,!1);const E=m.get(Tv,null),C=v.createRenderer(null,this.componentDef),M=this.componentDef.selectors[0][0]||"div",P=u?function wf(r,s,o){return r.selectRootElement(s,o===$t.ShadowDom)}(C,u,this.componentDef.encapsulation):Ia(C,M,function Vd(r){const s=r.toLowerCase();return"svg"===s?"svg":"math"===s?"math":null}(M)),$=this.componentDef.onPush?288:272,Y=Ra(0,null,null,1,0,null,null,null,null,null),de=Ef(null,Y,null,$,null,null,v,C,E,m,null);let Oe,We;Ja(de);try{const ot=this.componentDef;let bt,Ae=null;ot.findHostDirectiveDefs?(bt=[],Ae=new Map,ot.findHostDirectiveDefs(ot,bt,Ae),bt.push(ot)):bt=[ot];const xt=function al(r,s){const o=r[Ke],u=rn;return r[u]=s,Co(o,u,2,"#host",null)}(de,P),Vn=function yi(r,s,o,u,l,h,m,v){const E=l[Ke];!function ey(r,s,o,u){for(const l of r)s.mergedAttrs=Ui(s.mergedAttrs,l.hostAttrs);null!==s.mergedAttrs&&(il(s,s.mergedAttrs,!0),null!==o&&Ta(u,o,s))}(u,r,s,m);const C=h.createRenderer(s,o),M=Ef(l,Hp(o),null,o.onPush?32:16,l[r.index],r,h,C,v||null,null,null);return E.firstCreatePass&&zp(E,r,u.length-1),cr(l,M),l[r.index]=M}(xt,P,ot,bt,de,v,C);We=ao(Y,rn),P&&function Cf(r,s,o,u){if(u)Dn(r,o,["ng-version",Cv.full]);else{const{attrs:l,classes:h}=function Lt(r){const s=[],o=[];let u=1,l=2;for(;u<r.length;){let h=r[u];if("string"==typeof h)2===l?""!==h&&s.push(h,r[++u]):8===l&&o.push(h);else{if(!Vs(l))break;l=h}u++}return{attrs:s,classes:o}}(s.selectors[0]);l&&Dn(r,o,l),h&&h.length>0&&gs(r,o,h.join(" "))}}(C,ot,P,u),void 0!==o&&function Xv(r,s,o){const u=r.projection=[];for(let l=0;l<s.length;l++){const h=o[l];u.push(null!=h?Array.from(h):null)}}(We,this.ngContentSelectors,o),Oe=function Zp(r,s,o,u,l,h){const m=er(),v=l[Ke],E=Un(m,l);zm(v,l,m,o,null,u);for(let M=0;M<o.length;M++)Rr(Ti(l,v,m.directiveStart+M,m),l);rl(v,l,m),E&&Rr(E,l);const C=Ti(l,v,m.directiveStart+m.componentOffset,m);if(r[wn]=l[wn]=C,null!==h)for(const M of h)M(C,s);return Ao(v,m,r),C}(Vn,ot,bt,Ae,de,[ty]),Na(Y,de,null)}finally{cp()}return new Kp(this.componentType,Oe,Qc(We,de),de,We)}}class Kp extends Pm{constructor(s,o,u,l,h){super(),this.location=u,this._rootLView=l,this._tNode=h,this.instance=o,this.hostView=this.changeDetectorRef=new Zv(l),this.componentType=s}setInput(s,o){const u=this._tNode.inputs;let l;if(null!==u&&(l=u[s])){const h=this._rootLView;ka(h[Ke],h,l,s,o),Gm(h,this._tNode.index)}}get injector(){return new hi(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(s){this.hostView.onDestroy(s)}}function ty(){const r=er();Jo(le()[Ke],r)}let Pa=null;function Uu(){if(!Pa){const r=St.Symbol;if(r&&r.iterator)Pa=r.iterator;else{const s=Object.getOwnPropertyNames(Map.prototype);for(let o=0;o<s.length;++o){const u=s[o];"entries"!==u&&"size"!==u&&Map.prototype[u]===Map.prototype.entries&&(Pa=u)}}}return Pa}function ju(r){return!!Tn(r)&&(Array.isArray(r)||!(r instanceof Map)&&Uu()in r)}function Tn(r){return null!==r&&("function"==typeof r||"object"==typeof r)}function ni(r,s,o){return!Object.is(r[s],o)&&(r[s]=o,!0)}function u0(r,s,o,u,l,h,m,v){const E=le(),C=Zt(),M=r+rn,P=C.firstCreatePass?function Sf(r,s,o,u,l,h,m,v,E){const C=s.consts,M=Co(s,r,4,m||null,Fi(C,v));Gp(s,o,M,Fi(C,E)),Jo(s,M);const P=M.tViews=Ra(2,M,u,l,h,s.directiveRegistry,s.pipeRegistry,null,s.schemas,C);return null!==s.queries&&(s.queries.template(s,M),P.queries=s.queries.embeddedTView(M)),M}(M,C,E,s,o,u,l,h,m):C.data[M];jr(P,!1);const $=E[Ot].createComment("");Wc(C,E,$,P),Rr($,E),cr(E,E[M]=Ym($,E,$,P)),sc(P)&&$p(C,E,P),null!=m&&Vu(E,P,v)}function Bt(r){return function xs(r,s){return r[s]}(function jl(){return Ct.lFrame.contextLView}(),rn+r)}function cy(r,s,o){const u=le();return ni(u,Ms(),s)&&function Zi(r,s,o,u,l,h,m,v){const E=Un(s,o);let M,C=s.inputs;!v&&null!=C&&(M=C[u])?(ka(r,o,M,u,l),di(s)&&Gm(o,s.index)):3&s.type&&(u=function OE(r){return"class"===r?"className":"for"===r?"htmlFor":"formaction"===r?"formAction":"innerHtml"===r?"innerHTML":"readonly"===r?"readOnly":"tabindex"===r?"tabIndex":r}(u),l=null!=m?m(l,s.value||"",u):l,h.setProperty(E,u,l))}(Zt(),function ln(){const r=Ct.lFrame;return ao(r.tView,r.selectedIndex)}(),u,r,s,u[Ot],o,!1),cy}function Gd(r,s,o,u,l){const m=l?"class":"style";ka(r,o,s.inputs[m],m,u)}function Hu(r,s,o,u){const l=le(),h=Zt(),m=rn+r,v=l[Ot],E=l[m]=Ia(v,s,function lp(){return Ct.lFrame.currentNamespace}()),C=h.firstCreatePass?function Af(r,s,o,u,l,h,m){const v=s.consts,C=Co(s,r,2,l,Fi(v,h));return Gp(s,o,C,Fi(v,m)),null!==C.attrs&&il(C,C.attrs,!1),null!==C.mergedAttrs&&il(C,C.mergedAttrs,!0),null!==s.queries&&s.queries.elementStart(s,C),C}(m,h,l,0,s,o,u):h.data[m];return jr(C,!0),Ta(v,E,C),32!=(32&C.flags)&&Wc(h,l,E,C),0===function qa(){return Ct.lFrame.elementDepthCount}()&&Rr(E,l),function fc(){Ct.lFrame.elementDepthCount++}(),sc(C)&&($p(h,l,C),Ao(h,C,l)),null!==u&&Vu(l,C),Hu}function fl(){let r=er();Ya()?function Qa(){Ct.lFrame.isParent=!1}():(r=r.parent,jr(r,!1));const s=r;!function pc(){Ct.lFrame.elementDepthCount--}();const o=Zt();return o.firstCreatePass&&(Jo(o,r),Ho(r)&&o.queries.elementEnd(r)),null!=s.classesWithoutHost&&function Kl(r){return 0!=(8&r.flags)}(s)&&Gd(o,s,le(),s.classesWithoutHost,!0),null!=s.stylesWithoutHost&&function Ah(r){return 0!=(16&r.flags)}(s)&&Gd(o,s,le(),s.stylesWithoutHost,!1),fl}function Jp(r,s,o,u){return Hu(r,s,o,u),fl(),Jp}function hy(){return le()}function fy(r){return!!r&&"function"==typeof r.then}function l0(r){return!!r&&"function"==typeof r.subscribe}const WE=l0;function py(r,s,o,u){const l=le(),h=Zt(),m=er();return function h0(r,s,o,u,l,h,m){const v=sc(u),C=r.firstCreatePass&&bn(r),M=s[wn],P=Xm(s);let $=!0;if(3&u.type||m){const Oe=Un(u,s),We=m?m(Oe):Oe,ot=P.length,bt=m?xt=>m(kn(xt[u.index])):u.index;let Ae=null;if(!m&&v&&(Ae=function d0(r,s,o,u){const l=r.cleanup;if(null!=l)for(let h=0;h<l.length-1;h+=2){const m=l[h];if(m===o&&l[h+1]===u){const v=s[ai],E=l[h+2];return v.length>E?v[E]:null}"string"==typeof m&&(h+=2)}return null}(r,s,l,u.index)),null!==Ae)(Ae.__ngLastListenerFn__||Ae).__ngNextListenerFn__=h,Ae.__ngLastListenerFn__=h,$=!1;else{h=tg(u,s,M,h,!1);const xt=o.listen(We,l,h);P.push(h,xt),C&&C.push(l,bt,ot,ot+1)}}else h=tg(u,s,M,h,!1);const Y=u.outputs;let de;if($&&null!==Y&&(de=Y[l])){const Oe=de.length;if(Oe)for(let We=0;We<Oe;We+=2){const Vn=s[de[We]][de[We+1]].subscribe(h),hn=P.length;P.push(h,Vn),C&&C.push(l,u.index,hn,-(hn+1))}}}(h,l,l[Ot],m,r,s,u),py}function Zn(r,s,o,u){try{return Ur(6,s,o),!1!==o(u)}catch(l){return qp(r,l),!1}finally{Ur(7,s,o)}}function tg(r,s,o,u,l){return function h(m){if(m===Function)return u;sn(r.componentOffset>-1?Qn(r.index,s):s);let E=Zn(s,o,u,m),C=h.__ngNextListenerFn__;for(;C;)E=Zn(s,o,C,m)&&E,C=C.__ngNextListenerFn__;return l&&!1===E&&(m.preventDefault(),m.returnValue=!1),E}}function gy(r=1){return function gm(r){return(Ct.lFrame.contextLView=function Wl(r,s){for(;r>0;)s=s[ui],r--;return s}(r,Ct.lFrame.contextLView))[wn]}(r)}function Sy(r,s=""){const o=le(),u=Zt(),l=r+rn,h=u.firstCreatePass?Co(u,l,1,s,null):u.data[l],m=o[l]=function Wh(r,s){return r.createText(s)}(o[Ot],s);Wc(u,o,m,h),jr(h,!1)}function Kd(r,s,o){const u=le(),l=function ll(r,s,o,u){return ni(r,Ms(),o)?s+_e(o)+u:At}(u,r,s,o);return l!==At&&Yi(u,xr(),l),Kd}const dr=void 0;var ag=["en",[["a","p"],["AM","PM"],dr],[["AM","PM"],dr,dr],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],dr,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],dr,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",dr,"{1} 'at' {0}",dr],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function F0(r){const o=Math.floor(Math.abs(r)),u=r.toString().replace(/^[^.]*\.?/,"").length;return 1===o&&0===u?1:5}];let La={};function Oo(r){const s=function V0(r){return r.toLowerCase().replace(/_/g,"-")}(r);let o=Ku(s);if(o)return o;const u=s.split("-")[0];if(o=Ku(u),o)return o;if("en"===u)return ag;throw new oe(701,!1)}function By(r){return Oo(r)[mt.PluralCase]}function Ku(r){return r in La||(La[r]=St.ng&&St.ng.common&&St.ng.common.locales&&St.ng.common.locales[r]),La[r]}var mt=(()=>((mt=mt||{})[mt.LocaleId=0]="LocaleId",mt[mt.DayPeriodsFormat=1]="DayPeriodsFormat",mt[mt.DayPeriodsStandalone=2]="DayPeriodsStandalone",mt[mt.DaysFormat=3]="DaysFormat",mt[mt.DaysStandalone=4]="DaysStandalone",mt[mt.MonthsFormat=5]="MonthsFormat",mt[mt.MonthsStandalone=6]="MonthsStandalone",mt[mt.Eras=7]="Eras",mt[mt.FirstDayOfWeek=8]="FirstDayOfWeek",mt[mt.WeekendRange=9]="WeekendRange",mt[mt.DateFormat=10]="DateFormat",mt[mt.TimeFormat=11]="TimeFormat",mt[mt.DateTimeFormat=12]="DateTimeFormat",mt[mt.NumberSymbols=13]="NumberSymbols",mt[mt.NumberFormats=14]="NumberFormats",mt[mt.CurrencyCode=15]="CurrencyCode",mt[mt.CurrencySymbol=16]="CurrencySymbol",mt[mt.CurrencyName=17]="CurrencyName",mt[mt.Currencies=18]="Currencies",mt[mt.Directionality=19]="Directionality",mt[mt.PluralCase=20]="PluralCase",mt[mt.ExtraData=21]="ExtraData",mt))();const Xd="en-US";let U0=Xd;class oh{}class n_{}function Cg(r,s){return new r_(r,s??null)}class r_ extends oh{constructor(s,o){super(),this._parent=o,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Mo(this);const u=function mr(r,s){const o=r[Ys]||null;if(!o&&!0===s)throw new Error(`Type ${ce(r)} does not have '\u0275mod' property.`);return o}(s);this._bootstrapComponents=function Ma(r){return r instanceof Function?r():r}(u.bootstrap),this._r3Injector=vf(s,o,[{provide:oh,useValue:this},{provide:To,useValue:this.componentFactoryResolver}],ce(s),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(s)}get injector(){return this._r3Injector}destroy(){const s=this._r3Injector;!s.destroyed&&s.destroy(),this.destroyCbs.forEach(o=>o()),this.destroyCbs=null}onDestroy(s){this.destroyCbs.push(s)}}class Xu extends n_{constructor(s){super(),this.moduleType=s}create(s){return new r_(this.moduleType,s)}}function Kf(r){return s=>{setTimeout(r,void 0,s)}}const Fa=class g_ extends I.x{constructor(s=!1){super(),this.__isAsync=s}emit(s){super.next(s)}subscribe(s,o,u){let l=s,h=o||(()=>null),m=u;if(s&&"object"==typeof s){const E=s;l=E.next?.bind(E),h=E.error?.bind(E),m=E.complete?.bind(E)}this.__isAsync&&(h=Kf(h),l&&(l=Kf(l)),m&&(m=Kf(m)));const v=super.subscribe({next:l,error:h,complete:m});return s instanceof X.w0&&s.add(v),v}};let wl=(()=>{class r{}return r.__NG_ELEMENT_ID__=_I,r})();const yI=wl,__=class extends yI{constructor(s,o,u){super(),this._declarationLView=s,this._declarationTContainer=o,this.elementRef=u}createEmbeddedView(s,o){const u=this._declarationTContainer.tViews,l=Ef(this._declarationLView,u,s,16,null,u.declTNode,null,null,null,null,o||null);l[Js]=this._declarationLView[this._declarationTContainer.index];const m=this._declarationLView[ci];return null!==m&&(l[ci]=m.createEmbeddedView(u)),Na(u,l,s),new Fd(l)}};function _I(){return function kg(r,s){return 4&r.type?new __(s,r,Qc(r,s)):null}(er(),le())}let dh=(()=>{class r{}return r.__NG_ELEMENT_ID__=zw,r})();function zw(){return function Og(r,s){let o;const u=s[r.index];if(li(u))o=u;else{let l;if(8&r.type)l=kn(u);else{const h=s[Ot];l=h.createComment("");const m=Un(r,s);wo(h,fd(h,m),l,function pd(r,s){return r.nextSibling(s)}(h,m),!1)}s[r.index]=o=Ym(u,s,l,r),cr(s,o)}return new vI(o,r,s)}(er(),le())}const v_=dh,vI=class extends v_{constructor(s,o,u){super(),this._lContainer=s,this._hostTNode=o,this._hostLView=u}get element(){return Qc(this._hostTNode,this._hostLView)}get injector(){return new hi(this._hostTNode,this._hostLView)}get parentInjector(){const s=iu(this._hostTNode,this._hostLView);if(bc(s)){const o=nu(s,this._hostLView),u=ia(s);return new hi(o[Ke].data[u+8],o)}return new hi(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(s){const o=Pg(this._lContainer);return null!==o&&o[s]||null}get length(){return this._lContainer.length-_r}createEmbeddedView(s,o,u){let l,h;"number"==typeof u?l=u:null!=u&&(l=u.index,h=u.injector);const m=s.createEmbeddedView(o||{},h);return this.insert(m,l),m}createComponent(s,o,u,l,h){const m=s&&!function hu(r){return"function"==typeof r}(s);let v;if(m)v=o;else{const P=o||{};v=P.index,u=P.injector,l=P.projectableNodes,h=P.environmentInjector||P.ngModuleRef}const E=m?s:new ol(Kt(s)),C=u||this.parentInjector;if(!h&&null==E.ngModule){const $=(m?C:this.parentInjector).get(bo,null);$&&(h=$)}const M=E.create(C,l,void 0,h);return this.insert(M.hostView,v),M}insert(s,o){const u=s._lView,l=u[Ke];if(function za(r){return li(r[cn])}(u)){const M=this.indexOf(s);if(-1!==M)this.detach(M);else{const P=u[cn],$=new vI(P,P[Bn],P[cn]);$.detach($.indexOf(s))}}const h=this._adjustIndex(o),m=this._lContainer;!function Zh(r,s,o,u){const l=_r+u,h=o.length;u>0&&(o[l-1][Cr]=s),u<h-_r?(s[Cr]=o[l],nd(o,_r+u,s)):(o.push(s),s[Cr]=null),s[cn]=o;const m=s[Js];null!==m&&o!==m&&function or(r,s){const o=r[Sr];s[yr]!==s[cn][cn][yr]&&(r[Ol]=!0),null===o?r[Sr]=[s]:o.push(s)}(m,s);const v=s[ci];null!==v&&v.insertView(r),s[Nt]|=64}(l,u,m,h);const v=ar(h,m),E=u[Ot],C=fd(E,m[eo]);return null!==C&&function Im(r,s,o,u,l,h){u[Zr]=l,u[Bn]=s,ps(r,u,o,1,l,h)}(l,m[Bn],E,u,C,v),s.attachToViewContainerRef(),nd(I_(m),h,s),s}move(s,o){return this.insert(s,o)}indexOf(s){const o=Pg(this._lContainer);return null!==o?o.indexOf(s):-1}remove(s){const o=this._adjustIndex(s,-1),u=wu(this._lContainer,o);u&&(yo(I_(this._lContainer),o),dd(u[Ke],u))}detach(s){const o=this._adjustIndex(s,-1),u=wu(this._lContainer,o);return u&&null!=yo(I_(this._lContainer),o)?new Fd(u):null}_adjustIndex(s,o=0){return s??this.length+o}};function Pg(r){return r[Ds]}function I_(r){return r[Ds]||(r[Ds]=[])}function rp(...r){}const O_=new nn("Application Initializer");let Qg=(()=>{class r{constructor(o){this.appInits=o,this.resolve=rp,this.reject=rp,this.initialized=!1,this.done=!1,this.donePromise=new Promise((u,l)=>{this.resolve=u,this.reject=l})}runInitializers(){if(this.initialized)return;const o=[],u=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let l=0;l<this.appInits.length;l++){const h=this.appInits[l]();if(fy(h))o.push(h);else if(WE(h)){const m=new Promise((v,E)=>{h.subscribe({complete:v,error:E})});o.push(m)}}Promise.all(o).then(()=>{u()}).catch(l=>{this.reject(l)}),0===o.length&&u(),this.initialized=!0}}return r.\u0275fac=function(o){return new(o||r)(Be(O_,8))},r.\u0275prov=et({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();const PI=new nn("AppId",{providedIn:"root",factory:function OI(){return`${ip()}${ip()}${ip()}`}});function ip(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const LI=new nn("Platform Initializer"),uD=new nn("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),Nn=new nn("appBootstrapListener"),Xg=new nn("LocaleId",{providedIn:"root",factory:()=>function nt(r,s=ft.Default){return Be(r,Et(s))}(Xg,ft.Optional|ft.SkipSelf)||function FI(){return typeof $localize<"u"&&$localize.locale||Xd}()}),cD=new nn("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"}),Cl=(()=>Promise.resolve(0))();function hh(r){typeof Zone>"u"?Cl.then(()=>{r&&r.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",r)}class Ji{constructor({enableLongStackTrace:s=!1,shouldCoalesceEventChangeDetection:o=!1,shouldCoalesceRunChangeDetection:u=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Fa(!1),this.onMicrotaskEmpty=new Fa(!1),this.onStable=new Fa(!1),this.onError=new Fa(!1),typeof Zone>"u")throw new oe(908,!1);Zone.assertZonePatched();const l=this;l._nesting=0,l._outer=l._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(l._inner=l._inner.fork(new Zone.TaskTrackingZoneSpec)),s&&Zone.longStackTraceZoneSpec&&(l._inner=l._inner.fork(Zone.longStackTraceZoneSpec)),l.shouldCoalesceEventChangeDetection=!u&&o,l.shouldCoalesceRunChangeDetection=u,l.lastRequestAnimationFrameId=-1,l.nativeRequestAnimationFrame=function fD(){let r=St.requestAnimationFrame,s=St.cancelAnimationFrame;if(typeof Zone<"u"&&r&&s){const o=r[Zone.__symbol__("OriginalDelegate")];o&&(r=o);const u=s[Zone.__symbol__("OriginalDelegate")];u&&(s=u)}return{nativeRequestAnimationFrame:r,nativeCancelAnimationFrame:s}}().nativeRequestAnimationFrame,function Sl(r){const s=()=>{!function pD(r){r.isCheckStableRunning||-1!==r.lastRequestAnimationFrameId||(r.lastRequestAnimationFrameId=r.nativeRequestAnimationFrame.call(St,()=>{r.fakeTopEventTask||(r.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{r.lastRequestAnimationFrameId=-1,ph(r),r.isCheckStableRunning=!0,fh(r),r.isCheckStableRunning=!1},void 0,()=>{},()=>{})),r.fakeTopEventTask.invoke()}),ph(r))}(r)};r._inner=r._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(o,u,l,h,m,v)=>{try{return gh(r),o.invokeTask(l,h,m,v)}finally{(r.shouldCoalesceEventChangeDetection&&"eventTask"===h.type||r.shouldCoalesceRunChangeDetection)&&s(),F_(r)}},onInvoke:(o,u,l,h,m,v,E)=>{try{return gh(r),o.invoke(l,h,m,v,E)}finally{r.shouldCoalesceRunChangeDetection&&s(),F_(r)}},onHasTask:(o,u,l,h)=>{o.hasTask(l,h),u===l&&("microTask"==h.change?(r._hasPendingMicrotasks=h.microTask,ph(r),fh(r)):"macroTask"==h.change&&(r.hasPendingMacrotasks=h.macroTask))},onHandleError:(o,u,l,h)=>(o.handleError(l,h),r.runOutsideAngular(()=>r.onError.emit(h)),!1)})}(l)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Ji.isInAngularZone())throw new oe(909,!1)}static assertNotInAngularZone(){if(Ji.isInAngularZone())throw new oe(909,!1)}run(s,o,u){return this._inner.run(s,o,u)}runTask(s,o,u,l){const h=this._inner,m=h.scheduleEventTask("NgZoneEvent: "+l,s,VI,rp,rp);try{return h.runTask(m,o,u)}finally{h.cancelTask(m)}}runGuarded(s,o,u){return this._inner.runGuarded(s,o,u)}runOutsideAngular(s){return this._outer.run(s)}}const VI={};function fh(r){if(0==r._nesting&&!r.hasPendingMicrotasks&&!r.isStable)try{r._nesting++,r.onMicrotaskEmpty.emit(null)}finally{if(r._nesting--,!r.hasPendingMicrotasks)try{r.runOutsideAngular(()=>r.onStable.emit(null))}finally{r.isStable=!0}}}function ph(r){r.hasPendingMicrotasks=!!(r._hasPendingMicrotasks||(r.shouldCoalesceEventChangeDetection||r.shouldCoalesceRunChangeDetection)&&-1!==r.lastRequestAnimationFrameId)}function gh(r){r._nesting++,r.isStable&&(r.isStable=!1,r.onUnstable.emit(null))}function F_(r){r._nesting--,fh(r)}class V_{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Fa,this.onMicrotaskEmpty=new Fa,this.onStable=new Fa,this.onError=new Fa}run(s,o,u){return s.apply(o,u)}runGuarded(s,o,u){return s.apply(o,u)}runOutsideAngular(s){return s()}runTask(s,o,u,l){return s.apply(o,u)}}const BI=new nn(""),UI=new nn("");let em,gD=(()=>{class r{constructor(o,u,l){this._ngZone=o,this.registry=u,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,em||(function B_(r){em=r}(l),l.addToWindow(u)),this._watchAngularEvents(),o.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Ji.assertNotInAngularZone(),hh(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())hh(()=>{for(;0!==this._callbacks.length;){let o=this._callbacks.pop();clearTimeout(o.timeoutId),o.doneCb(this._didWork)}this._didWork=!1});else{let o=this.getPendingTasks();this._callbacks=this._callbacks.filter(u=>!u.updateCb||!u.updateCb(o)||(clearTimeout(u.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(o=>({source:o.source,creationLocation:o.creationLocation,data:o.data})):[]}addCallback(o,u,l){let h=-1;u&&u>0&&(h=setTimeout(()=>{this._callbacks=this._callbacks.filter(m=>m.timeoutId!==h),o(this._didWork,this.getPendingTasks())},u)),this._callbacks.push({doneCb:o,timeoutId:h,updateCb:l})}whenStable(o,u,l){if(l&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(o,u,l),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(o){this.registry.registerApplication(o,this)}unregisterApplication(o){this.registry.unregisterApplication(o)}findProviders(o,u,l){return[]}}return r.\u0275fac=function(o){return new(o||r)(Be(Ji),Be(Jg),Be(UI))},r.\u0275prov=et({token:r,factory:r.\u0275fac}),r})(),Jg=(()=>{class r{constructor(){this._applications=new Map}registerApplication(o,u){this._applications.set(o,u)}unregisterApplication(o){this._applications.delete(o)}unregisterAllApplications(){this._applications.clear()}getTestability(o){return this._applications.get(o)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(o,u=!0){return em?.findTestabilityInTree(this,o,u)??null}}return r.\u0275fac=function(o){return new(o||r)},r.\u0275prov=et({token:r,factory:r.\u0275fac,providedIn:"platform"}),r})(),xi=null;const U_=new nn("AllowMultipleToken"),tm=new nn("PlatformDestroyListeners"),Zs=!1;function G_(r,s,o=[]){const u=`Platform: ${s}`,l=new nn(u);return(h=[])=>{let m=xl();if(!m||m.injector.get(U_,!1)){const v=[...o,...h,{provide:l,useValue:!0}];r?r(v):function jI(r){if(xi&&!xi.get(U_,!1))throw new oe(400,!1);xi=r;const s=r.get(HI);(function $I(r){const s=r.get(LI,null);s&&s.forEach(o=>o())})(r)}(function mh(r=[],s){return Jc.create({name:s,providers:[{provide:xp,useValue:"platform"},{provide:tm,useValue:new Set([()=>xi=null])},...r]})}(v,u))}return function z_(r){const s=xl();if(!s)throw new oe(401,!1);return s}()}}function xl(){return xi?.get(HI)??null}let HI=(()=>{class r{constructor(o){this._injector=o,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(o,u){const l=function mD(r,s){let o;return o="noop"===r?new V_:("zone.js"===r?void 0:r)||new Ji(s),o}(u?.ngZone,function Ml(r){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!r||!r.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!r||!r.ngZoneRunCoalescing)||!1}}(u)),h=[{provide:Ji,useValue:l}];return l.run(()=>{const m=Jc.create({providers:h,parent:this.injector,name:o.moduleType.name}),v=o.create(m),E=v.injector.get(xd,null);if(!E)throw new oe(402,!1);return l.runOutsideAngular(()=>{const C=l.onError.subscribe({next:M=>{E.handleError(M)}});v.onDestroy(()=>{Nl(this._modules,v),C.unsubscribe()})}),function yD(r,s,o){try{const u=o();return fy(u)?u.catch(l=>{throw s.runOutsideAngular(()=>r.handleError(l)),l}):u}catch(u){throw s.runOutsideAngular(()=>r.handleError(u)),u}}(E,l,()=>{const C=v.injector.get(Qg);return C.runInitializers(),C.donePromise.then(()=>(function Uy(r){qe(r,"Expected localeId to be defined"),"string"==typeof r&&(U0=r.toLowerCase().replace(/_/g,"-"))}(v.injector.get(Xg,Xd)||Xd),this._moduleDoBootstrap(v),v))})})}bootstrapModule(o,u=[]){const l=rm({},u);return function j_(r,s,o){const u=new Xu(o);return Promise.resolve(u)}(0,0,o).then(h=>this.bootstrapModuleFactory(h,l))}_moduleDoBootstrap(o){const u=o.injector.get(W_);if(o._bootstrapComponents.length>0)o._bootstrapComponents.forEach(l=>u.bootstrap(l));else{if(!o.instance.ngDoBootstrap)throw new oe(-403,!1);o.instance.ngDoBootstrap(u)}this._modules.push(o)}onDestroy(o){this._destroyListeners.push(o)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new oe(404,!1);this._modules.slice().forEach(u=>u.destroy()),this._destroyListeners.forEach(u=>u());const o=this._injector.get(tm,null);o&&(o.forEach(u=>u()),o.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return r.\u0275fac=function(o){return new(o||r)(Be(Jc))},r.\u0275prov=et({token:r,factory:r.\u0275fac,providedIn:"platform"}),r})();function rm(r,s){return Array.isArray(s)?s.reduce(rm,r):{...r,...s}}let W_=(()=>{class r{get destroyed(){return this._destroyed}get injector(){return this._injector}constructor(o,u,l){this._zone=o,this._injector=u,this._exceptionHandler=l,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const h=new k.y(v=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{v.next(this._stable),v.complete()})}),m=new k.y(v=>{let E;this._zone.runOutsideAngular(()=>{E=this._zone.onStable.subscribe(()=>{Ji.assertNotInAngularZone(),hh(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,v.next(!0))})})});const C=this._zone.onUnstable.subscribe(()=>{Ji.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{v.next(!1)}))});return()=>{E.unsubscribe(),C.unsubscribe()}});this.isStable=(0,ie.T)(h,m.pipe((0,ee.B)()))}bootstrap(o,u){const l=o instanceof kp;if(!this._injector.get(Qg).done){!l&&function zn(r){const s=Kt(r)||Gn(r)||Rn(r);return null!==s&&s.standalone}(o);throw new oe(405,Zs)}let m;m=l?o:this._injector.get(To).resolveComponentFactory(o),this.componentTypes.push(m.componentType);const v=function nm(r){return r.isBoundToModule}(m)?void 0:this._injector.get(oh),C=m.create(Jc.NULL,[],u||m.selector,v),M=C.location.nativeElement,P=C.injector.get(BI,null);return P?.registerApplication(M),C.onDestroy(()=>{this.detachView(C.hostView),Nl(this.components,C),P?.unregisterApplication(M)}),this._loadComponent(C),C}tick(){if(this._runningTick)throw new oe(101,!1);try{this._runningTick=!0;for(let o of this._views)o.detectChanges()}catch(o){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(o))}finally{this._runningTick=!1}}attachView(o){const u=o;this._views.push(u),u.attachToAppRef(this)}detachView(o){const u=o;Nl(this._views,u),u.detachFromAppRef()}_loadComponent(o){this.attachView(o.hostView),this.tick(),this.components.push(o);const u=this._injector.get(Nn,[]);u.push(...this._bootstrapListeners),u.forEach(l=>l(o))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(o=>o()),this._views.slice().forEach(o=>o.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(o){return this._destroyListeners.push(o),()=>Nl(this._destroyListeners,o)}destroy(){if(this._destroyed)throw new oe(406,!1);const o=this._injector;o.destroy&&!o.destroyed&&o.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return r.\u0275fac=function(o){return new(o||r)(Be(Ji),Be(bo),Be(xd))},r.\u0275prov=et({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();function Nl(r,s){const o=r.indexOf(s);o>-1&&r.splice(o,1)}function im(){return!1}function vD(){}let ID=(()=>{class r{}return r.__NG_ELEMENT_ID__=WI,r})();function WI(r){return function qI(r,s,o){if(di(r)&&!o){const u=Qn(r.index,s);return new Fd(u,u)}return 47&r.type?new Fd(s[yr],s):null}(er(),le(),16==(16&r))}class YI{constructor(){}supports(s){return ju(s)}create(s){return new QI(s)}}const SD=(r,s)=>s;class QI{constructor(s){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=s||SD}forEachItem(s){let o;for(o=this._itHead;null!==o;o=o._next)s(o)}forEachOperation(s){let o=this._itHead,u=this._removalsHead,l=0,h=null;for(;o||u;){const m=!u||o&&o.currentIndex<xD(u,l,h)?o:u,v=xD(m,l,h),E=m.currentIndex;if(m===u)l--,u=u._nextRemoved;else if(o=o._next,null==m.previousIndex)l++;else{h||(h=[]);const C=v-l,M=E-l;if(C!=M){for(let $=0;$<C;$++){const Y=$<h.length?h[$]:h[$]=0,de=Y+$;M<=de&&de<C&&(h[$]=Y+1)}h[m.previousIndex]=M-C}}v!==E&&s(m,v,E)}}forEachPreviousItem(s){let o;for(o=this._previousItHead;null!==o;o=o._nextPrevious)s(o)}forEachAddedItem(s){let o;for(o=this._additionsHead;null!==o;o=o._nextAdded)s(o)}forEachMovedItem(s){let o;for(o=this._movesHead;null!==o;o=o._nextMoved)s(o)}forEachRemovedItem(s){let o;for(o=this._removalsHead;null!==o;o=o._nextRemoved)s(o)}forEachIdentityChange(s){let o;for(o=this._identityChangesHead;null!==o;o=o._nextIdentityChange)s(o)}diff(s){if(null==s&&(s=[]),!ju(s))throw new oe(900,!1);return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let l,h,m,o=this._itHead,u=!1;if(Array.isArray(s)){this.length=s.length;for(let v=0;v<this.length;v++)h=s[v],m=this._trackByFn(v,h),null!==o&&Object.is(o.trackById,m)?(u&&(o=this._verifyReinsertion(o,h,m,v)),Object.is(o.item,h)||this._addIdentityChange(o,h)):(o=this._mismatch(o,h,m,v),u=!0),o=o._next}else l=0,function GE(r,s){if(Array.isArray(r))for(let o=0;o<r.length;o++)s(r[o]);else{const o=r[Uu()]();let u;for(;!(u=o.next()).done;)s(u.value)}}(s,v=>{m=this._trackByFn(l,v),null!==o&&Object.is(o.trackById,m)?(u&&(o=this._verifyReinsertion(o,v,m,l)),Object.is(o.item,v)||this._addIdentityChange(o,v)):(o=this._mismatch(o,v,m,l),u=!0),o=o._next,l++}),this.length=l;return this._truncate(o),this.collection=s,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let s;for(s=this._previousItHead=this._itHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._additionsHead;null!==s;s=s._nextAdded)s.previousIndex=s.currentIndex;for(this._additionsHead=this._additionsTail=null,s=this._movesHead;null!==s;s=s._nextMoved)s.previousIndex=s.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(s,o,u,l){let h;return null===s?h=this._itTail:(h=s._prev,this._remove(s)),null!==(s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(u,null))?(Object.is(s.item,o)||this._addIdentityChange(s,o),this._reinsertAfter(s,h,l)):null!==(s=null===this._linkedRecords?null:this._linkedRecords.get(u,l))?(Object.is(s.item,o)||this._addIdentityChange(s,o),this._moveAfter(s,h,l)):s=this._addAfter(new AD(o,u),h,l),s}_verifyReinsertion(s,o,u,l){let h=null===this._unlinkedRecords?null:this._unlinkedRecords.get(u,null);return null!==h?s=this._reinsertAfter(h,s._prev,l):s.currentIndex!=l&&(s.currentIndex=l,this._addToMoves(s,l)),s}_truncate(s){for(;null!==s;){const o=s._next;this._addToRemovals(this._unlink(s)),s=o}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(s,o,u){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(s);const l=s._prevRemoved,h=s._nextRemoved;return null===l?this._removalsHead=h:l._nextRemoved=h,null===h?this._removalsTail=l:h._prevRemoved=l,this._insertAfter(s,o,u),this._addToMoves(s,u),s}_moveAfter(s,o,u){return this._unlink(s),this._insertAfter(s,o,u),this._addToMoves(s,u),s}_addAfter(s,o,u){return this._insertAfter(s,o,u),this._additionsTail=null===this._additionsTail?this._additionsHead=s:this._additionsTail._nextAdded=s,s}_insertAfter(s,o,u){const l=null===o?this._itHead:o._next;return s._next=l,s._prev=o,null===l?this._itTail=s:l._prev=s,null===o?this._itHead=s:o._next=s,null===this._linkedRecords&&(this._linkedRecords=new cm),this._linkedRecords.put(s),s.currentIndex=u,s}_remove(s){return this._addToRemovals(this._unlink(s))}_unlink(s){null!==this._linkedRecords&&this._linkedRecords.remove(s);const o=s._prev,u=s._next;return null===o?this._itHead=u:o._next=u,null===u?this._itTail=o:u._prev=o,s}_addToMoves(s,o){return s.previousIndex===o||(this._movesTail=null===this._movesTail?this._movesHead=s:this._movesTail._nextMoved=s),s}_addToRemovals(s){return null===this._unlinkedRecords&&(this._unlinkedRecords=new cm),this._unlinkedRecords.put(s),s.currentIndex=null,s._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=s,s._prevRemoved=null):(s._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=s),s}_addIdentityChange(s,o){return s.item=o,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=s:this._identityChangesTail._nextIdentityChange=s,s}}class AD{constructor(s,o){this.item=s,this.trackById=o,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class _h{constructor(){this._head=null,this._tail=null}add(s){null===this._head?(this._head=this._tail=s,s._nextDup=null,s._prevDup=null):(this._tail._nextDup=s,s._prevDup=this._tail,s._nextDup=null,this._tail=s)}get(s,o){let u;for(u=this._head;null!==u;u=u._nextDup)if((null===o||o<=u.currentIndex)&&Object.is(u.trackById,s))return u;return null}remove(s){const o=s._prevDup,u=s._nextDup;return null===o?this._head=u:o._nextDup=u,null===u?this._tail=o:u._prevDup=o,null===this._head}}class cm{constructor(){this.map=new Map}put(s){const o=s.trackById;let u=this.map.get(o);u||(u=new _h,this.map.set(o,u)),u.add(s)}get(s,o){const l=this.map.get(s);return l?l.get(s,o):null}remove(s){const o=s.trackById;return this.map.get(o).remove(s)&&this.map.delete(o),s}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function xD(r,s,o){const u=r.previousIndex;if(null===u)return u;let l=0;return o&&u<o.length&&(l=o[u]),u+s+l}class MD{constructor(){}supports(s){return s instanceof Map||Tn(s)}create(){return new ND}}class ND{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(s){let o;for(o=this._mapHead;null!==o;o=o._next)s(o)}forEachPreviousItem(s){let o;for(o=this._previousMapHead;null!==o;o=o._nextPrevious)s(o)}forEachChangedItem(s){let o;for(o=this._changesHead;null!==o;o=o._nextChanged)s(o)}forEachAddedItem(s){let o;for(o=this._additionsHead;null!==o;o=o._nextAdded)s(o)}forEachRemovedItem(s){let o;for(o=this._removalsHead;null!==o;o=o._nextRemoved)s(o)}diff(s){if(s){if(!(s instanceof Map||Tn(s)))throw new oe(900,!1)}else s=new Map;return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let o=this._mapHead;if(this._appendAfter=null,this._forEach(s,(u,l)=>{if(o&&o.key===l)this._maybeAddToChanges(o,u),this._appendAfter=o,o=o._next;else{const h=this._getOrCreateRecordForKey(l,u);o=this._insertBeforeOrAppend(o,h)}}),o){o._prev&&(o._prev._next=null),this._removalsHead=o;for(let u=o;null!==u;u=u._nextRemoved)u===this._mapHead&&(this._mapHead=null),this._records.delete(u.key),u._nextRemoved=u._next,u.previousValue=u.currentValue,u.currentValue=null,u._prev=null,u._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(s,o){if(s){const u=s._prev;return o._next=s,o._prev=u,s._prev=o,u&&(u._next=o),s===this._mapHead&&(this._mapHead=o),this._appendAfter=s,s}return this._appendAfter?(this._appendAfter._next=o,o._prev=this._appendAfter):this._mapHead=o,this._appendAfter=o,null}_getOrCreateRecordForKey(s,o){if(this._records.has(s)){const l=this._records.get(s);this._maybeAddToChanges(l,o);const h=l._prev,m=l._next;return h&&(h._next=m),m&&(m._prev=h),l._next=null,l._prev=null,l}const u=new XI(s);return this._records.set(s,u),u.currentValue=o,this._addToAdditions(u),u}_reset(){if(this.isDirty){let s;for(this._previousMapHead=this._mapHead,s=this._previousMapHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._changesHead;null!==s;s=s._nextChanged)s.previousValue=s.currentValue;for(s=this._additionsHead;null!=s;s=s._nextAdded)s.previousValue=s.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(s,o){Object.is(o,s.currentValue)||(s.previousValue=s.currentValue,s.currentValue=o,this._addToChanges(s))}_addToAdditions(s){null===this._additionsHead?this._additionsHead=this._additionsTail=s:(this._additionsTail._nextAdded=s,this._additionsTail=s)}_addToChanges(s){null===this._changesHead?this._changesHead=this._changesTail=s:(this._changesTail._nextChanged=s,this._changesTail=s)}_forEach(s,o){s instanceof Map?s.forEach(o):Object.keys(s).forEach(u=>o(s[u],u))}}class XI{constructor(s){this.key=s,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Ua(){return new Q_([new YI])}let Q_=(()=>{class r{constructor(o){this.factories=o}static create(o,u){if(null!=u){const l=u.factories.slice();o=o.concat(l)}return new r(o)}static extend(o){return{provide:r,useFactory:u=>r.create(o,u||Ua()),deps:[[r,new Io,new pa]]}}find(o){const u=this.factories.find(l=>l.supports(o));if(null!=u)return u;throw new oe(901,!1)}}return r.\u0275prov=et({token:r,providedIn:"root",factory:Ua}),r})();function JI(){return new X_([new MD])}let X_=(()=>{class r{constructor(o){this.factories=o}static create(o,u){if(u){const l=u.factories.slice();o=o.concat(l)}return new r(o)}static extend(o){return{provide:r,useFactory:u=>r.create(o,u||JI()),deps:[[r,new Io,new pa]]}}find(o){const u=this.factories.find(l=>l.supports(o));if(u)return u;throw new oe(901,!1)}}return r.\u0275prov=et({token:r,providedIn:"root",factory:JI}),r})();const kb=G_(null,"core",[]);let eE=(()=>{class r{constructor(o){}}return r.\u0275fac=function(o){return new(o||r)(Be(W_))},r.\u0275mod=En({type:r}),r.\u0275inj=fn({}),r})()},3942:(ht,Te,O)=>{O.d(Te,{Z:()=>vt});var I=O(2090),X=O(4859),k=O(9681),ie=O(1877);class ee{constructor(oe,xe){this._delegate=oe,this.firebase=xe,(0,k._addComponent)(oe,new X.wA("app-compat",()=>this,"PUBLIC")),this.container=oe.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(oe){this._delegate.automaticDataCollectionEnabled=oe}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(oe=>{this._delegate.checkDestroyed(),oe()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,k.deleteApp)(this._delegate)))}_getService(oe,xe=k._DEFAULT_ENTRY_NAME){var _e;this._delegate.checkDestroyed();const Me=this._delegate.container.getProvider(oe);return!Me.isInitialized()&&"EXPLICIT"===(null===(_e=Me.getComponent())||void 0===_e?void 0:_e.instantiationMode)&&Me.initialize(),Me.getImmediate({identifier:xe})}_removeServiceInstance(oe,xe=k._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(oe).clearInstance(xe)}_addComponent(oe){(0,k._addComponent)(this._delegate,oe)}_addOrOverwriteComponent(oe){(0,k._addOrOverwriteComponent)(this._delegate,oe)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const me=new I.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),j=function ve(){const Ge=function ce(Ge){const oe={},xe={__esModule:!0,initializeApp:function Ee(Re,V={}){const fe=k.initializeApp(Re,V);if((0,I.r3)(oe,fe.name))return oe[fe.name];const Ne=new Ge(fe,xe);return oe[fe.name]=Ne,Ne},app:Me,registerVersion:k.registerVersion,setLogLevel:k.setLogLevel,onLog:k.onLog,apps:null,SDK_VERSION:k.SDK_VERSION,INTERNAL:{registerComponent:function Ce(Re){const V=Re.name,fe=V.replace("-compat","");if(k._registerComponent(Re)&&"PUBLIC"===Re.type){const Ne=(He=Me())=>{if("function"!=typeof He[fe])throw me.create("invalid-app-argument",{appName:V});return He[fe]()};void 0!==Re.serviceProps&&(0,I.ZB)(Ne,Re.serviceProps),xe[fe]=Ne,Ge.prototype[fe]=function(...He){return this._getService.bind(this,V).apply(this,Re.multipleInstances?He:[])}}return"PUBLIC"===Re.type?xe[fe]:null},removeApp:function _e(Re){delete oe[Re]},useAsService:function Le(Re,V){return"serverAuth"===V?null:V},modularAPIs:k}};function Me(Re){if(!(0,I.r3)(oe,Re=Re||k._DEFAULT_ENTRY_NAME))throw me.create("no-app",{appName:Re});return oe[Re]}return xe.default=xe,Object.defineProperty(xe,"apps",{get:function ye(){return Object.keys(oe).map(Re=>oe[Re])}}),Me.App=Ge,xe}(ee);return Ge.INTERNAL=Object.assign(Object.assign({},Ge.INTERNAL),{createFirebaseNamespace:ve,extendNamespace:function oe(xe){(0,I.ZB)(Ge,xe)},createSubscribe:I.ne,ErrorFactory:I.LL,deepExtend:I.ZB}),Ge}(),U=new ie.Yd("@firebase/app-compat");if((0,I.jU)()&&void 0!==self.firebase){U.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Ge=self.firebase.SDK_VERSION;Ge&&Ge.indexOf("LITE")>=0&&U.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const vt=j;!function Se(Ge){(0,k.registerVersion)("@firebase/app-compat","0.2.3",Ge)}()},9681:(ht,Te,O)=>{O.r(Te),O.d(Te,{FirebaseError:()=>ie.ZR,SDK_VERSION:()=>Kr,_DEFAULT_ENTRY_NAME:()=>Pe,_addComponent:()=>en,_addOrOverwriteComponent:()=>_t,_apps:()=>qe,_clearComponents:()=>fn,_components:()=>je,_getProvider:()=>et,_registerComponent:()=>Yt,_removeServiceInstance:()=>Mt,deleteApp:()=>Es,getApp:()=>ii,getApps:()=>br,initializeApp:()=>ts,onLog:()=>ft,registerVersion:()=>Fr,setLogLevel:()=>Ni});var I=O(5861),X=O(4859),k=O(1877),ie=O(2090),ee=O(8766);class se{constructor(we){this.container=we}getPlatformInfoString(){return this.container.getProviders().map(nt=>{if(function me(Be){return"VERSION"===Be.getComponent()?.type}(nt)){const Et=nt.getImmediate();return`${Et.library}/${Et.version}`}return null}).filter(nt=>nt).join(" ")}}const ce="@firebase/app",j=new k.Yd("@firebase/app"),Pe="[DEFAULT]",Ve={[ce]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},qe=new Map,je=new Map;function en(Be,we){try{Be.container.addComponent(we)}catch(nt){j.debug(`Component ${we.name} failed to register with FirebaseApp ${Be.name}`,nt)}}function _t(Be,we){Be.container.addOrOverwriteComponent(we)}function Yt(Be){const we=Be.name;if(je.has(we))return j.debug(`There were multiple attempts to register component ${we}.`),!1;je.set(we,Be);for(const nt of qe.values())en(nt,Be);return!0}function et(Be,we){const nt=Be.container.getProvider("heartbeat").getImmediate({optional:!0});return nt&&nt.triggerHeartbeat(),Be.container.getProvider(we)}function Mt(Be,we,nt=Pe){et(Be,we).clearInstance(nt)}function fn(){je.clear()}const mn=new ie.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class yn{constructor(we,nt,Et){this._isDeleted=!1,this._options=Object.assign({},we),this._config=Object.assign({},nt),this._name=nt.name,this._automaticDataCollectionEnabled=nt.automaticDataCollectionEnabled,this._container=Et,this.container.addComponent(new X.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(we){this.checkDestroyed(),this._automaticDataCollectionEnabled=we}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(we){this._isDeleted=we}checkDestroyed(){if(this.isDeleted)throw mn.create("app-deleted",{appName:this._name})}}const Kr="9.17.1";function ts(Be,we={}){let nt=Be;"object"!=typeof we&&(we={name:we});const Et=Object.assign({name:Pe,automaticDataCollectionEnabled:!1},we),Tt=Et.name;if("string"!=typeof Tt||!Tt)throw mn.create("bad-app-name",{appName:String(Tt)});if(nt||(nt=(0,ie.aH)()),!nt)throw mn.create("no-options");const kt=qe.get(Tt);if(kt){if((0,ie.vZ)(nt,kt.options)&&(0,ie.vZ)(Et,kt.config))return kt;throw mn.create("duplicate-app",{appName:Tt})}const B=new X.H0(Tt);for(const G of je.values())B.addComponent(G);const F=new yn(nt,Et,B);return qe.set(Tt,F),F}function ii(Be=Pe){const we=qe.get(Be);if(!we&&Be===Pe)return ts();if(!we)throw mn.create("no-app",{appName:Be});return we}function br(){return Array.from(qe.values())}function Es(Be){return an.apply(this,arguments)}function an(){return(an=(0,I.Z)(function*(Be){const we=Be.name;qe.has(we)&&(qe.delete(we),yield Promise.all(Be.container.getProviders().map(nt=>nt.delete())),Be.isDeleted=!0)})).apply(this,arguments)}function Fr(Be,we,nt){var Et;let Tt=null!==(Et=Ve[Be])&&void 0!==Et?Et:Be;nt&&(Tt+=`-${nt}`);const kt=Tt.match(/\s|\//),B=we.match(/\s|\//);if(kt||B){const F=[`Unable to register library "${Tt}" with version "${we}":`];return kt&&F.push(`library name "${Tt}" contains illegal characters (whitespace or "/")`),kt&&B&&F.push("and"),B&&F.push(`version name "${we}" contains illegal characters (whitespace or "/")`),void j.warn(F.join(" "))}Yt(new X.wA(`${Tt}-version`,()=>({library:Tt,version:we}),"VERSION"))}function ft(Be,we){if(null!==Be&&"function"!=typeof Be)throw mn.create("invalid-log-argument");(0,k.Am)(Be,we)}function Ni(Be){(0,k.Ub)(Be)}const si="firebase-heartbeat-database",_n=1,Tr="firebase-heartbeat-store";let ns=null;function St(){return ns||(ns=(0,ee.X3)(si,_n,{upgrade:(Be,we)=>{0===we&&Be.createObjectStore(Tr)}}).catch(Be=>{throw mn.create("idb-open",{originalErrorMessage:Be.message})})),ns}function It(){return(It=(0,I.Z)(function*(Be){try{return(yield St()).transaction(Tr).objectStore(Tr).get(vn(Be))}catch(we){if(we instanceof ie.ZR)j.warn(we.message);else{const nt=mn.create("idb-get",{originalErrorMessage:we?.message});j.warn(nt.message)}}})).apply(this,arguments)}function Ri(Be,we){return Cn.apply(this,arguments)}function Cn(){return(Cn=(0,I.Z)(function*(Be,we){try{const Et=(yield St()).transaction(Tr,"readwrite");return yield Et.objectStore(Tr).put(we,vn(Be)),Et.done}catch(nt){if(nt instanceof ie.ZR)j.warn(nt.message);else{const Et=mn.create("idb-set",{originalErrorMessage:nt?.message});j.warn(Et.message)}}})).apply(this,arguments)}function vn(Be){return`${Be.name}!${Be.options.appId}`}class Vo{constructor(we){this.container=we,this._heartbeatsCache=null;const nt=this.container.getProvider("app").getImmediate();this._storage=new qt(nt),this._heartbeatsCachePromise=this._storage.read().then(Et=>(this._heartbeatsCache=Et,Et))}triggerHeartbeat(){var we=this;return(0,I.Z)(function*(){const Et=we.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Tt=tn();if(null===we._heartbeatsCache&&(we._heartbeatsCache=yield we._heartbeatsCachePromise),we._heartbeatsCache.lastSentHeartbeatDate!==Tt&&!we._heartbeatsCache.heartbeats.some(kt=>kt.date===Tt))return we._heartbeatsCache.heartbeats.push({date:Tt,agent:Et}),we._heartbeatsCache.heartbeats=we._heartbeatsCache.heartbeats.filter(kt=>{const B=new Date(kt.date).valueOf();return Date.now()-B<=2592e6}),we._storage.overwrite(we._heartbeatsCache)})()}getHeartbeatsHeader(){var we=this;return(0,I.Z)(function*(){if(null===we._heartbeatsCache&&(yield we._heartbeatsCachePromise),null===we._heartbeatsCache||0===we._heartbeatsCache.heartbeats.length)return"";const nt=tn(),{heartbeatsToSend:Et,unsentEntries:Tt}=function ki(Be,we=1024){const nt=[];let Et=Be.slice();for(const Tt of Be){const kt=nt.find(B=>B.agent===Tt.agent);if(kt){if(kt.dates.push(Tt.date),pr(nt)>we){kt.dates.pop();break}}else if(nt.push({agent:Tt.agent,dates:[Tt.date]}),pr(nt)>we){nt.pop();break}Et=Et.slice(1)}return{heartbeatsToSend:nt,unsentEntries:Et}}(we._heartbeatsCache.heartbeats),kt=(0,ie.L)(JSON.stringify({version:2,heartbeats:Et}));return we._heartbeatsCache.lastSentHeartbeatDate=nt,Tt.length>0?(we._heartbeatsCache.heartbeats=Tt,yield we._storage.overwrite(we._heartbeatsCache)):(we._heartbeatsCache.heartbeats=[],we._storage.overwrite(we._heartbeatsCache)),kt})()}}function tn(){return(new Date).toISOString().substring(0,10)}class qt{constructor(we){this.app=we,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,I.Z)(function*(){return!!(0,ie.hl)()&&(0,ie.eu)().then(()=>!0).catch(()=>!1)})()}read(){var we=this;return(0,I.Z)(function*(){return(yield we._canUseIndexedDBPromise)&&(yield function pt(Be){return It.apply(this,arguments)}(we.app))||{heartbeats:[]}})()}overwrite(we){var nt=this;return(0,I.Z)(function*(){var Et;if(yield nt._canUseIndexedDBPromise){const kt=yield nt.read();return Ri(nt.app,{lastSentHeartbeatDate:null!==(Et=we.lastSentHeartbeatDate)&&void 0!==Et?Et:kt.lastSentHeartbeatDate,heartbeats:we.heartbeats})}})()}add(we){var nt=this;return(0,I.Z)(function*(){var Et;if(yield nt._canUseIndexedDBPromise){const kt=yield nt.read();return Ri(nt.app,{lastSentHeartbeatDate:null!==(Et=we.lastSentHeartbeatDate)&&void 0!==Et?Et:kt.lastSentHeartbeatDate,heartbeats:[...kt.heartbeats,...we.heartbeats]})}})()}}function pr(Be){return(0,ie.L)(JSON.stringify({version:2,heartbeats:Be})).length}!function Ii(Be){Yt(new X.wA("platform-logger",we=>new se(we),"PRIVATE")),Yt(new X.wA("heartbeat",we=>new Vo(we),"PRIVATE")),Fr(ce,"0.9.3",Be),Fr(ce,"0.9.3","esm2017"),Fr("fire-js","")}("")},4859:(ht,Te,O)=>{O.d(Te,{H0:()=>ce,wA:()=>k});var I=O(5861),X=O(2090);class k{constructor(j,U,K){this.name=j,this.instanceFactory=U,this.type=K,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(j){return this.instantiationMode=j,this}setMultipleInstances(j){return this.multipleInstances=j,this}setServiceProps(j){return this.serviceProps=j,this}setInstanceCreatedCallback(j){return this.onInstanceCreated=j,this}}const ie="[DEFAULT]";class ee{constructor(j,U){this.name=j,this.container=U,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(j){const U=this.normalizeInstanceIdentifier(j);if(!this.instancesDeferred.has(U)){const K=new X.BH;if(this.instancesDeferred.set(U,K),this.isInitialized(U)||this.shouldAutoInitialize())try{const Qe=this.getOrInitializeService({instanceIdentifier:U});Qe&&K.resolve(Qe)}catch{}}return this.instancesDeferred.get(U).promise}getImmediate(j){var U;const K=this.normalizeInstanceIdentifier(j?.identifier),Qe=null!==(U=j?.optional)&&void 0!==U&&U;if(!this.isInitialized(K)&&!this.shouldAutoInitialize()){if(Qe)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:K})}catch(Se){if(Qe)return null;throw Se}}getComponent(){return this.component}setComponent(j){if(j.name!==this.name)throw Error(`Mismatching Component ${j.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=j,this.shouldAutoInitialize()){if(function me(ve){return"EAGER"===ve.instantiationMode}(j))try{this.getOrInitializeService({instanceIdentifier:ie})}catch{}for(const[U,K]of this.instancesDeferred.entries()){const Qe=this.normalizeInstanceIdentifier(U);try{const Se=this.getOrInitializeService({instanceIdentifier:Qe});K.resolve(Se)}catch{}}}}clearInstance(j=ie){this.instancesDeferred.delete(j),this.instancesOptions.delete(j),this.instances.delete(j)}delete(){var j=this;return(0,I.Z)(function*(){const U=Array.from(j.instances.values());yield Promise.all([...U.filter(K=>"INTERNAL"in K).map(K=>K.INTERNAL.delete()),...U.filter(K=>"_delete"in K).map(K=>K._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(j=ie){return this.instances.has(j)}getOptions(j=ie){return this.instancesOptions.get(j)||{}}initialize(j={}){const{options:U={}}=j,K=this.normalizeInstanceIdentifier(j.instanceIdentifier);if(this.isInitialized(K))throw Error(`${this.name}(${K}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Qe=this.getOrInitializeService({instanceIdentifier:K,options:U});for(const[Se,vt]of this.instancesDeferred.entries())K===this.normalizeInstanceIdentifier(Se)&&vt.resolve(Qe);return Qe}onInit(j,U){var K;const Qe=this.normalizeInstanceIdentifier(U),Se=null!==(K=this.onInitCallbacks.get(Qe))&&void 0!==K?K:new Set;Se.add(j),this.onInitCallbacks.set(Qe,Se);const vt=this.instances.get(Qe);return vt&&j(vt,Qe),()=>{Se.delete(j)}}invokeOnInitCallbacks(j,U){const K=this.onInitCallbacks.get(U);if(K)for(const Qe of K)try{Qe(j,U)}catch{}}getOrInitializeService({instanceIdentifier:j,options:U={}}){let K=this.instances.get(j);if(!K&&this.component&&(K=this.component.instanceFactory(this.container,{instanceIdentifier:(ve=j,ve===ie?void 0:ve),options:U}),this.instances.set(j,K),this.instancesOptions.set(j,U),this.invokeOnInitCallbacks(K,j),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,j,K)}catch{}var ve;return K||null}normalizeInstanceIdentifier(j=ie){return this.component?this.component.multipleInstances?j:ie:j}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class ce{constructor(j){this.name=j,this.providers=new Map}addComponent(j){const U=this.getProvider(j.name);if(U.isComponentSet())throw new Error(`Component ${j.name} has already been registered with ${this.name}`);U.setComponent(j)}addOrOverwriteComponent(j){this.getProvider(j.name).isComponentSet()&&this.providers.delete(j.name),this.addComponent(j)}getProvider(j){if(this.providers.has(j))return this.providers.get(j);const U=new ee(j,this);return this.providers.set(j,U),U}getProviders(){return Array.from(this.providers.values())}}},1877:(ht,Te,O)=>{O.d(Te,{Am:()=>ve,Ub:()=>ce,Yd:()=>me,in:()=>X});const I=[];var X=(()=>{return(j=X||(X={}))[j.DEBUG=0]="DEBUG",j[j.VERBOSE=1]="VERBOSE",j[j.INFO=2]="INFO",j[j.WARN=3]="WARN",j[j.ERROR=4]="ERROR",j[j.SILENT=5]="SILENT",X;var j})();const k={debug:X.DEBUG,verbose:X.VERBOSE,info:X.INFO,warn:X.WARN,error:X.ERROR,silent:X.SILENT},ie=X.INFO,ee={[X.DEBUG]:"log",[X.VERBOSE]:"log",[X.INFO]:"info",[X.WARN]:"warn",[X.ERROR]:"error"},se=(j,U,...K)=>{if(U<j.logLevel)return;const Qe=(new Date).toISOString(),Se=ee[U];if(!Se)throw new Error(`Attempted to log a message with an invalid logType (value: ${U})`);console[Se](`[${Qe}]  ${j.name}:`,...K)};class me{constructor(U){this.name=U,this._logLevel=ie,this._logHandler=se,this._userLogHandler=null,I.push(this)}get logLevel(){return this._logLevel}set logLevel(U){if(!(U in X))throw new TypeError(`Invalid value "${U}" assigned to \`logLevel\``);this._logLevel=U}setLogLevel(U){this._logLevel="string"==typeof U?k[U]:U}get logHandler(){return this._logHandler}set logHandler(U){if("function"!=typeof U)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=U}get userLogHandler(){return this._userLogHandler}set userLogHandler(U){this._userLogHandler=U}debug(...U){this._userLogHandler&&this._userLogHandler(this,X.DEBUG,...U),this._logHandler(this,X.DEBUG,...U)}log(...U){this._userLogHandler&&this._userLogHandler(this,X.VERBOSE,...U),this._logHandler(this,X.VERBOSE,...U)}info(...U){this._userLogHandler&&this._userLogHandler(this,X.INFO,...U),this._logHandler(this,X.INFO,...U)}warn(...U){this._userLogHandler&&this._userLogHandler(this,X.WARN,...U),this._logHandler(this,X.WARN,...U)}error(...U){this._userLogHandler&&this._userLogHandler(this,X.ERROR,...U),this._logHandler(this,X.ERROR,...U)}}function ce(j){I.forEach(U=>{U.setLogLevel(j)})}function ve(j,U){for(const K of I){let Qe=null;U&&U.level&&(Qe=k[U.level]),K.userLogHandler=null===j?null:(Se,vt,...Ge)=>{const oe=Ge.map(xe=>{if(null==xe)return null;if("string"==typeof xe)return xe;if("number"==typeof xe||"boolean"==typeof xe)return xe.toString();if(xe instanceof Error)return xe.message;try{return JSON.stringify(xe)}catch{return null}}).filter(xe=>xe).join(" ");vt>=(Qe??Se.logLevel)&&j({level:X[vt].toLowerCase(),message:oe,args:Ge,type:Se.name})}}}},259:(ht,Te,O)=>{O.d(Te,{C6:()=>I.getApps,Mq:()=>I.getApp});var I=O(9681);(0,I.registerVersion)("firebase","9.17.1","app")},9260:(ht,Te,O)=>{O.d(Te,{Z:()=>I.Z});var I=O(3942);I.Z.registerVersion("firebase","9.17.1","app-compat")},407:(ht,Te,O)=>{O.r(Te);var I=O(5861),X=O(3942),k=O(2090),ie=O(9681),ee=O(1877),se=O(655),me=O(4859);const ve={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},K_EMAIL_SIGNIN="EMAIL_SIGNIN",K_PASSWORD_RESET="PASSWORD_RESET",K_RECOVER_EMAIL="RECOVER_EMAIL",K_REVERT_SECOND_FACTOR_ADDITION="REVERT_SECOND_FACTOR_ADDITION",K_VERIFY_AND_CHANGE_EMAIL="VERIFY_AND_CHANGE_EMAIL",K_VERIFY_EMAIL="VERIFY_EMAIL";const vt=function Qe(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},Ge=function Se(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},oe=new k.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),_e=new ee.Yd("@firebase/auth");function Me(g,...d){_e.logLevel<=ee.in.ERROR&&_e.error(`Auth (${ie.SDK_VERSION}): ${g}`,...d)}function Ee(g,...d){throw Re(g,...d)}function ye(g,...d){return Re(g,...d)}function Ce(g,d,f){const _=Object.assign(Object.assign({},Ge()),{[d]:f});return new k.LL("auth","Firebase",_).create(d,{appName:g.name})}function Le(g,d,f){if(!(d instanceof f))throw f.name!==d.constructor.name&&Ee(g,"argument-error"),Ce(g,"argument-error",`Type of ${d.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Re(g,...d){if("string"!=typeof g){const f=d[0],_=[...d.slice(1)];return _[0]&&(_[0].appName=g.name),g._errorFactory.create(f,..._)}return oe.create(g,...d)}function V(g,d,...f){if(!g)throw Re(d,...f)}function fe(g){const d="INTERNAL ASSERTION FAILED: "+g;throw Me(d),new Error(d)}function Ne(g,d){g||fe(d)}const He=new Map;function at(g){Ne(g instanceof Function,"Expected a class definition");let d=He.get(g);return d?(Ne(d instanceof g,"Instance stored in cache mismatched with class"),d):(d=new g,He.set(g,d),d)}function ue(){var g;return typeof self<"u"&&(null===(g=self.location)||void 0===g?void 0:g.href)||""}function pe(){return"http:"===be()||"https:"===be()}function be(){var g;return typeof self<"u"&&(null===(g=self.location)||void 0===g?void 0:g.protocol)||null}class qe{constructor(d,f){this.shortDelay=d,this.longDelay=f,Ne(f>d,"Short delay should be less than long delay!"),this.isMobile=(0,k.uI)()||(0,k.b$)()}get(){return function Pe(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(pe()||(0,k.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function je(g,d){Ne(g.emulator,"Emulator should always be set here");const{url:f}=g.emulator;return d?`${f}${d.startsWith("/")?d.slice(1):d}`:f}class en{static initialize(d,f,_){this.fetchImpl=d,f&&(this.headersImpl=f),_&&(this.responseImpl=_)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void fe("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void fe("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void fe("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const _t={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},Yt=new qe(3e4,6e4);function et(g,d){return g.tenantId&&!d.tenantId?Object.assign(Object.assign({},d),{tenantId:g.tenantId}):d}function Mt(g,d,f,_){return fn.apply(this,arguments)}function fn(){return(fn=(0,I.Z)(function*(g,d,f,_,S={}){return gn(g,S,(0,I.Z)(function*(){let N={},H={};_&&("GET"===d?H=_:N={body:JSON.stringify(_)});const ae=(0,k.xO)(Object.assign({key:g.config.apiKey},H)).slice(1),Fe=yield g._getAdditionalHeaders();return Fe["Content-Type"]="application/json",g.languageCode&&(Fe["X-Firebase-Locale"]=g.languageCode),en.fetch()(ts(g,g.config.apiHost,f,ae),Object.assign({method:d,headers:Fe,referrerPolicy:"no-referrer"},N))}))})).apply(this,arguments)}function gn(g,d,f){return mn.apply(this,arguments)}function mn(){return(mn=(0,I.Z)(function*(g,d,f){g._canInitEmulator=!1;const _=Object.assign(Object.assign({},_t),d);try{const S=new ii(g),N=yield Promise.race([f(),S.promise]);S.clearNetworkTimeout();const H=yield N.json();if("needConfirmation"in H)throw br(g,"account-exists-with-different-credential",H);if(N.ok&&!("errorMessage"in H))return H;{const ae=N.ok?H.errorMessage:H.error.message,[Fe,Je]=ae.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Fe)throw br(g,"credential-already-in-use",H);if("EMAIL_EXISTS"===Fe)throw br(g,"email-already-in-use",H);if("USER_DISABLED"===Fe)throw br(g,"user-disabled",H);const lt=_[Fe]||Fe.toLowerCase().replace(/[_\s]+/g,"-");if(Je)throw Ce(g,lt,Je);Ee(g,lt)}}catch(S){if(S instanceof k.ZR)throw S;Ee(g,"network-request-failed")}})).apply(this,arguments)}function yn(g,d,f,_){return Kr.apply(this,arguments)}function Kr(){return(Kr=(0,I.Z)(function*(g,d,f,_,S={}){const N=yield Mt(g,d,f,_,S);return"mfaPendingCredential"in N&&Ee(g,"multi-factor-auth-required",{_serverResponse:N}),N})).apply(this,arguments)}function ts(g,d,f,_){const S=`${d}${f}?${_}`;return g.config.emulator?je(g.config,S):`${g.config.apiScheme}://${S}`}class ii{constructor(d){this.auth=d,this.timer=null,this.promise=new Promise((f,_)=>{this.timer=setTimeout(()=>_(ye(this.auth,"network-request-failed")),Yt.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function br(g,d,f){const _={appName:g.name};f.email&&(_.email=f.email),f.phoneNumber&&(_.phoneNumber=f.phoneNumber);const S=ye(g,d,_);return S.customData._tokenResponse=f,S}function an(){return(an=(0,I.Z)(function*(g,d){return Mt(g,"POST","/v1/accounts:delete",d)})).apply(this,arguments)}function ft(){return(ft=(0,I.Z)(function*(g,d){return Mt(g,"POST","/v1/accounts:update",d)})).apply(this,arguments)}function si(){return(si=(0,I.Z)(function*(g,d){return Mt(g,"POST","/v1/accounts:lookup",d)})).apply(this,arguments)}function _n(g){if(g)try{const d=new Date(Number(g));if(!isNaN(d.getTime()))return d.toUTCString()}catch{}}function St(){return(St=(0,I.Z)(function*(g,d=!1){const f=(0,k.m9)(g),_=yield f.getIdToken(d),S=It(_);V(S&&S.exp&&S.auth_time&&S.iat,f.auth,"internal-error");const N="object"==typeof S.firebase?S.firebase:void 0,H=N?.sign_in_provider;return{claims:S,token:_,authTime:_n(pt(S.auth_time)),issuedAtTime:_n(pt(S.iat)),expirationTime:_n(pt(S.exp)),signInProvider:H||null,signInSecondFactor:N?.sign_in_second_factor||null}})).apply(this,arguments)}function pt(g){return 1e3*Number(g)}function It(g){const[d,f,_]=g.split(".");if(void 0===d||void 0===f||void 0===_)return Me("JWT malformed, contained fewer than 3 sections"),null;try{const S=(0,k.tV)(f);return S?JSON.parse(S):(Me("Failed to decode base64 JWT payload"),null)}catch(S){return Me("Caught error parsing JWT payload as JSON",S?.toString()),null}}function Cn(g,d){return vn.apply(this,arguments)}function vn(){return(vn=(0,I.Z)(function*(g,d,f=!1){if(f)return d;try{return yield d}catch(_){throw _ instanceof k.ZR&&function oi({code:g}){return"auth/user-disabled"===g||"auth/user-token-expired"===g}(_)&&g.auth.currentUser===g&&(yield g.auth.signOut()),_}})).apply(this,arguments)}class fr{constructor(d){this.user=d,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(d){var f;if(d){const _=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),_}{this.errorBackoff=3e4;const S=(null!==(f=this.user.stsTokenManager.expirationTime)&&void 0!==f?f:0)-Date.now()-3e5;return Math.max(0,S)}}schedule(d=!1){var f=this;if(!this.isRunning)return;const _=this.getInterval(d);this.timerId=setTimeout((0,I.Z)(function*(){yield f.iteration()}),_)}iteration(){var d=this;return(0,I.Z)(function*(){try{yield d.user.getIdToken(!0)}catch(f){return void("auth/network-request-failed"===f?.code&&d.schedule(!0))}d.schedule()})()}}class Vo{constructor(d,f){this.createdAt=d,this.lastLoginAt=f,this._initializeTime()}_initializeTime(){this.lastSignInTime=_n(this.lastLoginAt),this.creationTime=_n(this.createdAt)}_copy(d){this.createdAt=d.createdAt,this.lastLoginAt=d.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function tn(g){return ki.apply(this,arguments)}function ki(){return ki=(0,I.Z)(function*(g){var d;const f=g.auth,_=yield g.getIdToken(),S=yield Cn(g,function Ni(g,d){return si.apply(this,arguments)}(f,{idToken:_}));V(S?.users.length,f,"internal-error");const N=S.users[0];g._notifyReloadListener(N);const H=null!==(d=N.providerUserInfo)&&void 0!==d&&d.length?function Be(g){return g.map(d=>{var{providerId:f}=d,_=(0,se._T)(d,["providerId"]);return{providerId:f,uid:_.rawId||"",displayName:_.displayName||null,email:_.email||null,phoneNumber:_.phoneNumber||null,photoURL:_.photoUrl||null}})}(N.providerUserInfo):[],ae=function Ii(g,d){return[...g.filter(_=>!d.some(S=>S.providerId===_.providerId)),...d]}(g.providerData,H),lt=!!g.isAnonymous&&!(g.email&&N.passwordHash||ae?.length),ut={uid:N.localId,displayName:N.displayName||null,photoURL:N.photoUrl||null,email:N.email||null,emailVerified:N.emailVerified||!1,phoneNumber:N.phoneNumber||null,tenantId:N.tenantId||null,providerData:ae,metadata:new Vo(N.createdAt,N.lastLoginAt),isAnonymous:lt};Object.assign(g,ut)}),ki.apply(this,arguments)}function pr(){return(pr=(0,I.Z)(function*(g){const d=(0,k.m9)(g);yield tn(d),yield d.auth._persistUserIfCurrent(d),d.auth._notifyListenersIfCurrent(d)})).apply(this,arguments)}function nt(){return(nt=(0,I.Z)(function*(g,d){const f=yield gn(g,{},(0,I.Z)(function*(){const _=(0,k.xO)({grant_type:"refresh_token",refresh_token:d}).slice(1),{tokenApiHost:S,apiKey:N}=g.config,H=ts(g,S,"/v1/token",`key=${N}`),ae=yield g._getAdditionalHeaders();return ae["Content-Type"]="application/x-www-form-urlencoded",en.fetch()(H,{method:"POST",headers:ae,body:_})}));return{accessToken:f.access_token,expiresIn:f.expires_in,refreshToken:f.refresh_token}})).apply(this,arguments)}class Et{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(d){V(d.idToken,"internal-error"),V(typeof d.idToken<"u","internal-error"),V(typeof d.refreshToken<"u","internal-error");const f="expiresIn"in d&&typeof d.expiresIn<"u"?Number(d.expiresIn):function Ri(g){const d=It(g);return V(d,"internal-error"),V(typeof d.exp<"u","internal-error"),V(typeof d.iat<"u","internal-error"),Number(d.exp)-Number(d.iat)}(d.idToken);this.updateTokensAndExpiration(d.idToken,d.refreshToken,f)}getToken(d,f=!1){var _=this;return(0,I.Z)(function*(){return V(!_.accessToken||_.refreshToken,d,"user-token-expired"),f||!_.accessToken||_.isExpired?_.refreshToken?(yield _.refresh(d,_.refreshToken),_.accessToken):null:_.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(d,f){var _=this;return(0,I.Z)(function*(){const{accessToken:S,refreshToken:N,expiresIn:H}=yield function we(g,d){return nt.apply(this,arguments)}(d,f);_.updateTokensAndExpiration(S,N,Number(H))})()}updateTokensAndExpiration(d,f,_){this.refreshToken=f||null,this.accessToken=d||null,this.expirationTime=Date.now()+1e3*_}static fromJSON(d,f){const{refreshToken:_,accessToken:S,expirationTime:N}=f,H=new Et;return _&&(V("string"==typeof _,"internal-error",{appName:d}),H.refreshToken=_),S&&(V("string"==typeof S,"internal-error",{appName:d}),H.accessToken=S),N&&(V("number"==typeof N,"internal-error",{appName:d}),H.expirationTime=N),H}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(d){this.accessToken=d.accessToken,this.refreshToken=d.refreshToken,this.expirationTime=d.expirationTime}_clone(){return Object.assign(new Et,this.toJSON())}_performRefresh(){return fe("not implemented")}}function Tt(g,d){V("string"==typeof g||typeof g>"u","internal-error",{appName:d})}class kt{constructor(d){var{uid:f,auth:_,stsTokenManager:S}=d,N=(0,se._T)(d,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new fr(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=f,this.auth=_,this.stsTokenManager=S,this.accessToken=S.accessToken,this.displayName=N.displayName||null,this.email=N.email||null,this.emailVerified=N.emailVerified||!1,this.phoneNumber=N.phoneNumber||null,this.photoURL=N.photoURL||null,this.isAnonymous=N.isAnonymous||!1,this.tenantId=N.tenantId||null,this.providerData=N.providerData?[...N.providerData]:[],this.metadata=new Vo(N.createdAt||void 0,N.lastLoginAt||void 0)}getIdToken(d){var f=this;return(0,I.Z)(function*(){const _=yield Cn(f,f.stsTokenManager.getToken(f.auth,d));return V(_,f.auth,"internal-error"),f.accessToken!==_&&(f.accessToken=_,yield f.auth._persistUserIfCurrent(f),f.auth._notifyListenersIfCurrent(f)),_})()}getIdTokenResult(d){return function ns(g){return St.apply(this,arguments)}(this,d)}reload(){return function qt(g){return pr.apply(this,arguments)}(this)}_assign(d){this!==d&&(V(this.uid===d.uid,this.auth,"internal-error"),this.displayName=d.displayName,this.photoURL=d.photoURL,this.email=d.email,this.emailVerified=d.emailVerified,this.phoneNumber=d.phoneNumber,this.isAnonymous=d.isAnonymous,this.tenantId=d.tenantId,this.providerData=d.providerData.map(f=>Object.assign({},f)),this.metadata._copy(d.metadata),this.stsTokenManager._assign(d.stsTokenManager))}_clone(d){return new kt(Object.assign(Object.assign({},this),{auth:d,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(d){V(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=d,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(d){this.reloadListener?this.reloadListener(d):this.reloadUserInfo=d}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(d,f=!1){var _=this;return(0,I.Z)(function*(){let S=!1;d.idToken&&d.idToken!==_.stsTokenManager.accessToken&&(_.stsTokenManager.updateFromServerResponse(d),S=!0),f&&(yield tn(_)),yield _.auth._persistUserIfCurrent(_),S&&_.auth._notifyListenersIfCurrent(_)})()}delete(){var d=this;return(0,I.Z)(function*(){const f=yield d.getIdToken();return yield Cn(d,function Es(g,d){return an.apply(this,arguments)}(d.auth,{idToken:f})),d.stsTokenManager.clearRefreshToken(),d.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(d=>Object.assign({},d)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(d,f){var _,S,N,H,ae,Fe,Je,lt;const ut=null!==(_=f.displayName)&&void 0!==_?_:void 0,Xn=null!==(S=f.email)&&void 0!==S?S:void 0,Gi=null!==(N=f.phoneNumber)&&void 0!==N?N:void 0,Zc=null!==(H=f.photoURL)&&void 0!==H?H:void 0,rf=null!==(ae=f.tenantId)&&void 0!==ae?ae:void 0,Yc=null!==(Fe=f._redirectEventId)&&void 0!==Fe?Fe:void 0,kr=null!==(Je=f.createdAt)&&void 0!==Je?Je:void 0,Xr=null!==(lt=f.lastLoginAt)&&void 0!==lt?lt:void 0,{uid:xa,emailVerified:Cu,isAnonymous:Ed,providerData:pn,stsTokenManager:wd}=f;V(xa&&wd,d,"internal-error");const Dd=Et.fromJSON(this.name,wd);V("string"==typeof xa,d,"internal-error"),Tt(ut,d.name),Tt(Xn,d.name),V("boolean"==typeof Cu,d,"internal-error"),V("boolean"==typeof Ed,d,"internal-error"),Tt(Gi,d.name),Tt(Zc,d.name),Tt(rf,d.name),Tt(Yc,d.name),Tt(kr,d.name),Tt(Xr,d.name);const Fs=new kt({uid:xa,auth:d,email:Xn,emailVerified:Cu,displayName:ut,isAnonymous:Ed,photoURL:Zc,phoneNumber:Gi,tenantId:rf,stsTokenManager:Dd,createdAt:kr,lastLoginAt:Xr});return pn&&Array.isArray(pn)&&(Fs.providerData=pn.map(sf=>Object.assign({},sf))),Yc&&(Fs._redirectEventId=Yc),Fs}static _fromIdTokenResponse(d,f,_=!1){return(0,I.Z)(function*(){const S=new Et;S.updateFromServerResponse(f);const N=new kt({uid:f.localId,auth:d,stsTokenManager:S,isAnonymous:_});return yield tn(N),N})()}}const F=(()=>{class g{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,I.Z)(function*(){return!0})()}_set(f,_){var S=this;return(0,I.Z)(function*(){S.storage[f]=_})()}_get(f){var _=this;return(0,I.Z)(function*(){const S=_.storage[f];return void 0===S?null:S})()}_remove(f){var _=this;return(0,I.Z)(function*(){delete _.storage[f]})()}_addListener(f,_){}_removeListener(f,_){}}return g.type="NONE",g})();function G(g,d,f){return`firebase:${g}:${d}:${f}`}class he{constructor(d,f,_){this.persistence=d,this.auth=f,this.userKey=_;const{config:S,name:N}=this.auth;this.fullUserKey=G(this.userKey,S.apiKey,N),this.fullPersistenceKey=G("persistence",S.apiKey,N),this.boundEventHandler=f._onStorageEvent.bind(f),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(d){return this.persistence._set(this.fullUserKey,d.toJSON())}getCurrentUser(){var d=this;return(0,I.Z)(function*(){const f=yield d.persistence._get(d.fullUserKey);return f?kt._fromJSON(d.auth,f):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(d){var f=this;return(0,I.Z)(function*(){if(f.persistence===d)return;const _=yield f.getCurrentUser();return yield f.removeCurrentUser(),f.persistence=d,_?f.setCurrentUser(_):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(d,f,_="authUser"){return(0,I.Z)(function*(){if(!f.length)return new he(at(F),d,_);const S=(yield Promise.all(f.map(function(){var Je=(0,I.Z)(function*(lt){if(yield lt._isAvailable())return lt});return function(lt){return Je.apply(this,arguments)}}()))).filter(Je=>Je);let N=S[0]||at(F);const H=G(_,d.config.apiKey,d.name);let ae=null;for(const Je of f)try{const lt=yield Je._get(H);if(lt){const ut=kt._fromJSON(d,lt);Je!==N&&(ae=ut),N=Je;break}}catch{}const Fe=S.filter(Je=>Je._shouldAllowMigration);return N._shouldAllowMigration&&Fe.length?(N=Fe[0],ae&&(yield N._set(H,ae.toJSON())),yield Promise.all(f.map(function(){var Je=(0,I.Z)(function*(lt){if(lt!==N)try{yield lt._remove(H)}catch{}});return function(lt){return Je.apply(this,arguments)}}())),new he(N,d,_)):new he(N,d,_)})()}}function Q(g){const d=g.toLowerCase();if(d.includes("opera/")||d.includes("opr/")||d.includes("opios/"))return"Opera";if(In(d))return"IEMobile";if(d.includes("msie")||d.includes("trident/"))return"IE";if(d.includes("edge/"))return"Edge";if(st(d))return"Firefox";if(d.includes("silk/"))return"Silk";if(Yn(d))return"Blackberry";if(Vt(d))return"Webos";if(Pt(d))return"Safari";if((d.includes("chrome/")||$t(d))&&!d.includes("edge/"))return"Chrome";if(yt(d))return"Android";{const _=g.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===_?.length)return _[1]}return"Other"}function st(g=(0,k.z$)()){return/firefox\//i.test(g)}function Pt(g=(0,k.z$)()){const d=g.toLowerCase();return d.includes("safari/")&&!d.includes("chrome/")&&!d.includes("crios/")&&!d.includes("android")}function $t(g=(0,k.z$)()){return/crios\//i.test(g)}function In(g=(0,k.z$)()){return/iemobile/i.test(g)}function yt(g=(0,k.z$)()){return/android/i.test(g)}function Yn(g=(0,k.z$)()){return/blackberry/i.test(g)}function Vt(g=(0,k.z$)()){return/webos/i.test(g)}function Hn(g=(0,k.z$)()){return/iphone|ipad|ipod/i.test(g)||/macintosh/i.test(g)&&/mobile/i.test(g)}function vh(g=(0,k.z$)()){return Hn(g)||yt(g)||Vt(g)||Yn(g)||/windows phone/i.test(g)||In(g)}function ja(g,d=[]){let f;switch(g){case"Browser":f=Q((0,k.z$)());break;case"Worker":f=`${Q((0,k.z$)())}-${g}`;break;default:f=g}const _=d.length?d.join(","):"FirebaseCore-web";return`${f}/JsCore/${ie.SDK_VERSION}/${_}`}class tc{constructor(d){this.auth=d,this.queue=[]}pushCallback(d,f){const _=N=>new Promise((H,ae)=>{try{H(d(N))}catch(Fe){ae(Fe)}});_.onAbort=f,this.queue.push(_);const S=this.queue.length-1;return()=>{this.queue[S]=()=>Promise.resolve()}}runMiddleware(d){var f=this;return(0,I.Z)(function*(){if(f.auth.currentUser===d)return;const _=[];try{for(const S of f.queue)yield S(d),S.onAbort&&_.push(S.onAbort)}catch(S){_.reverse();for(const N of _)try{N()}catch{}throw f.auth._errorFactory.create("login-blocked",{originalMessage:S?.message})}})()}}class kl{constructor(d,f,_){this.app=d,this.heartbeatServiceProvider=f,this.config=_,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Pl(this),this.idTokenSubscription=new Pl(this),this.beforeStateQueue=new tc(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=oe,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=d.name,this.clientVersion=_.sdkClientVersion}_initializeWithPersistence(d,f){var _=this;return f&&(this._popupRedirectResolver=at(f)),this._initializationPromise=this.queue((0,I.Z)(function*(){var S,N;if(!_._deleted&&(_.persistenceManager=yield he.create(_,d),!_._deleted)){if(null!==(S=_._popupRedirectResolver)&&void 0!==S&&S._shouldInitProactively)try{yield _._popupRedirectResolver._initialize(_)}catch{}yield _.initializeCurrentUser(f),_.lastNotifiedUid=(null===(N=_.currentUser)||void 0===N?void 0:N.uid)||null,!_._deleted&&(_._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var d=this;return(0,I.Z)(function*(){if(d._deleted)return;const f=yield d.assertedPersistence.getCurrentUser();if(d.currentUser||f){if(d.currentUser&&f&&d.currentUser.uid===f.uid)return d._currentUser._assign(f),void(yield d.currentUser.getIdToken());yield d._updateCurrentUser(f,!0)}})()}initializeCurrentUser(d){var f=this;return(0,I.Z)(function*(){var _;const S=yield f.assertedPersistence.getCurrentUser();let N=S,H=!1;if(d&&f.config.authDomain){yield f.getOrInitRedirectPersistenceManager();const ae=null===(_=f.redirectUser)||void 0===_?void 0:_._redirectEventId,Fe=N?._redirectEventId,Je=yield f.tryRedirectSignIn(d);(!ae||ae===Fe)&&Je?.user&&(N=Je.user,H=!0)}if(!N)return f.directlySetCurrentUser(null);if(!N._redirectEventId){if(H)try{yield f.beforeStateQueue.runMiddleware(N)}catch(ae){N=S,f._popupRedirectResolver._overrideRedirectResult(f,()=>Promise.reject(ae))}return N?f.reloadAndSetCurrentUserOrClear(N):f.directlySetCurrentUser(null)}return V(f._popupRedirectResolver,f,"argument-error"),yield f.getOrInitRedirectPersistenceManager(),f.redirectUser&&f.redirectUser._redirectEventId===N._redirectEventId?f.directlySetCurrentUser(N):f.reloadAndSetCurrentUserOrClear(N)})()}tryRedirectSignIn(d){var f=this;return(0,I.Z)(function*(){let _=null;try{_=yield f._popupRedirectResolver._completeRedirectFn(f,d,!0)}catch{yield f._setRedirectUser(null)}return _})()}reloadAndSetCurrentUserOrClear(d){var f=this;return(0,I.Z)(function*(){try{yield tn(d)}catch(_){if("auth/network-request-failed"!==_?.code)return f.directlySetCurrentUser(null)}return f.directlySetCurrentUser(d)})()}useDeviceLanguage(){this.languageCode=function Ve(){if(typeof navigator>"u")return null;const g=navigator;return g.languages&&g.languages[0]||g.language||null}()}_delete(){var d=this;return(0,I.Z)(function*(){d._deleted=!0})()}updateCurrentUser(d){var f=this;return(0,I.Z)(function*(){const _=d?(0,k.m9)(d):null;return _&&V(_.auth.config.apiKey===f.config.apiKey,f,"invalid-user-token"),f._updateCurrentUser(_&&_._clone(f))})()}_updateCurrentUser(d,f=!1){var _=this;return(0,I.Z)(function*(){if(!_._deleted)return d&&V(_.tenantId===d.tenantId,_,"tenant-id-mismatch"),f||(yield _.beforeStateQueue.runMiddleware(d)),_.queue((0,I.Z)(function*(){yield _.directlySetCurrentUser(d),_.notifyAuthListeners()}))})()}signOut(){var d=this;return(0,I.Z)(function*(){return yield d.beforeStateQueue.runMiddleware(null),(d.redirectPersistenceManager||d._popupRedirectResolver)&&(yield d._setRedirectUser(null)),d._updateCurrentUser(null,!0)})()}setPersistence(d){var f=this;return this.queue((0,I.Z)(function*(){yield f.assertedPersistence.setPersistence(at(d))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(d){this._errorFactory=new k.LL("auth","Firebase",d())}onAuthStateChanged(d,f,_){return this.registerStateListener(this.authStateSubscription,d,f,_)}beforeAuthStateChanged(d,f){return this.beforeStateQueue.pushCallback(d,f)}onIdTokenChanged(d,f,_){return this.registerStateListener(this.idTokenSubscription,d,f,_)}toJSON(){var d;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(d=this._currentUser)||void 0===d?void 0:d.toJSON()}}_setRedirectUser(d,f){var _=this;return(0,I.Z)(function*(){const S=yield _.getOrInitRedirectPersistenceManager(f);return null===d?S.removeCurrentUser():S.setCurrentUser(d)})()}getOrInitRedirectPersistenceManager(d){var f=this;return(0,I.Z)(function*(){if(!f.redirectPersistenceManager){const _=d&&at(d)||f._popupRedirectResolver;V(_,f,"argument-error"),f.redirectPersistenceManager=yield he.create(f,[at(_._redirectPersistence)],"redirectUser"),f.redirectUser=yield f.redirectPersistenceManager.getCurrentUser()}return f.redirectPersistenceManager})()}_redirectUserForId(d){var f=this;return(0,I.Z)(function*(){var _,S;return f._isInitialized&&(yield f.queue((0,I.Z)(function*(){}))),(null===(_=f._currentUser)||void 0===_?void 0:_._redirectEventId)===d?f._currentUser:(null===(S=f.redirectUser)||void 0===S?void 0:S._redirectEventId)===d?f.redirectUser:null})()}_persistUserIfCurrent(d){var f=this;return(0,I.Z)(function*(){if(d===f.currentUser)return f.queue((0,I.Z)(function*(){return f.directlySetCurrentUser(d)}))})()}_notifyListenersIfCurrent(d){d===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var d,f;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const _=null!==(f=null===(d=this.currentUser)||void 0===d?void 0:d.uid)&&void 0!==f?f:null;this.lastNotifiedUid!==_&&(this.lastNotifiedUid=_,this.authStateSubscription.next(this.currentUser))}registerStateListener(d,f,_,S){if(this._deleted)return()=>{};const N="function"==typeof f?f:f.next.bind(f),H=this._isInitialized?Promise.resolve():this._initializationPromise;return V(H,this,"internal-error"),H.then(()=>N(this.currentUser)),"function"==typeof f?d.addObserver(f,_,S):d.addObserver(f)}directlySetCurrentUser(d){var f=this;return(0,I.Z)(function*(){f.currentUser&&f.currentUser!==d&&f._currentUser._stopProactiveRefresh(),d&&f.isProactiveRefreshEnabled&&d._startProactiveRefresh(),f.currentUser=d,d?yield f.assertedPersistence.setCurrentUser(d):yield f.assertedPersistence.removeCurrentUser()})()}queue(d){return this.operations=this.operations.then(d,d),this.operations}get assertedPersistence(){return V(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(d){!d||this.frameworks.includes(d)||(this.frameworks.push(d),this.frameworks.sort(),this.clientVersion=ja(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var d=this;return(0,I.Z)(function*(){var f;const _={"X-Client-Version":d.clientVersion};d.app.options.appId&&(_["X-Firebase-gmpid"]=d.app.options.appId);const S=yield null===(f=d.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===f?void 0:f.getHeartbeatsHeader();return S&&(_["X-Firebase-Client"]=S),_})()}}function En(g){return(0,k.m9)(g)}class Pl{constructor(d){this.auth=d,this.observer=null,this.addObserver=(0,k.ne)(f=>this.observer=f)}get next(){return V(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function jo(g){const d=g.indexOf(":");return d<0?"":g.substr(0,d+1)}function Kt(g){if(!g)return null;const d=Number(g);return isNaN(d)?null:d}class Rn{constructor(d,f){this.providerId=d,this.signInMethod=f}toJSON(){return fe("not implemented")}_getIdTokenResponse(d){return fe("not implemented")}_linkToIdToken(d,f){return fe("not implemented")}_getReauthenticationResolver(d){return fe("not implemented")}}function zn(g,d){return mr.apply(this,arguments)}function mr(){return(mr=(0,I.Z)(function*(g,d){return Mt(g,"POST","/v1/accounts:resetPassword",et(g,d))})).apply(this,arguments)}function Zr(g,d){return Ke.apply(this,arguments)}function Ke(){return(Ke=(0,I.Z)(function*(g,d){return Mt(g,"POST","/v1/accounts:update",d)})).apply(this,arguments)}function cn(){return(cn=(0,I.Z)(function*(g,d){return Mt(g,"POST","/v1/accounts:update",et(g,d))})).apply(this,arguments)}function Pi(){return(Pi=(0,I.Z)(function*(g,d){return yn(g,"POST","/v1/accounts:signInWithPassword",et(g,d))})).apply(this,arguments)}function Bn(g,d){return ai.apply(this,arguments)}function ai(){return(ai=(0,I.Z)(function*(g,d){return Mt(g,"POST","/v1/accounts:sendOobCode",et(g,d))})).apply(this,arguments)}function Qs(){return(Qs=(0,I.Z)(function*(g,d){return Bn(g,d)})).apply(this,arguments)}function Ot(){return(Ot=(0,I.Z)(function*(g,d){return Bn(g,d)})).apply(this,arguments)}function rs(){return(rs=(0,I.Z)(function*(g,d){return Bn(g,d)})).apply(this,arguments)}function ui(){return(ui=(0,I.Z)(function*(g,d){return Bn(g,d)})).apply(this,arguments)}function Js(){return(Js=(0,I.Z)(function*(g,d){return yn(g,"POST","/v1/accounts:signInWithEmailLink",et(g,d))})).apply(this,arguments)}function ci(){return(ci=(0,I.Z)(function*(g,d){return yn(g,"POST","/v1/accounts:signInWithEmailLink",et(g,d))})).apply(this,arguments)}class is extends Rn{constructor(d,f,_,S=null){super("password",_),this._email=d,this._password=f,this._tenantId=S}static _fromEmailAndPassword(d,f){return new is(d,f,"password")}static _fromEmailAndCode(d,f,_=null){return new is(d,f,"emailLink",_)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(d){const f="string"==typeof d?JSON.parse(d):d;if(f?.email&&f?.password){if("password"===f.signInMethod)return this._fromEmailAndPassword(f.email,f.password);if("emailLink"===f.signInMethod)return this._fromEmailAndCode(f.email,f.password,f.tenantId)}return null}_getIdTokenResponse(d){var f=this;return(0,I.Z)(function*(){switch(f.signInMethod){case"password":return function Cr(g,d){return Pi.apply(this,arguments)}(d,{returnSecureToken:!0,email:f._email,password:f._password});case"emailLink":return function yr(g,d){return Js.apply(this,arguments)}(d,{email:f._email,oobCode:f._password});default:Ee(d,"internal-error")}})()}_linkToIdToken(d,f){var _=this;return(0,I.Z)(function*(){switch(_.signInMethod){case"password":return Zr(d,{idToken:f,returnSecureToken:!0,email:_._email,password:_._password});case"emailLink":return function ws(g,d){return ci.apply(this,arguments)}(d,{idToken:f,email:_._email,oobCode:_._password});default:Ee(d,"internal-error")}})()}_getReauthenticationResolver(d){return this._getIdTokenResponse(d)}}function Oi(g,d){return rn.apply(this,arguments)}function rn(){return(rn=(0,I.Z)(function*(g,d){return yn(g,"POST","/v1/accounts:signInWithIdp",et(g,d))})).apply(this,arguments)}class Yr extends Rn{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(d){const f=new Yr(d.providerId,d.signInMethod);return d.idToken||d.accessToken?(d.idToken&&(f.idToken=d.idToken),d.accessToken&&(f.accessToken=d.accessToken),d.nonce&&!d.pendingToken&&(f.nonce=d.nonce),d.pendingToken&&(f.pendingToken=d.pendingToken)):d.oauthToken&&d.oauthTokenSecret?(f.accessToken=d.oauthToken,f.secret=d.oauthTokenSecret):Ee("argument-error"),f}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(d){const f="string"==typeof d?JSON.parse(d):d,{providerId:_,signInMethod:S}=f,N=(0,se._T)(f,["providerId","signInMethod"]);if(!_||!S)return null;const H=new Yr(_,S);return H.idToken=N.idToken||void 0,H.accessToken=N.accessToken||void 0,H.secret=N.secret,H.nonce=N.nonce,H.pendingToken=N.pendingToken||null,H}_getIdTokenResponse(d){return Oi(d,this.buildRequest())}_linkToIdToken(d,f){const _=this.buildRequest();return _.idToken=f,Oi(d,_)}_getReauthenticationResolver(d){const f=this.buildRequest();return f.autoCreate=!1,Oi(d,f)}buildRequest(){const d={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)d.pendingToken=this.pendingToken;else{const f={};this.idToken&&(f.id_token=this.idToken),this.accessToken&&(f.access_token=this.accessToken),this.secret&&(f.oauth_token_secret=this.secret),f.providerId=this.providerId,this.nonce&&!this.pendingToken&&(f.nonce=this.nonce),d.postBody=(0,k.xO)(f)}return d}}function eo(){return(eo=(0,I.Z)(function*(g,d){return Mt(g,"POST","/v1/accounts:sendVerificationCode",et(g,d))})).apply(this,arguments)}function Sr(){return(Sr=(0,I.Z)(function*(g,d){return yn(g,"POST","/v1/accounts:signInWithPhoneNumber",et(g,d))})).apply(this,arguments)}function Ll(){return(Ll=(0,I.Z)(function*(g,d){const f=yield yn(g,"POST","/v1/accounts:signInWithPhoneNumber",et(g,d));if(f.temporaryProof)throw br(g,"account-exists-with-different-credential",f);return f})).apply(this,arguments)}const Vr={USER_NOT_FOUND:"user-not-found"};function Ho(){return(Ho=(0,I.Z)(function*(g,d){return yn(g,"POST","/v1/accounts:signInWithPhoneNumber",et(g,Object.assign(Object.assign({},d),{operation:"REAUTH"})),Vr)})).apply(this,arguments)}class di extends Rn{constructor(d){super("phone","phone"),this.params=d}static _fromVerification(d,f){return new di({verificationId:d,verificationCode:f})}static _fromTokenResponse(d,f){return new di({phoneNumber:d,temporaryProof:f})}_getIdTokenResponse(d){return function Ds(g,d){return Sr.apply(this,arguments)}(d,this._makeVerificationRequest())}_linkToIdToken(d,f){return function _r(g,d){return Ll.apply(this,arguments)}(d,Object.assign({idToken:f},this._makeVerificationRequest()))}_getReauthenticationResolver(d){return function li(g,d){return Ho.apply(this,arguments)}(d,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:d,phoneNumber:f,verificationId:_,verificationCode:S}=this.params;return d&&f?{temporaryProof:d,phoneNumber:f}:{sessionInfo:_,code:S}}toJSON(){const d={providerId:this.providerId};return this.params.phoneNumber&&(d.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(d.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(d.verificationCode=this.params.verificationCode),this.params.verificationId&&(d.verificationId=this.params.verificationId),d}static fromJSON(d){"string"==typeof d&&(d=JSON.parse(d));const{verificationId:f,verificationCode:_,phoneNumber:S,temporaryProof:N}=d;return _||f||S||N?new di({verificationId:f,verificationCode:_,phoneNumber:S,temporaryProof:N}):null}}class Go{constructor(d){var f,_,S,N,H,ae;const Fe=(0,k.zd)((0,k.pd)(d)),Je=null!==(f=Fe.apiKey)&&void 0!==f?f:null,lt=null!==(_=Fe.oobCode)&&void 0!==_?_:null,ut=function sc(g){switch(g){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(S=Fe.mode)&&void 0!==S?S:null);V(Je&&lt&&ut,"argument-error"),this.apiKey=Je,this.operation=ut,this.code=lt,this.continueUrl=null!==(N=Fe.continueUrl)&&void 0!==N?N:null,this.languageCode=null!==(H=Fe.languageCode)&&void 0!==H?H:null,this.tenantId=null!==(ae=Fe.tenantId)&&void 0!==ae?ae:null}static parseLink(d){const f=function Br(g){const d=(0,k.zd)((0,k.pd)(g)).link,f=d?(0,k.zd)((0,k.pd)(d)).deep_link_id:null,_=(0,k.zd)((0,k.pd)(g)).deep_link_id;return(_?(0,k.zd)((0,k.pd)(_)).link:null)||_||f||d||g}(d);try{return new Go(f)}catch{return null}}}let oc=(()=>{class g{constructor(){this.providerId=g.PROVIDER_ID}static credential(f,_){return is._fromEmailAndPassword(f,_)}static credentialWithLink(f,_){const S=Go.parseLink(_);return V(S,"argument-error"),is._fromEmailAndCode(f,S.code,S.tenantId)}}return g.PROVIDER_ID="password",g.EMAIL_PASSWORD_SIGN_IN_METHOD="password",g.EMAIL_LINK_SIGN_IN_METHOD="emailLink",g})();class Li{constructor(d){this.providerId=d,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(d){this.defaultLanguageCode=d}setCustomParameters(d){return this.customParameters=d,this}getCustomParameters(){return this.customParameters}}class to extends Li{constructor(){super(...arguments),this.scopes=[]}addScope(d){return this.scopes.includes(d)||this.scopes.push(d),this}getScopes(){return[...this.scopes]}}class zo extends to{static credentialFromJSON(d){const f="string"==typeof d?JSON.parse(d):d;return V("providerId"in f&&"signInMethod"in f,"argument-error"),Yr._fromParams(f)}credential(d){return this._credential(Object.assign(Object.assign({},d),{nonce:d.rawNonce}))}_credential(d){return V(d.idToken||d.accessToken,"argument-error"),Yr._fromParams(Object.assign(Object.assign({},d),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(d){return zo.oauthCredentialFromTaggedObject(d)}static credentialFromError(d){return zo.oauthCredentialFromTaggedObject(d.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:d}){if(!d)return null;const{oauthIdToken:f,oauthAccessToken:_,oauthTokenSecret:S,pendingToken:N,nonce:H,providerId:ae}=d;if(!_&&!S&&!f&&!N||!ae)return null;try{return new zo(ae)._credential({idToken:f,accessToken:_,nonce:H,pendingToken:N})}catch{return null}}}let ac=(()=>{class g extends to{constructor(){super("facebook.com")}static credential(f){return Yr._fromParams({providerId:g.PROVIDER_ID,signInMethod:g.FACEBOOK_SIGN_IN_METHOD,accessToken:f})}static credentialFromResult(f){return g.credentialFromTaggedObject(f)}static credentialFromError(f){return g.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f||!("oauthAccessToken"in f)||!f.oauthAccessToken)return null;try{return g.credential(f.oauthAccessToken)}catch{return null}}}return g.FACEBOOK_SIGN_IN_METHOD="facebook.com",g.PROVIDER_ID="facebook.com",g})(),Eh=(()=>{class g extends to{constructor(){super("google.com"),this.addScope("profile")}static credential(f,_){return Yr._fromParams({providerId:g.PROVIDER_ID,signInMethod:g.GOOGLE_SIGN_IN_METHOD,idToken:f,accessToken:_})}static credentialFromResult(f){return g.credentialFromTaggedObject(f)}static credentialFromError(f){return g.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{oauthIdToken:_,oauthAccessToken:S}=f;if(!_&&!S)return null;try{return g.credential(_,S)}catch{return null}}}return g.GOOGLE_SIGN_IN_METHOD="google.com",g.PROVIDER_ID="google.com",g})(),wh=(()=>{class g extends to{constructor(){super("github.com")}static credential(f){return Yr._fromParams({providerId:g.PROVIDER_ID,signInMethod:g.GITHUB_SIGN_IN_METHOD,accessToken:f})}static credentialFromResult(f){return g.credentialFromTaggedObject(f)}static credentialFromError(f){return g.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f||!("oauthAccessToken"in f)||!f.oauthAccessToken)return null;try{return g.credential(f.oauthAccessToken)}catch{return null}}}return g.GITHUB_SIGN_IN_METHOD="github.com",g.PROVIDER_ID="github.com",g})();class no extends Rn{constructor(d,f){super(d,d),this.pendingToken=f}_getIdTokenResponse(d){return Oi(d,this.buildRequest())}_linkToIdToken(d,f){const _=this.buildRequest();return _.idToken=f,Oi(d,_)}_getReauthenticationResolver(d){const f=this.buildRequest();return f.autoCreate=!1,Oi(d,f)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(d){const f="string"==typeof d?JSON.parse(d):d,{providerId:_,signInMethod:S,pendingToken:N}=f;return _&&S&&N&&_===S?new no(_,N):null}static _create(d,f){return new no(d,f)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class wi extends Li{constructor(d){V(d.startsWith("saml."),"argument-error"),super(d)}static credentialFromResult(d){return wi.samlCredentialFromTaggedObject(d)}static credentialFromError(d){return wi.samlCredentialFromTaggedObject(d.customData||{})}static credentialFromJSON(d){const f=no.fromJSON(d);return V(f,"argument-error"),f}static samlCredentialFromTaggedObject({_tokenResponse:d}){if(!d)return null;const{pendingToken:f,providerId:_}=d;if(!f||!_)return null;try{return no._create(_,f)}catch{return null}}}let ap=(()=>{class g extends to{constructor(){super("twitter.com")}static credential(f,_){return Yr._fromParams({providerId:g.PROVIDER_ID,signInMethod:g.TWITTER_SIGN_IN_METHOD,oauthToken:f,oauthTokenSecret:_})}static credentialFromResult(f){return g.credentialFromTaggedObject(f)}static credentialFromError(f){return g.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{oauthAccessToken:_,oauthTokenSecret:S}=f;if(!_||!S)return null;try{return g.credential(_,S)}catch{return null}}}return g.TWITTER_SIGN_IN_METHOD="twitter.com",g.PROVIDER_ID="twitter.com",g})();function uc(g,d){return cc.apply(this,arguments)}function cc(){return(cc=(0,I.Z)(function*(g,d){return yn(g,"POST","/v1/accounts:signUp",et(g,d))})).apply(this,arguments)}class Ar{constructor(d){this.user=d.user,this.providerId=d.providerId,this._tokenResponse=d._tokenResponse,this.operationType=d.operationType}static _fromIdTokenResponse(d,f,_,S=!1){return(0,I.Z)(function*(){const N=yield kt._fromIdTokenResponse(d,_,S),H=lc(_);return new Ar({user:N,providerId:H,_tokenResponse:_,operationType:f})})()}static _forOperation(d,f,_){return(0,I.Z)(function*(){yield d._updateTokensIfNecessary(_,!0);const S=lc(_);return new Ar({user:d,providerId:S,_tokenResponse:_,operationType:f})})()}}function lc(g){return g.providerId?g.providerId:"phoneNumber"in g?"phone":null}function Dh(){return(Dh=(0,I.Z)(function*(g){var d;const f=En(g);if(yield f._initializationPromise,null!==(d=f.currentUser)&&void 0!==d&&d.isAnonymous)return new Ar({user:f.currentUser,providerId:null,operationType:"signIn"});const _=yield uc(f,{returnSecureToken:!0}),S=yield Ar._fromIdTokenResponse(f,"signIn",_,!0);return yield f._updateCurrentUser(S.user),S})).apply(this,arguments)}class $a extends k.ZR{constructor(d,f,_,S){var N;super(f.code,f.message),this.operationType=_,this.user=S,Object.setPrototypeOf(this,$a.prototype),this.customData={appName:d.name,tenantId:null!==(N=d.tenantId)&&void 0!==N?N:void 0,_serverResponse:f.customData._serverResponse,operationType:_}}static _fromErrorAndOperation(d,f,_,S){return new $a(d,f,_,S)}}function Ts(g,d,f,_){return("reauthenticate"===d?f._getReauthenticationResolver(g):f._getIdTokenResponse(g)).catch(N=>{throw"auth/multi-factor-auth-required"===N.code?$a._fromErrorAndOperation(g,N,d,_):N})}function Cs(g){return new Set(g.map(({providerId:d})=>d).filter(d=>!!d))}function Wo(){return Wo=(0,I.Z)(function*(g,d){const f=(0,k.m9)(g);yield Ss(!0,f,d);const{providerUserInfo:_}=yield function Fr(g,d){return ft.apply(this,arguments)}(f.auth,{idToken:yield f.getIdToken(),deleteProvider:[d]}),S=Cs(_||[]);return f.providerData=f.providerData.filter(N=>S.has(N.providerId)),S.has("phone")||(f.phoneNumber=null),yield f.auth._persistUserIfCurrent(f),f}),Wo.apply(this,arguments)}function dc(g,d){return ro.apply(this,arguments)}function ro(){return(ro=(0,I.Z)(function*(g,d,f=!1){const _=yield Cn(g,d._linkToIdToken(g.auth,yield g.getIdToken()),f);return Ar._forOperation(g,"link",_)})).apply(this,arguments)}function Ss(g,d,f){return qo.apply(this,arguments)}function qo(){return(qo=(0,I.Z)(function*(g,d,f){yield tn(d);const S=!1===g?"provider-already-linked":"no-such-provider";V(Cs(d.providerData).has(f)===g,d.auth,S)})).apply(this,arguments)}function Vl(g,d){return io.apply(this,arguments)}function io(){return(io=(0,I.Z)(function*(g,d,f=!1){const{auth:_}=g,S="reauthenticate";try{const N=yield Cn(g,Ts(_,S,d,g),f);V(N.idToken,_,"internal-error");const H=It(N.idToken);V(H,_,"internal-error");const{sub:ae}=H;return V(g.uid===ae,_,"user-mismatch"),Ar._forOperation(g,S,N)}catch(N){throw"auth/user-not-found"===N?.code&&Ee(_,"user-mismatch"),N}})).apply(this,arguments)}function so(g,d){return Ur.apply(this,arguments)}function Ur(){return(Ur=(0,I.Z)(function*(g,d,f=!1){const _="signIn",S=yield Ts(g,_,d),N=yield Ar._fromIdTokenResponse(g,_,S);return f||(yield g._updateCurrentUser(N.user)),N})).apply(this,arguments)}function Sn(g,d){return Ga.apply(this,arguments)}function Ga(){return(Ga=(0,I.Z)(function*(g,d){return so(En(g),d)})).apply(this,arguments)}function kn(g,d){return oo.apply(this,arguments)}function oo(){return(oo=(0,I.Z)(function*(g,d){const f=(0,k.m9)(g);return yield Ss(!1,f,d.providerId),dc(f,d)})).apply(this,arguments)}function As(g,d){return Un.apply(this,arguments)}function Un(){return(Un=(0,I.Z)(function*(g,d){return Vl((0,k.m9)(g),d)})).apply(this,arguments)}function ao(){return(ao=(0,I.Z)(function*(g,d){return yn(g,"POST","/v1/accounts:signInWithCustomToken",et(g,d))})).apply(this,arguments)}function Qn(){return Qn=(0,I.Z)(function*(g,d){const f=En(g),_=yield function hc(g,d){return ao.apply(this,arguments)}(f,{token:d,returnSecureToken:!0}),S=yield Ar._fromIdTokenResponse(f,"signIn",_);return yield f._updateCurrentUser(S.user),S}),Qn.apply(this,arguments)}class Ko{constructor(d,f){this.factorId=d,this.uid=f.mfaEnrollmentId,this.enrollmentTime=new Date(f.enrolledAt).toUTCString(),this.displayName=f.displayName}static _fromServerResponse(d,f){return"phoneInfo"in f?uo._fromServerResponse(d,f):Ee(d,"internal-error")}}class uo extends Ko{constructor(d){super("phone",d),this.phoneNumber=d.phoneInfo}static _fromServerResponse(d,f){return new uo(f)}}function za(g,d,f){var _;V((null===(_=f.url)||void 0===_?void 0:_.length)>0,g,"invalid-continue-uri"),V(typeof f.dynamicLinkDomain>"u"||f.dynamicLinkDomain.length>0,g,"invalid-dynamic-link-domain"),d.continueUrl=f.url,d.dynamicLinkDomain=f.dynamicLinkDomain,d.canHandleCodeInApp=f.handleCodeInApp,f.iOS&&(V(f.iOS.bundleId.length>0,g,"missing-ios-bundle-id"),d.iOSBundleId=f.iOS.bundleId),f.android&&(V(f.android.packageName.length>0,g,"missing-android-pkg-name"),d.androidInstallApp=f.android.installApp,d.androidMinimumVersionCode=f.android.minimumVersion,d.androidPackageName=f.android.packageName)}function Zo(){return Zo=(0,I.Z)(function*(g,d,f){const _=(0,k.m9)(g),S={requestType:"PASSWORD_RESET",email:d};f&&za(_,S,f),yield function Xs(g,d){return Ot.apply(this,arguments)}(_,S)}),Zo.apply(this,arguments)}function Ct(){return(Ct=(0,I.Z)(function*(g,d,f){yield zn((0,k.m9)(g),{oobCode:d,newPassword:f})})).apply(this,arguments)}function Bl(){return Bl=(0,I.Z)(function*(g,d){yield function Nt(g,d){return cn.apply(this,arguments)}((0,k.m9)(g),{oobCode:d})}),Bl.apply(this,arguments)}function qa(g,d){return fc.apply(this,arguments)}function fc(){return(fc=(0,I.Z)(function*(g,d){const f=(0,k.m9)(g),_=yield zn(f,{oobCode:d}),S=_.requestType;switch(V(S,f,"internal-error"),S){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":V(_.newEmail,f,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":V(_.mfaInfo,f,"internal-error");default:V(_.email,f,"internal-error")}let N=null;return _.mfaInfo&&(N=Ko._fromServerResponse(En(f),_.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===_.requestType?_.newEmail:_.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===_.requestType?_.email:_.newEmail)||null,multiFactorInfo:N},operation:S}})).apply(this,arguments)}function Ka(){return(Ka=(0,I.Z)(function*(g,d){const{data:f}=yield qa((0,k.m9)(g),d);return f.email})).apply(this,arguments)}function gc(){return(gc=(0,I.Z)(function*(g,d,f){const _=En(g),S=yield uc(_,{returnSecureToken:!0,email:d,password:f}),N=yield Ar._fromIdTokenResponse(_,"signIn",S);return yield _._updateCurrentUser(N.user),N})).apply(this,arguments)}function mc(){return mc=(0,I.Z)(function*(g,d,f){const _=(0,k.m9)(g),S={requestType:"EMAIL_SIGNIN",email:d};V(f.handleCodeInApp,_,"argument-error"),f&&za(_,S,f),yield function rc(g,d){return rs.apply(this,arguments)}(_,S)}),mc.apply(this,arguments)}function Qo(){return(Qo=(0,I.Z)(function*(g,d,f){const _=(0,k.m9)(g),S=oc.credentialWithLink(d,f||ue());return V(S._tenantId===(_.tenantId||null),_,"tenant-id-mismatch"),Sn(_,S)})).apply(this,arguments)}function jr(){return(jr=(0,I.Z)(function*(g,d){return Mt(g,"POST","/v1/accounts:createAuthUri",et(g,d))})).apply(this,arguments)}function Qa(){return Qa=(0,I.Z)(function*(g,d){const _={identifier:d,continueUri:pe()?ue():"http://localhost"},{signinMethods:S}=yield function Za(g,d){return jr.apply(this,arguments)}((0,k.m9)(g),_);return S||[]}),Qa.apply(this,arguments)}function yc(){return yc=(0,I.Z)(function*(g,d){const f=(0,k.m9)(g),S={requestType:"VERIFY_EMAIL",idToken:yield g.getIdToken()};d&&za(f.auth,S,d);const{email:N}=yield function wn(g,d){return Qs.apply(this,arguments)}(f.auth,S);N!==g.email&&(yield g.reload())}),yc.apply(this,arguments)}function Wn(){return Wn=(0,I.Z)(function*(g,d,f){const _=(0,k.m9)(g),N={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield g.getIdToken(),newEmail:d};f&&za(_.auth,N,f);const{email:H}=yield function ic(g,d){return ui.apply(this,arguments)}(_.auth,N);H!==g.email&&(yield g.reload())}),Wn.apply(this,arguments)}function ss(){return(ss=(0,I.Z)(function*(g,d){return Mt(g,"POST","/v1/accounts:update",d)})).apply(this,arguments)}function Di(){return Di=(0,I.Z)(function*(g,{displayName:d,photoURL:f}){if(void 0===d&&void 0===f)return;const _=(0,k.m9)(g),N={idToken:yield _.getIdToken(),displayName:d,photoUrl:f,returnSecureToken:!0},H=yield Cn(_,function $r(g,d){return ss.apply(this,arguments)}(_.auth,N));_.displayName=H.displayName||null,_.photoURL=H.photoUrl||null;const ae=_.providerData.find(({providerId:Fe})=>"password"===Fe);ae&&(ae.displayName=_.displayName,ae.photoURL=_.photoURL),yield _._updateTokensIfNecessary(H)}),Di.apply(this,arguments)}function Hl(g,d,f){return _c.apply(this,arguments)}function _c(){return(_c=(0,I.Z)(function*(g,d,f){const{auth:_}=g,N={idToken:yield g.getIdToken(),returnSecureToken:!0};d&&(N.email=d),f&&(N.password=f);const H=yield Cn(g,Zr(_,N));yield g._updateTokensIfNecessary(H,!0)})).apply(this,arguments)}class Vi{constructor(d,f,_={}){this.isNewUser=d,this.providerId=f,this.profile=_}}class Gl extends Vi{constructor(d,f,_,S){super(d,f,_),this.username=S}}class Ic extends Vi{constructor(d,f){super(d,"facebook.com",f)}}class zl extends Gl{constructor(d,f){super(d,"github.com",f,"string"==typeof f?.login?f?.login:null)}}class Th extends Vi{constructor(d,f){super(d,"google.com",f)}}class Ja extends Gl{constructor(d,f,_){super(d,"twitter.com",f,_)}}function Ch(g){const{user:d,_tokenResponse:f}=g;return d.isAnonymous&&!f?{providerId:null,isNewUser:!1,profile:null}:function vc(g){var d,f;if(!g)return null;const{providerId:_}=g,S=g.rawUserInfo?JSON.parse(g.rawUserInfo):{},N=g.isNewUser||"identitytoolkit#SignupNewUserResponse"===g.kind;if(!_&&g?.idToken){const H=null===(f=null===(d=It(g.idToken))||void 0===d?void 0:d.firebase)||void 0===f?void 0:f.sign_in_provider;if(H)return new Vi(N,"anonymous"!==H&&"custom"!==H?H:null)}if(!_)return null;switch(_){case"facebook.com":return new Ic(N,S);case"github.com":return new zl(N,S);case"google.com":return new Th(N,S);case"twitter.com":return new Ja(N,S,g.screenName||null);case"custom":case"anonymous":return new Vi(N,null);default:return new Vi(N,_,S)}}(f)}class lo{constructor(d,f,_){this.type=d,this.credential=f,this.auth=_}static _fromIdtoken(d,f){return new lo("enroll",d,f)}static _fromMfaPendingCredential(d){return new lo("signin",d)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(d){var f,_;if(d?.multiFactorSession){if(null!==(f=d.multiFactorSession)&&void 0!==f&&f.pendingCredential)return lo._fromMfaPendingCredential(d.multiFactorSession.pendingCredential);if(null!==(_=d.multiFactorSession)&&void 0!==_&&_.idToken)return lo._fromIdtoken(d.multiFactorSession.idToken)}return null}}class wc{constructor(d,f,_){this.session=d,this.hints=f,this.signInResolver=_}static _fromError(d,f){const _=En(d),S=f.customData._serverResponse,N=(S.mfaInfo||[]).map(ae=>Ko._fromServerResponse(_,ae));V(S.mfaPendingCredential,_,"internal-error");const H=lo._fromMfaPendingCredential(S.mfaPendingCredential);return new wc(H,N,function(){var ae=(0,I.Z)(function*(Fe){const Je=yield Fe._process(_,H);delete S.mfaInfo,delete S.mfaPendingCredential;const lt=Object.assign(Object.assign({},S),{idToken:Je.idToken,refreshToken:Je.refreshToken});switch(f.operationType){case"signIn":const ut=yield Ar._fromIdTokenResponse(_,f.operationType,lt);return yield _._updateCurrentUser(ut.user),ut;case"reauthenticate":return V(f.user,_,"internal-error"),Ar._forOperation(f.user,f.operationType,lt);default:Ee(_,"internal-error")}});return function(Fe){return ae.apply(this,arguments)}}())}resolveSignIn(d){var f=this;return(0,I.Z)(function*(){return f.signInResolver(d)})()}}class Jo{constructor(d){this.user=d,this.enrolledFactors=[],d._onReload(f=>{f.mfaInfo&&(this.enrolledFactors=f.mfaInfo.map(_=>Ko._fromServerResponse(d.auth,_)))})}static _fromUser(d){return new Jo(d)}getSession(){var d=this;return(0,I.Z)(function*(){return lo._fromIdtoken(yield d.user.getIdToken(),d.user.auth)})()}enroll(d,f){var _=this;return(0,I.Z)(function*(){const S=d,N=yield _.getSession(),H=yield Cn(_.user,S._process(_.user.auth,N,f));return yield _.user._updateTokensIfNecessary(H),_.user.reload()})()}unenroll(d){var f=this;return(0,I.Z)(function*(){const _="string"==typeof d?d:d.uid,S=yield f.user.getIdToken();try{const N=yield Cn(f.user,function dp(g,d){return Mt(g,"POST","/v2/accounts/mfaEnrollment:withdraw",et(g,d))}(f.user.auth,{idToken:S,mfaEnrollmentId:_}));f.enrolledFactors=f.enrolledFactors.filter(({uid:H})=>H!==_),yield f.user._updateTokensIfNecessary(N),yield f.user.reload()}catch(N){throw N}})()}}const Ns=new WeakMap,os="__sak";class ea{constructor(d,f){this.storageRetriever=d,this.type=f}_isAvailable(){try{return this.storage?(this.storage.setItem(os,"1"),this.storage.removeItem(os),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(d,f){return this.storage.setItem(d,JSON.stringify(f)),Promise.resolve()}_get(d){const f=this.storage.getItem(d);return Promise.resolve(f?JSON.parse(f):null)}_remove(d){return this.storage.removeItem(d),Promise.resolve()}get storage(){return this.storageRetriever()}}const eu=(()=>{class g extends ea{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(f,_)=>this.onStorageEvent(f,_),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function ta(){const g=(0,k.z$)();return Pt(g)||Hn(g)}()&&function Uo(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=vh(),this._shouldAllowMigration=!0}forAllChangedKeys(f){for(const _ of Object.keys(this.listeners)){const S=this.storage.getItem(_),N=this.localCache[_];S!==N&&f(_,N,S)}}onStorageEvent(f,_=!1){if(!f.key)return void this.forAllChangedKeys((ae,Fe,Je)=>{this.notifyListeners(ae,Je)});const S=f.key;if(_?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const ae=this.storage.getItem(S);if(f.newValue!==ae)null!==f.newValue?this.storage.setItem(S,f.newValue):this.storage.removeItem(S);else if(this.localCache[S]===f.newValue&&!_)return}const N=()=>{const ae=this.storage.getItem(S);!_&&this.localCache[S]===ae||this.notifyListeners(S,ae)},H=this.storage.getItem(S);!function Bo(){return(0,k.w1)()&&10===document.documentMode}()||H===f.newValue||f.newValue===f.oldValue?N():setTimeout(N,10)}notifyListeners(f,_){this.localCache[f]=_;const S=this.listeners[f];if(S)for(const N of Array.from(S))N(_&&JSON.parse(_))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((f,_,S)=>{this.onStorageEvent(new StorageEvent("storage",{key:f,oldValue:_,newValue:S}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(f,_){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[f]||(this.listeners[f]=new Set,this.localCache[f]=this.storage.getItem(f)),this.listeners[f].add(_)}_removeListener(f,_){this.listeners[f]&&(this.listeners[f].delete(_),0===this.listeners[f].size&&delete this.listeners[f]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(f,_){var S=()=>super._set,N=this;return(0,I.Z)(function*(){yield S().call(N,f,_),N.localCache[f]=JSON.stringify(_)})()}_get(f){var _=()=>super._get,S=this;return(0,I.Z)(function*(){const N=yield _().call(S,f);return S.localCache[f]=JSON.stringify(N),N})()}_remove(f){var _=()=>super._remove,S=this;return(0,I.Z)(function*(){yield _().call(S,f),delete S.localCache[f]})()}}return g.type="LOCAL",g})(),Rs=(()=>{class g extends ea{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(f,_){}_removeListener(f,_){}}return g.type="SESSION",g})();let Ah=(()=>{class g{constructor(f){this.eventTarget=f,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(f){const _=this.receivers.find(N=>N.isListeningto(f));if(_)return _;const S=new g(f);return this.receivers.push(S),S}isListeningto(f){return this.eventTarget===f}handleEvent(f){var _=this;return(0,I.Z)(function*(){const S=f,{eventId:N,eventType:H,data:ae}=S.data,Fe=_.handlersMap[H];if(!Fe?.size)return;S.ports[0].postMessage({status:"ack",eventId:N,eventType:H});const Je=Array.from(Fe).map(function(){var ut=(0,I.Z)(function*(Xn){return Xn(S.origin,ae)});return function(Xn){return ut.apply(this,arguments)}}()),lt=yield function Kl(g){return Promise.all(g.map(function(){var d=(0,I.Z)(function*(f){try{return{fulfilled:!0,value:yield f}}catch(_){return{fulfilled:!1,reason:_}}});return function(f){return d.apply(this,arguments)}}()))}(Je);S.ports[0].postMessage({status:"done",eventId:N,eventType:H,response:lt})})()}_subscribe(f,_){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[f]||(this.handlersMap[f]=new Set),this.handlersMap[f].add(_)}_unsubscribe(f,_){this.handlersMap[f]&&_&&this.handlersMap[f].delete(_),(!_||0===this.handlersMap[f].size)&&delete this.handlersMap[f],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return g.receivers=[],g})();function ks(g="",d=10){let f="";for(let _=0;_<d;_++)f+=Math.floor(10*Math.random());return g+f}class na{constructor(d){this.target=d,this.handlers=new Set}removeMessageHandler(d){d.messageChannel&&(d.messageChannel.port1.removeEventListener("message",d.onMessage),d.messageChannel.port1.close()),this.handlers.delete(d)}_send(d,f,_=50){var S=this;return(0,I.Z)(function*(){const N=typeof MessageChannel<"u"?new MessageChannel:null;if(!N)throw new Error("connection_unavailable");let H,ae;return new Promise((Fe,Je)=>{const lt=ks("",20);N.port1.start();const ut=setTimeout(()=>{Je(new Error("unsupported_event"))},_);ae={messageChannel:N,onMessage(Xn){const Gi=Xn;if(Gi.data.eventId===lt)switch(Gi.data.status){case"ack":clearTimeout(ut),H=setTimeout(()=>{Je(new Error("timeout"))},3e3);break;case"done":clearTimeout(H),Fe(Gi.data.response);break;default:clearTimeout(ut),clearTimeout(H),Je(new Error("invalid_response"))}}},S.handlers.add(ae),N.port1.addEventListener("message",ae.onMessage),S.target.postMessage({eventType:d,eventId:lt,data:f},[N.port2])}).finally(()=>{ae&&S.removeMessageHandler(ae)})})()}}function Dn(){return window}function Bi(){return typeof Dn().WorkerGlobalScope<"u"&&"function"==typeof Dn().importScripts}function fo(){return(fo=(0,I.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const tu="firebaseLocalStorageDb",nu=1,us="firebaseLocalStorage",po="fbase_key";class go{constructor(d){this.request=d}toPromise(){return new Promise((d,f)=>{this.request.addEventListener("success",()=>{d(this.request.result)}),this.request.addEventListener("error",()=>{f(this.request.error)})})}}function sa(g,d){return g.transaction([us],d?"readwrite":"readonly").objectStore(us)}function ru(){const g=indexedDB.open(tu,nu);return new Promise((d,f)=>{g.addEventListener("error",()=>{f(g.error)}),g.addEventListener("upgradeneeded",()=>{const _=g.result;try{_.createObjectStore(us,{keyPath:po})}catch(S){f(S)}}),g.addEventListener("success",(0,I.Z)(function*(){const _=g.result;_.objectStoreNames.contains(us)?d(_):(_.close(),yield function oa(){const g=indexedDB.deleteDatabase(tu);return new go(g).toPromise()}(),d(yield ru()))}))})}function vr(g,d,f){return aa.apply(this,arguments)}function aa(){return(aa=(0,I.Z)(function*(g,d,f){const _=sa(g,!0).put({[po]:d,value:f});return new go(_).toPromise()})).apply(this,arguments)}function cs(){return(cs=(0,I.Z)(function*(g,d){const f=sa(g,!1).get(d),_=yield new go(f).toPromise();return void 0===_?null:_.value})).apply(this,arguments)}function ua(g,d){const f=sa(g,!0).delete(d);return new go(f).toPromise()}const Ps=(()=>{class g{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var f=this;return(0,I.Z)(function*(){return f.db||(f.db=yield ru()),f.db})()}_withRetries(f){var _=this;return(0,I.Z)(function*(){let S=0;for(;;)try{const N=yield _._openDb();return yield f(N)}catch(N){if(S++>3)throw N;_.db&&(_.db.close(),_.db=void 0)}})()}initializeServiceWorkerMessaging(){var f=this;return(0,I.Z)(function*(){return Bi()?f.initializeReceiver():f.initializeSender()})()}initializeReceiver(){var f=this;return(0,I.Z)(function*(){f.receiver=Ah._getInstance(function ia(){return Bi()?self:null}()),f.receiver._subscribe("keyChanged",function(){var _=(0,I.Z)(function*(S,N){return{keyProcessed:(yield f._poll()).includes(N.key)}});return function(S,N){return _.apply(this,arguments)}}()),f.receiver._subscribe("ping",function(){var _=(0,I.Z)(function*(S,N){return["keyChanged"]});return function(S,N){return _.apply(this,arguments)}}())})()}initializeSender(){var f=this;return(0,I.Z)(function*(){var _,S;if(f.activeServiceWorker=yield function Ui(){return fo.apply(this,arguments)}(),!f.activeServiceWorker)return;f.sender=new na(f.activeServiceWorker);const N=yield f.sender._send("ping",{},800);N&&null!==(_=N[0])&&void 0!==_&&_.fulfilled&&null!==(S=N[0])&&void 0!==S&&S.value.includes("keyChanged")&&(f.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(f){var _=this;return(0,I.Z)(function*(){if(_.sender&&_.activeServiceWorker&&function bc(){var g;return(null===(g=navigator?.serviceWorker)||void 0===g?void 0:g.controller)||null}()===_.activeServiceWorker)try{yield _.sender._send("keyChanged",{key:f},_.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,I.Z)(function*(){try{if(!indexedDB)return!1;const f=yield ru();return yield vr(f,os,"1"),yield ua(f,os),!0}catch{}return!1})()}_withPendingWrite(f){var _=this;return(0,I.Z)(function*(){_.pendingWrites++;try{yield f()}finally{_.pendingWrites--}})()}_set(f,_){var S=this;return(0,I.Z)(function*(){return S._withPendingWrite((0,I.Z)(function*(){return yield S._withRetries(N=>vr(N,f,_)),S.localCache[f]=_,S.notifyServiceWorker(f)}))})()}_get(f){var _=this;return(0,I.Z)(function*(){const S=yield _._withRetries(N=>function mo(g,d){return cs.apply(this,arguments)}(N,f));return _.localCache[f]=S,S})()}_remove(f){var _=this;return(0,I.Z)(function*(){return _._withPendingWrite((0,I.Z)(function*(){return yield _._withRetries(S=>ua(S,f)),delete _.localCache[f],_.notifyServiceWorker(f)}))})()}_poll(){var f=this;return(0,I.Z)(function*(){const _=yield f._withRetries(H=>{const ae=sa(H,!1).getAll();return new go(ae).toPromise()});if(!_)return[];if(0!==f.pendingWrites)return[];const S=[],N=new Set;for(const{fbase_key:H,value:ae}of _)N.add(H),JSON.stringify(f.localCache[H])!==JSON.stringify(ae)&&(f.notifyListeners(H,ae),S.push(H));for(const H of Object.keys(f.localCache))f.localCache[H]&&!N.has(H)&&(f.notifyListeners(H,null),S.push(H));return S})()}notifyListeners(f,_){this.localCache[f]=_;const S=this.listeners[f];if(S)for(const N of Array.from(S))N(_)}startPolling(){var f=this;this.stopPolling(),this.pollTimer=setInterval((0,I.Z)(function*(){return f._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(f,_){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[f]||(this.listeners[f]=new Set,this._get(f)),this.listeners[f].add(_)}_removeListener(f,_){this.listeners[f]&&(this.listeners[f].delete(_),0===this.listeners[f].size&&delete this.listeners[f]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return g.type="LOCAL",g})();function su(){return(su=(0,I.Z)(function*(g){return(yield Mt(g,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Ti(g){return new Promise((d,f)=>{const _=document.createElement("script");_.setAttribute("src",g),_.onload=d,_.onerror=S=>{const N=ye("internal-error");N.customData=S,f(N)},_.type="text/javascript",_.charset="UTF-8",function Os(){var g,d;return null!==(d=null===(g=document.getElementsByTagName("head"))||void 0===g?void 0:g[0])&&void 0!==d?d:document}().appendChild(_)})}function Yl(g){return`__${g}${Math.floor(1e6*Math.random())}`}const hi=1e12;class hp{constructor(d){this.auth=d,this.counter=hi,this._widgets=new Map}render(d,f){const _=this.counter;return this._widgets.set(_,new xh(d,this.auth.name,f||{})),this.counter++,_}reset(d){var f;const _=d||hi;null===(f=this._widgets.get(_))||void 0===f||f.delete(),this._widgets.delete(_)}getResponse(d){var f;return(null===(f=this._widgets.get(d||hi))||void 0===f?void 0:f.getResponse())||""}execute(d){var f=this;return(0,I.Z)(function*(){var _;return null===(_=f._widgets.get(d||hi))||void 0===_||_.execute(),""})()}}class xh{constructor(d,f,_){this.params=_,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const S="string"==typeof d?document.getElementById(d):d;V(S,"argument-error",{appName:f}),this.container=S,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function au(g){const d=[],f="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let _=0;_<g;_++)d.push(f.charAt(Math.floor(Math.random()*f.length)));return d.join("")}(50);const{callback:d,"expired-callback":f}=this.params;if(d)try{d(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,f)try{f()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Ql=Yl("rcb"),Cc=new qe(3e4,6e4);class $i{constructor(){var d;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(d=Dn().grecaptcha)||void 0===d||!d.render)}load(d,f=""){return V(function da(g){return g.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(g)}(f),d,"argument-error"),this.shouldResolveImmediately(f)?Promise.resolve(Dn().grecaptcha):new Promise((_,S)=>{const N=Dn().setTimeout(()=>{S(ye(d,"network-request-failed"))},Cc.get());Dn()[Ql]=()=>{Dn().clearTimeout(N),delete Dn()[Ql];const ae=Dn().grecaptcha;if(!ae)return void S(ye(d,"internal-error"));const Fe=ae.render;ae.render=(Je,lt)=>{const ut=Fe(Je,lt);return this.counter++,ut},this.hostLanguage=f,_(ae)},Ti(`https://www.google.com/recaptcha/api.js??${(0,k.xO)({onload:Ql,render:"explicit",hl:f})}`).catch(()=>{clearTimeout(N),S(ye(d,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(d){var f;return!(null===(f=Dn().grecaptcha)||void 0===f||!f.render)&&(d===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class cu{load(d){return(0,I.Z)(function*(){return new hp(d)})()}clearedOneInstance(){}}const Xl="recaptcha",Mh={theme:"light",type:"image"};class lu{constructor(d,f=Object.assign({},Mh),_){this.parameters=f,this.type=Xl,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=En(_),this.isInvisible="invisible"===this.parameters.size,V(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const S="string"==typeof d?document.getElementById(d):d;V(S,this.auth,"argument-error"),this.container=S,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new cu:new $i,this.validateStartingState()}verify(){var d=this;return(0,I.Z)(function*(){d.assertNotDestroyed();const f=yield d.render(),_=d.getAssertedRecaptcha();return _.getResponse(f)||new Promise(N=>{const H=ae=>{ae&&(d.tokenChangeListeners.delete(H),N(ae))};d.tokenChangeListeners.add(H),d.isInvisible&&_.execute(f)})})()}render(){try{this.assertNotDestroyed()}catch(d){return Promise.reject(d)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(d=>{throw this.renderPromise=null,d})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(d=>{this.container.removeChild(d)})}validateStartingState(){V(!this.parameters.sitekey,this.auth,"argument-error"),V(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),V(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(d){return f=>{if(this.tokenChangeListeners.forEach(_=>_(f)),"function"==typeof d)d(f);else if("string"==typeof d){const _=Dn()[d];"function"==typeof _&&_(f)}}}assertNotDestroyed(){V(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var d=this;return(0,I.Z)(function*(){if(yield d.init(),!d.widgetId){let f=d.container;if(!d.isInvisible){const _=document.createElement("div");f.appendChild(_),f=_}d.widgetId=d.getAssertedRecaptcha().render(f,d.parameters)}return d.widgetId})()}init(){var d=this;return(0,I.Z)(function*(){V(pe()&&!Bi(),d.auth,"internal-error"),yield function fp(){let g=null;return new Promise(d=>{"complete"!==document.readyState?(g=()=>d(),window.addEventListener("load",g)):d()}).catch(d=>{throw g&&window.removeEventListener("load",g),d})}(),d.recaptcha=yield d._recaptchaLoader.load(d.auth,d.auth.languageCode||void 0);const f=yield function bi(g){return su.apply(this,arguments)}(d.auth);V(f,d.auth,"internal-error"),d.parameters.sitekey=f})()}getAssertedRecaptcha(){return V(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Jl{constructor(d,f){this.verificationId=d,this.onConfirmation=f}confirm(d){const f=di._fromVerification(this.verificationId,d);return this.onConfirmation(f)}}function ed(){return(ed=(0,I.Z)(function*(g,d,f){const _=En(g),S=yield Ac(_,d,(0,k.m9)(f));return new Jl(S,N=>Sn(_,N))})).apply(this,arguments)}function Sc(){return(Sc=(0,I.Z)(function*(g,d,f){const _=(0,k.m9)(g);yield Ss(!1,_,"phone");const S=yield Ac(_.auth,d,(0,k.m9)(f));return new Jl(S,N=>kn(_,N))})).apply(this,arguments)}function td(){return(td=(0,I.Z)(function*(g,d,f){const _=(0,k.m9)(g),S=yield Ac(_.auth,d,(0,k.m9)(f));return new Jl(S,N=>As(_,N))})).apply(this,arguments)}function Ac(g,d,f){return du.apply(this,arguments)}function du(){return du=(0,I.Z)(function*(g,d,f){var _;const S=yield f.verify();try{let N;if(V("string"==typeof S,g,"argument-error"),V(f.type===Xl,g,"argument-error"),N="string"==typeof d?{phoneNumber:d}:d,"session"in N){const H=N.session;if("phoneNumber"in N)return V("enroll"===H.type,g,"internal-error"),(yield function Sh(g,d){return Mt(g,"POST","/v2/accounts/mfaEnrollment:start",et(g,d))}(g,{idToken:H.credential,phoneEnrollmentInfo:{phoneNumber:N.phoneNumber,recaptchaToken:S}})).phoneSessionInfo.sessionInfo;{V("signin"===H.type,g,"internal-error");const ae=(null===(_=N.multiFactorHint)||void 0===_?void 0:_.uid)||N.multiFactorUid;return V(ae,g,"missing-multi-factor-info"),(yield function la(g,d){return Mt(g,"POST","/v2/accounts/mfaSignIn:start",et(g,d))}(g,{mfaPendingCredential:H.credential,mfaEnrollmentId:ae,phoneSignInInfo:{recaptchaToken:S}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:H}=yield function Ol(g,d){return eo.apply(this,arguments)}(g,{phoneNumber:N.phoneNumber,recaptchaToken:S});return H}}finally{f._reset()}}),du.apply(this,arguments)}function Nh(){return(Nh=(0,I.Z)(function*(g,d){yield dc((0,k.m9)(g),d)})).apply(this,arguments)}let xc=(()=>{class g{constructor(f){this.providerId=g.PROVIDER_ID,this.auth=En(f)}verifyPhoneNumber(f,_){return Ac(this.auth,f,(0,k.m9)(_))}static credential(f,_){return di._fromVerification(f,_)}static credentialFromResult(f){return g.credentialFromTaggedObject(f)}static credentialFromError(f){return g.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{phoneNumber:_,temporaryProof:S}=f;return _&&S?di._fromTokenResponse(_,S):null}}return g.PROVIDER_ID="phone",g.PHONE_SIGN_IN_METHOD="phone",g})();function dn(g,d){return d?at(d):(V(g._popupRedirectResolver,g,"argument-error"),g._popupRedirectResolver)}class fa extends Rn{constructor(d){super("custom","custom"),this.params=d}_getIdTokenResponse(d){return Oi(d,this._buildIdpRequest())}_linkToIdToken(d,f){return Oi(d,this._buildIdpRequest(f))}_getReauthenticationResolver(d){return Oi(d,this._buildIdpRequest())}_buildIdpRequest(d){const f={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return d&&(f.idToken=d),f}}function hu(g){return so(g.auth,new fa(g),g.bypassAuthState)}function pp(g){const{auth:d,user:f}=g;return V(f,d,"internal-error"),Vl(f,new fa(g),g.bypassAuthState)}function fi(g){return ls.apply(this,arguments)}function ls(){return(ls=(0,I.Z)(function*(g){const{auth:d,user:f}=g;return V(f,d,"internal-error"),dc(f,new fa(g),g.bypassAuthState)})).apply(this,arguments)}class nd{constructor(d,f,_,S,N=!1){this.auth=d,this.resolver=_,this.user=S,this.bypassAuthState=N,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(f)?f:[f]}execute(){var d=this;return new Promise(function(){var f=(0,I.Z)(function*(_,S){d.pendingPromise={resolve:_,reject:S};try{d.eventManager=yield d.resolver._initialize(d.auth),yield d.onExecution(),d.eventManager.registerConsumer(d)}catch(N){d.reject(N)}});return function(_,S){return f.apply(this,arguments)}}())}onAuthEvent(d){var f=this;return(0,I.Z)(function*(){const{urlResponse:_,sessionId:S,postBody:N,tenantId:H,error:ae,type:Fe}=d;if(ae)return void f.reject(ae);const Je={auth:f.auth,requestUri:_,sessionId:S,tenantId:H||void 0,postBody:N||void 0,user:f.user,bypassAuthState:f.bypassAuthState};try{f.resolve(yield f.getIdpTask(Fe)(Je))}catch(lt){f.reject(lt)}})()}onError(d){this.reject(d)}getIdpTask(d){switch(d){case"signInViaPopup":case"signInViaRedirect":return hu;case"linkViaPopup":case"linkViaRedirect":return fi;case"reauthViaPopup":case"reauthViaRedirect":return pp;default:Ee(this.auth,"internal-error")}}resolve(d){Ne(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(d),this.unregisterAndCleanUp()}reject(d){Ne(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(d),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const yo=new qe(2e3,1e4);function fu(){return(fu=(0,I.Z)(function*(g,d,f){const _=En(g);Le(g,d,Li);const S=dn(_,f);return new Mc(_,"signInViaPopup",d,S).executeNotNull()})).apply(this,arguments)}function pu(){return(pu=(0,I.Z)(function*(g,d,f){const _=(0,k.m9)(g);Le(_.auth,d,Li);const S=dn(_.auth,f);return new Mc(_.auth,"reauthViaPopup",d,S,_).executeNotNull()})).apply(this,arguments)}function nr(){return(nr=(0,I.Z)(function*(g,d,f){const _=(0,k.m9)(g);Le(_.auth,d,Li);const S=dn(_.auth,f);return new Mc(_.auth,"linkViaPopup",d,S,_).executeNotNull()})).apply(this,arguments)}let Mc=(()=>{class g extends nd{constructor(f,_,S,N,H){super(f,_,N,H),this.provider=S,this.authWindow=null,this.pollId=null,g.currentPopupAction&&g.currentPopupAction.cancel(),g.currentPopupAction=this}executeNotNull(){var f=this;return(0,I.Z)(function*(){const _=yield f.execute();return V(_,f.auth,"internal-error"),_})()}onExecution(){var f=this;return(0,I.Z)(function*(){Ne(1===f.filter.length,"Popup operations only handle one event");const _=ks();f.authWindow=yield f.resolver._openPopup(f.auth,f.provider,f.filter[0],_),f.authWindow.associatedEvent=_,f.resolver._originValidation(f.auth).catch(S=>{f.reject(S)}),f.resolver._isIframeWebStorageSupported(f.auth,S=>{S||f.reject(ye(f.auth,"web-storage-unsupported"))}),f.pollUserCancellation()})()}get eventId(){var f;return(null===(f=this.authWindow)||void 0===f?void 0:f.associatedEvent)||null}cancel(){this.reject(ye(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,g.currentPopupAction=null}pollUserCancellation(){const f=()=>{var _,S;this.pollId=null!==(S=null===(_=this.authWindow)||void 0===_?void 0:_.window)&&void 0!==S&&S.closed?window.setTimeout(()=>{this.pollId=null,this.reject(ye(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(f,yo.get())};f()}}return g.currentPopupAction=null,g})();const gu="pendingRedirect",Nc=new Map;class Ph extends nd{constructor(d,f,_=!1){super(d,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],f,void 0,_),this.eventId=null}execute(){var d=()=>super.execute,f=this;return(0,I.Z)(function*(){let _=Nc.get(f.auth._key());if(!_){try{const N=(yield function pi(g,d){return ds.apply(this,arguments)}(f.resolver,f.auth))?yield d().call(f):null;_=()=>Promise.resolve(N)}catch(S){_=()=>Promise.reject(S)}Nc.set(f.auth._key(),_)}return f.bypassAuthState||Nc.set(f.auth._key(),()=>Promise.resolve(null)),_()})()}onAuthEvent(d){var f=()=>super.onAuthEvent,_=this;return(0,I.Z)(function*(){if("signInViaRedirect"===d.type)return f().call(_,d);if("unknown"!==d.type){if(d.eventId){const S=yield _.auth._redirectUserForId(d.eventId);if(S)return _.user=S,f().call(_,d);_.resolve(null)}}else _.resolve(null)})()}onExecution(){return(0,I.Z)(function*(){})()}cleanUp(){}}function ds(){return(ds=(0,I.Z)(function*(g,d){const f=gi(d),_=Pn(g);if(!(yield _._isAvailable()))return!1;const S="true"===(yield _._get(f));return yield _._remove(f),S})).apply(this,arguments)}function vo(g,d){return Ci.apply(this,arguments)}function Ci(){return(Ci=(0,I.Z)(function*(g,d){return Pn(g)._set(gi(d),"true")})).apply(this,arguments)}function Mr(g,d){Nc.set(g._key(),d)}function Pn(g){return at(g._redirectPersistence)}function gi(g){return G(gu,g.config.apiKey,g.name)}function rd(g,d,f){return function pa(g,d,f){return Hr.apply(this,arguments)}(g,d,f)}function Hr(){return(Hr=(0,I.Z)(function*(g,d,f){const _=En(g);Le(g,d,Li),yield _._initializationPromise;const S=dn(_,f);return yield vo(S,_),S._openRedirect(_,d,"signInViaRedirect")})).apply(this,arguments)}function Io(g,d,f){return function Hi(g,d,f){return ga.apply(this,arguments)}(g,d,f)}function ga(){return(ga=(0,I.Z)(function*(g,d,f){const _=(0,k.m9)(g);Le(_.auth,d,Li),yield _.auth._initializationPromise;const S=dn(_.auth,f);yield vo(S,_.auth);const N=yield tt(_);return S._openRedirect(_.auth,d,"reauthViaRedirect",N)})).apply(this,arguments)}function w(g,d,f){return function b(g,d,f){return A.apply(this,arguments)}(g,d,f)}function A(){return(A=(0,I.Z)(function*(g,d,f){const _=(0,k.m9)(g);Le(_.auth,d,Li),yield _.auth._initializationPromise;const S=dn(_.auth,f);yield Ss(!1,_,d.providerId),yield vo(S,_.auth);const N=yield tt(_);return S._openRedirect(_.auth,d,"linkViaRedirect",N)})).apply(this,arguments)}function W(){return(W=(0,I.Z)(function*(g,d){return yield En(g)._initializationPromise,Z(g,d,!1)})).apply(this,arguments)}function Z(g,d){return Ie.apply(this,arguments)}function Ie(){return(Ie=(0,I.Z)(function*(g,d,f=!1){const _=En(g),S=dn(_,d),H=yield new Ph(_,S,f).execute();return H&&!f&&(delete H.user._redirectEventId,yield _._persistUserIfCurrent(H.user),yield _._setRedirectUser(null,d)),H})).apply(this,arguments)}function tt(g){return Ze.apply(this,arguments)}function Ze(){return(Ze=(0,I.Z)(function*(g){const d=ks(`${g.uid}:::`);return g._redirectEventId=d,yield g.auth._setRedirectUser(g),yield g.auth._persistUserIfCurrent(g),d})).apply(this,arguments)}class Rt{constructor(d){this.auth=d,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(d){this.consumers.add(d),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,d)&&(this.sendToConsumer(this.queuedRedirectEvent,d),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(d){this.consumers.delete(d)}onEvent(d){if(this.hasEventBeenHandled(d))return!1;let f=!1;return this.consumers.forEach(_=>{this.isEventForConsumer(d,_)&&(f=!0,this.sendToConsumer(d,_),this.saveEventToCache(d))}),this.hasHandledPotentialRedirect||!function Dt(g){switch(g.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return On(g);default:return!1}}(d)||(this.hasHandledPotentialRedirect=!0,f||(this.queuedRedirectEvent=d,f=!0)),f}sendToConsumer(d,f){var _;if(d.error&&!On(d)){const S=(null===(_=d.error.code)||void 0===_?void 0:_.split("auth/")[1])||"internal-error";f.onError(ye(this.auth,S))}else f.onAuthEvent(d)}isEventForConsumer(d,f){const _=null===f.eventId||!!d.eventId&&d.eventId===f.eventId;return f.filter.includes(d.type)&&_}hasEventBeenHandled(d){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(wt(d))}saveEventToCache(d){this.cachedEventUids.add(wt(d)),this.lastProcessedEventTime=Date.now()}}function wt(g){return[g.type,g.eventId,g.sessionId,g.tenantId].filter(d=>d).join("-")}function On({type:g,error:d}){return"unknown"===g&&"auth/no-auth-event"===d?.code}function ma(g){return rr.apply(this,arguments)}function rr(){return(rr=(0,I.Z)(function*(g,d={}){return Mt(g,"GET","/v1/projects",d)})).apply(this,arguments)}const rt=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Gr=/^https?/;function Eo(){return(Eo=(0,I.Z)(function*(g){if(g.config.emulator)return;const{authorizedDomains:d}=yield ma(g);for(const f of d)try{if(kc(f))return}catch{}Ee(g,"unauthorized-domain")})).apply(this,arguments)}function kc(g){const d=ue(),{protocol:f,hostname:_}=new URL(d);if(g.startsWith("chrome-extension://")){const H=new URL(g);return""===H.hostname&&""===_?"chrome-extension:"===f&&g.replace("chrome-extension://","")===d.replace("chrome-extension://",""):"chrome-extension:"===f&&H.hostname===_}if(!Gr.test(f))return!1;if(rt.test(g))return _===g;const S=g.replace(/\./g,"\\.");return new RegExp("^(.+\\."+S+"|"+S+")$","i").test(_)}const id=new qe(3e4,6e4);function gp(){const g=Dn().___jsl;if(g?.H)for(const d of Object.keys(g.H))if(g.H[d].r=g.H[d].r||[],g.H[d].L=g.H[d].L||[],g.H[d].r=[...g.H[d].L],g.CP)for(let f=0;f<g.CP.length;f++)g.CP[f]=null}let mu=null;const av=new qe(5e3,15e3),ir="__/auth/iframe",Lh="emulator/auth/iframe",Nr={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},ya=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function uv(g){const d=g.config;V(d.authDomain,g,"auth-domain-config-required");const f=d.emulator?je(d,Lh):`https://${g.config.authDomain}/${ir}`,_={apiKey:d.apiKey,appName:g.name,v:ie.SDK_VERSION},S=ya.get(g.config.apiHost);S&&(_.eid=S);const N=g._getFrameworks();return N.length&&(_.fw=N.join(",")),`${f}?${(0,k.xO)(_).slice(1)}`}function Pc(){return Pc=(0,I.Z)(function*(g){const d=yield function ov(g){return mu=mu||function Oh(g){return new Promise((d,f)=>{var _,S,N;function H(){gp(),gapi.load("gapi.iframes",{callback:()=>{d(gapi.iframes.getContext())},ontimeout:()=>{gp(),f(ye(g,"network-request-failed"))},timeout:id.get()})}if(null!==(S=null===(_=Dn().gapi)||void 0===_?void 0:_.iframes)&&void 0!==S&&S.Iframe)d(gapi.iframes.getContext());else{if(null===(N=Dn().gapi)||void 0===N||!N.load){const ae=Yl("iframefcb");return Dn()[ae]=()=>{gapi.load?H():f(ye(g,"network-request-failed"))},Ti(`https://apis.google.com/js/api.js?onload=${ae}`).catch(Fe=>f(Fe))}H()}}).catch(d=>{throw mu=null,d})}(g),mu}(g),f=Dn().gapi;return V(f,g,"internal-error"),d.open({where:document.body,url:uv(g),messageHandlersFilter:f.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Nr,dontclear:!0},_=>new Promise(function(){var S=(0,I.Z)(function*(N,H){yield _.restyle({setHideOnLeave:!1});const ae=ye(g,"network-request-failed"),Fe=Dn().setTimeout(()=>{H(ae)},av.get());function Je(){Dn().clearTimeout(Fe),N(_)}_.ping(Je).then(Je,()=>{H(ae)})});return function(N,H){return S.apply(this,arguments)}}()))}),Pc.apply(this,arguments)}const Fh={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},sr=500,mp=600,Oc="_blank",Vh="http://localhost";class mi{constructor(d){this.window=d,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const Bh="__/auth/handler",yp="emulator/auth/handler";function Lc(g,d,f,_,S,N){V(g.config.authDomain,g,"auth-domain-config-required"),V(g.config.apiKey,g,"invalid-api-key");const H={apiKey:g.config.apiKey,appName:g.name,authType:f,redirectUrl:_,v:ie.SDK_VERSION,eventId:S};if(d instanceof Li){d.setDefaultLanguage(g.languageCode),H.providerId=d.providerId||"",(0,k.xb)(d.getCustomParameters())||(H.customParameters=JSON.stringify(d.getCustomParameters()));for(const[Fe,Je]of Object.entries(N||{}))H[Fe]=Je}if(d instanceof to){const Fe=d.getScopes().filter(Je=>""!==Je);Fe.length>0&&(H.scopes=Fe.join(","))}g.tenantId&&(H.tid=g.tenantId);const ae=H;for(const Fe of Object.keys(ae))void 0===ae[Fe]&&delete ae[Fe];return`${function yu({config:g}){return g.emulator?je(g,yp):`https://${g.authDomain}/${Bh}`}(g)}?${(0,k.xO)(ae).slice(1)}`}const od="webStorageSupport",ad=class Uh{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Rs,this._completeRedirectFn=Z,this._overrideRedirectResult=Mr}_openPopup(d,f,_,S){var N=this;return(0,I.Z)(function*(){var H;Ne(null===(H=N.eventManagers[d._key()])||void 0===H?void 0:H.manager,"_initialize() not called before _openPopup()");const ae=Lc(d,f,_,ue(),S);return function sd(g,d,f,_=sr,S=mp){const N=Math.max((window.screen.availHeight-S)/2,0).toString(),H=Math.max((window.screen.availWidth-_)/2,0).toString();let ae="";const Fe=Object.assign(Object.assign({},Fh),{width:_.toString(),height:S.toString(),top:N,left:H}),Je=(0,k.z$)().toLowerCase();f&&(ae=$t(Je)?Oc:f),st(Je)&&(d=d||Vh,Fe.scrollbars="yes");const lt=Object.entries(Fe).reduce((Xn,[Gi,Zc])=>`${Xn}${Gi}=${Zc},`,"");if(function gr(g=(0,k.z$)()){var d;return Hn(g)&&!(null===(d=window.navigator)||void 0===d||!d.standalone)}(Je)&&"_self"!==ae)return function hs(g,d){const f=document.createElement("a");f.href=g,f.target=d;const _=document.createEvent("MouseEvent");_.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),f.dispatchEvent(_)}(d||"",ae),new mi(null);const ut=window.open(d||"",ae,lt);V(ut,g,"popup-blocked");try{ut.focus()}catch{}return new mi(ut)}(d,ae,ks())})()}_openRedirect(d,f,_,S){var N=this;return(0,I.Z)(function*(){return yield N._originValidation(d),function ra(g){Dn().location.href=g}(Lc(d,f,_,ue(),S)),new Promise(()=>{})})()}_initialize(d){const f=d._key();if(this.eventManagers[f]){const{manager:S,promise:N}=this.eventManagers[f];return S?Promise.resolve(S):(Ne(N,"If manager is not set, promise should be"),N)}const _=this.initAndGetManager(d);return this.eventManagers[f]={promise:_},_.catch(()=>{delete this.eventManagers[f]}),_}initAndGetManager(d){var f=this;return(0,I.Z)(function*(){const _=yield function ym(g){return Pc.apply(this,arguments)}(d),S=new Rt(d);return _.register("authEvent",N=>(V(N?.authEvent,d,"invalid-auth-event"),{status:S.onEvent(N.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),f.eventManagers[d._key()]={manager:S},f.iframes[d._key()]=_,S})()}_isIframeWebStorageSupported(d,f){this.iframes[d._key()].send(od,{type:od},S=>{var N;const H=null===(N=S?.[0])||void 0===N?void 0:N[od];void 0!==H&&f(!!H),Ee(d,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(d){const f=d._key();return this.originValidationPromises[f]||(this.originValidationPromises[f]=function gt(g){return Eo.apply(this,arguments)}(d)),this.originValidationPromises[f]}get _shouldInitProactively(){return vh()||Pt()||Hn()}};class _m{constructor(d){this.factorId=d}_process(d,f,_){switch(f.type){case"enroll":return this._finalizeEnroll(d,f.credential,_);case"signin":return this._finalizeSignIn(d,f.credential);default:return fe("unexpected MultiFactorSessionType")}}}class ud extends _m{constructor(d){super("phone"),this.credential=d}static _fromCredential(d){return new ud(d)}_finalizeEnroll(d,f,_){return function lp(g,d){return Mt(g,"POST","/v2/accounts/mfaEnrollment:finalize",et(g,d))}(d,{idToken:f,displayName:_,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(d,f){return function Zl(g,d){return Mt(g,"POST","/v2/accounts/mfaSignIn:finalize",et(g,d))}(d,{mfaPendingCredential:f,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Ir=(()=>{class g{constructor(){}static assertion(f){return ud._fromCredential(f)}}return g.FACTOR_ID="phone",g})();var _u="@firebase/auth";class Vc{constructor(d){this.auth=d,this.internalListeners=new Map}getUid(){var d;return this.assertAuthConfigured(),(null===(d=this.auth.currentUser)||void 0===d?void 0:d.uid)||null}getToken(d){var f=this;return(0,I.Z)(function*(){return f.assertAuthConfigured(),yield f.auth._initializationPromise,f.auth.currentUser?{accessToken:yield f.auth.currentUser.getIdToken(d)}:null})()}addAuthTokenListener(d){if(this.assertAuthConfigured(),this.internalListeners.has(d))return;const f=this.auth.onIdTokenChanged(_=>{d(_?.stsTokenManager.accessToken||null)});this.internalListeners.set(d,f),this.updateProactiveRefresh()}removeAuthTokenListener(d){this.assertAuthConfigured();const f=this.internalListeners.get(d);f&&(this.internalListeners.delete(d),f(),this.updateProactiveRefresh())}assertAuthConfigured(){V(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function Si(){return window}(0,k.Pz)("authIdTokenMaxAge"),function Bc(g){(0,ie._registerComponent)(new me.wA("auth",(d,{options:f})=>{const _=d.getProvider("app").getImmediate(),S=d.getProvider("heartbeat"),{apiKey:N,authDomain:H}=_.options;return((ae,Fe)=>{V(N&&!N.includes(":"),"invalid-api-key",{appName:ae.name}),V(!H?.includes(":"),"argument-error",{appName:ae.name});const Je={apiKey:N,authDomain:H,clientPlatform:g,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ja(g)},lt=new kl(ae,Fe,Je);return function te(g,d){const f=d?.persistence||[],_=(Array.isArray(f)?f:[f]).map(at);d?.errorMap&&g._updateErrorMap(d.errorMap),g._initializeWithPersistence(_,d?.popupRedirectResolver)}(lt,f),lt})(_,S)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((d,f,_)=>{d.getProvider("auth-internal").initialize()})),(0,ie._registerComponent)(new me.wA("auth-internal",d=>{const f=En(d.getProvider("auth").getImmediate());return new Vc(f)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,ie.registerVersion)(_u,"0.21.3",function Rr(g){switch(g){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(g)),(0,ie.registerVersion)(_u,"0.21.3","esm2017")}("Browser");const vm=2e3;function Iu(){return Iu=(0,I.Z)(function*(g,d,f){var _;const{BuildInfo:S}=Si();Ne(d.sessionId,"AuthEvent did not contain a session ID");const N=yield function Gh(g){return _a.apply(this,arguments)}(d.sessionId),H={};return Hn()?H.ibi=S.packageName:yt()?H.apn=S.packageName:Ee(g,"operation-not-supported-in-this-environment"),S.displayName&&(H.appDisplayName=S.displayName),H.sessionId=N,Lc(g,f,d.type,void 0,null!==(_=d.eventId)&&void 0!==_?_:void 0,H)}),Iu.apply(this,arguments)}function Eu(){return(Eu=(0,I.Z)(function*(g){const{BuildInfo:d}=Si(),f={};Hn()?f.iosBundleId=d.packageName:yt()?f.androidPackageName=d.packageName:Ee(g,"operation-not-supported-in-this-environment"),yield ma(g,f)})).apply(this,arguments)}function fs(){return(fs=(0,I.Z)(function*(g,d,f){const{cordova:_}=Si();let S=()=>{};try{yield new Promise((N,H)=>{let ae=null;function Fe(){var ut;N();const Xn=null===(ut=_.plugins.browsertab)||void 0===ut?void 0:ut.close;"function"==typeof Xn&&Xn(),"function"==typeof f?.close&&f.close()}function Je(){ae||(ae=window.setTimeout(()=>{H(ye(g,"redirect-cancelled-by-user"))},vm))}function lt(){"visible"===document?.visibilityState&&Je()}d.addPassiveListener(Fe),document.addEventListener("resume",Je,!1),yt()&&document.addEventListener("visibilitychange",lt,!1),S=()=>{d.removePassiveListener(Fe),document.removeEventListener("resume",Je,!1),document.removeEventListener("visibilitychange",lt,!1),ae&&window.clearTimeout(ae)}})}finally{S()}})).apply(this,arguments)}function _a(){return(_a=(0,I.Z)(function*(g){const d=function Uc(g){if(Ne(/[0-9a-zA-Z]+/.test(g),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(g);const d=new ArrayBuffer(g.length),f=new Uint8Array(d);for(let _=0;_<g.length;_++)f[_]=g.charCodeAt(_);return f}(g),f=yield crypto.subtle.digest("SHA-256",d);return Array.from(new Uint8Array(f)).map(S=>S.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}const zh=20;class va extends Rt{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(d=>{this.resolveInialized=d})}addPassiveListener(d){this.passiveListeners.add(d)}removePassiveListener(d){this.passiveListeners.delete(d)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(d){return this.resolveInialized(),this.passiveListeners.forEach(f=>f(d)),super.onEvent(d)}initialized(){var d=this;return(0,I.Z)(function*(){yield d.initPromise})()}}function Kh(g){return Ia.apply(this,arguments)}function Ia(){return(Ia=(0,I.Z)(function*(g){const d=yield jc()._get($c(g));return d&&(yield jc()._remove($c(g))),d})).apply(this,arguments)}function Im(){const g=[],d="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let f=0;f<zh;f++){const _=Math.floor(Math.random()*d.length);g.push(d.charAt(_))}return g.join("")}function jc(){return at(eu)}function $c(g){return G("authEvent",g.config.apiKey,g.name)}function jn(g){if(!g?.includes("?"))return{};const[d,...f]=g.split("?");return(0,k.zd)(f.join("?"))}const Yh=class dd{constructor(){this._redirectPersistence=Rs,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Z,this._overrideRedirectResult=Mr}_initialize(d){var f=this;return(0,I.Z)(function*(){const _=d._key();let S=f.eventManagers.get(_);return S||(S=new va(d),f.eventManagers.set(_,S),f.attachCallbackListeners(d,S)),S})()}_openPopup(d){Ee(d,"operation-not-supported-in-this-environment")}_openRedirect(d,f,_,S){var N=this;return(0,I.Z)(function*(){!function Hh(g){var d,f,_,S,N,H,ae,Fe,Je,lt;const ut=Si();V("function"==typeof(null===(d=ut?.universalLinks)||void 0===d?void 0:d.subscribe),g,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),V(typeof(null===(f=ut?.BuildInfo)||void 0===f?void 0:f.packageName)<"u",g,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),V("function"==typeof(null===(N=null===(S=null===(_=ut?.cordova)||void 0===_?void 0:_.plugins)||void 0===S?void 0:S.browsertab)||void 0===N?void 0:N.openUrl),g,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),V("function"==typeof(null===(Fe=null===(ae=null===(H=ut?.cordova)||void 0===H?void 0:H.plugins)||void 0===ae?void 0:ae.browsertab)||void 0===Fe?void 0:Fe.isAvailable),g,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),V("function"==typeof(null===(lt=null===(Je=ut?.cordova)||void 0===Je?void 0:Je.InAppBrowser)||void 0===lt?void 0:lt.open),g,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(d);const H=yield N._initialize(d);yield H.initialized(),H.resetRedirect(),function Rc(){Nc.clear()}(),yield N._originValidation(d);const ae=function Wh(g,d,f=null){return{type:d,eventId:f,urlResponse:null,sessionId:Im(),postBody:null,tenantId:g.tenantId,error:ye(g,"no-auth-event")}}(d,_,S);yield function qh(g,d){return jc()._set($c(g),d)}(d,ae);const Fe=yield function vp(g,d,f){return Iu.apply(this,arguments)}(d,ae,f),Je=yield function ld(g){const{cordova:d}=Si();return new Promise(f=>{d.plugins.browsertab.isAvailable(_=>{let S=null;_?d.plugins.browsertab.openUrl(g):S=d.InAppBrowser.open(g,function Ys(g=(0,k.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(g)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(g)}()?"_blank":"_system","location=yes"),f(S)})})}(Fe);return function Ip(g,d,f){return fs.apply(this,arguments)}(d,H,Je)})()}_isIframeWebStorageSupported(d,f){throw new Error("Method not implemented.")}_originValidation(d){const f=d._key();return this.originValidationPromises[f]||(this.originValidationPromises[f]=function $h(g){return Eu.apply(this,arguments)}(d)),this.originValidationPromises[f]}attachCallbackListeners(d,f){const{universalLinks:_,handleOpenURL:S,BuildInfo:N}=Si(),H=setTimeout((0,I.Z)(function*(){yield Kh(d),f.onEvent(wp())}),500),ae=function(){var lt=(0,I.Z)(function*(ut){clearTimeout(H);const Xn=yield Kh(d);let Gi=null;Xn&&ut?.url&&(Gi=function Ep(g,d){var f,_;const S=function or(g){const d=jn(g),f=d.link?decodeURIComponent(d.link):void 0,_=jn(f).link,S=d.deep_link_id?decodeURIComponent(d.deep_link_id):void 0;return jn(S).link||S||_||f||g}(d);if(S.includes("/__/auth/callback")){const N=jn(S),H=N.firebaseError?function Zh(g){try{return JSON.parse(g)}catch{return null}}(decodeURIComponent(N.firebaseError)):null,ae=null===(_=null===(f=H?.code)||void 0===f?void 0:f.split("auth/"))||void 0===_?void 0:_[1],Fe=ae?ye(ae):null;return Fe?{type:g.type,eventId:g.eventId,tenantId:g.tenantId,error:Fe,urlResponse:null,sessionId:null,postBody:null}:{type:g.type,eventId:g.eventId,tenantId:g.tenantId,sessionId:g.sessionId,urlResponse:S,postBody:null}}return null}(Xn,ut.url)),f.onEvent(Gi||wp())});return function(Xn){return lt.apply(this,arguments)}}();typeof _<"u"&&"function"==typeof _.subscribe&&_.subscribe(null,ae);const Fe=S,Je=`${N.packageName.toLowerCase()}://`;Si().handleOpenURL=function(){var lt=(0,I.Z)(function*(ut){if(ut.toLowerCase().startsWith(Je)&&ae({url:ut}),"function"==typeof Fe)try{Fe(ut)}catch(Xn){console.error(Xn)}});return function(ut){return lt.apply(this,arguments)}}()}};function wp(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:ye("no-auth-event")}}const wo=1e3;function Do(){var g;return(null===(g=self?.location)||void 0===g?void 0:g.protocol)||null}function hd(g=(0,k.z$)()){return!("file:"!==Do()&&"ionic:"!==Do()&&"capacitor:"!==Do()||!g.toLowerCase().match(/iphone|ipad|ipod|android/))}function Hc(){try{const g=self.localStorage,d=ks();if(g)return g.setItem(d,"1"),g.removeItem(d),!function gd(g=(0,k.z$)()){return function fd(){return(0,k.w1)()&&11===document?.documentMode}()||function pd(g=(0,k.z$)()){return/Edge\/\d+/.test(g)}(g)}()||(0,k.hl)()}catch{return Gc()&&(0,k.hl)()}return!1}function Gc(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function zc(){return(function Cp(){return"http:"===Do()||"https:"===Do()}()||(0,k.ru)()||hd())&&!function Em(){return(0,k.b$)()||(0,k.UG)()}()&&Hc()&&!Gc()}function Ea(){return hd()&&typeof document<"u"}function wa(){return(wa=(0,I.Z)(function*(){return!!Ea()&&new Promise(g=>{const d=setTimeout(()=>{g(!1)},wo);document.addEventListener("deviceready",()=>{clearTimeout(d),g(!0)})})})).apply(this,arguments)}const ar={LOCAL:"local",NONE:"none",SESSION:"session"},Da=V,md="persistence";function Xh(g){return yd.apply(this,arguments)}function yd(){return(yd=(0,I.Z)(function*(g){yield g._initializationPromise;const d=Jh(),f=G(md,g.config.apiKey,g.name);d&&d.setItem(f,g._getPersistence())})).apply(this,arguments)}function Jh(){var g;try{return(null===(g=function Qh(){return typeof window<"u"?window:null}())||void 0===g?void 0:g.sessionStorage)||null}catch{return null}}const _d=V;class gs{constructor(){this.browserResolver=at(ad),this.cordovaResolver=at(Yh),this.underlyingResolver=null,this._redirectPersistence=Rs,this._completeRedirectFn=Z,this._overrideRedirectResult=Mr}_initialize(d){var f=this;return(0,I.Z)(function*(){return yield f.selectUnderlyingResolver(),f.assertedUnderlyingResolver._initialize(d)})()}_openPopup(d,f,_,S){var N=this;return(0,I.Z)(function*(){return yield N.selectUnderlyingResolver(),N.assertedUnderlyingResolver._openPopup(d,f,_,S)})()}_openRedirect(d,f,_,S){var N=this;return(0,I.Z)(function*(){return yield N.selectUnderlyingResolver(),N.assertedUnderlyingResolver._openRedirect(d,f,_,S)})()}_isIframeWebStorageSupported(d,f){this.assertedUnderlyingResolver._isIframeWebStorageSupported(d,f)}_originValidation(d){return this.assertedUnderlyingResolver._originValidation(d)}get _shouldInitProactively(){return Ea()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return _d(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var d=this;return(0,I.Z)(function*(){if(d.underlyingResolver)return;const f=yield function Wc(){return wa.apply(this,arguments)}();d.underlyingResolver=f?d.cordovaResolver:d.browserResolver})()}}function Ta(g){return g.unwrap()}function Er(g){return Du(g)}function Du(g){const{_tokenResponse:d}=g instanceof k.ZR?g.customData:g;if(!d)return null;if(!(g instanceof k.ZR)&&"temporaryProof"in d&&"phoneNumber"in d)return xc.credentialFromResult(g);const f=d.providerId;if(!f||f===ve.PASSWORD)return null;let _;switch(f){case ve.GOOGLE:_=Eh;break;case ve.FACEBOOK:_=ac;break;case ve.GITHUB:_=wh;break;case ve.TWITTER:_=ap;break;default:const{oauthIdToken:S,oauthAccessToken:N,oauthTokenSecret:H,pendingToken:ae,nonce:Fe}=d;return N||H||S||ae?ae?f.startsWith("saml.")?no._create(f,ae):Yr._fromParams({providerId:f,signInMethod:f,pendingToken:ae,idToken:S,accessToken:N}):new zo(f).credential({idToken:S,accessToken:N,rawNonce:Fe}):null}return g instanceof k.ZR?_.credentialFromError(g):_.credentialFromResult(g)}function wr(g,d){return d.catch(f=>{throw f instanceof k.ZR&&function Ca(g,d){var f;const _=null===(f=d.customData)||void 0===f?void 0:f._tokenResponse;if("auth/multi-factor-auth-required"===d?.code)d.resolver=new vd(g,function tr(g,d){var f;const _=(0,k.m9)(g),S=d;return V(d.customData.operationType,_,"argument-error"),V(null===(f=S.customData._serverResponse)||void 0===f?void 0:f.mfaPendingCredential,_,"argument-error"),wc._fromError(_,S)}(g,d));else if(_){const S=Du(d),N=d;S&&(N.credential=S,N.tenantId=_.tenantId||void 0,N.email=_.email||void 0,N.phoneNumber=_.phoneNumber||void 0)}}(g,f),f}).then(f=>{const S=f.user;return{operationType:f.operationType,credential:Er(f),additionalUserInfo:Ch(f),user:ms.getOrCreate(S)}})}function ef(g,d){return Kc.apply(this,arguments)}function Kc(){return(Kc=(0,I.Z)(function*(g,d){const f=yield d;return{verificationId:f.verificationId,confirm:_=>wr(g,f.confirm(_))}})).apply(this,arguments)}class vd{constructor(d,f){this.resolver=f,this.auth=function qc(g){return g.wrapped()}(d)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(d){return wr(Ta(this.auth),this.resolver.resolveSignIn(d))}}class ms{constructor(d){this._delegate=d,this.multiFactor=function Dc(g){const d=(0,k.m9)(g);return Ns.has(d)||Ns.set(d,Jo._fromUser(d)),Ns.get(d)}(d)}static getOrCreate(d){return ms.USER_MAP.has(d)||ms.USER_MAP.set(d,new ms(d)),ms.USER_MAP.get(d)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(d){return this._delegate.getIdTokenResult(d)}getIdToken(d){return this._delegate.getIdToken(d)}linkAndRetrieveDataWithCredential(d){return this.linkWithCredential(d)}linkWithCredential(d){var f=this;return(0,I.Z)(function*(){return wr(f.auth,kn(f._delegate,d))})()}linkWithPhoneNumber(d,f){var _=this;return(0,I.Z)(function*(){return ef(_.auth,function mm(g,d,f){return Sc.apply(this,arguments)}(_._delegate,d,f))})()}linkWithPopup(d){var f=this;return(0,I.Z)(function*(){return wr(f.auth,function kh(g,d,f){return nr.apply(this,arguments)}(f._delegate,d,gs))})()}linkWithRedirect(d){var f=this;return(0,I.Z)(function*(){return yield Xh(En(f.auth)),w(f._delegate,d,gs)})()}reauthenticateAndRetrieveDataWithCredential(d){return this.reauthenticateWithCredential(d)}reauthenticateWithCredential(d){var f=this;return(0,I.Z)(function*(){return wr(f.auth,As(f._delegate,d))})()}reauthenticateWithPhoneNumber(d,f){return ef(this.auth,function Ls(g,d,f){return td.apply(this,arguments)}(this._delegate,d,f))}reauthenticateWithPopup(d){return wr(this.auth,function Rh(g,d,f){return pu.apply(this,arguments)}(this._delegate,d,gs))}reauthenticateWithRedirect(d){var f=this;return(0,I.Z)(function*(){return yield Xh(En(f.auth)),Io(f._delegate,d,gs)})()}sendEmailVerification(d){return function jl(g,d){return yc.apply(this,arguments)}(this._delegate,d)}unlink(d){var f=this;return(0,I.Z)(function*(){return yield function Ha(g,d){return Wo.apply(this,arguments)}(f._delegate,d),f})()}updateEmail(d){return function $l(g,d){return Hl((0,k.m9)(g),d,null)}(this._delegate,d)}updatePassword(d){return function Xo(g,d){return Hl((0,k.m9)(g),null,d)}(this._delegate,d)}updatePhoneNumber(d){return function ha(g,d){return Nh.apply(this,arguments)}(this._delegate,d)}updateProfile(d){return function Ms(g,d){return Di.apply(this,arguments)}(this._delegate,d)}verifyBeforeUpdateEmail(d,f){return function Xa(g,d,f){return Wn.apply(this,arguments)}(this._delegate,d,f)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}ms.USER_MAP=new WeakMap;const ys=V;let Sa=(()=>{class g{constructor(f,_){if(this.app=f,_.isInitialized())return this._delegate=_.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:S}=f.options;ys(S,"invalid-api-key",{appName:f.name}),ys(S,"invalid-api-key",{appName:f.name});const N=typeof window<"u"?gs:void 0;this._delegate=_.initialize({options:{persistence:Id(S,f.name),popupRedirectResolver:N}}),this._delegate._updateErrorMap(vt),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?ms.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(f){this._delegate.languageCode=f}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(f){this._delegate.tenantId=f}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(f,_){!function nc(g,d,f){const _=En(g);V(_._canInitEmulator,_,"emulator-config-failed"),V(/^https?:\/\//.test(d),_,"invalid-emulator-scheme");const S=!!f?.disableWarnings,N=jo(d),{host:H,port:ae}=function $o(g){const d=jo(g),f=/(\/\/)?([^?#/]+)/.exec(g.substr(d.length));if(!f)return{host:"",port:null};const _=f[2].split("@").pop()||"",S=/^(\[[^\]]+\])(:|$)/.exec(_);if(S){const N=S[1];return{host:N,port:Kt(_.substr(N.length+1))}}{const[N,H]=_.split(":");return{host:N,port:Kt(H)}}}(d);_.config.emulator={url:`${N}//${H}${null===ae?"":`:${ae}`}/`},_.settings.appVerificationDisabledForTesting=!0,_.emulatorConfig=Object.freeze({host:H,port:ae,protocol:N.replace(":",""),options:Object.freeze({disableWarnings:S})}),S||function Gn(){function g(){const d=document.createElement("p"),f=d.style;d.innerText="Running in emulator mode. Do not use with production credentials.",f.position="fixed",f.width="100%",f.backgroundColor="#ffffff",f.border=".1em solid #000000",f.color="#b50000",f.bottom="0px",f.left="0px",f.margin="0px",f.zIndex="10000",f.textAlign="center",d.classList.add("firebase-emulator-warning"),document.body.appendChild(d)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",g):g())}()}(this._delegate,f,_)}applyActionCode(f){return function Wa(g,d){return Bl.apply(this,arguments)}(this._delegate,f)}checkActionCode(f){return qa(this._delegate,f)}confirmPasswordReset(f,_){return function Yo(g,d,f){return Ct.apply(this,arguments)}(this._delegate,f,_)}createUserWithEmailAndPassword(f,_){var S=this;return(0,I.Z)(function*(){return wr(S._delegate,function bh(g,d,f){return gc.apply(this,arguments)}(S._delegate,f,_))})()}fetchProvidersForEmail(f){return this.fetchSignInMethodsForEmail(f)}fetchSignInMethodsForEmail(f){return function Ya(g,d){return Qa.apply(this,arguments)}(this._delegate,f)}isSignInWithEmailLink(f){return function Ul(g,d){return"EMAIL_SIGNIN"===Go.parseLink(d)?.operation}(0,f)}getRedirectResult(){var f=this;return(0,I.Z)(function*(){ys(zc(),f._delegate,"operation-not-supported-in-this-environment");const _=yield function L(g,d){return W.apply(this,arguments)}(f._delegate,gs);return _?wr(f._delegate,Promise.resolve(_)):{credential:null,user:null}})()}addFrameworkForLogging(f){!function Dp(g,d){En(g)._logFramework(d)}(this._delegate,f)}onAuthStateChanged(f,_,S){const{next:N,error:H,complete:ae}=bu(f,_,S);return this._delegate.onAuthStateChanged(N,H,ae)}onIdTokenChanged(f,_,S){const{next:N,error:H,complete:ae}=bu(f,_,S);return this._delegate.onIdTokenChanged(N,H,ae)}sendSignInLinkToEmail(f,_){return function Zt(g,d,f){return mc.apply(this,arguments)}(this._delegate,f,_)}sendPasswordResetEmail(f,_){return function Fi(g,d,f){return Zo.apply(this,arguments)}(this._delegate,f,_||void 0)}setPersistence(f){var _=this;return(0,I.Z)(function*(){let S;switch(function ps(g,d){Da(Object.values(ar).includes(d),g,"invalid-persistence-type"),(0,k.b$)()?Da(d!==ar.SESSION,g,"unsupported-persistence-type"):(0,k.UG)()?Da(d===ar.NONE,g,"unsupported-persistence-type"):Gc()?Da(d===ar.NONE||d===ar.LOCAL&&(0,k.hl)(),g,"unsupported-persistence-type"):Da(d===ar.NONE||Hc(),g,"unsupported-persistence-type")}(_._delegate,f),f){case ar.SESSION:S=Rs;break;case ar.LOCAL:S=(yield at(Ps)._isAvailable())?Ps:eu;break;case ar.NONE:S=F;break;default:return Ee("argument-error",{appName:_._delegate.name})}return _._delegate.setPersistence(S)})()}signInAndRetrieveDataWithCredential(f){return this.signInWithCredential(f)}signInAnonymously(){return wr(this._delegate,function Fl(g){return Dh.apply(this,arguments)}(this._delegate))}signInWithCredential(f){return wr(this._delegate,Sn(this._delegate,f))}signInWithCustomToken(f){return wr(this._delegate,function xs(g,d){return Qn.apply(this,arguments)}(this._delegate,f))}signInWithEmailAndPassword(f,_){return wr(this._delegate,function le(g,d,f){return Sn((0,k.m9)(g),oc.credential(d,f))}(this._delegate,f,_))}signInWithEmailLink(f,_){return wr(this._delegate,function er(g,d,f){return Qo.apply(this,arguments)}(this._delegate,f,_))}signInWithPhoneNumber(f,_){return ef(this._delegate,function nn(g,d,f){return ed.apply(this,arguments)}(this._delegate,f,_))}signInWithPopup(f){var _=this;return(0,I.Z)(function*(){return ys(zc(),_._delegate,"operation-not-supported-in-this-environment"),wr(_._delegate,function _o(g,d,f){return fu.apply(this,arguments)}(_._delegate,f,gs))})()}signInWithRedirect(f){var _=this;return(0,I.Z)(function*(){return ys(zc(),_._delegate,"operation-not-supported-in-this-environment"),yield Xh(_._delegate),rd(_._delegate,f,gs)})()}updateCurrentUser(f){return this._delegate.updateCurrentUser(f)}verifyPasswordResetCode(f){return function pc(g,d){return Ka.apply(this,arguments)}(this._delegate,f)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return g.Persistence=ar,g})();function bu(g,d,f){let _=g;"function"!=typeof g&&({next:_,error:d,complete:f}=g);const S=_;return{next:H=>S(H&&ms.getOrCreate(H)),error:d,complete:f}}function Id(g,d){const f=function ba(g,d){const f=Jh();if(!f)return[];const _=G(md,g,d);switch(f.getItem(_)){case ar.NONE:return[F];case ar.LOCAL:return[Ps,Rs];case ar.SESSION:return[Rs];default:return[]}}(g,d);if(typeof self<"u"&&!f.includes(Ps)&&f.push(Ps),typeof window<"u")for(const _ of[eu,Rs])f.includes(_)||f.push(_);return f.includes(F)||f.push(F),f}class Aa{constructor(){this.providerId="phone",this._delegate=new xc(Ta(X.Z.auth()))}static credential(d,f){return xc.credential(d,f)}verifyPhoneNumber(d,f){return this._delegate.verifyPhoneNumber(d,f)}unwrap(){return this._delegate}}Aa.PHONE_SIGN_IN_METHOD=xc.PHONE_SIGN_IN_METHOD,Aa.PROVIDER_ID=xc.PROVIDER_ID;const Tu=V;class tf{constructor(d,f,_=X.Z.app()){var S;Tu(null===(S=_.options)||void 0===S?void 0:S.apiKey,"invalid-api-key",{appName:_.name}),this._delegate=new lu(d,f,_.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function nf(g){g.INTERNAL.registerComponent(new me.wA("auth-compat",d=>{const f=d.getProvider("app-compat").getImmediate(),_=d.getProvider("auth");return new Sa(f,_)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:K_EMAIL_SIGNIN,PASSWORD_RESET:K_PASSWORD_RESET,RECOVER_EMAIL:K_RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:K_REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:K_VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:K_VERIFY_EMAIL}},EmailAuthProvider:oc,FacebookAuthProvider:ac,GithubAuthProvider:wh,GoogleAuthProvider:Eh,OAuthProvider:zo,SAMLAuthProvider:wi,PhoneAuthProvider:Aa,PhoneMultiFactorGenerator:Ir,RecaptchaVerifier:tf,TwitterAuthProvider:ap,Auth:Sa,AuthCredential:Rn,Error:k.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),g.registerVersion("@firebase/auth-compat","0.3.3")}(X.Z)},8766:(ht,Te,O)=>{O.d(Te,{Lj:()=>Ee,X3:()=>Me});var I=O(5861);const X=(V,fe)=>fe.some(Ne=>V instanceof Ne);let k,ie;const me=new WeakMap,ce=new WeakMap,ve=new WeakMap,j=new WeakMap,U=new WeakMap;let Se={get(V,fe,Ne){if(V instanceof IDBTransaction){if("done"===fe)return ce.get(V);if("objectStoreNames"===fe)return V.objectStoreNames||ve.get(V);if("store"===fe)return Ne.objectStoreNames[1]?void 0:Ne.objectStore(Ne.objectStoreNames[0])}return xe(V[fe])},set:(V,fe,Ne)=>(V[fe]=Ne,!0),has:(V,fe)=>V instanceof IDBTransaction&&("done"===fe||"store"===fe)||fe in V};function oe(V){return"function"==typeof V?function Ge(V){return V!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function se(){return ie||(ie=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(V)?function(...fe){return V.apply(_e(this),fe),xe(me.get(this))}:function(...fe){return xe(V.apply(_e(this),fe))}:function(fe,...Ne){const He=V.call(_e(this),fe,...Ne);return ve.set(He,fe.sort?fe.sort():[fe]),xe(He)}}(V):(V instanceof IDBTransaction&&function Qe(V){if(ce.has(V))return;const fe=new Promise((Ne,He)=>{const at=()=>{V.removeEventListener("complete",Xe),V.removeEventListener("error",te),V.removeEventListener("abort",te)},Xe=()=>{Ne(),at()},te=()=>{He(V.error||new DOMException("AbortError","AbortError")),at()};V.addEventListener("complete",Xe),V.addEventListener("error",te),V.addEventListener("abort",te)});ce.set(V,fe)}(V),X(V,function ee(){return k||(k=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(V,Se):V)}function xe(V){if(V instanceof IDBRequest)return function K(V){const fe=new Promise((Ne,He)=>{const at=()=>{V.removeEventListener("success",Xe),V.removeEventListener("error",te)},Xe=()=>{Ne(xe(V.result)),at()},te=()=>{He(V.error),at()};V.addEventListener("success",Xe),V.addEventListener("error",te)});return fe.then(Ne=>{Ne instanceof IDBCursor&&me.set(Ne,V)}).catch(()=>{}),U.set(fe,V),fe}(V);if(j.has(V))return j.get(V);const fe=oe(V);return fe!==V&&(j.set(V,fe),U.set(fe,V)),fe}const _e=V=>U.get(V);function Me(V,fe,{blocked:Ne,upgrade:He,blocking:at,terminated:Xe}={}){const te=indexedDB.open(V,fe),ue=xe(te);return He&&te.addEventListener("upgradeneeded",pe=>{He(xe(te.result),pe.oldVersion,pe.newVersion,xe(te.transaction))}),Ne&&te.addEventListener("blocked",()=>Ne()),ue.then(pe=>{Xe&&pe.addEventListener("close",()=>Xe()),at&&pe.addEventListener("versionchange",()=>at())}).catch(()=>{}),ue}function Ee(V,{blocked:fe}={}){const Ne=indexedDB.deleteDatabase(V);return fe&&Ne.addEventListener("blocked",()=>fe()),xe(Ne).then(()=>{})}const ye=["get","getKey","getAll","getAllKeys","count"],Ce=["put","add","delete","clear"],Le=new Map;function Re(V,fe){if(!(V instanceof IDBDatabase)||fe in V||"string"!=typeof fe)return;if(Le.get(fe))return Le.get(fe);const Ne=fe.replace(/FromIndex$/,""),He=fe!==Ne,at=Ce.includes(Ne);if(!(Ne in(He?IDBIndex:IDBObjectStore).prototype)||!at&&!ye.includes(Ne))return;const Xe=function(){var te=(0,I.Z)(function*(ue,...pe){const be=this.transaction(ue,at?"readwrite":"readonly");let Pe=be.store;return He&&(Pe=Pe.index(pe.shift())),(yield Promise.all([Pe[Ne](...pe),at&&be.done]))[0]});return function(pe){return te.apply(this,arguments)}}();return Le.set(fe,Xe),Xe}!function vt(V){Se=V(Se)}(V=>({...V,get:(fe,Ne,He)=>Re(fe,Ne)||V.get(fe,Ne,He),has:(fe,Ne)=>!!Re(fe,Ne)||V.has(fe,Ne)}))},5861:(ht,Te,O)=>{function I(k,ie,ee,se,me,ce,ve){try{var j=k[ce](ve),U=j.value}catch(K){return void ee(K)}j.done?ie(U):Promise.resolve(U).then(se,me)}function X(k){return function(){var ie=this,ee=arguments;return new Promise(function(se,me){var ce=k.apply(ie,ee);function ve(U){I(ce,se,me,ve,j,"next",U)}function j(U){I(ce,se,me,ve,j,"throw",U)}ve(void 0)})}}O.d(Te,{Z:()=>X})}},ht=>{ht(ht.s=9525)}]);